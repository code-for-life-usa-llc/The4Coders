var CS_CONF={"projectId":4451,"status":1,"hostnames":["adobe.com","photoshop.com","marketo.com","qualtrics.com","adobelr.com","dc.stage.acrobat.com","stage.acrobat.adobe.com","video.tv.adobe.com"],"crossDomainTracking":0,"crossDomainSingleIframeTracking":1,"consentRequired":0,"allowSubdomains":1,"visitorCookieTimeout":34164000000,"sampleRate":100,"replayRecordingRate":20,"validationRate":10,"lastTrackingDraw":1717775740,"trackerDomain":"c.clicktale.net","recordingDomain":"r.clicktale.net","useMalkaPipeline":1,"ed":"l.clicktale.net/log/web","eMerchandisingEnabled":0,"mouseMoveHeatmapEnabled":1,"autoInsightsEnabled":1,"jsErrorsEnabled":1,"customErrorsEnabled":0,"jsCustomErrorsEnabled":0,"apiErrorsEnabled":1,"customHashIdEnabled":0,"recordingEncryptionEnabled":0,"recordingEncryptionPublicKey":null,"recordingEncryptionPublicKeyId":0,"secureCookiesEnabled":0,"triggerSessionReplayEnabled":0,"triggerSessionReplayRegex":null,"dynamicIdRegex":"tt_blade_[a-z0-9]+Marquee","whitelistedAttributes":[],"replayRecordingUnmaskedUrlRegex":"","replayRecordingUnmaskedUrlRegexRules":[],"replayRecordingMaskedUrlRegexRules":[],"replayRecordingMaskedUrlRegex":".*www(.stage)?.adobe.com\\/apps.*","anonymisationMethod":"replayRecordingMaskedUrlRegex","tagDeploymentMode":"DUAL_COLLECTION","experimental":null,"iframesTracking":1,"textVisibilityEnabled":0,"cookielessTrackingEnabled":0,"malkaUrlEnabled":0,"malkaEtrEnabled":0,"pathComputationRules":{"reliableSelectors":[],"uniqueAttributes":[],"uniqueCssSelectors":[".modal-payment"]},"asyncSerializerEnabled":1,"pendingInactivityTimeout":5000,"accessibilityEnabled":0,"uxaDomain":"app.contentsquare.com","webviewsTrackingEnabled":0,"useStaticResourceManager":1,"performanceTimingOptions":{"withResource":false,"withNavigation":false},"replayConsentRequiredForSession":0,"apiErrors":{"validCustomHeaders":[],"plainCustomHeaders":[],"validUrls":[],"configurableApiErrorRules":[],"collectStandardHeaders":0,"collectQueryParam":0,"collectRequestBody":0,"collectResponseBody":0,"collectionRules":[]},"displayAdOptions":null,"taskSchedulerOptions":{"enabled":1},"malkaQuotaServiceDomain":"q-aus1.clicktale.net","malkaRecordingDomain":"k-aus1.clicktale.net","staticResourceManagerDomain":"srm.bf.contentsquare.net","voc":{"siteId":null,"enabled":0},"dualCollectionTagDomain":"clicktale.net","ptcDomain":"cdnssl.clicktale.net","ptcPartition":"www20","ptcGuid":"df7e164d-c711-4376-a4c8-8b364d648be0","implementations":[{"template":{"name":"PiiMasking","args":{"cssSelectors":[".profile-container,.recent-assets-container-app,.welcome-message,.recent-grid-item,.your-work-container,.comment-timeline"],"attributes":[]}},"triggers":[{"name":"PageState","args":{"state":"Any"}}]}],"ptcSha512":"8eKT1f05SuQ4OyNLseuoMtaehhTzx2A7dP+o3LS1Wby3+n9b7LmqEqXwTh5OL3RrPf7yItUHNDp7iVRronIYkQ==","ptcSnapshotPath":"ss/4451/df7e164d-c711-4376-a4c8-8b364d648be0/17"};
var CS_INTEGRATIONS_CONF = {"qualtrics":{},"adobe-target":{}};
/* integration-qualtrics 2.19.1 */
!function(e){var t={};function n(i){if(t[i])return t[i].exports;var a=t[i]={i:i,l:!1,exports:{}};return e[i].call(a.exports,a,a.exports,n),a.l=!0,a.exports}n.m=e,n.c=t,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)n.d(i,a,function(t){return e[t]}.bind(null,a));return i},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=1)}([function(e){e.exports=JSON.parse('{"name":"@contentsquare/integration-qualtrics-cap","version":"2.19.1","scripts":{"build:snippet":"webpack"}}')},function(e,t,n){"use strict";function i(e,t){try{e()}catch(e){window._uxa=window._uxa||[],_uxa.push(["logSnippetError",t,e.message])}}function a(e){return"object"==typeof e&&null!==e}function o(e,t){t||(t="="),e=e.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var n=new RegExp("[\\?&=]"+e+t+"([^&#]*)").exec(location.search);return null===n?"":decodeURIComponent(n[1].replace(/\+/g," "))}n.r(t);var r,s=n(0),c=s.name,u=s.version,d=function(e){var t,n,a,o;if(i((function(){var i=e.name;a=e.version;var r=i.replace("@contentsquare/integration-","");t=r+"-"+a;var s="-contentsquare";o=new RegExp(s+"$").test(r),n=r.replace(/-contentsquare([^-contentsquare]*)$/,"$1"),o||(s="-cap",o=new RegExp(s+"$").test(r),n=r.replace(/-cap([^-cap]*)$/,"$1"))}),"Shared-Function-readPackageJSON"),o)return{snippetBuildName:t,parameterName:n,snippetVersion:a}}(s);d&&(r=d.parameterName,c=d.snippetBuildName,u=d.snippetVersion),i((function(){window._uxa=window._uxa||[],CS_CONF.integrations=CS_CONF.integrations||[],CS_CONF.integrations.push("Qualtrics - v"+u);var e=!1;window.self!=window.top&&(e=CS_CONF.iframesTracking);var t=function(e,t){if(a(window.CS_INTEGRATIONS_CONF)&&a(window.CS_INTEGRATIONS_CONF[e]))return window.CS_INTEGRATIONS_CONF[e][t]}(r,"settings"),n=!1,s=1;t&&(t.indexOf("sendArtificialPageviews")>-1&&(n=!0),t.indexOf("setReplayLinkToFirstPV")>-1&&(s=0));var d=!1;function l(e,t,i,a){e="FB_QT_"+e,_uxa.push(["trackDynamicVariable",{key:e,value:t}]),d&&"etr"===i&&_uxa.push(["trackEventTriggerRecording","@ETS@"+e]),a&&n&&_uxa.push(["trackPageview",window.location.pathname+"?"+a])}function p(){for(var e=0,t=document.domain,n=t.split("."),i="_cs_tld"+(new Date).getTime();e<n.length-1&&-1==document.cookie.indexOf(i+"="+i);)t=n.slice(-1-++e).join("."),document.cookie=i+"="+i+";domain="+t+";SameSite=None;Secure";return document.cookie=i+"=;expires=Thu, 01 Jan 1970 00:00:01 GMT;domain="+t+";",t}function f(e){for(var t=e+"=",n=document.cookie.split(";"),i=0;i<n.length;i++){for(var a=n[i];" "==a.charAt(0);)a=a.substring(1,a.length);if(0===a.indexOf(t))return a.substring(t.length,a.length)}return""}function _(){var e={contentsquare_integration:f("_cs_s"),vendor:"qualtrics"};window.opener?window.opener.postMessage(e,"*"):self!=top&&window.top.postMessage(e,"*")}function S(e){return e.toString().replace(/[^\w. ]/gi,(function(e){return"&#"+e.charCodeAt(0)+";"}))}if(window.Qualtrics&&Qualtrics.SurveyEngine&&"function"==typeof Qualtrics.SurveyEngine.addOnPageSubmit){if(!e){var g="";if(window._cs_integration_qualtrics_postmessage_csid||window.ClickTaleSettings&&ClickTaleSettings.PTC&&ClickTaleSettings.PTC.IntegrationHandler&&ClickTaleSettings.PTC.IntegrationHandler.UserValues)window._cs_integration_qualtrics_postmessage_csid?g=_cs_integration_qualtrics_postmessage_csid:ClickTaleSettings.PTC.IntegrationHandler.UserValues&&(g=ClickTaleSettings.PTC.IntegrationHandler.UserValues);else{var m=document.location.search;m.indexOf("CSID=")>-1?g=o("CSID"):CS_CONF.ptcDomain&&m.indexOf("CT_UID=")>-1?g=o("CT_UID"):window._cs_integration_qualtrics_csid&&(g=decodeURIComponent(_cs_integration_qualtrics_csid))}if(g&&"null"!=g){var v=g.split("~"),y=v[0],b=v[1],I=v[2],C=v[3],D=p();y&&b&&I&&(C?document.cookie="_cs_optout="+C+";domain="+D+";path=/;SameSite=None;Secure":(document.cookie="_cs_optout=;domain="+D+";path=/;expires=Thu, 01-Jan-1970 00:00:01 GMT;SameSite=None;Secure",document.cookie="_cs_optout=;path=/;expires=Thu, 01-Jan-1970 00:00:01 GMT;SameSite=None;Secure",document.cookie="_cs_optout=;domain=."+document.location.host+";path=/;expires=Thu, 01-Jan-1970 00:00:01 GMT;SameSite=None;Secure"),document.cookie="_cs_id="+y+";domain="+D+";path=/;SameSite=None;Secure",document.cookie="_cs_s="+b+";domain="+D+";path=/;SameSite=None;Secure",document.cookie="_cs_c="+I+";domain="+D+";path=/;SameSite=None;Secure")}}var w="";function h(t){if(!e){var n=f("_cs_s");if(n&&n.indexOf(".T.")>-1)var i=setInterval((function(){(n=f("_cs_s"))&&-1===n.indexOf(".T.")&&(clearInterval(i),_())}),500);else _()}setTimeout((function(){if(d=_uxa.push(["isRecording"])){var e=function(e,t,n){e||(e="missingFromDynamicSnippet");var i=t;if(isNaN(i)&&(t=0),n){var a=n.sessionKey.split("."),o=n.projectId,r=a[0],s=a[1],c=n.pageNumber,u=c-t;return t>=c&&(u=c),0===i&&(u=1),"https://app.contentsquare.com/quick-playback/index.html?pid="+o+"&uu="+r+"&sn="+s+"&pvid="+u+"&recordingType=cs&vd="+e}}("qt",s,t);if(e&&Qualtrics.SurveyEngine){var n=Qualtrics.SurveyEngine,i="";CS_CONF.ptcDomain&&(i="ClicktaleSpecificRecording",!0===w&&"function"==typeof n.setJSEmbeddedData?n.setJSEmbeddedData(i,e):!1===w&&"function"==typeof n.setEmbeddedData&&n.setEmbeddedData(i,e)),i="ContentsquareReplayLink",!0===w&&"function"==typeof n.setJSEmbeddedData?n.setJSEmbeddedData(i,e):!1===w&&"function"==typeof n.setEmbeddedData&&n.setEmbeddedData(i,e)}}}),500)}if(window.Page?w=!1:window.q&&(w=!0),_uxa.push(["afterPageView",function(e){i((function(){h(e)}),c)}]),window.addEventListener("Contentsquare_QT_Integration_Dispatcher",(function(e){i((function(){if(e&&"object"==typeof e.detail&&"string"==typeof e.detail.key&&"string"==typeof e.detail.value){var t=e.detail.key,n=e.detail.value;"FB_QT_"===t.slice(0,6)&&(t=t.slice(6)),l(t,n)}}),c)})),!1===w&&"function"==typeof Page.getSessionId&&Page.runtime&&Page.runtime.ED&&Page.runtime.ED.SurveyID&&Page._questionRenderers&&Qualtrics.SurveyEngine.QuestionInfo){var T=Page.runtime.ED.SurveyID,k=Page.getSessionId().replace("FS_","R_");l("Feedback Displayed","Survey ID : "+T);var O=!1,x=!1,N=!1,E=[];function P(){for(var e=Qualtrics.SurveyEngine.QuestionInfo,t=Object.keys(e),n=0;n<t.length;n++){var i=Qualtrics.SurveyEngine.QuestionInfo[t[n]].Selector;if(i&&"TB"!=i){x=!0;break}}}function F(){i((function(){P(),O||(O=!0,l("Feedback Accepted","Survey ID : "+T,0,"cs_qualtrics=feedback_accepted_"+T)),setTimeout((function(){x&&!N&&!1===Page.runtime.FailedValidation&&(N=!0,l("Feedback Submitted","Survey ID : "+T,"etr","cs_qualtrics=feedback_submitted_"+T),l("Feedback Response ID",k))}),2e3);for(var e=Page._questionRenderers,t=Object.keys(e),n=0;n<t.length;n++){var i=e[t[n]].runtime;if(i&&i.Selector&&i.QuestionText&&i.Displayed){var a=i.QuestionText;if("NPS"===i.Selector&&i.Selected){var o=parseInt(i.Selected);E.includes(t[n]+"~~~"+o)||(E.push(t[n]+"~~~"+o),l("NPS Rating - "+t[n]+" - "+T+" - "+a,o))}if("STAR"===i.Selector)for(var r=i.Choices,s=Object.keys(r),c=0;c<s.length;c++){var u=r[s[c]].Display;if(r[s[c]].Value){var d=parseInt(r[s[c]].Value);E.includes(t[n]+" ("+(c+1)+")~~~"+d)||(E.push(t[n]+" ("+(c+1)+")~~~"+d),l("Star Rating - "+t[n]+" ("+(c+1)+") - "+T+" - "+u,d))}}if("SAVR"===i.Selector||"SAHR"===i.Selector)if((g=i.Selected)&&i.Choices)(m=i.Choices[g].ID)&&(E.includes(t[n]+"~~~AID"+m)||(E.push(t[n]+"~~~AID"+m),l(t[n]+" - "+T,"AID"+m)));if("MAVR"===i.Selector&&i.Choices){var p=i.Choices,f=Object.keys(p);for(c=0;c<f.length;c++){if(p[f[c]].Selected)(m=p[f[c]].ID)&&(E.includes(t[n]+"~~~AID"+m)||(E.push(t[n]+"~~~AID"+m),l(t[n]+" - "+T,"AID"+m)))}}if("Likert"===i.Selector&&i.Choices){var _=i.Choices,S=Object.keys(_);for(c=0;c<S.length;c++){var g,m;if(g=_[S[c]].Selected)if(!E.includes(t[n]+"~~~"+g))(m=_[S[c]].ID)&&(E.push(t[n]+"~~~"+g),l(t[n]+" - "+T+" - AID"+m,g))}}}}setTimeout((function(){document.getElementById("NextButton")||l("Feedback Completed","Survey ID : "+T,0,"cs_qualtrics=feedback_completed_"+T)}),2e3),Qualtrics.SurveyEngine.addOnPageSubmit(F)}),c)}P(),Qualtrics.SurveyEngine.addOnPageSubmit(F)}else if(!0===w&&q.appData&&q.appData.setup&&q.appData.setup.survey&&q.appData.setup.survey.id&&q.appData.session&&q.appData.session.id){T=q.appData.setup.survey.id,k=q.appData.session.id.replace("FS_","R_");l("Feedback Displayed","Survey ID : "+T);N=!1;function F(){N||(N=!0,l("Feedback Submitted","Survey ID : "+T,"etr","cs_qualtrics=feedback_submitted_"+T),l("Feedback Response ID",k)),setTimeout((function(){document.getElementById("next-button")||l("Feedback Completed","Survey ID : "+T,0,"cs_qualtrics=feedback_completed_"+T)}),2e3),Qualtrics.SurveyEngine.addOnPageSubmit(F)}Qualtrics.SurveyEngine.addOnPageSubmit(F)}}else if(!e){function R(){var e=f("_cs_id"),t=f("_cs_c"),n=f("_cs_optout");return e+"~"+Q+"~"+t+"~"+n}var Q;function A(e){function t(){var e=R();localStorage.setItem("CSID",e),CS_CONF.ptcDomain&&(localStorage.setItem("CT_UID",e),sessionStorage.setItem("CT_UID",e)),sessionStorage.setItem("CSID",e)}if((Q=f("_cs_s"))&&Q.indexOf(".T.")>-1)var n=setInterval((function(){(Q=f("_cs_s"))&&-1===Q.indexOf(".T.")&&(clearInterval(n),t())}),500);else t()}function h(e){A()}window.addEventListener("message",(function(e){var t=e.data;t&&(t.contentsquare_integration&&"qualtrics"===t.vendor&&i((function(){const e=t.contentsquare_integration,n=e.split("."),i=Number(n[n.length-1]),a=new Date(i).toUTCString();if(window.CS_CONF&&CS_CONF.allowSubdomains){const t=p();document.cookie="_cs_s="+S(e)+";expires="+a+";domain="+t+";path=/"}else document.cookie="_cs_s="+S(e)+";expires="+a+";path=/";A()}),c),t.message&&"Contentsquare_QT_Integration_Ready"===t.message&&i((function(){var t={message:"Contentsquare_QT_Integration_Launch",user_values:R()};e.source.postMessage(t,"*")}),c))})),_uxa.push(["afterPageView",function(e){i((function(){h()}),c)}])}}),c)}]);/* integration-adobe-target 3.6.5 */
!function(e){var n={};function t(r){if(n[r])return n[r].exports;var i=n[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,t),i.l=!0,i.exports}t.m=e,t.c=n,t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{enumerable:!0,get:r})},t.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t.t=function(e,n){if(1&n&&(e=t(e)),8&n)return e;if(4&n&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(t.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&n&&"string"!=typeof e)for(var i in e)t.d(r,i,function(n){return e[n]}.bind(null,i));return r},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},t.p="",t(t.s=1)}([function(e){e.exports=JSON.parse('{"name":"@contentsquare/integration-adobe-target-cap","version":"3.6.5","scripts":{"build:snippet":"webpack"}}')},function(e,n,t){"use strict";function r(e,n){try{e()}catch(e){window._uxa=window._uxa||[],_uxa.push(["logSnippetError",n,e.message])}}function i(e){return"object"==typeof e&&null!==e}function a(e,n,t){if((t=t||window)&&n&&e){var r=!1,i=t[e];i?n():Object.defineProperty(t,e,{configurable:!0,enumerable:!0,get:function(){return i},set:function(e){i=e,r||(r=!0,n())}})}}t.r(n);var o,u=t(0),c=u.name,p=u.version,s=function(e){var n,t,i,a;if(r((function(){var r=e.name;i=e.version;var o=r.replace("@contentsquare/integration-","");n=o+"-"+i;var u="-contentsquare";a=new RegExp(u+"$").test(o),t=o.replace(/-contentsquare([^-contentsquare]*)$/,"$1"),a||(u="-cap",a=new RegExp(u+"$").test(o),t=o.replace(/-cap([^-cap]*)$/,"$1"))}),"Shared-Function-readPackageJSON"),a)return{snippetBuildName:n,parameterName:t,snippetVersion:i}}(u);s&&(o=s.parameterName,c=s.snippetBuildName,p=s.snippetVersion),r((function(){window._uxa=window._uxa||[],CS_CONF.integrations=CS_CONF.integrations||[],CS_CONF.integrations.push("Adobe Target - v"+p);var e=function(e,n){if(i(window.CS_INTEGRATIONS_CONF)&&i(window.CS_INTEGRATIONS_CONF[e]))return window.CS_INTEGRATIONS_CONF[e][n]}(o,"customObjectName");e&&(e=e.trim());var n=[];function t(e){for(var t=0;t<e.length;t++){var r=e[t],i="",a="";r.CampaignName&&r.RecipeName?(i=r.CampaignName,a=r.RecipeName):r.campaign&&r.experience?(i=r.campaign,a=r.experience):r["activity.name"]&&r["experience.name"]&&(i=r["activity.name"],a=r["experience.name"]),n.length&&n.indexOf(i+"~~~~"+a)>-1&&(i="",a=""),i&&a&&(n.push(i+"~~~~"+a),u=a,o="AB_AT_"+(o=i),_uxa.push(["trackDynamicVariable",{key:o,value:u}]))}var o,u}function u(n){e||(e="ttMETA"),function(e,n,t){t=t||window;var r=e.split(".");if(1==r.length)a(e,n,t);else{var i=t,o=0;const e=function(){i=o>0?i[r[o-1]]:window,++o>=r.length?a(r[o-1],n,i):a(r[o-1],e,i)};e()}}(e,(function(){setTimeout((function(){r((function(){t(window[e])}),c)}),500)}))}document.addEventListener("at-request-succeeded",(function(e){e&&e.detail&&e.detail.responseTokens&&t(e.detail.responseTokens)})),_uxa.push(["afterPageView",function(e){r((function(){u()}),c)}])}),c)}]);var CS_IMPLEMENTATION_CONF = CS_CONF.implementations;
(function() {
window.CS_TAG_MANAGER_EXPORTS = {};/* pii-masking-template 1.3.1 */
!function(){"use strict";var e=function(){function e(){}return e.prototype.run=function(e,t,r,n){var o=this,s={PIISelectors:e.cssSelectors.map((function(e){return o.buildSelector(e,t,r,n)})).filter((function(e){return!!e&&n.isValidCssSelector(e)})),Attributes:e.attributes.map((function(e){return{attrName:n.interpolate(e.attrName,n.objectAssign(r,t)),selector:o.buildSelector(e.selector,t,r,n)}})).filter((function(e){var t=e.attrName,r=e.selector;return!!t&&!!r&&n.isValidCssSelector(r)}))};window._uxa.push(["setPIISelectors",s])},e.prototype.buildSelector=function(e,t,r,n){var o=this.removeInvalidInterpolatedSelectors(e,t,r,n);return n.interpolate(o,n.objectAssign(r,t))},e.prototype.removeInvalidInterpolatedSelectors=function(e,t,r,n){var o=e.match(/\$\{[^}]*\}/g);if(!o)return e;var s=e;return o&&o.forEach((function(e){var o=n.interpolate(e,n.objectAssign(r,t));o&&n.isValidCssSelector(o)||(s=(s=(s=(s=s.replace(new RegExp(",\\s*\\"+e+"\\s*,","g"),",")).replace(new RegExp("\\s*,\\s*\\"+e+"\\s*$"),"")).replace(new RegExp("^\\s*\\"+e+"\\s*,\\s*"),"")).replace(new RegExp("^\\s*\\"+e+"\\s*"),""))})),s},e}();window.CS_TAG_MANAGER_EXPORTS.PiiMasking=e}();
/* page-state-trigger 1.4.1 */
!function(){"use strict";var t,n=function(){function t(){}return t.err=function(n,e){window._uxa.push([t.IMPLEMENTATION_SNIPPET_ERROR_LOG_COMMAND,n,e])},t.tryCatch=function(n,e){return function(){for(var r=[],o=0;o<arguments.length;o++)r[o]=arguments[o];try{return e.apply(void 0,r)}catch(e){try{t.err(n,e)}catch(t){}return}}},t.IMPLEMENTATION_SNIPPET_ERROR_LOG_COMMAND="logImplementationSnippetError",t}(),e=function(){function t(){var t=this;this.subscriptions=new Set,this.broadcast=function(n){new Set(t.subscriptions).forEach((function(t){t(n)}))}}return t.prototype.subscribe=function(t){0===this.subscriptions.size&&this.onSubscriptionStarted(),this.subscriptions.add(t)},t.prototype.unsubscribe=function(t){this.onUnsubscription(),this.subscriptions.delete(t),0===this.subscriptions.size&&this.onSubscriptionEnded()},t.prototype.onUnsubscription=function(){},t}(),r=function(){function t(t,n){this.observable=t,this.state=n.toLowerCase()}return t.prototype.init=function(t){var n=this;this.operation=t,this.observer=function(){n.isLessThanOrEqual(n.state,document.readyState)&&(t(),n.observable.unsubscribe(n.observer))}},t.prototype.start=function(){this.isLessThanOrEqual(this.state,document.readyState)?this.operation():this.observable.subscribe(this.observer)},t.prototype.stop=function(){this.observable.unsubscribe(this.observer)},t.prototype.isLessThanOrEqual=function(n,e){var r=t.readyStateWeightMap[e];return t.readyStateWeightMap[n]<=r},t.readyStateWeightMap={complete:3,interactive:2,loading:1,any:0},t}(),o=(t=function(n,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var e in n)Object.prototype.hasOwnProperty.call(n,e)&&(t[e]=n[e])},t(n,e)},function(n,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=n}t(n,e),n.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),i=function(t){function e(n){var e=t.call(this)||this;return e.common=n,e.listener=e.common.tryCatch("PageStateTrigger",e.broadcast),e}return o(e,t),e.prototype.onSubscriptionStarted=function(){document.addEventListener("readystatechange",this.listener,!1)},e.prototype.onSubscriptionEnded=function(){document.removeEventListener("readystatechange",this.listener,!1)},e.prototype.provide=function(t){return this.common.isDefinedAndNotNull(t)&&this.common.isObject(t)&&"state"in t?new r(this,t.state):(n.err("PageStateTrigger",new Error("Wrong arguments passed.")),new r(this,"Any"))},e}(e);window.CS_TAG_MANAGER_EXPORTS.PageState=i}();
/* tag-manager-core 1.17.1 */
!function(){"use strict";var t=function(){function t(){}return t.toMap=function(t){var r;try{r=t.cookie}catch(t){r=""}return r.split("; ").reduce((function(t,r){var e=r.split("="),n=e[0],o=e[1];return void 0!==o&&(t[n]=o),t}),{})},t}(),r=function(){function t(){}return t.isBrowserSupported=function(){return"JSON"in window&&"parse"in window.JSON&&"stringify"in window.JSON&&"addEventListener"in window&&"removeEventListener"in window&&"Node"in window&&"filter"in Array.prototype&&"forEach"in Array.prototype&&"querySelectorAll"in document&&"now"in Date&&"keys"in Object&&"performance"in window&&"Set"in window},t}();function e(t,r){return 0===t.lastIndexOf(r,0)}var n,o,i=function(){function t(){}return t.toRegExp=function(t){var r=/^\/(.*)\/([gimy]*)$/.exec(t),e=null;if(r){var n=r[1],o=r[2];try{e=new RegExp(n,o)}catch(t){e=null}}return e},t}();!function(t){t.AND="AND",t.OR="OR"}(n||(n={})),function(t){t.STARTS_WITH="startsWith",t.EQUALS="equals",t.NOT_EQUALS="notEquals",t.CONTAINS="contains",t.MATCHES="matches",t.EXIST="exist",t.NOT_EXIST="notExist"}(o||(o={}));var u=function(){function t(t){this.common=t}return t.prototype.evaluate=function(t,r){return this.evaluateExpression(t.operator,this.evaluateArguments(t.args,r))},t.prototype.evaluateExpression=function(t,r){switch(t){case o.EXIST:case o.NOT_EXIST:return this.evaluateUnaryExpression(t,r);default:return this.evaluateBinaryExpression(t,r)}},t.prototype.evaluateUnaryExpression=function(t,r){var e=r[0];if(!this.common.isValidCssSelector(e))return!1;switch(t){case o.EXIST:return null!==document.querySelector(e);case o.NOT_EXIST:return null===document.querySelector(e);default:return!1}},t.prototype.evaluateBinaryExpression=function(t,r){var u=r,c=u[0],a=u[1];if(!(t===n.AND||t===n.OR||this.common.isString(c)&&this.common.isString(a)))return!1;switch(t){case n.AND:return!!r.reduce((function(t,r){return t&&r}));case n.OR:return!!r.reduce((function(t,r){return t||r}));case o.STARTS_WITH:return e(c,a);case o.EQUALS:return c===a;case o.NOT_EQUALS:return c!==a;case o.CONTAINS:return c.indexOf(a)>-1;case o.MATCHES:var s=i.toRegExp(a);return null!==s&&s.test(c);default:return!1}},t.isExpression=function(t){return!!(t&&t.operator&&t.args)},t.prototype.evaluateArguments=function(r,e){var n=this;return r.map((function(r){return t.isExpression(r)?n.evaluate(r,e):n.common.isString(r)?n.common.interpolate(r,e):r}))},t}();var c;const a=null!==(c=("undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:process).Element)&&void 0!==c?c:{prototype:{}},s=a.prototype.matches||a.prototype.matchesSelector||a.prototype.mozMatchesSelector||a.prototype.msMatchesSelector||a.prototype.oMatchesSelector||a.prototype.webkitMatchesSelector;var l,p,f,y,h=function(){function t(){}return t.err=function(r,e){window._uxa.push([t.IMPLEMENTATION_SNIPPET_ERROR_LOG_COMMAND,r,e])},t.tryCatch=function(r,e){return function(){for(var n=[],o=0;o<arguments.length;o++)n[o]=arguments[o];try{return e.apply(void 0,n)}catch(e){try{t.err(r,e)}catch(t){}return}}},t.IMPLEMENTATION_SNIPPET_ERROR_LOG_COMMAND="logImplementationSnippetError",t}(),v=function(t){return function(r,e,n){var o=e.toString(),i=t||"".concat(r.constructor&&r.constructor.name,".").concat(o),u=n.value;n.value=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return h.tryCatch(i,u.bind(this)).apply(void 0,t)}}},d=function(){return function(t,r,e){var n=r.toString(),o=e.value;e.value=function(){for(var t,r=[],e=0;e<arguments.length;e++)r[e]=arguments[e];var i="".concat(null===(t=this.conf)||void 0===t?void 0:t.name,".").concat(n);return h.tryCatch(i,o.bind(this)).apply(void 0,r)}}},g="object"==typeof global&&global&&global.Object===Object&&global,b="object"==typeof self&&self&&self.Object===Object&&self,_=g||b||Function("return this")(),m=_.Symbol,j=Object.prototype,w=j.hasOwnProperty,O=j.toString,S=m?m.toStringTag:void 0,A=Object.prototype.toString,E=m?m.toStringTag:void 0,x=function(t){return null==t?void 0===t?"[object Undefined]":"[object Null]":E&&E in Object(t)?function(t){var r=w.call(t,S),e=t[S];try{t[S]=void 0;var n=!0}catch(t){}var o=O.call(t);return n&&(r?t[S]=e:delete t[S]),o}(t):function(t){return A.call(t)}(t)},T=function(t){var r=typeof t;return null!=t&&("object"==r||"function"==r)},C=function(t){if(!T(t))return!1;var r=x(t);return"[object Function]"==r||"[object GeneratorFunction]"==r||"[object AsyncFunction]"==r||"[object Proxy]"==r},I=_["__core-js_shared__"],R=(l=/[^.]+$/.exec(I&&I.keys&&I.keys.IE_PROTO||""))?"Symbol(src)_1."+l:"",P=Function.prototype.toString,N=/^\[object .+?Constructor\]$/,$=Function.prototype,M=Object.prototype,z=$.toString,D=M.hasOwnProperty,F=RegExp("^"+z.call(D).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),k=function(t){return!(!T(t)||(r=t,R&&R in r))&&(C(t)?F:N).test(function(t){if(null!=t){try{return P.call(t)}catch(t){}try{return t+""}catch(t){}}return""}(t));var r},L=function(t,r){var e=function(t,r){return null==t?void 0:t[r]}(t,r);return k(e)?e:void 0},U=function(){try{var t=L(Object,"defineProperty");return t({},"",{}),t}catch(t){}}(),q=function(t,r,e){"__proto__"==r&&U?U(t,r,{configurable:!0,enumerable:!0,value:e,writable:!0}):t[r]=e},X=function(t,r){return t===r||t!=t&&r!=r},B=Object.prototype.hasOwnProperty,G=function(t,r,e){var n=t[r];B.call(t,r)&&X(n,e)&&(void 0!==e||r in t)||q(t,r,e)},H=function(t){return t},Q=function(t,r,e){switch(e.length){case 0:return t.call(r);case 1:return t.call(r,e[0]);case 2:return t.call(r,e[0],e[1]);case 3:return t.call(r,e[0],e[1],e[2])}return t.apply(r,e)},W=Math.max,J=U?function(t,r){return U(t,"toString",{configurable:!0,enumerable:!1,value:(e=r,function(){return e}),writable:!0});var e}:H,V=Date.now,Z=(p=J,f=0,y=0,function(){var t=V(),r=16-(t-y);if(y=t,r>0){if(++f>=800)return arguments[0]}else f=0;return p.apply(void 0,arguments)}),K=function(t,r){return Z(function(t,r,e){return r=W(void 0===r?t.length-1:r,0),function(){for(var n=arguments,o=-1,i=W(n.length-r,0),u=Array(i);++o<i;)u[o]=n[r+o];o=-1;for(var c=Array(r+1);++o<r;)c[o]=n[o];return c[r]=e(u),Q(t,this,c)}}(t,r,H),t+"")},Y=function(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=9007199254740991},tt=function(t){return null!=t&&Y(t.length)&&!C(t)},rt=/^(?:0|[1-9]\d*)$/,et=function(t,r){var e=typeof t;return!!(r=null==r?9007199254740991:r)&&("number"==e||"symbol"!=e&&rt.test(t))&&t>-1&&t%1==0&&t<r},nt=function(t,r,e){if(!T(e))return!1;var n=typeof r;return!!("number"==n?tt(e)&&et(r,e.length):"string"==n&&r in e)&&X(e[r],t)},ot=function(t){return null!=t&&"object"==typeof t},it=function(t){return ot(t)&&"[object Arguments]"==x(t)},ut=Object.prototype,ct=ut.hasOwnProperty,at=ut.propertyIsEnumerable,st=it(function(){return arguments}())?it:function(t){return ot(t)&&ct.call(t,"callee")&&!at.call(t,"callee")},lt=st,pt=Array.isArray,ft="object"==typeof exports&&exports&&!exports.nodeType&&exports,yt=ft&&"object"==typeof module&&module&&!module.nodeType&&module,ht=yt&&yt.exports===ft?_.Buffer:void 0,vt=(ht?ht.isBuffer:void 0)||function(){return!1},dt={};dt["[object Float32Array]"]=dt["[object Float64Array]"]=dt["[object Int8Array]"]=dt["[object Int16Array]"]=dt["[object Int32Array]"]=dt["[object Uint8Array]"]=dt["[object Uint8ClampedArray]"]=dt["[object Uint16Array]"]=dt["[object Uint32Array]"]=!0,dt["[object Arguments]"]=dt["[object Array]"]=dt["[object ArrayBuffer]"]=dt["[object Boolean]"]=dt["[object DataView]"]=dt["[object Date]"]=dt["[object Error]"]=dt["[object Function]"]=dt["[object Map]"]=dt["[object Number]"]=dt["[object Object]"]=dt["[object RegExp]"]=dt["[object Set]"]=dt["[object String]"]=dt["[object WeakMap]"]=!1;var gt,bt,_t="object"==typeof exports&&exports&&!exports.nodeType&&exports,mt=_t&&"object"==typeof module&&module&&!module.nodeType&&module,jt=mt&&mt.exports===_t&&g.process,wt=function(){try{return mt&&mt.require&&mt.require("util").types||jt&&jt.binding&&jt.binding("util")}catch(t){}}(),Ot=wt&&wt.isTypedArray,St=Ot?function(t){return function(r){return t(r)}}(Ot):function(t){return ot(t)&&Y(t.length)&&!!dt[x(t)]},At=Object.prototype.hasOwnProperty,Et=function(t,r){var e=pt(t),n=!e&&lt(t),o=!e&&!n&&vt(t),i=!e&&!n&&!o&&St(t),u=e||n||o||i,c=u?function(t,r){for(var e=-1,n=Array(t);++e<t;)n[e]=r(e);return n}(t.length,String):[],a=c.length;for(var s in t)!r&&!At.call(t,s)||u&&("length"==s||o&&("offset"==s||"parent"==s)||i&&("buffer"==s||"byteLength"==s||"byteOffset"==s)||et(s,a))||c.push(s);return c},xt=Object.prototype,Tt=function(t){var r=t&&t.constructor;return t===("function"==typeof r&&r.prototype||xt)},Ct=Object.prototype.hasOwnProperty,It=function(t){if(!T(t))return function(t){var r=[];if(null!=t)for(var e in Object(t))r.push(e);return r}(t);var r=Tt(t),e=[];for(var n in t)("constructor"!=n||!r&&Ct.call(t,n))&&e.push(n);return e},Rt=(gt=function(t,r,e,n){!function(t,r,e,n){var o=!e;e||(e={});for(var i=-1,u=r.length;++i<u;){var c=r[i],a=n?n(e[c],t[c],c,e,t):void 0;void 0===a&&(a=t[c]),o?q(e,c,a):G(e,c,a)}}(r,function(t){return tt(t)?Et(t,!0):It(t)}(r),t,n)},K((function(t,r){var e=-1,n=r.length,o=n>1?r[n-1]:void 0,i=n>2?r[2]:void 0;for(o=gt.length>3&&"function"==typeof o?(n--,o):void 0,i&&nt(r[0],r[1],i)&&(o=n<3?void 0:o,n=1),t=Object(t);++e<n;){var u=r[e];u&&gt(t,u,e,o)}return t}))),Pt=function(t,r){return function(e){return t(r(e))}},Nt=Pt(Object.getPrototypeOf,Object),$t=Function.prototype,Mt=Object.prototype,zt=$t.toString,Dt=Mt.hasOwnProperty,Ft=zt.call(Object),kt=function(t){if(!ot(t))return!1;var r=x(t);return"[object Error]"==r||"[object DOMException]"==r||"string"==typeof t.message&&"string"==typeof t.name&&!function(t){if(!ot(t)||"[object Object]"!=x(t))return!1;var r=Nt(t);if(null===r)return!0;var e=Dt.call(r,"constructor")&&r.constructor;return"function"==typeof e&&e instanceof e&&zt.call(e)==Ft}(t)},Lt=K((function(t,r){try{return Q(t,void 0,r)}catch(t){return kt(t)?t:new Error(t)}})),Ut=function(t,r){for(var e=-1,n=null==t?0:t.length,o=Array(n);++e<n;)o[e]=r(t[e],e,t);return o},qt=Object.prototype,Xt=qt.hasOwnProperty,Bt=function(t,r,e,n){return void 0===t||X(t,qt[e])&&!Xt.call(n,e)?r:t},Gt={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},Ht=function(t){return"\\"+Gt[t]},Qt=Pt(Object.keys,Object),Wt=Object.prototype.hasOwnProperty,Jt=function(t){return tt(t)?Et(t):function(t){if(!Tt(t))return Qt(t);var r=[];for(var e in Object(t))Wt.call(t,e)&&"constructor"!=e&&r.push(e);return r}(t)},Vt=/<%=([\s\S]+?)%>/g,Zt=(bt={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},function(t){return null==bt?void 0:bt[t]}),Kt=function(t){return"symbol"==typeof t||ot(t)&&"[object Symbol]"==x(t)},Yt=m?m.prototype:void 0,tr=Yt?Yt.toString:void 0,rr=function t(r){if("string"==typeof r)return r;if(pt(r))return Ut(r,t)+"";if(Kt(r))return tr?tr.call(r):"";var e=r+"";return"0"==e&&1/r==-1/0?"-0":e},er=function(t){return null==t?"":rr(t)},nr=/[&<>"']/g,or=RegExp(nr.source),ir={escape:/<%-([\s\S]+?)%>/g,evaluate:/<%([\s\S]+?)%>/g,interpolate:Vt,variable:"",imports:{_:{escape:function(t){return(t=er(t))&&or.test(t)?t.replace(nr,Zt):t}}}},ur=/\b__p \+= '';/g,cr=/\b(__p \+=) '' \+/g,ar=/(__e\(.*?\)|\b__t\)) \+\n'';/g,sr=/[()=,{}\[\]\/\s]/,lr=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,pr=/($^)/,fr=/['\n\r\u2028\u2029\\]/g,yr=Object.prototype.hasOwnProperty,hr=function(t,r,e){var n=ir.imports._.templateSettings||ir;e&&nt(t,r,e)&&(r=void 0),t=er(t),r=Rt({},r,n,Bt);var o,i,u=Rt({},r.imports,n.imports,Bt),c=Jt(u),a=function(t,r){return Ut(r,(function(r){return t[r]}))}(u,c),s=0,l=r.interpolate||pr,p="__p += '",f=RegExp((r.escape||pr).source+"|"+l.source+"|"+(l===Vt?lr:pr).source+"|"+(r.evaluate||pr).source+"|$","g"),y=yr.call(r,"sourceURL")?"//# sourceURL="+(r.sourceURL+"").replace(/\s/g," ")+"\n":"";t.replace(f,(function(r,e,n,u,c,a){return n||(n=u),p+=t.slice(s,a).replace(fr,Ht),e&&(o=!0,p+="' +\n__e("+e+") +\n'"),c&&(i=!0,p+="';\n"+c+";\n__p += '"),n&&(p+="' +\n((__t = ("+n+")) == null ? '' : __t) +\n'"),s=a+r.length,r})),p+="';\n";var h=yr.call(r,"variable")&&r.variable;if(h){if(sr.test(h))throw new Error("Invalid `variable` option passed into `_.template`")}else p="with (obj) {\n"+p+"\n}\n";p=(i?p.replace(ur,""):p).replace(cr,"$1").replace(ar,"$1;"),p="function("+(h||"obj")+") {\n"+(h?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(o?", __e = _.escape":"")+(i?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+p+"return __p\n}";var v=Lt((function(){return Function(c,y+"return "+p).apply(void 0,a)}));if(v.source=p,kt(v))throw v;return v},vr=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,dr=/^\w*$/,gr=L(Object,"create"),br=Object.prototype.hasOwnProperty,_r=Object.prototype.hasOwnProperty;function mr(t){var r=-1,e=null==t?0:t.length;for(this.clear();++r<e;){var n=t[r];this.set(n[0],n[1])}}mr.prototype.clear=function(){this.__data__=gr?gr(null):{},this.size=0},mr.prototype.delete=function(t){var r=this.has(t)&&delete this.__data__[t];return this.size-=r?1:0,r},mr.prototype.get=function(t){var r=this.__data__;if(gr){var e=r[t];return"__lodash_hash_undefined__"===e?void 0:e}return br.call(r,t)?r[t]:void 0},mr.prototype.has=function(t){var r=this.__data__;return gr?void 0!==r[t]:_r.call(r,t)},mr.prototype.set=function(t,r){var e=this.__data__;return this.size+=this.has(t)?0:1,e[t]=gr&&void 0===r?"__lodash_hash_undefined__":r,this};var jr=mr,wr=function(t,r){for(var e=t.length;e--;)if(X(t[e][0],r))return e;return-1},Or=Array.prototype.splice;function Sr(t){var r=-1,e=null==t?0:t.length;for(this.clear();++r<e;){var n=t[r];this.set(n[0],n[1])}}Sr.prototype.clear=function(){this.__data__=[],this.size=0},Sr.prototype.delete=function(t){var r=this.__data__,e=wr(r,t);return!(e<0||(e==r.length-1?r.pop():Or.call(r,e,1),--this.size,0))},Sr.prototype.get=function(t){var r=this.__data__,e=wr(r,t);return e<0?void 0:r[e][1]},Sr.prototype.has=function(t){return wr(this.__data__,t)>-1},Sr.prototype.set=function(t,r){var e=this.__data__,n=wr(e,t);return n<0?(++this.size,e.push([t,r])):e[n][1]=r,this};var Ar=Sr,Er=L(_,"Map"),xr=function(t,r){var e,n,o=t.__data__;return("string"==(n=typeof(e=r))||"number"==n||"symbol"==n||"boolean"==n?"__proto__"!==e:null===e)?o["string"==typeof r?"string":"hash"]:o.map};function Tr(t){var r=-1,e=null==t?0:t.length;for(this.clear();++r<e;){var n=t[r];this.set(n[0],n[1])}}Tr.prototype.clear=function(){this.size=0,this.__data__={hash:new jr,map:new(Er||Ar),string:new jr}},Tr.prototype.delete=function(t){var r=xr(this,t).delete(t);return this.size-=r?1:0,r},Tr.prototype.get=function(t){return xr(this,t).get(t)},Tr.prototype.has=function(t){return xr(this,t).has(t)},Tr.prototype.set=function(t,r){var e=xr(this,t),n=e.size;return e.set(t,r),this.size+=e.size==n?0:1,this};var Cr=Tr;function Ir(t,r){if("function"!=typeof t||null!=r&&"function"!=typeof r)throw new TypeError("Expected a function");var e=function(){var n=arguments,o=r?r.apply(this,n):n[0],i=e.cache;if(i.has(o))return i.get(o);var u=t.apply(this,n);return e.cache=i.set(o,u)||i,u};return e.cache=new(Ir.Cache||Cr),e}Ir.Cache=Cr;var Rr,Pr,Nr=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,$r=/\\(\\)?/g,Mr=(Rr=Ir((function(t){var r=[];return 46===t.charCodeAt(0)&&r.push(""),t.replace(Nr,(function(t,e,n,o){r.push(n?o.replace($r,"$1"):e||t)})),r}),(function(t){return 500===Pr.size&&Pr.clear(),t})),Pr=Rr.cache,Rr),zr=function(t,r){return pt(t)?t:function(t,r){if(pt(t))return!1;var e=typeof t;return!("number"!=e&&"symbol"!=e&&"boolean"!=e&&null!=t&&!Kt(t))||dr.test(t)||!vr.test(t)||null!=r&&t in Object(r)}(t,r)?[t]:Mr(er(t))},Dr=function(t){if("string"==typeof t||Kt(t))return t;var r=t+"";return"0"==r&&1/t==-1/0?"-0":r},Fr=function(t,r,e){var n=null==t?void 0:function(t,r){for(var e=0,n=(r=zr(r,t)).length;null!=t&&e<n;)t=t[Dr(r[e++])];return e&&e==n?t:void 0}(t,r);return void 0===n?e:n},kr=/^(\s*("(?:[^"\\]|\\.)*"|'(?:[^'\\]|\\.)*')\s*,?)+$/,Lr=/^document\.querySelector\(("(?:[^"\\]|\\.)*"|'(?:[^'\\]|\\.)*')\)\.textContent$/;function Ur(t){if(!kr.test(t))throw new Error("whitelisted function is wrongly used")}var qr={"window.location.hash.replace(":function(t,r){return Ur(t.substring(29,t.length-1)),hr("${".concat(t,"}"))(r)},"window.sessionStorage.getItem(":function(t,r){return Ur(t.substring(30,t.length-1)),hr("${".concat(t,"}"))(r)},"document.querySelector(":function(t,r){if(Lr.test(t))return hr("${".concat(t,"}"))(r)},"new Date().getTime()":function(t,r){return(new Date).getTime().toString()}},Xr=/\$\{(.+?)\}/g;function Br(t,r){return t.replace(Xr,function(t){return function(r,n,o){var i="";return n.split("+").forEach((function(r){var n,o=r.trim(),u=Fr(t,o);if(void 0===u)if(e(n=o,"'")&&function(t,r){return-1!==t.indexOf("'",t.length-1)}(n))u=o.substring(1,o.length-1);else{var c=function(t){var r=function(r,n){const o=r.length;for(let n=0;n<o;n++)if(i=r[n],e(t,i))return r[n];var i}(Object.keys(qr));if(r)return qr[r]}(o);if(c&&(u=c(o,t)),void 0===u)throw new Error("undefined not allowed")}i+=u})),i}}(r))}var Gr=function(t){return pt(t)?Ut(t,Dr):Kt(t)?[t]:function(t,r){var e=-1,n=t.length;for(r||(r=Array(n));++e<n;)r[e]=t[e];return r}(Mr(er(t)))};var Hr,Qr=function(){function t(){}return t.prototype.isString=function(t){return"string"==typeof t||t instanceof String},t.prototype.isDefined=function(t){return void 0!==t},t.prototype.isDefinedAndNotNull=function(t){return this.isDefined(t)&&null!==t},t.prototype.isFunction=function(t){return"function"==typeof t},t.prototype.isArray=function(t){return Array.isArray?Array.isArray(t):"[object Array]"===Object.prototype.toString.call(t)},t.prototype.isObject=function(t){return"object"==typeof t},t.prototype.isUndefined=function(t){return void 0===t},t.prototype.matchesSelector=function(t,r){return s.call(t,r)},t.prototype.closest=function(t,r){return Element.prototype.closest?Element.prototype.closest.call(t,r):this.matchesSelector(t,r)?t:null},t.prototype.tryCatch=function(t,r){return h.tryCatch(t,r)},t.prototype.objectAssign=function(t){for(var r=[],e=1;e<arguments.length;e++)r[e-1]=arguments[e];return Object.assign.apply(Object,function(t,r,e){if(e||2===arguments.length)for(var n,o=0,i=r.length;o<i;o++)!n&&o in r||(n||(n=Array.prototype.slice.call(r,0,o)),n[o]=r[o]);return t.concat(n||Array.prototype.slice.call(r))}([t],r,!1))},t.prototype.evaluateIterableContext=function(t,r){return function(t,r){var e=t.split("|");if(e.length>2)return null;var n=function(t,r){try{var e=/^values\(([a-zA-Z0-9_$[\].]+)\)\[\?([a-zA-Z0-9_$]+)\]$/.exec(t);if(!e)return null;var n=e[1],o=e[2],i=Fr(r,Gr(n));if("object"!=typeof i||null===i)return null;var u=[];return Object.keys(i).forEach((function(t){var r=i[t];"object"==typeof r&&null!==r&&!Array.isArray(r)&&o in r&&u.push(r)})),u}catch(t){return null}}(e[0].trim(),r);return 2===e.length?null===n?null:function(t,r){var e=/^\[([0-9]+):([0-9+])\]$/.exec(t);if(!e)return null;var n=parseInt(e[1],10),o=parseInt(e[2],10);return o<=n||o>r.length?null:r.slice(n,o)}(e[1].trim(),n):n}(t,r)},t.prototype.interpolate=function(t,r){try{return Br(t,r)}catch(t){return null}},t.prototype.interpolateTemplateArgs=function(t,r){try{for(var e=0,n=Object.keys(t);e<n.length;e++){var o=n[e],i=t[o];this.isString(i)&&(t[o]=Br(i,r))}return t}catch(t){return null}},t.prototype.isValidCssSelector=function(t){try{return document.createDocumentFragment().querySelector(t),!0}catch(t){return!1}},t}(),Wr=function(){function t(t){this.common=t,this.providers={}}return t.prototype.resolve=function(t){var r=this;return this.providers[t]?this.providers[t]:h.tryCatch("TriggerProviderFactory-".concat(t),(function(){var e=window.CS_TAG_MANAGER_EXPORTS[t];return r.providers[t]=new e(r.common),r.providers[t]}))()},t}(),Jr=function(){function t(){this.templates={}}return t.prototype.resolve=function(t){var r=this;return this.templates[t]?this.templates[t]:h.tryCatch("TemplateResolver-".concat(t),(function(){var e=window.CS_TAG_MANAGER_EXPORTS[t];return r.templates[t]=new e,r.templates[t]}))(t)},t}(),Vr=function(){function t(){this.isStarted=!1}return t.prototype.start=function(){this.isStarted||(this.isStarted=!0,this.onStart())},t.prototype.stop=function(){this.isStarted&&(this.isStarted=!1,this.onStop())},t.prototype.restart=function(){this.stop(),this.start()},t}(),Zr=function(t,r,e,n){var o,i=arguments.length,u=i<3?r:null===n?n=Object.getOwnPropertyDescriptor(r,e):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)u=Reflect.decorate(t,r,e,n);else for(var c=t.length-1;c>=0;c--)(o=t[c])&&(u=(i<3?o(u):i>3?o(r,e,u):o(r,e))||u);return i>3&&u&&Object.defineProperty(r,e,u),u},Kr=function(){function t(t,r,e,n){this.conf=t,this.providerFactory=r,this.conditionCallback=e,this.operation=n,this.isInitialized=!1,this.isStarted=!1}return t.prototype.initialize=function(){if(!this.isInitialized){var t=this.providerFactory.resolve(this.conf.name);void 0!==t&&(this.trigger=t.provide(this.conf.args),this.trigger.init(this.operation),this.isInitialized=!0)}},t.prototype.start=function(){this.isStarted||this.conditionCallback()&&(this.initialize(),this.isInitialized&&(this.trigger.start(),this.isStarted=!0))},t.prototype.stop=function(){this.isStarted&&(this.trigger.stop(),this.isStarted=!1)},Zr([d()],t.prototype,"initialize",null),Zr([d()],t.prototype,"start",null),Zr([d()],t.prototype,"stop",null),t}(),Yr=(Hr=function(t,r){return Hr=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var e in r)Object.prototype.hasOwnProperty.call(r,e)&&(t[e]=r[e])},Hr(t,r)},function(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function e(){this.constructor=t}Hr(t,r),t.prototype=null===r?Object.create(r):(e.prototype=r.prototype,new e)}),te=function(){return te=Object.assign||function(t){for(var r,e=1,n=arguments.length;e<n;e++)for(var o in r=arguments[e])Object.prototype.hasOwnProperty.call(r,o)&&(t[o]=r[o]);return t},te.apply(this,arguments)},re=function(t,r,e,n){var o,i=arguments.length,u=i<3?r:null===n?n=Object.getOwnPropertyDescriptor(r,e):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)u=Reflect.decorate(t,r,e,n);else for(var c=t.length-1;c>=0;c--)(o=t[c])&&(u=(i<3?o(u):i>3?o(r,e,u):o(r,e))||u);return i>3&&u&&Object.defineProperty(r,e,u),u},ee=function(t){function r(r,e,n,o,i){var u=t.call(this)||this;return u.common=r,u.globalContext=e,u.expressionEvaluator=n,u.providerFactory=o,u.templateResolver=i,u.snippets=[],u}return Yr(r,t),r.prototype.parse=function(t){for(var r=this,e=0,n=t;e<n.length;e++){var o=n[e],i=o.template,u=this.templateResolver.resolve(i.name);if(void 0!==u)for(var c=function(t){var e=te({},a.globalContext),n=a.buildOperationCallback(i,u,e);a.snippets.push(new Kr(t,a.providerFactory,(function(){return void 0===t.condition||r.expressionEvaluator.evaluate(t.condition,r.globalContext)}),n))},a=this,s=0,l=o.triggers;s<l.length;s++)c(l[s])}},r.prototype.buildOperationCallback=function(t,r,e){var n=this;return function(o){void 0===o&&(o={}),r.run(t.args,o,e,n.common,(function(){return n.restart()}))}},r.prototype.onStart=function(){for(var t=0,r=this.snippets;t<r.length;t++)r[t].start()},r.prototype.onStop=function(){for(var t=0,r=this.snippets;t<r.length;t++)r[t].stop()},re([v("parse")],r.prototype,"parse",null),re([v("onStart")],r.prototype,"onStart",null),re([v("onStop")],r.prototype,"onStop",null),r}(Vr),ne=function(){function e(t){this.implementationConf=t}return e.prototype.start=function(){if(!window.UXAnalytics&&r.isBrowserSupported()){var e=new Qr,n=new u(e),o={window:window,document:document,location:window.location,cookies:{}};Object.defineProperty(o,"cookies",{get:function(){return t.toMap(document)}});var i=new Wr(e),c=new Jr,a=new ee(e,o,n,i,c);a.parse(this.implementationConf),a.start()}},e}();window._uxa=window._uxa||[];try{new ne(window.CS_IMPLEMENTATION_CONF).start()}catch(t){window._uxa.push(["logImplementationSnippetError","ImplementionSnippetLoad",t.message])}}();})();!function(){"use strict";var t={d:function(n,i){for(var r in i)t.o(i,r)&&!t.o(n,r)&&Object.defineProperty(n,r,{enumerable:!0,get:i[r]})},o:function(t,n){return Object.prototype.hasOwnProperty.call(t,n)},r:function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}},n={};t.r(n),t.d(n,{getRequestParameters:function(){return Ec}});var i="cs-native-frame",r={navigatorProperties:[{propertyName:"sendBeacon",binding:navigator}],nodeProperties:["childNodes","parentNode","nextSibling","firstChild"],elementProperties:["shadowRoot"],elementPropertiesValues:["matches","mozMatchesSelector","msMatchesSelector","oMatchesSelector","webkitMatchesSelector"],eventProperties:["target"],imageProperties:["src"],constructors:{Date:"csDate",JSON:"csJSON",Array:"csArray",String:"csString",URL:"csURL",MutationObserver:"csMutationObserver",screen:"csScreen"}};function e(t,n,i){var r=function(t,n){for(var i,r=t;r&&!(i=Object.getOwnPropertyDescriptor(r,n));)r=Object.getPrototypeOf(r);return i}(t,n);if(!r)return function(){return this[n]};switch(i){case"get":return r.get;case"set":return r.set;case"value":return r.value}}function s(t){Object.keys(r.constructors).forEach((function(n){window[r.constructors[n]]=t[n]instanceof Function&&null==t[n].prototype?t[n].bind(window):t[n]})),function(t){window.csquerySelector={1:t.Element.prototype.querySelector,9:t.Document.prototype.querySelector,11:t.DocumentFragment.prototype.querySelector},window.csquerySelectorAll={1:t.Element.prototype.querySelectorAll,9:t.Document.prototype.querySelectorAll,11:t.DocumentFragment.prototype.querySelectorAll}}(t),("Prototype"in window||/^((?!chrome|android).)*safari/i.test(navigator.userAgent))&&(window.csMutationObserver=window.WebKitMutationObserver||window.MutationObserver),u("csNode",r.nodeProperties,t.Node.prototype,"get"),u("csElement",r.elementProperties,t.Element.prototype,"get"),u("csElement",r.elementPropertiesValues,t.Element.prototype,"value",!1),u("csHTMLImageElement",r.imageProperties,t.HTMLImageElement.prototype,"set"),u("csEvent",r.eventProperties,t.Event.prototype,"get"),u("csNavigator",r.navigatorProperties,t.navigator,"value")}function u(t,n,i,r,s){void 0===s&&(s=!0),n.forEach((function(n){var u="string"!=typeof n&&"binding"in n,o=u?n.propertyName:n;(s||o in i)&&(window["".concat(t+o)]=e(i,o,r),u&&(window["".concat(t+o)]=window["".concat(t+o)].bind(n.binding)))}))}function o(t,n){window.CSProtectnativeFunctionsLogs=window.CSProtectnativeFunctionsLogs||{},window.CSProtectnativeFunctionsLogs[t]=n}if(function(){var t,n=0;function i(t){return"$$"+t+ ++n}i.for=i,window.csSymbol=null!==(t=window.Symbol)&&void 0!==t?t:i}(),!function(){try{var t=function(){var t=document.createElement("iframe");t.id=i,t.setAttribute("hidden",""),t.setAttribute("title","Intentionally blank"),t.setAttribute("sandbox","allow-same-origin");var n=document.createElement("cs-native-frame-holder");if(n.setAttribute("hidden",""),document.body.appendChild(n),Boolean(Element.prototype.attachShadow)){var r=n.attachShadow({mode:"closed"});return r.innerHTML=t.outerHTML,r.firstElementChild.contentWindow}return n.innerHTML=t.outerHTML,n.firstElementChild.contentWindow}();return!!t&&(window.CSPureWindow=t,s(window.CSPureWindow),!0)}catch(t){return o("Warning","failed to copy references from pure iframe: ".concat(t.message)),!1}}())try{s(window)}catch(fo){o("Critical","failed to copy references from window: ".concat(fo.message))}function c(t){return h(csString.prototype.toLowerCase.call(t.localName))}function h(t){return csString.prototype.replace.call(t,/([#;&,.+*~':"!^$[\]()<=>|/%?@`{}\\ ])/g,"\\$1")}function a(t){return 1===t.nodeType}function f(t){return 3===t.nodeType}function v(t){return a(t)&&"link"===t.localName}function l(t){return a(t)&&"a"===t.localName}function d(t){return v(t)&&-1!==csString.prototype.indexOf.call(t.rel,"stylesheet")}function w(t){return a(t)&&"style"===t.localName}function y(t){return a(t)&&"input"===t.localName}function p(t){return a(t)&&"textarea"===t.localName}function m(t){return a(t)&&"script"===t.localName}function g(t){return a(t)&&"ownerSVGElement"in t}function S(t){return a(t)&&"select"===t.localName}function A(t){switch(t.nodeType){case 9:case 11:return!0;default:return!1}}function b(t){switch(t.nodeType){case 9:case 11:case 1:return!0;default:return!1}}function E(t){return 9===t.nodeType}function R(t){return A(t)&&"host"in t&&"mode"in t}function N(t){return a(t)&&!!csElementshadowRoot.apply(t)&&R(csElementshadowRoot.apply(t))}var T=["annotation-xml","color-profile","font-face","font-face-src","font-face-uri","font-face-format","font-face-name","missing-glyph"];var O="detached";function k(t){for(var n=t,i=[n];null!==csNodeparentNode.apply(n);)n=csNodeparentNode.apply(n),csArray.prototype.push.call(i,n);return I(n)&&csArray.prototype.push.call(i,O),{ancestors:i,selectionRoot:n}}function I(t){return z.isValidElement(t)}var C=window.csElementmatches||window.csElementmatchesSelector||window.csElementmozMatchesSelector||window.csElementmsMatchesSelector||window.csElementoMatchesSelector||window.csElementwebkitMatchesSelector,x=9;function _(t,n){return!!n&&csArray.prototype.some.call(n,(function(n){return C.call(t,n)}))}var M=[/\d{4}/,/^ember\d+$/],P="@",D="data-cs-override-id",L="data-cs-dynamic-id";function U(t,n,i,r){var e=r.dynamicIdRegex||null,s=r.dynamicElementNameRegex,u=c(t);s&&(s.test(t.localName)&&(u=csString.prototype.replace.call(u,s,"$1".concat(P))));if(function(t,n){var i=j(t);return i&&csString.prototype.match.call(i,/^[\w-]+$/)&&q(D,i,n)}(t,i)){var o=j(t);return{hasUniqueIdentifier:!0,elementSelector:"".concat(u,"[").concat(D,'="').concat(o,'"]')}}var a=function(t,n,i){if(!i.uniqueAttributes)return{success:!1};for(var r=0,e=i.uniqueAttributes;r<e.length;r++){var s=e[r],u=t.getAttribute(s);if(null!==u)if(q(s,u,n))return{attributeName:s,attributeValue:u,success:!0}}return{success:!1}}(t,i,r);if(a.success)return{hasUniqueIdentifier:!0,elementSelector:"".concat(u,"#UA[").concat(a.attributeName,'="').concat(a.attributeValue,'"]')};var f=function(t,n,i){if(!i.uniqueCssSelectors)return;for(var r=0,e=i.uniqueCssSelectors;r<e.length;r++){var s=e[r];if(C.call(t,s)&&H(s,n))return s}return}(t,i,r);if(f)return{hasUniqueIdentifier:!0,elementSelector:"".concat(u,"#UCS[").concat(f,"]")};var v=function(t){var n=t.getAttribute("id");return n?h(n):n}(t);if(function(t,n,i,r){return n&&!function(t){return null!==j(t)}(t)&&!function(t,n,i){return t.hasAttribute(L)||function(t,n){var i=!1;t&&n&&(i=n.test(t));return t&&(csArray.prototype.some.call(M,(function(n){return n.test(t)}))||i)}(n,i)}(t,n,r)&&function(t,n){return t&&q("id",t,n)}(n,i)}(t,v,i,e))return{hasUniqueIdentifier:!0,elementSelector:"".concat(u,"#").concat(v)};var l=function(t,n){if(!n.reliableSelectors)return;for(var i=0,r=n.reliableSelectors;i<r.length;i++){var e=r[i];if(C.call(t,e))return e}return}(t,r);if(l){var d=function(t,n,i){if(t===O||t.nodeType===x)return 0;for(var r=0,e=n.previousElementSibling;e;)C.call(e,i)&&(r+=1),e=e.previousElementSibling;return r}(n,t,l);return{hasUniqueIdentifier:!1,elementSelector:"".concat(u,"[").concat(l,"](").concat(d,")")}}var w=function(t,n,i){if(t===O||t.nodeType===x)return 0;for(var r=i.dynamicElementNameRegex,e=!!(null==r?void 0:r.test(n.localName)),s=c(n),u=0,o=n.previousElementSibling;o;)(c(o)===s||e&&(null==r?void 0:r.test(o.localName)))&&!_(o,i.reliableSelectors)&&(u+=1),o=o.previousElementSibling;return u}(n,t,r);return{hasUniqueIdentifier:!1,elementSelector:"".concat(u,":eq(").concat(w,")")}}function j(t){return t.getAttribute(D)}function q(t,n,i){try{return 1===window.csquerySelectorAll[i.nodeType].call(i,"[".concat(t,'="').concat(n,'"]')).length}catch(t){if("SyntaxError"!==t.name)throw t}return!1}function H(t,n){try{return 1===window.csquerySelectorAll[n.nodeType].call(n,t).length}catch(t){if("SyntaxError"!==t.name)throw t}return!1}var z,B=11;function F(t,n,i){var r=csArray.prototype.shift.call(t);if(0===t.length)return V(r,i);var e=U(r,t[0],n,i),s=e.elementSelector,u=e.hasUniqueIdentifier;if(!i.fullPath&&u){var o=t[t.length-1];return"".concat(V(o,i)).concat(s)}var c=F(t,n,i);return"".concat(c?"".concat(c,">"):"").concat(s)}function V(t,n){if(t===O)return"|detached|";if(t.host){var i=k(t.host),r=i.ancestors,e=i.selectionRoot;return"".concat(F(r,e,n),"|shadow-root|")}return t.nodeType===B?"|fragment|":""}!function(t){function n(t){return!!t&&"localName"in t&&"getAttribute"in t&&"hasAttribute"in t&&"parentNode"in t}function i(t){return t&&"jquery"in t&&1===t.length?t[0]:t}t.INVALID_ELEMENT="INVALID_ELEMENT",t.isValidElement=n,t.getElementPath=function(r,e){void 0===e&&(e={fullPath:!1,dynamicIdRegex:null});var s=i(r);if(s===document)return"";if(!n(s))return t.INVALID_ELEMENT;var u=k(s);return F(u.ancestors,u.selectionRoot,e)},t.getElementPathAndFirstAnchorParent=function(r,e){void 0===e&&(e={fullPath:!1,dynamicIdRegex:null});var s=i(r);if(s===document)return{path:"",firstAnchorParent:null};if(!n(s))return{path:t.INVALID_ELEMENT,firstAnchorParent:null};var u=function(t){for(var n=t,i=[n],r=null;null!==csNodeparentNode.apply(n);)null===r&&l(n)&&(r=n),csArray.prototype.push.call(i,csNodeparentNode.apply(n)),n=csNodeparentNode.apply(n);return I(n)&&csArray.prototype.push.call(i,O),{firstAnchorParent:r,ancestors:i,selectionRoot:n}}(s),o=u.firstAnchorParent;return{path:F(u.ancestors,u.selectionRoot,e),firstAnchorParent:o}}}(z||(z={})),window.CSPathComputation=window.CSPathComputation||z;var G=function(t,n){return G=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])},G(t,n)};function J(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function i(){this.constructor=t}G(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}var W=function(){return W=Object.assign||function(t){for(var n,i=1,r=arguments.length;i<r;i++)for(var e in n=arguments[i])Object.prototype.hasOwnProperty.call(n,e)&&(t[e]=n[e]);return t},W.apply(this,arguments)};function Y(t,n){var i={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&n.indexOf(r)<0&&(i[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var e=0;for(r=Object.getOwnPropertySymbols(t);e<r.length;e++)n.indexOf(r[e])<0&&Object.prototype.propertyIsEnumerable.call(t,r[e])&&(i[r[e]]=t[r[e]])}return i}function X(t,n,i,r){var e,s=arguments.length,u=s<3?n:null===r?r=Object.getOwnPropertyDescriptor(n,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)u=Reflect.decorate(t,n,i,r);else for(var o=t.length-1;o>=0;o--)(e=t[o])&&(u=(s<3?e(u):s>3?e(n,i,u):e(n,i))||u);return s>3&&u&&Object.defineProperty(n,i,u),u}function $(t,n,i,r){return new(i||(i=Promise))((function(e,s){function u(t){try{c(r.next(t))}catch(t){s(t)}}function o(t){try{c(r.throw(t))}catch(t){s(t)}}function c(t){var n;t.done?e(t.value):(n=t.value,n instanceof i?n:new i((function(t){t(n)}))).then(u,o)}c((r=r.apply(t,n||[])).next())}))}function K(t,n){var i,r,e,s,u={label:0,sent:function(){if(1&e[0])throw e[1];return e[1]},trys:[],ops:[]};return s={next:o(0),throw:o(1),return:o(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function o(o){return function(c){return function(o){if(i)throw new TypeError("Generator is already executing.");for(;s&&(s=0,o[0]&&(u=0)),u;)try{if(i=1,r&&(e=2&o[0]?r.return:o[0]?r.throw||((e=r.return)&&e.call(r),0):r.next)&&!(e=e.call(r,o[1])).done)return e;switch(r=0,e&&(o=[2&o[0],e.value]),o[0]){case 0:case 1:e=o;break;case 4:return u.label++,{value:o[1],done:!1};case 5:u.label++,r=o[1],o=[0];continue;case 7:o=u.ops.pop(),u.trys.pop();continue;default:if(!(e=u.trys,(e=e.length>0&&e[e.length-1])||6!==o[0]&&2!==o[0])){u=0;continue}if(3===o[0]&&(!e||o[1]>e[0]&&o[1]<e[3])){u.label=o[1];break}if(6===o[0]&&u.label<e[1]){u.label=e[1],e=o;break}if(e&&u.label<e[2]){u.label=e[2],u.ops.push(o);break}e[2]&&u.ops.pop(),u.trys.pop();continue}o=n.call(t,u)}catch(t){o=[6,t],r=0}finally{i=e=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,c])}}}Object.create;function Z(t,n,i){if(i||2===arguments.length)for(var r,e=0,s=n.length;e<s;e++)!r&&e in n||(r||(r=Array.prototype.slice.call(n,0,e)),r[e]=n[e]);return t.concat(r||Array.prototype.slice.call(n))}Object.create;"function"==typeof SuppressedError&&SuppressedError;var Q=Number.MAX_SAFE_INTEGER||9007199254740991;function tt(){}function nt(t,n){return 0===csString.prototype.lastIndexOf.call(t,n,0)}function it(t,n){return-1!==csString.prototype.indexOf.call(t,n,t.length-n.length)}var rt=34164e6,et={percentage:function(){return Math.floor(1e4*Math.random())/100},boolean:function(t){return this.percentage()<t},integer:function(t){return void 0===t&&(t=Q),Math.floor(Math.random()*t)}},st=csSymbol("cachedJson");var ut,ot,ct=void 0!==window.Symbol?function(t){if(t[st])return t[st];if(csArray.isArray(t)){if(0===t.length)return"[]";for(var n="["+ct(t[0]),i=1;i<t.length;i++)n+=","+ct(t[i]);return n+"]"}return t[st]=csJSON.stringify(t)}:csJSON.stringify,ht=function(){function t(t){var n,i;this.trackerDomain=t.trackerDomain,this.loggerDomain=t.ed,this.minLogLevel=t.logLevel,this.projectId=t.projectId,this.status=t.status,this.hostnames=t.hostnames,this.iframesTracking=!!t.iframesTracking,this.crossDomainTracking=!!t.crossDomainTracking,this.crossDomainSingleIframeTracking=!!t.crossDomainSingleIframeTracking,this.consentRequired=!!t.consentRequired,this.allowSubdomains=!!t.allowSubdomains,this.visitorCookieTimeout=t.visitorCookieTimeout||rt,this.sampleRate=t.sampleRate,this.replayRecordingRate=t.replayRecordingRate,this.validationRate=t.validationRate,this.lastTrackingDraw=t.lastTrackingDraw||1,this.useHttps=!0,this.eMerchandisingEnabled=t.eMerchandisingEnabled,this.mouseMoveHeatmapEnabled=t.mouseMoveHeatmapEnabled,this.jsErrorsEnabled=t.jsErrorsEnabled,this.apiErrors=W({enabled:null!==(n=t.apiErrorsEnabled)&&void 0!==n?n:0},t.apiErrors),this.customErrors=W({enabled:null!==(i=t.customErrorsEnabled)&&void 0!==i?i:0},t.customErrors),this.jsCustomErrorsEnabled=t.jsCustomErrorsEnabled,this.triggerSessionReplayEnabled=t.triggerSessionReplayEnabled,this.triggerSessionReplayRegex=this.t(t.triggerSessionReplayRegex),this.dynamicIdRegex=t.dynamicIdRegex?new RegExp(t.dynamicIdRegex):null,this.whitelistedAttributes=t.whitelistedAttributes||[],this.replayRecordingUnmaskedUrlRegex=this.t(t.replayRecordingUnmaskedUrlRegex),this.replayRecordingMaskedUrlRegex=this.t(t.replayRecordingMaskedUrlRegex),this.replayRecordingMaskedUrlRegexRules=t.replayRecordingMaskedUrlRegexRules||null,this.replayRecordingUnmaskedUrlRegexRules=t.replayRecordingUnmaskedUrlRegexRules||null,this.anonymisationMethod=t.anonymisationMethod||null,this.tagDeploymentMode=t.tagDeploymentMode,this.dualCollectionTagDomain=t.dualCollectionTagDomain||null,this.ptcDomain=t.ptcDomain||null,this.ptcGuid=t.ptcGuid||null,this.secureCookiesEnabled=!!t.secureCookiesEnabled,this.ptcSha512=t.ptcSha512||null,this.ptcSnapshotPath=t.ptcSnapshotPath||null,this.emitDebugEvents=!1,this.malkaQuotaServiceDomain=t.malkaQuotaServiceDomain||null,this.staticResourceManagerDomain=t.staticResourceManagerDomain||null,this.malkaRecordingDomain=t.malkaRecordingDomain||null,this.textVisibilityEnabled=t.textVisibilityEnabled,this.experimental=t.experimental||{},this.malkaEtrEnabled=!!t.malkaEtrEnabled,this.malkaUrlEnabled=!!t.malkaUrlEnabled,this.cookielessTrackingEnabled=t.cookielessTrackingEnabled,this.customHashIdEnabled=!!t.customHashIdEnabled,this.encryptionEnabled=!!t.recordingEncryptionEnabled,this.encryptionPublicKey=t.recordingEncryptionPublicKey||null,this.pathComputationRules=t.pathComputationRules||{},t.pathComputationRules&&""===t.pathComputationRules.dynamicElementNameRegex&&(this.pathComputationRules.dynamicElementNameRegex=null),t.pathComputationRules&&t.pathComputationRules.dynamicElementNameRegex&&(this.pathComputationRules.dynamicElementNameRegex=new RegExp(t.pathComputationRules.dynamicElementNameRegex)),this.asyncSerializerEnabled=!!t.asyncSerializerEnabled,this.encryptionPublicKeyId=t.recordingEncryptionPublicKeyId,this.pendingInactivityTimeout=t.pendingInactivityTimeout||5e3,this.accessibilityEnabled=!!t.accessibilityEnabled,this.useStaticResourceManager=!!t.useStaticResourceManager,t.taskSchedulerOptions&&(this.taskSchedulerOptions=W(W({},t.taskSchedulerOptions),{enabled:!!t.taskSchedulerOptions.enabled})),this.uxaDomain=t.uxaDomain,this.performanceTimingOptions=t.performanceTimingOptions,this.replayConsentRequiredForSession=!!t.replayConsentRequiredForSession,this.isWebView=!1,t.displayAdOptions&&t.displayAdOptions.length&&(this.displayAdOptions=t.displayAdOptions),t.voc&&(this.voc=W(W({},t.voc),{enabled:!!t.voc.enabled})),t.heapEnvironment&&(this.heapEnvironment=t.heapEnvironment)}return t.prototype.getTrackerUri=function(){return"".concat(this.i(),"://").concat(this.trackerDomain)},t.prototype.getRecordingUri=function(){return"".concat(this.i(),"://").concat(this.malkaRecordingDomain)},t.prototype.getQuotaServiceUri=function(){return"".concat(this.i(),"://").concat(this.malkaQuotaServiceDomain)},t.prototype.getLoggerUri=function(){return"".concat(this.i(),"://").concat(this.loggerDomain)},t.prototype.getStaticResourceManagerUri=function(){return"".concat(this.i(),"://").concat(this.staticResourceManagerDomain)},t.prototype.i=function(){return this.useHttps?"https":"http"},t.prototype.isProjectActive=function(){return 1===this.status},t.prototype.processOptionOverrides=function(t){var n=this;t&&t.forEach&&t.forEach((function(t){var i=t[0],r=t.slice(1);if("setOption"===i){var e=r[0],s=r[1];n.u(e,s)}}))},t.prototype.u=function(t,n){"trackerDomain"===t&&(this.trackerDomain=n),"loggerDomain"===t&&(this.loggerDomain=n),"malkaRecordingDomain"===t&&(this.malkaRecordingDomain=n),"malkaQuotaServiceDomain"===t&&(this.malkaQuotaServiceDomain=n),"staticResourceManagerDomain"===t&&(this.staticResourceManagerDomain=n),"minLogLevel"===t&&(this.minLogLevel=n),"useHttps"===t&&(this.useHttps=!!n),"isWebView"===t&&(this.isWebView=n)},t.prototype.t=function(t){return t?this.h(t):null},t.prototype.getRequestParameters=function(){return{pid:"".concat(this.projectId)}},t.prototype.updateDynamicFields=function(t,n){"emitDebugEvents"===t&&(this.emitDebugEvents=n),"minLogLevel"===t&&(this.minLogLevel=n)},t.prototype.h=function(t){try{var n=/^\/(.*)\/([gim]*)$/.exec(t);if(n){var i=n[1],r=n[2];return new RegExp("^".concat(i,"$"),r)}return new RegExp("^".concat(t,"$"))}catch(t){return null}},t.prototype.isHeaderCollectionActive=function(){var t,n;return this.apiErrors.collectStandardHeaders||!!(null===(t=this.apiErrors.validCustomHeaders)||void 0===t?void 0:t.length)||!!(null===(n=this.apiErrors.plainCustomHeaders)||void 0===n?void 0:n.length)},t}(),at=function(){function t(t,n){this.S=t,this.A=n}return t.prototype.init=function(){this.R=this.S!==this.S.top,this.N=this.A.isWebView&&this.S===this.S.top,this.A.iframesTracking&&this.R||this.N?this.T=!1:this.T=!0},t.prototype.isInIframeContext=function(){return this.R},t.prototype.isTopWindowTracker=function(){return this.T},t.prototype.isInWebViewContext=function(){return this.N},t}();!function(t){t.debug="debug",t.warn="warn",t.error="error",t.critical="critical"}(ut||(ut={})),function(t){t.toQuery=function(t){return csArray.prototype.join.call(csArray.prototype.map.call(Object.keys(t),(function(n){return"".concat(encodeURIComponent(n),"=").concat(encodeURIComponent(t[n]))})),"&")}}(ot||(ot={}));var ft=function(){function t(t,n){this.domainUri=t,this.path=n,this.beforeRequestCallbacks=[],this.afterRequestCallbacks=[]}return t.prototype.setRequestParametersProviders=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];this.requestParametersProviders=t},t.prototype.before=function(t){csArray.prototype.push.call(this.beforeRequestCallbacks,t)},t.prototype.after=function(t){csArray.prototype.push.call(this.afterRequestCallbacks,t)},t.prototype.retrieveParameters=function(){return this.requestParametersProviders?csArray.prototype.reduce.call(csArray.prototype.map.call(this.requestParametersProviders,(function(t){return t.getRequestParameters()})),(function(t,n){return W(W({},t),n)})):{}},t}(),vt=function(t){function n(n,i){return t.call(this,n,i)||this}return J(n,t),n.prototype.send=function(){csArray.prototype.forEach.call(this.beforeRequestCallbacks,(function(t){return t()}));var t=this.retrieveParameters();this.O(t);var n=ot.toQuery(t);this.I(n),csArray.prototype.forEach.call(this.afterRequestCallbacks,(function(t){return t()}))},n.prototype.I=function(t){var n=new window.Image(1,1);n.onload=tt,n.onerror=tt,csHTMLImageElementsrc.call(n,"".concat(this.domainUri).concat(this.path?"/".concat(this.path):"","?").concat(t))},n.prototype.O=function(t){t.r=csString.prototype.slice.call("".concat(Math.random()),2,8)},n}(ft),lt=function(){function t(t,n){this.C=t,this._=n}return t.prototype.init=function(){this.M=new vt(this.C.getLoggerUri()),this.M.setRequestParametersProviders(this,this._)},t.prototype.send=function(t){this.P=t,this.M.send()},t.prototype.getRequestParameters=function(){return{a:this.P.app,l:this.P.level,m:this.P.message,s:this.P.stacktrace}},t}(),dt=/[a-zA-Z0-9._%+-]+(?:@|%40|%2540)[a-zA-Z0-9.%-_]+((?:\.|%2[eE])[a-zA-Z0-9-]+)+/g,wt=/[a-zA-Z0-9+_-](?:@|%40|%2540)/,yt="([-A-Za-z0-9+/=_]|=[^=]|={3,})+",pt=new RegExp("(ey".concat(yt,"\\.ey").concat(yt,"\\.").concat(yt,")"),"g"),mt=/[0-9]{4}/,gt=/(^|[^a-zA-Z0-9*.,-])([45*][0-9*]{3}([ -]?)[0-9*]{4}\3[0-9*]{4}\3[0-9*]{4})($|[^a-zA-Z0-9*.,-])/g,St=function(){function t(){}return t.prototype.anonymizePII=function(t){return"string"==typeof t&&(t=this.anonymizeEmail(t)),t},t.prototype.anonymizeEmail=function(t){return wt.test(t)?csString.prototype.replace.call(t,dt,"CS_ANONYMIZED_EMAIL"):t},t.prototype.anonymizeCreditCard=function(t){var n=this;return mt.test(t)?csString.prototype.replace.call(t,gt,(function(t,i,r,e,s){if(-1===csString.prototype.indexOf.call(r,"*")){var u=e.length?csArray.prototype.join.call(csString.prototype.split.call(r,e),""):r;if(!n.D(u))return t}return"".concat(i).concat("CS_ANONYMIZED_PII").concat(s)})):t},t.prototype.D=function(t){for(var n=parseInt(t[t.length-1]),i=0,r=t.length-2;r>=0;r--){var e=parseInt(t[r]);r%2==0&&(e*=2),i+=Math.floor(e/10)+e%10}return 10-i%10===n},t.prototype.anonymizeJwt=function(t){return csString.prototype.replace.call(t,pt,"CS_ANONYMIZED_JWT")},t.prototype.anonymizeFields=function(t,n){var i=this;return csArray.prototype.forEach.call(n,(function(n){t[n]=i.anonymizeEmail(t[n])})),t},t}(),At="14.20.1";function bt(){return{v:At}}var Et=function(){return void 0!==window.performance&&window.performance.now?window.performance.timing.navigationStart+Math.round(window.performance.now()):csDate.now()};function Rt(){return Math.floor(Et()/1e3)}function Nt(){return"function"==typeof window.Promise}function Tt(t,n){return 0===csString.prototype.lastIndexOf.call(t,n,0)}function Ot(t,n){return-1!==csString.prototype.indexOf.call(t,n,t.length-n.length)}var kt=function(){function t(t,n){this.L=t,this.U=n}return t.prototype.getRequestParameters=function(){return W(W({d:"".concat(Et()),p:this.U.anonymizePII(window.location.href)},this.L.getRequestParameters()),bt())},t}();function It(t){return Mt(t)&&("number"==typeof t||t instanceof Number)&&!isNaN(t)}function Ct(t){return t===parseInt(t,10)}function xt(t){return Mt(t)&&("string"==typeof t||t instanceof csString)}function _t(t){return"object"==typeof t}function Mt(t){return void 0!==t}function Pt(t){return Mt(t)&&null!==t}function Dt(t){return"function"==typeof t}function Lt(t){return t instanceof Element}function Ut(t){return t instanceof Error}function jt(t){for(var n=t.length,i=0;i<n;i++)switch(csString.prototype.charCodeAt.call(t,i)){case 9:case 10:case 11:case 12:case 13:case 32:case 160:continue;default:return!1}return!0}var qt,Ht,zt="snippet-",Bt="implementation-snippet-";!function(t){t.IMPLEMENTATION="implementation",t.DYNAMIC="dynamic"}(qt||(qt={})),function(t){t[t.debug=0]="debug",t[t.warn=1]="warn",t[t.error=2]="error",t[t.critical=3]="critical"}(Ht||(Ht={}));var Ft=function(){function t(t,n,i){var r;this.j=n,this.U=new St,this.q=Ht[ut.warn],this.q=Ht[t.minLogLevel||ut.warn],this.M=i||new lt(t,new kt(t,this.U)),this.H=((r={})[ut.debug]=[],r[ut.warn]=[],r[ut.error]=[],r[ut.critical]=[],r),this.B={implementation:{},dynamic:{}},this.M.init()}return t.prototype.send=function(t,n,i){if(void 0===n&&(n=""),void 0===i&&(i=ut.warn),this.F(i,n)){csArray.prototype.push.call(this.H[i],n||"");var r={message:this.V(t,n),stacktrace:this.G(t),app:"uxa",level:i};this.M.send(r)}},t.prototype.V=function(t,n){var i=Ut(t)?this.U.anonymizePII(t.message||t.toString()):t;return n&&(i+=" ErrorCode: ".concat(n)),i},t.prototype.G=function(t){return Ut(t)?"".concat(t.stack||"No stacktrace"," ").concat(this.J()):this.J()},t.prototype.J=function(){var t=this.j.getVisitorService(),n=null==t?void 0:t.getVisitor();if(!n)return"No context";var i=this.j.getSessionService(),r=i&&i.getSession(),e={userId:n.id,sessionNumber:n.visitsCount,pageNumber:r&&r.pageNumber};return csJSON.stringify(e)},t.prototype.F=function(t,n){if(Ht[t]<this.q)return!1;if(0===(null==n?void 0:csString.prototype.indexOf.call(n,Bt,0)))return this.W(n,qt.IMPLEMENTATION);if(0===(null==n?void 0:csString.prototype.indexOf.call(n,zt,0)))return this.W(n,qt.DYNAMIC);var i=this.H[t];return!(i.length>=5)&&(!n||!csArray.prototype.some.call(i,(function(t){return t===n})))},t.prototype.W=function(t,n){return t in this.B[n]?!(this.B[n][t]>=5)&&(this.B[n][t]+=1,!0):(this.B[n][t]=1,!0)},t}(),Vt="undefined"==typeof window,Gt="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:process;var Jt=!Vt&&document.createElement("a"),Wt=/(:443|:80)$/;function Yt(t){return Jt?(Jt.href=t,Jt.href):""}function Xt(t,n){return new csURL(t,n).href}function $t(t){var n=Qt(t);return null===n?"":decodeURIComponent(n.hostname)}function Kt(t,n){return csArray.prototype.some.call(n,(function(n){return Ot(t,".".concat(n))||t===n||""===n}))}function Zt(t){return csString.prototype.replace.call(t,Wt,"")}function Qt(t){return Jt&&(Tt(t,"http://")||Tt(t,"https://"))?(Jt.href=t,{hash:Jt.hash,host:Zt(Jt.host),hostname:Jt.hostname,href:Jt.href,origin:Jt.origin?Jt.origin:Zt("".concat(Jt.protocol,"//").concat(Jt.host)),pathname:(n=Jt.pathname,"/"===n[0]?n:"/".concat(n)),port:Jt.port,protocol:Jt.protocol,search:Jt.search}):null;var n}var tn,nn,rn,en,sn="CS_IFRAME_MESSAGE";!function(t){t.AfterPageView="afterPageView",t.GetSessionKey="getSessionKey"}(tn||(tn={})),function(t){t.Parent="parent",t.Child="child"}(nn||(nn={})),function(t){t.Discovery="discovery",t.Stop="stop",t.RecordingStatus="recordingStatus",t.RecordingEvent="recordingEvent",t.EndOfBufferedMessages="endOfBufferedMessages",t.ChildLogMessage="childLogMessage",t.AnalysisEvent="analysisEvent",t.JavascriptError="javascriptError",t.ApiError="apiError",t.Assets="assets",t.DetailedApiError="detailedApiError",t.EmerchandisingMessage="emerchandisingMessage",t.Commands="commands",t.IntegrationCallback="integrationCallback",t.StaticResource="staticResource",t.TrackingContextResultMessage="trackingContextResultMessage",t.TrackingContextRequestMessage="trackingContextRequestMessage",t.CustomError="customError"}(rn||(rn={})),function(t){t.buildBaseMessage=function(t,n,i,r){var e={type:t,from:n,pid:i,signature:sn};return void 0!==r&&r>=0&&(e.id=r),e},t.isMessageValid=function(t,n,i,r){var e=$t(t.origin);return!!t.data&&!!t.data.type&&t.data.signature===sn&&t.data.from===n&&t.data.pid===i&&Kt(e,r)},t.sendPostMessage=function(t,n,i,r){r?t.postMessage(i,n,r):t.postMessage(i,n)},t.getNewChannelMessage=function(){return new MessageChannel},t.sendChannelMessage=function(t,n){t.postMessage(n)},t.closeChannelPort=function(t){t.close()}}(en||(en={}));var un=function(){function t(t){this.L=t}return t.prototype.send=function(t,n,i){void 0===n&&(n=""),void 0===i&&(i=ut.warn);var r={message:t,errorCode:n,level:i},e=en.buildBaseMessage(rn.ChildLogMessage,nn.Child,this.L.projectId);e.content=r,en.sendPostMessage(window.parent,"*",e)},t}(),on=function(){function t(){}return t.prototype.setContext=function(t,n){this.Y=t,this.X=n},t.prototype.getVisitorService=function(){return this.Y},t.prototype.getSessionService=function(){return this.X},t}(),cn=["t.contentsquare.net","clicktale"];window.addEventListener("error",(function(t){"string"!=typeof t.filename||!csArray.prototype.some.call(cn,(function(n){return csString.prototype.indexOf.call(t.filename,n)>-1}))||csString.prototype.indexOf.call(t.filename,"blob")>-1&&(null==t.message?void 0:csString.prototype.indexOf.call(t.message,"importScripts"))>-1||hn.critical("Uncaught jsError: filename: ".concat(t.filename," - lineno: ").concat(t.lineno," - colno: ").concat(t.colno," - message: ").concat(t.message," "))}));var hn=function(){function t(){}return t.whiteListFilename=function(t){csArray.prototype.push.call(cn,t)},t.setStrategy=function(n){t.$=n},t.computeIsActive=function(n){t.K=et.boolean(n),t.K?t.Z=et.boolean(10):t.Z=!1},t.isLoggingActive=function(){return t.K},t.getStrategy=function(){return t.$},t.debug=function(n,i){void 0===i&&(i=""),t.K&&this.$.send(n,i,ut.debug)},t.warn=function(n,i){void 0===i&&(i=""),t.K&&this.$.send(n,i,ut.warn)},t.error=function(n,i){void 0===i&&(i=""),t.K&&this.$.send(n,i,ut.error)},t.critical=function(t,n){void 0===n&&(n=""),this.$.send(t,n,ut.critical)},t.tryToExecute=function(t,n){var i=this;return function(){for(var r=[],e=0;e<arguments.length;e++)r[e]=arguments[e];try{var s=n.apply(void 0,r);return Mt(window.Promise)&&s instanceof window.Promise?s.then((function(t){return t}),(function(n){return i.error(n,t)})):s}catch(n){try{i.error(n,t)}catch(t){}}}},t.isPerfLoggingActive=function(){return t.Z},t.K=!1,t.Z=!1,t}(),an={debug:function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n]},warn:function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n]},error:function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n]},critical:function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n]}};var fn,vn,ln,dn,wn=function(t){return function(n,i,r){var e=(null==i?void 0:i.toString())||"",s=t||"".concat(n.constructor&&n.constructor.name,".").concat(e);if(r){var u=r.value;r.value=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return function(t,n){return function(){for(var i=[],r=0;r<arguments.length;r++)i[r]=arguments[r];try{var e=n.apply(void 0,i);return Mt(window.Promise)&&e instanceof window.Promise?e.then((function(t){return t}),(function(n){return an.error(n,t)})):e}catch(n){try{an.error(n,t)}catch(t){}}}}(s,u.bind(this)).apply(void 0,t)}}}};!function(t){function n(t){var n=new RegExp("(^|;)[ ]*".concat(t,"=([^;]*)")).exec(document.cookie);return n?decodeURIComponent(n[2]):null}function i(n,i,e,s,u,o){var c=encodeURIComponent("".concat(i)),h=e===t.CURRENT_DOMAIN?void 0:e,a=r(s),f=a?";expires=".concat(a.toUTCString()):"",v=Pt(h)?";domain=".concat(h):"",l="".concat(n,"=").concat(c).concat(f).concat(";path=/").concat(v);return Mt(u)&&u!==ln.NotSet&&(l="".concat(l,";SameSite=").concat(u)),Mt(o)&&o===dn.Yes&&(l="".concat(l,";Secure")),document.cookie=l,!0}function r(t){return It(t)?new csDate(Et()+t):t}function e(t,r){n(t)&&i(t,"",r,new csDate(0)),n(t)&&i(t,"",r,new csDate(0),ln.None,dn.Yes)}t.CURRENT_DOMAIN="CURRENT_DOMAIN",t.get=n,t.set=i,t.toExpireDate=r,t.remove=e,t.isCookiePresent=function(){return document.cookie.length>0},t.getRootDomain=function(t,r){var s="_cs_root-domain",u=n(s);if(null!==u&&"1"!==u)return u;for(var o=csString.prototype.split.call(window.location.hostname,"."),c=csArray.prototype.pop.call(o);o.length&&(null===u||"1"===u);)i(s,c=csArray.prototype.join.call([csArray.prototype.pop.call(o),c],"."),c,void 0,t,r),u=n(s);return e(s,c),c}}(fn||(fn={})),function(t){t.browserIsSafariV12=function(){return window.navigator.vendor&&csString.prototype.indexOf.call(window.navigator.vendor,"Apple")>-1&&window.navigator.appVersion&&csString.prototype.indexOf.call(window.navigator.appVersion,"Version/12.")>-1}}(vn||(vn={})),function(t){t.None="None",t.Lax="Lax",t.NotSet="X"}(ln||(ln={})),function(t){t[t.Yes=1]="Yes",t[t.No=0]="No"}(dn||(dn={}));var yn=function(){function t(t,n,i){this.L=t,this.tt=n,this.nt=i,this.it=!1,this.et=ln.NotSet,this.st=dn.No}return t.prototype.getSameSiteFlag=function(){return this.et},t.prototype.getSecureFlag=function(){return this.st},t.prototype.getDomain=function(){return this.ut},t.prototype.getRootDomain=function(){return this.ot},t.prototype.init=function(){if(!this.L.cookielessTrackingEnabled){var t=this.ht(),n=this.ft();this.it=this.vt(t,n),this.it?(this.et=t,this.st=n):this.L.secureCookiesEnabled&&"https:"===this.tt.getUrlProtocol()&&(this.st=dn.Yes),this.ot=this.lt(),this.ut=this.wt(this.ot)}},t.prototype.vt=function(n,i){return!vn.browserIsSafariV12()&&(fn.set(t.COOKIE_TEST_FOR_SAME_SITE,"Test same site",t.CURRENT_DOMAIN,void 0,n,i),!!fn.get(t.COOKIE_TEST_FOR_SAME_SITE)&&(fn.remove(t.COOKIE_TEST_FOR_SAME_SITE,t.CURRENT_DOMAIN),!0))},t.prototype.ht=function(){return"http:"===this.tt.getUrlProtocol()?ln.Lax:this.nt.isSameSiteNoneSecureNeeded()||this.L.crossDomainTracking?ln.None:ln.Lax},t.prototype.ft=function(){return"http:"===this.tt.getUrlProtocol()?dn.No:this.L.secureCookiesEnabled||this.L.crossDomainTracking||this.nt.isSameSiteNoneSecureNeeded()?dn.Yes:dn.No},t.prototype.isSameSiteSupported=function(){return this.it},t.prototype.set=function(t,n,i){var r=fn.toExpireDate(i);fn.set(t,n,this.ut,r,this.getSameSiteFlag(),this.getSecureFlag())},t.prototype.get=function(t){var n=new RegExp("(^|;)[ ]*".concat(t,"=([^;]*)")).exec(document.cookie);return n?decodeURIComponent(n[2]):null},t.prototype.delete=function(t,n){var i=n||this.ut;fn.remove(t,i)},t.prototype.lt=function(){var t=this.nt.isSameSiteNoneSecureNeeded()&&this.isSameSiteSupported(),n=t?ln.None:void 0,i=t?dn.Yes:void 0;return fn.getRootDomain(n,i)},t.prototype.wt=function(t){return this.L.allowSubdomains?t:fn.CURRENT_DOMAIN},t.CURRENT_DOMAIN="CURRENT_DOMAIN",t.COOKIE_TEST_FOR_SAME_SITE="_cs_same_site",t}(),pn="_cs_t",mn=function(){function t(t,n){this.yt=t,this.L=n,this.gt=!1,this.St=!1}return t.prototype.init=function(){if(!this.L.cookielessTrackingEnabled&&this.yt.isTopWindowTracker()&&"cookie"in document){if(!this.yt.isInIframeContext()&&fn.isCookiePresent())return this.gt=!0,void(this.St=!1);if(fn.set(pn,"1",fn.CURRENT_DOMAIN),null!==fn.get(pn))return this.gt=!0,this.St=!1,void fn.remove(pn,fn.CURRENT_DOMAIN);fn.set(pn,"1",fn.CURRENT_DOMAIN,void 0,ln.None,dn.Yes),null!==fn.get(pn)&&(this.gt=!0,this.St=!0,fn.remove(pn,fn.CURRENT_DOMAIN))}},t.prototype.areCookiesEnabled=function(){return this.gt},t.prototype.isSameSiteNoneSecureNeeded=function(){return this.St},t}();var gn,Sn=function(){function t(t,n){this.L=t,this.nt=n}return t.prototype.canTrack=function(){return this.L.isProjectActive()&&this.At()&&this.bt()&&this.Et()},t.prototype.canTrackInChild=function(){return this.L.isProjectActive()&&this.Rt()&&(this.bt()||this.Nt())},t.prototype.Et=function(){return this.L.cookielessTrackingEnabled?function(){var t="CSSessionStorageTest";try{return sessionStorage.setItem(t,t),sessionStorage.getItem(t)===t&&(sessionStorage.removeItem(t),!0)}catch(t){return!1}}():this.nt.areCookiesEnabled()},t.prototype.bt=function(){return Kt(window.location.hostname,this.L.hostnames)},t.prototype.At=function(){return!this.Tt()&&this.Ot()},t.prototype.Rt=function(){return!this.Tt()&&this.kt()},t.prototype.Nt=function(){return nt(window.location.href,"about:srcdoc")&&"about:"===window.location.protocol&&""===window.location.hostname},t.prototype.Tt=function(){return"visibilityState"in document&&"prerender"===document.visibilityState},t.prototype.Ot=function(){return this.It()&&!!window.localStorage},t.prototype.kt=function(){return this.It()},t.prototype.It=function(){return"pageXOffset"in window&&"pageYOffset"in window&&"onpagehide"in window&&"JSON"in window&&"parse"in window.csJSON&&"stringify"in window.csJSON&&"addEventListener"in window&&"removeEventListener"in window&&"Node"in window&&"filter"in csArray.prototype&&"forEach"in csArray.prototype&&"querySelectorAll"in document&&"now"in csDate&&"keys"in Object&&"performance"in window&&"Map"in window&&"Set"in window},t}(),An=function(){function t(t){var n=this;this.Ct=!1,this.xt=new Map,this._t=new Map,this.Mt=new Map,this.Pt="CS_WORKER_SIGNATURE";var i="\n    const algorithm = ".concat(t.algorithm,";\n    const compressor = (").concat(t.getCompressorSourceCode(),")();\n    ").concat('!function(){"use strict";var e,t=function(){return t=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},t.apply(this,arguments)};function r(e,t,r,n){return new(r||(r=Promise))((function(o,s){function a(e){try{c(n.next(e))}catch(e){s(e)}}function i(e){try{c(n.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,i)}c((n=n.apply(e,t||[])).next())}))}function n(e,t){var r,n,o,s,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return s={next:i(0),throw:i(1),return:i(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function i(i){return function(c){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;s&&(s=0,i[0]&&(a=0)),a;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,c])}}}Object.create,Object.create,"function"==typeof SuppressedError&&SuppressedError,function(e){e.UNCOMPRESSED="0",e.GZIP="2"}(e||(e={}));var o,s=function(){function r(e){var t=this;this.queryParams={},this.headers={},this.handleRecoveredRequests=function(e){for(var r=0,n=e;r<n.length;r++){var o=n[r],s=o.metadata,a=o.events;t.send(a,s)}},this.endpoint=e.endpoint,this.compressionOpts=e.compressionOpts,this.recoveryStorage=e.recoveryStorage,this.recoveryStorage&&this.recoveryStorage.recover(this.handleRecoveredRequests)}return r.prototype.setQueryParams=function(e){var t=this;Object.keys(e).forEach((function(r){t.queryParams[r]=e[r]}))},r.prototype.removeQueryParams=function(e){var t=this;e?e.forEach((function(e){delete t.queryParams[e]})):this.queryParams={}},r.prototype.send=function(r,n){var o=this,s=n||t({},this.queryParams),a=!("ct"in s),i="string"!=typeof r&&!this.isArrayBuffer(r);"ct"in s||(this.compressionOpts&&a?s.ct=this.compressionOpts.compressionType:s.ct=e.UNCOMPRESSED);var c=i?JSON.stringify(r):r,u=Object.keys(s).map((function(e){return"".concat(encodeURIComponent(e),"=").concat(encodeURIComponent(s[e]))})).join("&"),h="".concat(this.endpoint,"?").concat(u);this.compressionOpts&&a&&"string"==typeof c?this.compressionOpts.compressor(c,this.compressionOpts.compressionOutputType,(function(e){return o.doSend(h,s,e)})):this.doSend(h,s,c)},r.prototype.onLoad=function(e){this.onLoadCallback=e},r.prototype.onError=function(e){this.onErrorCallback=e},r.prototype.onTimeout=function(e,t){this.onTimeoutCallback=e,this.timeout=t},r.prototype.abort=function(){this.abortCurrentXhrCall&&this.abortCurrentXhrCall()},r.prototype.setRequestHeader=function(e,t){this.headers[e]=t},r.prototype.getQueryParams=function(){return this.queryParams},r.prototype.isArrayBuffer=function(e){return e&&void 0!==e.byteLength},r.prototype.doSend=function(e,t,r){var n=this,o=new XMLHttpRequest,s=Object.keys(t).map((function(e){return"".concat(encodeURIComponent(e),"=").concat(encodeURIComponent(t[e]))})).join("&");o.open("POST",e),o.onload=function(){if(n.recoveryStorage&&n.recoveryStorage.recover(n.handleRecoveredRequests),n.onLoadCallback){var e={params:t,responseText:o.responseText,status:o.status};n.onLoadCallback(e)}},o.onerror=function(){n.recoveryStorage&&n.recoveryStorage.save({key:s,metadata:t,events:r}),n.onErrorCallback&&n.onErrorCallback({params:t})},this.timeout&&this.onTimeoutCallback&&(o.timeout=this.timeout,o.ontimeout=function(){n.onTimeoutCallback()}),this.abortCurrentXhrCall=function(){return o.abort()},Object.keys(this.headers).forEach((function(e){o.setRequestHeader(e,n.headers[e])})),o.send(r)},r}(),a=function(){function e(e){this.maxStoredBytes=e,this.storageBytesUsed=0}return e.prototype.addString=function(e){this.storageBytesUsed+=2*e.length},e.prototype.addArrayBuffer=function(e){this.storageBytesUsed+=e.byteLength},e.prototype.isThresholdReached=function(){return this.storageBytesUsed>this.maxStoredBytes},e.prototype.reset=function(){this.storageBytesUsed=0},e}(),i=function(){function e(e){this.ramStorage={},this.byteSizeCounter=new a(e)}return e.prototype.save=function(e){var t=e.key,r=e.metadata,n=e.events;this.byteSizeCounter.isThresholdReached()||(this.byteSizeCounter.addString(t),"string"==typeof n?this.byteSizeCounter.addString(n):this.byteSizeCounter.addArrayBuffer(n),this.byteSizeCounter.isThresholdReached()||(this.ramStorage[t]={metadata:r,events:n}))},e.prototype.recover=function(e){var t=this,r=[];this.getStorageKeys().forEach((function(e){var n=t.ramStorage[e];void 0!==n&&(delete n.metadata.datatype,r.push(n),t.removeItem(e))})),0!==r.length&&(e(r),this.byteSizeCounter.reset())},e.prototype.getStorageKeys=function(){return Object.keys(this.ramStorage)},e.prototype.removeItem=function(e){delete this.ramStorage[e]},e}();!function(e){e[e.NOT_STARTED=0]="NOT_STARTED",e[e.OPEN_IN_PROGRESS=1]="OPEN_IN_PROGRESS",e[e.OPEN_FAILED=2]="OPEN_FAILED",e[e.READY=3]="READY"}(o||(o={}));var c=function(){function e(e,t,r){this.storageName=e,this.onOpenError=r,this.cacheState=o.NOT_STARTED,this.toBeSavedBuffer=[],this.recoveryInProgress=0,this.origin=self.origin,this.context="object"==typeof window?"":"worker-",this.byteSizeCounter=new a(t),this.init()}return e.prototype.init=function(){return r(this,void 0,void 0,(function(){return n(this,(function(e){switch(e.label){case 0:return[4,this.openCache()];case 1:return e.sent(),this.cacheState===o.READY?this.flushToBeSavedBuffer():this.onOpenError(this.toBeSavedBuffer),[2]}}))}))},e.prototype.flushToBeSavedBuffer=function(){var e=this;this.toBeSavedBuffer.forEach((function(t){e.save(t)})),this.toBeSavedBuffer=[]},e.prototype.save=function(e){return r(this,void 0,void 0,(function(){var t,r,s;return n(this,(function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),this.cacheState===o.OPEN_IN_PROGRESS?(this.toBeSavedBuffer.push(e),[2]):this.cacheState!==o.READY||this.byteSizeCounter.isThresholdReached()?[2]:(t=e.key,r=e.metadata,s=e.events,this.byteSizeCounter.addString(t),"string"==typeof s?this.byteSizeCounter.addString(s):this.byteSizeCounter.addArrayBuffer(s),this.byteSizeCounter.isThresholdReached()?[2]:[4,this.cache.put("".concat(this.origin,"/").concat(t),new Response(s,{headers:r}))]);case 1:case 2:return n.sent(),[3,3];case 3:return[2]}}))}))},e.prototype.recover=function(e){return r(this,void 0,void 0,(function(){return n(this,(function(t){switch(t.label){case 0:return this.cache?[3,2]:[4,this.openCache()];case 1:if(t.sent(),this.cacheState!==o.READY)return[2];t.label=2;case 2:return this.doRecover(e),[2]}}))}))},e.prototype.openCache=function(){return r(this,void 0,void 0,(function(){var e;return n(this,(function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),this.cacheState=o.OPEN_IN_PROGRESS,e=this,[4,self.caches.open("".concat(this.context).concat(this.storageName))];case 1:return e.cache=t.sent(),this.cacheState=o.READY,[3,3];case 2:return t.sent(),this.cacheState=o.OPEN_FAILED,[3,3];case 3:return[2]}}))}))},e.prototype.doRecover=function(e){return r(this,void 0,void 0,(function(){var t,r,o,s,a=this;return n(this,(function(n){switch(n.label){case 0:return n.trys.push([0,5,6,7]),this.recoveryInProgress++,this.recoveryInProgress>1?[2]:[4,this.cache.keys()];case 1:return 0===(t=n.sent()).length?[2]:[4,this.cache.matchAll()];case 2:return r=n.sent(),o=r.map((function(e){var t={};e.headers.forEach((function(e,r){t[r]=e})),delete t["content-type"];var r=t.datatype;return delete t.datatype,"json"===r||"base64"===r?e.text().then((function(e){return{metadata:t,events:e}})):e.arrayBuffer().then((function(e){return{metadata:t,events:e}}))})),[4,Promise.all(o)];case 3:return s=n.sent(),[4,Promise.all(t.map((function(e){return a.cache.delete(e)})))];case 4:return n.sent(),e(s),this.byteSizeCounter.reset(),[3,7];case 5:return n.sent(),[3,7];case 6:return this.recoveryInProgress--,[7];case 7:return[2]}}))}))},e}(),u=function(){function e(e){self.caches?this.setCachesStrategy(e):this.setRamStorageStrategy()}return e.prototype.save=function(e){this.storageStrategy.save(e)},e.prototype.recover=function(e){this.storageStrategy.recover(e)},e.prototype.setCachesStrategy=function(t){var r=this;this.storageStrategy=new c(t,e.MAX_SIZE,(function(e){r.setRamStorageStrategy(e)}))},e.prototype.setRamStorageStrategy=function(t){var r=this;this.storageStrategy=new i(e.MAX_SIZE),t&&t.forEach((function(e){r.storageStrategy.save(e)}))},e.MAX_SIZE=16777216,e}();!function(){var e="CS_WORKER_SIGNATURE",t=new Map,o=new u("csPersisted");function a(r){var n;if((n=r)&&n.WORKER_SIGNATURE===e)switch(r.type){case"CreatePostRequest":var a=r.endpoint,i=r.compressionOutputType,c=r.useRetry,u={endpoint:a};i&&(u.compressionOpts={compressor:compressor,compressionOutputType:i,compressionType:algorithm}),c&&(u.recoveryStorage=o);var h=new s(u);t.set(a,h),h.onLoad((function(t){var r={type:"onLoad",endpoint:a,response:t,WORKER_SIGNATURE:e};self.postMessage(r)})),h.onError((function(t){var r={type:"onError",endpoint:a,response:t,WORKER_SIGNATURE:e};self.postMessage(r)}));break;case"SetQueryParams":var p=r.endpoint,f=r.queryParams;(h=t.get(p))&&h.setQueryParams(f);break;case"RemoveQueryParams":p=r.endpoint,f=r.queryParams,(h=t.get(p))&&h.removeQueryParams(f);break;case"Send":p=r.endpoint;var y=r.payload;f=r.queryParams,(h=t.get(p))&&h.send(y,f);break;case"Abort":p=r.endpoint,(h=t.get(p))&&h.abort();break;case"SetHeader":p=r.endpoint;var d=r.headerName,l=r.headerValue;(h=t.get(p))&&h.setRequestHeader(d,l);break;case"SetTimeout":var v=r.endpoint,S=r.timeout;(h=t.get(v))&&h.onTimeout((function(){var t={type:"onTimeout",endpoint:v,WORKER_SIGNATURE:e};self.postMessage(t)}),S);break;default:throw new Error(JSON.stringify(r))}}self.addEventListener("message",(function(e){e.data.getReader?function(e,t){r(this,void 0,void 0,(function(){var r,o,s,a;return n(this,(function(n){switch(n.label){case 0:r=e.getReader(),n.label=1;case 1:return[4,r.read()];case 2:return o=n.sent(),s=o.done,a=o.value,s?[3,3]:(t(a),[3,1]);case 3:return[2]}}))}))}(e.data,a):a(e.data)}))}()}();');try{this.Dt=this.Lt(i),this.Ct=!0,this.Ut()&&(this.jt=new ReadableStream({start:function(t){n.qt=t}}),this.Dt.postMessage(this.jt,[this.jt]),this.postMessage=this.postMessageAsTransferable)}catch(t){this.Ct=!1}}return t.prototype.postMessage=function(t){t.WORKER_SIGNATURE=this.Pt,this.Dt.postMessage(t)},t.prototype.postMessageAsTransferable=function(t){t.WORKER_SIGNATURE=this.Pt,this.qt.enqueue(t)},t.prototype.Lt=function(t){var n=this,i=window.csURL||window.webkitURL,r=window.Blob,e=window.Worker,s=new r([t],{type:"application/javascript"}),u=i.createObjectURL(s);hn.whiteListFilename(u);var o=new e(u);return o.onmessage=function(t){var i=t.data,r=i.type,e=i.endpoint;if(i.WORKER_SIGNATURE===n.Pt)if("onLoad"===r){var s=t.data.response;(u=n.xt.get(e))&&u(s)}else if("onError"===r){s=t.data.response;(u=n._t.get(e))&&u(s)}else if("onTimeout"===r){var u;(u=n.Mt.get(e))&&u()}},o},t.prototype.registerOnLoadCallback=function(t,n){this.xt.set(t,n)},t.prototype.registerOnErrorCallback=function(t,n){this._t.set(t,n)},t.prototype.registerOnTimeoutCallback=function(t,n){this.Mt.set(t,n)},t.prototype.isSupported=function(){return this.Ct},t.prototype.Ut=function(){try{var t=new ReadableStream;return structuredClone(t,{transfer:[t]}),!0}catch(t){return!1}},t}(),bn=function(){function t(t){this.Ht={},this.zt=t.endpoint,this.Bt=t.networkWorker,this.Ft=t.compressionOutputType,this.Vt=t.useRetry,this.Bt.postMessage({type:"CreatePostRequest",endpoint:this.zt,compressionOutputType:this.Ft,useRetry:this.Vt})}return t.prototype.setQueryParams=function(t){var n=this;this.Bt.postMessage({type:"SetQueryParams",endpoint:this.zt,queryParams:t}),csArray.prototype.forEach.call(Object.keys(t),(function(i){n.Ht[i]=t[i]}))},t.prototype.getQueryParams=function(){return this.Ht},t.prototype.removeQueryParams=function(t){var n=this;this.Bt.postMessage({type:"RemoveQueryParams",endpoint:this.zt,queryParams:t}),t&&csArray.prototype.forEach.call(t,(function(t){delete n.Ht[t]}))},t.prototype.send=function(t,n){this.Bt.postMessage({type:"Send",endpoint:this.zt,payload:t,queryParams:n})},t.prototype.abort=function(){this.Bt.postMessage({type:"Abort",endpoint:this.zt})},t.prototype.onLoad=function(t){this.Bt.registerOnLoadCallback(this.zt,t)},t.prototype.onError=function(t){this.Bt.registerOnErrorCallback(this.zt,t)},t.prototype.setRequestHeader=function(t,n){this.Bt.postMessage({type:"SetHeader",endpoint:this.zt,headerName:t,headerValue:n})},t.prototype.onTimeout=function(t,n){this.Bt.registerOnTimeoutCallback(this.zt,t),this.Bt.postMessage({type:"SetTimeout",endpoint:this.zt,timeout:n})},t}();!function(t){t.UNCOMPRESSED="0",t.GZIP="2"}(gn||(gn={}));var En,Rn,Nn,Tn=function(t){this.onError=t},On=function(){function t(t){var n=this;this.Ht={},this.Gt={},this.Jt=function(t){for(var i=0,r=t;i<r.length;i++){var e=r[i],s=e.metadata,u=e.events;n.send(u,s)}},this.zt=t.endpoint,this.Wt=t.compressionOpts,this.Yt=t.recoveryStorage,this.Yt&&this.Yt.recover(this.Jt)}return t.prototype.setQueryParams=function(t){var n=this;Object.keys(t).forEach((function(i){n.Ht[i]=t[i]}))},t.prototype.removeQueryParams=function(t){var n=this;t?t.forEach((function(t){delete n.Ht[t]})):this.Ht={}},t.prototype.send=function(t,n){var i=this,r=n||W({},this.Ht),e=!("ct"in r),s="string"!=typeof t&&!this.Xt(t);"ct"in r||(this.Wt&&e?r.ct=this.Wt.compressionType:r.ct=gn.UNCOMPRESSED);var u=s?JSON.stringify(t):t,o=Object.keys(r).map((function(t){return"".concat(encodeURIComponent(t),"=").concat(encodeURIComponent(r[t]))})).join("&"),c="".concat(this.zt,"?").concat(o);this.Wt&&e&&"string"==typeof u?this.Wt.compressor(u,this.Wt.compressionOutputType,(function(t){return i.$t(c,r,t)})):this.$t(c,r,u)},t.prototype.onLoad=function(t){this.Kt=t},t.prototype.onError=function(t){this.Zt=t},t.prototype.onTimeout=function(t,n){this.Qt=t,this.tn=n},t.prototype.abort=function(){this.nn&&this.nn()},t.prototype.setRequestHeader=function(t,n){this.Gt[t]=n},t.prototype.getQueryParams=function(){return this.Ht},t.prototype.Xt=function(t){return t&&void 0!==t.byteLength},t.prototype.$t=function(t,n,i){var r=this,e=new XMLHttpRequest,s=Object.keys(n).map((function(t){return"".concat(encodeURIComponent(t),"=").concat(encodeURIComponent(n[t]))})).join("&");e.open("POST",t),e.onload=function(){if(r.Yt&&r.Yt.recover(r.Jt),r.Kt){var t={params:n,responseText:e.responseText,status:e.status};r.Kt(t)}},e.onerror=function(){r.Yt&&r.Yt.save({key:s,metadata:n,events:i}),r.Zt&&r.Zt({params:n})},this.tn&&this.Qt&&(e.timeout=this.tn,e.ontimeout=function(){r.Qt()}),this.nn=function(){return e.abort()},Object.keys(this.Gt).forEach((function(t){e.setRequestHeader(t,r.Gt[t])})),e.send(i)},t}(),kn=function(){function t(t){this.rn=t,this.Bt=new An(this.rn)}return t.prototype.create=function(t,n,i,r){if(this.Bt.isSupported()&&n)return new bn({networkWorker:this.Bt,endpoint:t,compressionOutputType:i,useRetry:!!r});var e=i?{compressor:this.rn.compress,compressionOutputType:i,compressionType:this.rn.algorithm}:void 0;return new On({endpoint:t,compressionOpts:e,recoveryStorage:r})},t}(),In=function(){function t(t,n,i,r,e){this.Y=t,this.X=n,this.en=i,this.un=r,this.L=e}return t.prototype.get=function(){return{exclusion:this.en.getAppliedTrackingDraw(),visitor:this.Y.getVisitor(),session:this.X.getSession(),cvars:this.un.getCustomVariablesSession()}},t.prototype.apply=function(t){t&&(t.exclusion?this.exclude():this.include(t))},t.prototype.exclude=function(){this.en.exclude(this.L),this.Y.removeVisitor(),this.X.removeSession(),this.un.removeCustomVariablesSession()},t.prototype.include=function(t){this.en.removeExclusion(),this.Y.setVisitor(t.visitor),t.session?this.X.setSession(t.session):this.X.removeSession(),t.cvars?this.un.setCustomVariableSession(t.cvars):this.un.removeCustomVariablesSession()},t}(),Cn="_cs_id",xn=/^(([a-z0-9\-])+(\.[0-9]+){6})(\.(None|Lax|X)\.(0|1))?(\.[0-1])?$/,_n=function(){function t(t,n,i){this.L=t,this.cn=n,this.hn=i}return t.prototype.onCookieToSet=function(t){this.an=t},t.prototype.onCookieToRemove=function(t){this.fn=t},t.prototype.get=function(){var n;return(n=this.L.cookielessTrackingEnabled?this.hn.getItem(Cn):this.cn.get(Cn))?t.fromString(n):null},t.prototype.set=function(n){var i,r=t.toString(n);if(this.L.cookielessTrackingEnabled)this.hn.setItem(Cn,r);else{var e=new csDate(n.expires);this.cn.set(Cn,r,e),null===(i=this.an)||void 0===i||i.call(this,Cn,r,e)}},t.prototype.remove=function(){var t;this.L.cookielessTrackingEnabled?this.hn.removeItem(Cn):(this.cn.delete(Cn),null===(t=this.fn)||void 0===t||t.call(this,Cn))},t.prototype.handleSubdomainChange=function(){if(!this.L.cookielessTrackingEnabled){var t=this.get();t&&(t.allowSubdomains=this.L.allowSubdomains,this.L.allowSubdomains?this.cn.delete(Cn,yn.CURRENT_DOMAIN):this.cn.delete(Cn,this.cn.getRootDomain()),this.set(t))}},t.fromString=function(t){var n=csString.prototype.split.call(t,"."),i=n[0],r=n[1],e=n[2],s=n[3],u=n[4],o=n[5],c=n[6],h=n[7];return{id:i,creationTimestamp:Number(r),visitsCount:Number(e),hitTimestamp:Number(s),lastVisitTimestamp:Number(u),appliedTrackingDraw:Number(o),expires:Number(c),allowSubdomains:void 0===h?void 0:!!Number(h)}},t.toString=function(t){return csArray.prototype.join.call([t.id,t.creationTimestamp,t.visitsCount,t.hitTimestamp,t.lastVisitTimestamp,t.appliedTrackingDraw,t.expires,t.allowSubdomains?1:0],".")},t.isValidVisitorString=function(t){return xn.test(t)},t}();!function(t){t.BLOCKED_BY_CONSENT_NOT_EXPRESSED="B",t.BLOCKED_BY_CONSENT_WITHDRAWN="W",t.NOT_RECORDED="0",t.TEMPORARILY_RECORDED="T",t.GLOBAL_SAMPLING="5",t.URL_SAMPLING="6",t.ETR_SAMPLING="7"}(En||(En={})),function(t){t.ETR_OFF="0",t.ETR_ON="1"}(Rn||(Rn={})),function(t){t.ETR_LEGACY="0",t.ETR_SESSION="1",t.ETR_PAGE="2"}(Nn||(Nn={}));var Mn,Pn="_cs_s",Dn=18e5,Ln=/^(\d+\.[013567TBW](\.[01])?)(\.\d+)?$/,Un=".";!function(t){t[t.NOT_FOUND=0]="NOT_FOUND",t[t.EXPIRED=1]="EXPIRED",t[t.FOUND=2]="FOUND"}(Mn||(Mn={}));var jn,qn=function(){function t(t,n,i){this.L=t,this.cn=n,this.hn=i,this.vn=null,this.ln=!1}return t.prototype.get=function(n){var i=this.getRawSession(n);return this.isValid(i)?t.fromString(i):null},t.prototype.getRawSession=function(n){if(n){var i=this.dn();return t.wn(i)}var r=this.yn(),e=r.sessionString,s=r.status,u=t.wn(e);if(s!==Mn.EXPIRED)return u;if(this.L.cookielessTrackingEnabled)return null;var o=this.dn();if(!o)return null;var c=csString.prototype.split.call(o,Un);if(!t.mn(c))return o;var h=c[c.length-1],a=parseInt(h,10);return isNaN(a)||this.gn(a),u},t.prototype.onCookieToSet=function(t){this.an=t},t.prototype.onCookieToRemove=function(t){this.fn=t},t.prototype.set=function(t,n){var i;void 0===n&&(n=Dn);var r=Et()+n,e=this.toString(t);e+="".concat(Un).concat(r),this.Sn(e,r),this.L.cookielessTrackingEnabled?this.hn.setItem(Pn,e):(this.cn.set(Pn,e,n),null===(i=this.an)||void 0===i||i.call(this,Pn,e,n))},t.prototype.remove=function(){var t;this.L.cookielessTrackingEnabled?this.hn.removeItem(Pn):(this.cn.delete(Pn),null===(t=this.fn)||void 0===t||t.call(this,Pn)),this.An()},t.prototype.handleSubdomainChange=function(){if(!this.L.cookielessTrackingEnabled){var t=this.get(!0);t&&(this.L.allowSubdomains?this.cn.delete(Pn,yn.CURRENT_DOMAIN):this.cn.delete(Pn,this.cn.getRootDomain()),this.set(t))}},t.prototype.isValid=function(n){return null!==n&&t.isValidSessionString(n)},t.prototype.toString=function(t){return csArray.prototype.join.call([t.pageNumber,t.recordingState,t.etrState],Un)},t.prototype.Sn=function(t,n){this.vn={sessionString:t,expires:n}},t.prototype.yn=function(){return this.vn?this.vn&&Et()<=this.vn.expires?{sessionString:this.vn.sessionString,status:Mn.FOUND}:{sessionString:this.vn.sessionString,status:Mn.EXPIRED}:{sessionString:this.dn(),status:Mn.NOT_FOUND}},t.prototype.An=function(){this.vn=null},t.prototype.gn=function(t){this.vn&&(this.vn.expires=t,this.ln=!0)},t.prototype.isCacheRefreshed=function(){return this.ln},t.prototype.resetCacheRefreshed=function(){this.ln=!1},t.prototype.dn=function(){if(this.L.cookielessTrackingEnabled){var t=this.hn.getItem(Pn);return!t||this.bn(t)?null:t}var n=this.cn.get(Pn);return!n||this.bn(n)?null:n},t.prototype.bn=function(n){var i=csString.prototype.split.call(n,Un);if(!t.mn(i))return!1;var r=parseInt(i[i.length-1],10);return!isNaN(r)&&Et()>r},t.mn=function(t){return 13===t[t.length-1].length},t.wn=function(t){var n;if(!t)return null;var i=null===(n=csString.prototype.match.call(t,Ln))||void 0===n?void 0:n[1];return null!=i?i:null},t.fromRawString=function(n){var i=t.wn(n);return null!==i?t.fromString(i):null},t.fromString=function(t){var n,i=csString.prototype.split.call(t,Un),r=i[0];return{recordingState:i[1],etrState:null!==(n=i[2])&&void 0!==n?n:Rn.ETR_OFF,pageNumber:parseInt(r,10)}},t.isValidSessionString=function(t){return Ln.test(t)},t}();!function(t){t.fromRaw=function(t){return{exclusion:Number(t._cs_ex)||0,visitor:t._cs_id?_n.fromString(t._cs_id):null,session:t._cs_s?qn.fromRawString(t._cs_s):null,cvars:t._cs_cvars?window.csJSON.parse(t._cs_cvars):null}}}(jn||(jn={}));var Hn,zn="_cs_ex",Bn=2592e6,Fn=/^[0-9]+$/,Vn=function(){function t(t,n,i){this.L=t,this.cn=n,this.hn=i}return t.prototype.onCookieToSet=function(t){this.an=t},t.prototype.onCookieToRemove=function(t){this.fn=t},t.prototype.get=function(){return this.L.cookielessTrackingEnabled?Number(this.hn.getItem(zn)):Number(this.cn.get(zn))},t.prototype.set=function(t){var n;this.L.cookielessTrackingEnabled?this.hn.setItem(zn,t):(this.cn.set(zn,t,Bn),null===(n=this.an)||void 0===n||n.call(this,zn,t,Bn))},t.prototype.remove=function(){var t;this.L.cookielessTrackingEnabled?this.hn.removeItem(zn):(this.cn.delete(zn),null===(t=this.fn)||void 0===t||t.call(this,zn))},t.isValidExclusionString=function(t){return Fn.test(t)},t}(),Gn="_cs_cvars",Jn=function(){function t(t,n,i){this.L=t,this.cn=n,this.hn=i}return t.prototype.onCookieToSet=function(t){this.an=t},t.prototype.onCookieToRemove=function(t){this.fn=t},t.prototype.get=function(){return this.L.cookielessTrackingEnabled?this.hn.getItem(Gn):this.cn.get(Gn)},t.prototype.set=function(t){var n;this.L.cookielessTrackingEnabled?this.hn.setItem(Gn,t):(this.cn.set(Gn,t),null===(n=this.an)||void 0===n||n.call(this,Gn,t))},t.prototype.remove=function(){var t;this.L.cookielessTrackingEnabled?this.hn.removeItem(Gn):(this.cn.delete(Gn),null===(t=this.fn)||void 0===t||t.call(this,Gn))},t.isValidCustomVarString=function(t){return"string"==typeof t},t}();!function(t){function n(t){var n=["_cs_ex","_cs_id","_cs_s","_cs_cvars"];return csArray.prototype.every.call(Object.keys(t),(function(t){return csArray.prototype.indexOf.call(n,t)>=0}))}t.isRawDomainState=n,t.isValid=function(t){return!!n(t)&&((!t._cs_id||_n.isValidVisitorString(t._cs_id))&&(!t._cs_s||qn.isValidSessionString(t._cs_s))&&(!t._cs_ex||Vn.isValidExclusionString(t._cs_ex))&&(!t._cs_cvars||Jn.isValidCustomVarString(t._cs_cvars)))}}(Hn||(Hn={}));var Wn=function(){function t(t,n){this.En=t,this.Rn=n}return t.prototype.retrieve=function(n,i){var r=this;this.Nn=i,this.retrievedStates=[],this.Tn=csArray.prototype.map.call(csArray.prototype.filter.call(n,(function(t){return r.On(t)})),t.getXdframeOrigin),this.En.onMessage((function(t){r.kn(t)})),this.En.onTimeout((function(){r.In()})),this.En.start(),csArray.prototype.forEach.call(csArray.prototype.map.call(this.Tn,t.getXdframeUrl),(function(t){return r.En.open(t)}))},t.prototype.kn=function(t){if(this.Cn(t)){var n=t.data;if(!Hn.isValid(n))throw this.En.stop(),"Invalid domain state: ".concat(csJSON.stringify(t.data)," from ").concat(t.origin);csArray.prototype.push.call(this.retrievedStates,n)}this.xn()&&(this.En.stop(),this.Nn(csArray.prototype.map.call(this.retrievedStates,jn.fromRaw)))},t.prototype.In=function(){hn.warn("xdframe: all messages not received")},t.prototype.Cn=function(t){return csArray.prototype.indexOf.call(this.Tn,t.origin)>-1},t.prototype.xn=function(){return this.retrievedStates.length===this.Tn.length},t.prototype.On=function(t){return!it(this.Rn.hostname,t)},t.getXdframeOrigin=function(t){return"https://csxd.".concat(t)},t.getXdframeUrl=function(t){return"".concat(t,"/xdframe-").concat("1.0.0",".html")},t}(),Yn=function(){function t(){var t=this;this._n=3e3,this.Mn=function(n){t.handleMessage(n)}}return t.prototype.onMessage=function(t){this.Pn=t},t.prototype.onTimeout=function(t){this.Qt=t},t.prototype.start=function(){var t=this;window.addEventListener("message",this.Mn),this.Dn=window.setTimeout((function(){t.Qt()}),this._n)},t.prototype.open=function(t){var n=document.createElement("iframe");return n.src=t,n.setAttribute("hidden",""),n.setAttribute("title","Intentionally blank"),document.body.appendChild(n),n},t.prototype.stop=function(){window.removeEventListener("message",this.Mn),window.clearTimeout(this.Dn),this.Pn=tt,this.Qt=tt},t.prototype.handleMessage=function(t){this.Pn(t)},X([wn("XdframeMessage")],t.prototype,"handleMessage",null),t}();function Xn(t,n){void 0===n&&(n=0);var i=Math.pow(10,n);return Math.round(t*i)/i}var $n=function(){return $n=Object.assign||function(t){for(var n,i=1,r=arguments.length;i<r;i++)for(var e in n=arguments[i])Object.prototype.hasOwnProperty.call(n,e)&&(t[e]=n[e]);return t},$n.apply(this,arguments)};function Kn(t,n,i,r){var e,s=arguments.length,u=s<3?n:null===r?r=Object.getOwnPropertyDescriptor(n,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)u=Reflect.decorate(t,n,i,r);else for(var o=t.length-1;o>=0;o--)(e=t[o])&&(u=(s<3?e(u):s>3?e(n,i,u):e(n,i))||u);return s>3&&u&&Object.defineProperty(n,i,u),u}function Zn(t,n,i,r){return new(i||(i=Promise))((function(e,s){function u(t){try{c(r.next(t))}catch(t){s(t)}}function o(t){try{c(r.throw(t))}catch(t){s(t)}}function c(t){var n;t.done?e(t.value):(n=t.value,n instanceof i?n:new i((function(t){t(n)}))).then(u,o)}c((r=r.apply(t,n||[])).next())}))}function Qn(t,n){var i,r,e,s,u={label:0,sent:function(){if(1&e[0])throw e[1];return e[1]},trys:[],ops:[]};return s={next:o(0),throw:o(1),return:o(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function o(o){return function(c){return function(o){if(i)throw new TypeError("Generator is already executing.");for(;s&&(s=0,o[0]&&(u=0)),u;)try{if(i=1,r&&(e=2&o[0]?r.return:o[0]?r.throw||((e=r.return)&&e.call(r),0):r.next)&&!(e=e.call(r,o[1])).done)return e;switch(r=0,e&&(o=[2&o[0],e.value]),o[0]){case 0:case 1:e=o;break;case 4:return u.label++,{value:o[1],done:!1};case 5:u.label++,r=o[1],o=[0];continue;case 7:o=u.ops.pop(),u.trys.pop();continue;default:if(!(e=u.trys,(e=e.length>0&&e[e.length-1])||6!==o[0]&&2!==o[0])){u=0;continue}if(3===o[0]&&(!e||o[1]>e[0]&&o[1]<e[3])){u.label=o[1];break}if(6===o[0]&&u.label<e[1]){u.label=e[1],e=o;break}if(e&&u.label<e[2]){u.label=e[2],u.ops.push(o);break}e[2]&&u.ops.pop(),u.trys.pop();continue}o=n.call(t,u)}catch(t){o=[6,t],r=0}finally{i=e=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,c])}}}Object.create;function ti(t,n,i){if(i||2===arguments.length)for(var r,e=0,s=n.length;e<s;e++)!r&&e in n||(r||(r=Array.prototype.slice.call(n,0,e)),r[e]=n[e]);return t.concat(r||Array.prototype.slice.call(n))}Object.create;"function"==typeof SuppressedError&&SuppressedError;function ni(t,n){"number"==typeof n&&(n={wait:n});var i,r=n.wait;if(n.ignoreThrottledCalls){var e=0;return function(){for(var n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];var s=Et();if(s-e>r)return e=s,t.apply(this,n)}}var s,u=[],o=null,c=0,h=function(){c=Et(),o=null,s=t.apply(i,u)},a=function(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];var a=Et(),f=r-(a-c);return i=null!=this?this:window,u=ti([],n,!0),f<=0||f>r?(c=a,s=t.apply(i,u),o?(window.clearTimeout(o),o=null):u=[]):o||(o=window.setTimeout(h,f)),s};return a.cancel=function(){o&&(window.clearTimeout(o),c=0,o=null,u=[])},a.flushPending=function(){o&&(window.clearTimeout(o),h())},a}var ii,ri,ei,si;!function(t){t[t.MUTATION_INSERT=1]="MUTATION_INSERT",t[t.MUTATION_REMOVE=2]="MUTATION_REMOVE",t[t.MUTATION_ATTRIBUTE=3]="MUTATION_ATTRIBUTE",t[t.MUTATION_CHARACTER_DATA=4]="MUTATION_CHARACTER_DATA",t[t.INITIAL_DOM=5]="INITIAL_DOM",t[t.SCROLL=6]="SCROLL",t[t.CLICK=8]="CLICK",t[t.RESIZE=9]="RESIZE",t[t.INPUT_CHECKABLE=10]="INPUT_CHECKABLE",t[t.INPUT_SELECT=11]="INPUT_SELECT",t[t.INPUT_TEXT=12]="INPUT_TEXT",t[t.HASH_CHANGE=13]="HASH_CHANGE",t[t.UNANONYMIZED_CONSENT_GRANTED=14]="UNANONYMIZED_CONSENT_GRANTED",t[t.UNANONYMIZED_CONSENT_WITHDRAWN=15]="UNANONYMIZED_CONSENT_WITHDRAWN",t[t.MOUSE_OVER=16]="MOUSE_OVER",t[t.VISIBILITY_CHANGE=17]="VISIBILITY_CHANGE",t[t.STYLESHEET_RULE_INSERT=18]="STYLESHEET_RULE_INSERT",t[t.STATIC_RESOURCE_URL=19]="STATIC_RESOURCE_URL",t[t.PERFORMANCE_TIMINGS=20]="PERFORMANCE_TIMINGS",t[t.ATTACH_SHADOW=22]="ATTACH_SHADOW",t[t.STYLESHEET_CSS_TEXT_UPDATE=23]="STYLESHEET_CSS_TEXT_UPDATE",t[t.JAVASCRIPT_ERROR=26]="JAVASCRIPT_ERROR",t[t.PAGE_EVENT=27]="PAGE_EVENT",t[t.API_ERROR=28]="API_ERROR",t[t.TEXT_VISIBILITY=29]="TEXT_VISIBILITY",t[t.MUTATION_ENCRYPTED_CHARACTER_DATA=30]="MUTATION_ENCRYPTED_CHARACTER_DATA",t[t.INPUT_ENCRYPTED_TEXT=31]="INPUT_ENCRYPTED_TEXT",t[t.KEY_DOWN=32]="KEY_DOWN",t[t.KEY_UP=33]="KEY_UP",t[t.CLIPBOARD_COMMAND=34]="CLIPBOARD_COMMAND",t[t.STYLESHEET_RULE_DELETE=37]="STYLESHEET_RULE_DELETE",t[t.USER_IDENTIFIER=38]="USER_IDENTIFIER",t[t.TOUCH_START=41]="TOUCH_START",t[t.TOUCH_MOVE=42]="TOUCH_MOVE",t[t.TOUCH_END=43]="TOUCH_END",t[t.GESTURE_RECOGNITION=44]="GESTURE_RECOGNITION",t[t.POINTER_DOWN=47]="POINTER_DOWN",t[t.POINTER_MOVE=48]="POINTER_MOVE",t[t.POINTER_UP=49]="POINTER_UP",t[t.CUSTOM_ERROR=50]="CUSTOM_ERROR",t[t.CUSTOM_ELEMENT_REGISTRATION=54]="CUSTOM_ELEMENT_REGISTRATION",t[t.REGISTER_ADOPTED_STYLE_SHEET=60]="REGISTER_ADOPTED_STYLE_SHEET",t[t.SET_ADOPTED_STYLE_SHEETS=61]="SET_ADOPTED_STYLE_SHEETS",t[t.ADOPTED_STYLESHEET_RULE_INSERT=62]="ADOPTED_STYLESHEET_RULE_INSERT",t[t.ADOPTED_STYLESHEET_RULE_DELETE=63]="ADOPTED_STYLESHEET_RULE_DELETE",t[t.SCREEN_RESIZE=65]="SCREEN_RESIZE",t[t.RESOURCE_HASHES=66]="RESOURCE_HASHES",t[t.PERFORMANCE_NAVIGATION_TIMING=67]="PERFORMANCE_NAVIGATION_TIMING",t[t.PERFORMANCE_RESOURCE_TIMING=68]="PERFORMANCE_RESOURCE_TIMING",t[t.RECORDING_INFO_EVENT=72]="RECORDING_INFO_EVENT",t[t.TEXT_REF=73]="TEXT_REF",t[t.TOUCH_CANCEL=74]="TOUCH_CANCEL",t[t.MUTATION_MOVE=75]="MUTATION_MOVE"}(ii||(ii={})),function(t){t[t.RECORDING_CONSENT_FOR_SESSION_GRANTED=1]="RECORDING_CONSENT_FOR_SESSION_GRANTED",t[t.RECORDING_CONSENT_FOR_SESSION_WITHDRAWN=2]="RECORDING_CONSENT_FOR_SESSION_WITHDRAWN"}(ri||(ri={})),function(t){t[t.Left=0]="Left",t[t.Middle=1]="Middle",t[t.Right=2]="Right",t[t.Fourth=3]="Fourth",t[t.Fifth=4]="Fifth"}(ei||(ei={})),function(t){t[t.SWIPE=0]="SWIPE",t[t.PINCH_IN=1]="PINCH_IN",t[t.PINCH_OUT=2]="PINCH_OUT",t[t.LONG_PRESS=3]="LONG_PRESS",t[t.TAP=4]="TAP",t[t.DOUBLE_TAP=5]="DOUBLE_TAP"}(si||(si={}));var ui,oi,ci=!0;function hi(t,n){void 0===n&&(n=ci),t.boundElement.addEventListener(t.type,t.listener,n)}function ai(t,n){void 0===n&&(n=ci),t.boundElement.removeEventListener(t.type,t.listener,n)}!function(t){t[t.SPACE=0]="SPACE",t[t.ENTER=1]="ENTER",t[t.BACKSPACE=2]="BACKSPACE",t[t.DELETE=3]="DELETE",t[t.ARROWUP=4]="ARROWUP",t[t.ARROWDOWN=5]="ARROWDOWN",t[t.ARROWLEFT=6]="ARROWLEFT",t[t.ARROWRIGHT=7]="ARROWRIGHT",t[t.CAPSLOCK=8]="CAPSLOCK",t[t.SHIFT=9]="SHIFT",t[t.TAB=10]="TAB",t[t.ALPHANUMERICAL=11]="ALPHANUMERICAL",t[t.ESCAPE=12]="ESCAPE",t[t.END=13]="END",t[t.ALT=14]="ALT",t[t.CTRL=15]="CTRL",t[t.META=16]="META"}(ui||(ui={})),function(t){t[t.COPY=0]="COPY",t[t.CUT=1]="CUT",t[t.PASTE=2]="PASTE"}(oi||(oi={}));var fi=function(){function t(){}return t.isEmpty=function(){return 0===t.Ln.length},t.add=function(n){var i;(i=csArray.prototype.push).call.apply(i,Z([t.Ln],n,!1))},t.getAll=function(){return t.Ln},t.clear=function(){t.Ln=[]},t.Ln=[],t}(),vi=50,li=.1;var di=!1;var wi=[],yi=[];var pi=function(t){return function(n,i,r){var e=r.value;r.value=function(){if(!di)return r.value=e,e.apply(this,arguments);!function(t){csArray.prototype.push.call(wi,t),performance.mark("".concat(t,"-start"))}(t);var n=e.apply(this,arguments);return function(t){var n=performance.measure(t,"".concat(t,"-start"));if(n){var i=n.duration;i>=li&&csArray.prototype.push.call(yi,{mName:t,mDuration:+i.toFixed(2)}),csArray.prototype.pop.call(wi),0===wi.length&&(i>vi&&fi.add(yi),yi=[])}}(t),n}}},mi=function(t){return function(n,i,r){var e=r.value;r.value=function(){for(var n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];if(!di)return r.value=e,e.apply(this,n);!function(t){performance.mark("".concat(t,"-start"))}(t);var s=e.apply(this,n);return s.then((function(){!function(t){var n=performance.measure(t,"".concat(t,"-start"));if(n){var i=n.duration;i>vi&&fi.add([{mName:t,mDuration:+i.toFixed(2)}])}}(t)})),s}}};function gi(t){var n=csEventtarget.apply(t);return n&&a(n)&&csElementshadowRoot.apply(n)&&t.composedPath?t.__csOriginalTarget||t.composedPath()[0]:n}function Si(){return function(t,n,i){var r=i.value;i.value=function(t,n){!1===(null==t?void 0:t.isTrusted)&&Si.enabled||r.call(this,t,n)}}}Si.enabled=!0;var Ai,bi,Ei=!!window.chrome,Ri="data-cs-scroll-container";!function(t){t.isEventOnScrollContainer=function(t){return!!(Pt(t)&&function(t){try{if(Pt(csEventtarget.apply(t)))return!0}catch(t){}return!1}(t)&&Lt(csEventtarget.apply(t))&&null!==csEventtarget.apply(t).getAttribute(Ri))},t.getScrollContainer=function(){return window.csquerySelector[document.nodeType].call(document,"[".concat(Ri,"]"))}}(Ai||(Ai={}));bi=Gt.Element;var Ni=window.csElementmatches||window.csElementmatchesSelector||window.csElementmozMatchesSelector||window.csElementmsMatchesSelector||window.csElementoMatchesSelector||window.csElementwebkitMatchesSelector,Ti=document.createElement("div");var Oi,ki,Ii,Ci=(Oi=csSymbol.for("propStore"),{getStore:function(t){return t[Oi]},get:function(t,n){var i=t[Oi];return null==i?void 0:i[n]},set:function(t,n,i){var r=t[Oi];r||(r={},t[Oi]=r),r[n]=i}});!function(t){function n(t,i,r){var e=!1;if(r(t,i,(function(){return e=!0})),!e){var s=t.shadowRoot;s&&n(s,t,r);var u=t.children;if(null==u?void 0:u.length)for(var o=0,c=u;o<c.length;o++){if(n(c[o],t,r),e)break}}}t.setProperty=function(t,n,i){var r;t instanceof Node?Ci.set(t,n,i):(null!==(r=t.props)&&void 0!==r||(t.props={}),t.props[n]=i)},t.getProperty=function(t,n){var i;return t instanceof Node?Ci.get(t,n):null===(i=t.props)||void 0===i?void 0:i[n]},t.getProperties=function(t){return t instanceof Node?Ci.getStore(t):t.props},t.traverse=function(t,i){n(t,void 0,i)}}(ki||(ki={})),function(t){var n;!function(t){t[t.NotSensitive=0]="NotSensitive",t[t.Parent=1]="Parent",t[t.Child=2]="Child"}(n=t.SensitiveState||(t.SensitiveState={})),t.sensitiveProp="sensitive",t.sensitiveAttributeProp="sensitiveAttribute",t.getSensitiveDetails=function(i){var r;return null!==(r=ki.getProperty(i,t.sensitiveProp))&&void 0!==r?r:{state:n.NotSensitive}},t.getAttributeSensitiveDetails=function(n){var i;return null!==(i=ki.getProperty(n,t.sensitiveAttributeProp))&&void 0!==i?i:{attributes:[]}},t.isSensitive=function(i){var r=ki.getProperty(i,t.sensitiveProp);return(null==r?void 0:r.state)===n.Parent},t.isSensitiveChild=function(i){var r=ki.getProperty(i,t.sensitiveProp);return(null==r?void 0:r.state)===n.Child},t.isSensitiveAttribute=function(n,i){var r=ki.getProperty(n,t.sensitiveAttributeProp);return(null==(null==r?void 0:r.attributes)?void 0:csArray.prototype.indexOf.call(null==r?void 0:r.attributes,i))>-1},t.setSensitiveProperty=function(n,i){ki.setProperty(n,t.sensitiveProp,i)},t.unsetSensitiveProperty=function(n){ki.setProperty(n,t.sensitiveProp,void 0)},t.setSensitiveAttributeProperty=function(n,i){ki.setProperty(n,t.sensitiveAttributeProp,i)},t.getComputedAttributeSelector=function(t){var n="";return csArray.prototype.forEach.call(t,(function(t){var i=csString.prototype.split.call(t.selector,",");csArray.prototype.forEach.call(i,(function(t){(function(t){if(!t||!xt(t))return an.warn("isValidSelector: invalid selector provided '".concat(t,"'")),!1;try{return Ni.call(Ti,t),!0}catch(n){return an.warn("isValidSelector: invalid selector provided '".concat(t,"'")),!1}})(t)&&(n&&(n+=","),n+=t)}))})),n}}(Ii||(Ii={}));var xi=1,_i="nodeIdentifier";function Mi(t){return ki.getProperty(t,_i)}function Pi(t){var n=ki.getProperty(t,_i);return null!=n?n:(ki.setProperty(t,_i,xi++),ki.getProperty(t,_i))}function Di(t){for(var n=document.createTreeWalker(t,NodeFilter.SHOW_ALL),i=n.root;i;)ki.setProperty(i,_i,null),i=n.nextNode()}function Li(t,n){for(var i=document.createTreeWalker(t,NodeFilter.SHOW_ALL,(function(t){return(null==n?void 0:n.get(t))?NodeFilter.FILTER_REJECT:NodeFilter.FILTER_ACCEPT}),!1),r=i.root;r;){if(Pi(r),a(r)&&csElementshadowRoot.apply(r))Li(csElementshadowRoot.apply(r));else if(A(r))for(var e=0,s=Ui;e<s.length;e++){(0,s[e])(r)}r=i.nextNode()}}var Ui=[];function ji(t){csArray.prototype.push.call(Ui,t)}var qi,Hi,zi,Bi=function(){function t(){var t=this;this.Un=new Set,this.jn=[],this.qn=[{type:"pointerup",listener:function(n){return t.pointerUpListener(n)},boundElement:document},{type:"pointermove",listener:function(n){return t.pointerMoveListener(n)},boundElement:document},{type:"pointerdown",listener:function(n){return t.pointerDownListener(n)},boundElement:document}],this.Hn=[{type:"touchstart",listener:function(n){return t.touchStartListener(n)},boundElement:document},{type:"touchmove",listener:function(n){return t.touchMoveListener(n)},boundElement:document},{type:"touchend",listener:function(n){return t.touchEndCancelListener(n)},boundElement:document},{type:"touchcancel",listener:function(n){return t.touchEndCancelListener(n)},boundElement:document}],this.zn=[{type:"click",listener:function(n){return t.clickListener(n)},boundElement:document},{type:"keyup",listener:function(n){return t.keyUpListener(n)},boundElement:document},{type:"keydown",listener:function(n){return t.keyDownListener(n)},boundElement:document},{type:"copy",listener:function(n){return t.copyListener(n)},boundElement:document},{type:"cut",listener:function(n){return t.cutListener(n)},boundElement:document},{type:"paste",listener:function(n){return t.pasteListener(n)},boundElement:document},{type:"scroll",listener:function(n){return t.scrollListener(csEventtarget.apply(n))},boundElement:document},{type:"mouseover",listener:function(n){return t.mouseOverListener(n)},boundElement:document}],this.Bn=[{type:"scroll",listener:function(n){return t.scrollListener(csEventtarget.apply(n))}}];var n=function(t){if(!xt(t))return null;var n=/iP(ad|hone|od).+Version\/(\d+)\..*Safari/i.exec(t);return n?Number(n[2]):null}(window.navigator.userAgent);(null===n||n&&n>=16)&&csArray.prototype.push.call(this.Bn,{type:"mouseover",listener:function(n){return t.mouseOverListener(n)}})}var n;return t.prototype.init=function(){this.Fn(),this.Vn(),this.Gn(),this.Jn()},t.prototype.Jn=function(){var t=this;ji((function(n){return t.Wn(n)}))},t.prototype.onEvent=function(t){csArray.prototype.push.call(this.jn,t)},t.prototype.Yn=function(t,n){void 0===n&&(n=!1),csArray.prototype.forEach.call(this.jn,(function(i){return i(t,n)}))},t.prototype.start=function(){this.Xn()},t.prototype.stop=function(){this.$n()},t.prototype.Vn=function(){var t;this.Kn()&&(t=csArray.prototype.push).call.apply(t,Z([this.zn],this.qn,!1))},t.prototype.Fn=function(){var t;this.Zn()&&(t=csArray.prototype.push).call.apply(t,Z([this.zn],this.Hn,!1))},t.prototype.Wn=function(t){E(t)?csArray.prototype.forEach.call(this.zn,(function(t){return hi(t)})):this.Un.has(t)||(this.Un.add(t),csArray.prototype.forEach.call(this.Bn,(function(n){var i=n;i.boundElement=t,hi(i)})))},t.prototype.Qn=function(t){E(t)?csArray.prototype.forEach.call(this.zn,(function(t){return ai(t)})):(this.Un.delete(t),csArray.prototype.forEach.call(this.Bn,(function(n){var i=n;i.boundElement=t,ai(i)})))},t.prototype.Kn=function(){return"PointerEvent"in window&&"function"==typeof window.PointerEvent},t.prototype.Zn=function(){return"TouchEvent"in window&&"function"==typeof window.TouchEvent},t.prototype.$n=function(){var t=this;this.Qn(document),this.Un.forEach((function(n){return t.Qn(n)}))},t.prototype.Xn=function(){this.ti()},t.prototype.ti=function(){var t=Ai.getScrollContainer()||document,n=Mi(t);if(n){var i=this.ni(t);if(0!==i.top||0!==i.left){var r={type:ii.SCROLL,args:[n,i.left,i.top],date:Et()};this.Yn(r,!0)}}},t.prototype.ni=function(t){return t===document?{top:window.pageYOffset,left:window.pageXOffset}:{top:t.scrollTop,left:t.scrollLeft}},t.prototype.scrollListener=function(t){if(!Ii.isSensitive(t)&&!Ii.isSensitiveChild(t)){var n=Mi(t);if(n){var i=this.ni(t),r={type:ii.SCROLL,args:[n,i.left,i.top],date:Et()};this.Yn(r)}}},t.prototype.mouseOverListener=function(t){if(!Ii.isSensitiveChild(t.target)){var n=Mi(t.target);if(n){var i={type:ii.MOUSE_OVER,args:[n],date:Et()};this.Yn(i)}}},t.prototype.clickListener=function(t){var n=gi(t);if(!Ii.isSensitiveChild(n)){var i=Mi(n);if(i){var r={type:ii.CLICK,args:[i],date:Et()};this.Yn(r)}}},t.prototype.keyUpListener=function(t){var n=gi(t);if(!Ii.isSensitiveChild(n)){var i=Mi(n);if(i){var r=this.ii[t.key];if(void 0!==r){var e={type:ii.KEY_UP,args:[i,r],date:Et()};this.Yn(e)}}}},t.prototype.keyDownListener=function(t){var n=gi(t);if(!Ii.isSensitiveChild(n)){var i=Mi(n);if(i){var r=this.ii[t.key];if(void 0!==r){var e={type:ii.KEY_DOWN,args:[i,r],date:Et()};this.Yn(e)}}}},t.prototype.copyListener=function(t){var n=gi(t);if(!Ii.isSensitiveChild(n)){var i=Mi(n);if(i){var r={type:ii.CLIPBOARD_COMMAND,args:[i,oi.COPY],date:Et()};this.Yn(r)}}},t.prototype.cutListener=function(t){var n=gi(t);if(!Ii.isSensitiveChild(n)){var i=Mi(n);if(i){var r={type:ii.CLIPBOARD_COMMAND,args:[i,oi.CUT],date:Et()};this.Yn(r)}}},t.prototype.pasteListener=function(t){var n=gi(t);if(!Ii.isSensitiveChild(n)){var i=Mi(n);if(i){var r={type:ii.CLIPBOARD_COMMAND,args:[i,oi.PASTE],date:Et()};this.Yn(r)}}},t.prototype.pointerUpListener=function(t){var n=gi(t);if(!Ii.isSensitiveChild(n)){var i=Mi(n);if(i){var r={type:ii.POINTER_UP,args:[t.pointerId,t.pointerType,Xn(t.clientX,1),Xn(t.clientY,1),i,t.button],date:Et()};this.Yn(r)}}},t.prototype.pointerMoveListener=function(t){var n={type:ii.POINTER_MOVE,args:[t.pointerId,t.pointerType,Xn(t.clientX,1),Xn(t.clientY,1)],date:Et()};this.Yn(n)},t.prototype.pointerDownListener=function(t){var n=gi(t);if(!Ii.isSensitiveChild(n)){var i=Mi(n);if(i){var r={type:ii.POINTER_DOWN,args:[t.pointerId,t.pointerType,Xn(t.clientX,1),Xn(t.clientY,1),i,t.button,{pageX:Xn(t.pageX,1),pageY:Xn(t.pageY,1)}],date:Et()};this.Yn(r)}}},t.prototype.touchStartListener=function(t){if(t.changedTouches)for(var n=t.changedTouches,i=0;i<n.length;i+=1){var r=n[i],e={type:ii.TOUCH_START,args:[r.identifier,Xn(r.clientX,1),Xn(r.clientY,1)],date:Et()};this.Yn(e)}},t.prototype.touchMoveListener=function(t){if(t.changedTouches)for(var n=t.changedTouches,i=0;i<n.length;i+=1){var r=n[i],e={type:ii.TOUCH_MOVE,args:[r.identifier,Xn(r.clientX,1),Xn(r.clientY,1)],date:Et()};this.Yn(e)}},t.prototype.touchEndCancelListener=function(t){if(t.changedTouches)for(var n=t.changedTouches,i=0;i<n.length;i+=1){var r=n[i],e={type:"touchend"===t.type?ii.TOUCH_END:ii.TOUCH_CANCEL,args:[r.identifier,Xn(r.clientX,1),Xn(r.clientY,1)],date:Et()};this.Yn(e)}},t.prototype.Gn=function(){this.ii={},this.ii[" "]=ui.SPACE,this.ii.Spacebar=ui.SPACE,this.ii.Backspace=ui.BACKSPACE,this.ii.Enter=ui.ENTER,this.ii.Delete=ui.DELETE,this.ii.ArrowUp=ui.ARROWUP,this.ii.ArrowDown=ui.ARROWDOWN,this.ii.ArrowLeft=ui.ARROWLEFT,this.ii.ArrowRight=ui.ARROWRIGHT,this.ii.Up=ui.ARROWUP,this.ii.Down=ui.ARROWDOWN,this.ii.Left=ui.ARROWLEFT,this.ii.Right=ui.ARROWRIGHT,this.ii.CapsLock=ui.CAPSLOCK,this.ii.Shift=ui.SHIFT,this.ii.Tab=ui.TAB,this.ii.Escape=ui.ESCAPE,this.ii.Esc=ui.ESCAPE,this.ii.End=ui.END,this.ii.Alt=ui.ALT,this.ii.Control=ui.CTRL,this.ii.Meta=ui.META},X([pi("RecordingPageEvents.start")],t.prototype,"start",null),X([wn("scroll")],t.prototype,"scrollListener",null),X([wn("mouseOver"),Si(),function(t,n,i){var r=i.value;return r&&(i.value=function(t){if(gi(t)===csEventtarget.apply(t))return r.call(this,t)}),i}],t.prototype,"mouseOverListener",null),X([wn("click"),Si()],t.prototype,"clickListener",null),X([wn("Event handler type: keyup")],t.prototype,"keyUpListener",null),X([wn("Event handler type: keydown")],t.prototype,"keyDownListener",null),X([wn("Event handler type: copy")],t.prototype,"copyListener",null),X([wn("Event handler type: cut")],t.prototype,"cutListener",null),X([wn("Event handler type: paste")],t.prototype,"pasteListener",null),X([wn("Event handler type: pointerup"),Si()],t.prototype,"pointerUpListener",null),X([wn("Event handler type: pointermove"),Si(),(n={wait:33,ignoreThrottledCalls:!1},function(t,i,r){r.value=ni(r.value,n)})],t.prototype,"pointerMoveListener",null),X([wn("Event handler type: pointerdown"),Si()],t.prototype,"pointerDownListener",null),X([wn("Event handler type: touchstart"),Si()],t.prototype,"touchStartListener",null),X([wn("Event handler type: touchmove"),Si()],t.prototype,"touchMoveListener",null),X([wn("Event handler type: touchend-cancel"),Si()],t.prototype,"touchEndCancelListener",null),t}(),Fi=null!==(qi=Gt.Element)&&void 0!==qi?qi:{prototype:{}},Vi=null!==(Hi=Gt.Node)&&void 0!==Hi?Hi:{prototype:{}},Gi=function(t){return Object.getOwnPropertyDescriptor(t.prototype,"localName")},Ji=null!==(zi=Gi(Fi))&&void 0!==zi?zi:Gi(Vi),Wi=function(t){return Ji.get.call(t)};function Yi(t){for(var n,i=null!==(n=t.length)&&void 0!==n?n:0,r=new csArray(i),e=0;e<i;e+=1)r[e]=t[e];return r}function Xi(t,n){for(var i=t.length,r=new csArray(i),e=0;e<i;e+=1)r[e]=n(t[e]);return r}function $i(t,n){var i=[];return function(t,n,i){for(var r=0,e=0;e<t.length;e+=1)for(var s=n(t[e]),u=0;u<s.length;u++)i(s[u],r++)}(t,n,(function(t){return csArray.prototype.push.call(i,t)})),i}function Ki(t,n){if(t.length>=0)for(var i=t.length,r=0;r<i;r++)n(t[r],r);else for(var e=0,s=t.next();!s.done;)n(s.value,e++),s=t.next()}function Zi(t,n){for(var i=t.length,r=0;r<i;r++)if(n(t[r],r))return t[r]}function Qi(t,n){for(var i=t.length,r=0;r<i;r++)if(n(t[r],r))return!0;return!1}function tr(t,n){for(var i=t.length,r=[],e=0;e<i;e+=1){var s=t[e];n(s)&&csArray.prototype.push.call(r,s)}return r}function nr(t,n){for(var i=0;i<t.length;i++)csArray.prototype.push.call(n,t[i])}function ir(t){var n=[];return t.forEach((function(t){return csArray.prototype.push.call(n,t)})),n}var rr,er,sr=function(){function t(){this.ei=0}return Object.defineProperty(t.prototype,"length",{get:function(){return this.ei},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isEmpty",{get:function(){return!this.si},enumerable:!1,configurable:!0}),t.prototype.pushAll=function(t){for(var n=0;n<t.length;n++)this.push(t[n])},t.prototype.push=function(t){this.ei++,this.ui?this.ui=this.ui[1]=[t,void 0]:this.ui=this.si=[t,void 0]},t.prototype.pop=function(){if(!this.si)return null;this.ei--;var t=this.si[0];return this.si=this.si[1],this.si||(this.ui=void 0),t},t.prototype.forEach=function(t){for(var n=this.si;null==n?void 0:n.length;)t(n[0]),n=n[1]},t.prototype.clear=function(){this.ei=0,this.si=this.ui=void 0},t}(),ur=(rr="queueMicrotask",er=setTimeout,void 0!==Gt[rr]?Gt[rr]:er),or=new sr,cr=new sr,hr=1;function ar(t,n){void 0===n&&(n="high");var i=hr;or.isEmpty&&cr.isEmpty&&fr((function(){if(hr===i){var t=function(){for(;!cr.isEmpty;){cr.pop()()}for(;!or.isEmpty;){or.pop()()}cr.isEmpty||t()};t()}})),"high"===n?cr.push(t):or.push(t)}function fr(t,n){void 0===n&&(n=10),ur(0===n?t:function(){return fr(t,n-1)})}function vr(t){return void 0===t&&(t=1),Zn(this,void 0,void 0,(function(){var n;return Qn(this,(function(i){switch(i.label){case 0:n=0,i.label=1;case 1:return n<t?[4,new Promise((function(t){return ar(t)}))]:[3,4];case 2:i.sent(),i.label=3;case 3:return n++,[3,1];case 4:return[2]}}))}))}var lr,dr=csSymbol("rawData");!function(t){t[t.MUTATION_INSERT=1]="MUTATION_INSERT",t[t.MUTATION_ATTRIBUTE=3]="MUTATION_ATTRIBUTE",t[t.MUTATION_CHARACTER_DATA=4]="MUTATION_CHARACTER_DATA",t[t.INITIAL_DOM=5]="INITIAL_DOM"}(lr||(lr={}));var wr,yr=function(){function t(t,n,i,r,e){void 0===e&&(e=document);var s=this;this.oi=t,this.ci=n,this.hi=i,this.ai=r,this.fi=e,this.li=!1,this.wi=function(t){s.hi.emitInitialDomDone(t)},this.yi=function(t){var n,i=Mi(t.target);if(i){var r=t.target.parentElement,e=r?Wi(r):null,u=t.target?Wi(t.target):null,o="style",c="width:".concat(t.width,"px !important;height:").concat(t.height,"px !important;"),h=((n={args:[i,null,o,c],date:Et(),type:ii.MUTATION_ATTRIBUTE})[dr]={parentLocalName:e,localName:u,oldValue:"",attribute:o,newValue:c},n);s.pi(h)}},this.ci.onCharacterDataMutation((function(t){s.mi(t)})),this.ci.onAttributesMutation((function(t){s.gi(t)})),this.ci.onChildListMutation((function(t,n){Ki(t.addedNodes,(function(t){Li(t,n)})),s.Si(t,n),Ki(t.removedNodes,(function(t){return s.ai.unidentifySensitiveNodes(t)}))})),this.ci.onAttachShadowMutation((function(t){t.target.isConnected&&null!==csElementshadowRoot.apply(t.target)&&(Li(csElementshadowRoot.apply(t.target)),ar((function(){return s.Ai(t)})))})),this.ai.onSensitiveElementResize(this.yi)}return t.prototype.onEvent=function(t){this.pi=t},t.prototype.isStarted=function(){return this.li},t.prototype.start=function(){this.isStarted()||(this.li=!0,this.ci.start(),this.bi())},t.prototype.stop=function(){this.isStarted()&&(this.li=!1,this.ai.unidentifyAllSensitiveNodes(),this.ci.stop())},t.prototype.flushEvents=function(){this.ci.flushPendingMutations()},t.prototype.bi=function(){this.hi.emitInitialDomStart(),this.ai.identifySensitiveNodes(),Li(this.fi),this.oi.serializeInitialDom(this.fi,this.wi)},t.prototype.Ai=function(t){if(!Ii.isSensitive(t.target)&&!Ii.isSensitiveChild(t.target)){var n=this.oi.serializeAttachShadowEvent(t);if(n){var i={args:n,date:t.date,type:ii.ATTACH_SHADOW};this.pi(i)}}},t.prototype.gi=function(t){var n;if(!Ii.isSensitiveChild(t.target)&&!Ii.isSensitiveAttribute(t.target,t.attributeName)){var i=this.oi.serializeMutationAttribute(t);if(i){var r=t.target.parentElement,e=r?Wi(r):null,s=t.target?Wi(t.target):null,u=((n={args:i,date:t.date,type:ii.MUTATION_ATTRIBUTE})[dr]={parentLocalName:e,localName:s,oldValue:t.oldValue,attribute:i[2],newValue:i[3]},n);this.pi(u)}}},t.prototype.mi=function(t){var n,i=t.target.parentElement;if(!i||!Ii.isSensitive(i)&&!Ii.isSensitiveChild(i)){var r=this.oi.serializeMutationCharacterData(t);if(r){var e=i?Wi(t.target.parentElement):null,s=((n={args:r,date:t.date,type:ii.MUTATION_CHARACTER_DATA})[dr]={newValue:r[1],parentLocalName:e},n);this.pi(s)}}},t.prototype.Si=function(t,n){var i=this;if(!Ii.isSensitive(t.target)&&!Ii.isSensitiveChild(t.target)){var r=this.oi.serializeMutationChildList(t,n);if(r){var e=r.removedNodes,s=r.addedNodes;csArray.prototype.forEach.call(e,(function(n){var r={args:n,date:t.date,type:ii.MUTATION_REMOVE};i.pi(r)})),csArray.prototype.forEach.call(s,(function(n){var r,e=((r={args:n,date:t.date,type:ii.MUTATION_INSERT})[dr]={nodes:n[2]},r);i.pi(e)}))}}},t}(),pr=function(){function t(t){this.Ei=t,this.Ri=0}return t.prototype.addString=function(t){this.Ri+=2*t.length},t.prototype.addArrayBuffer=function(t){this.Ri+=t.byteLength},t.prototype.isThresholdReached=function(){return this.Ri>this.Ei},t.prototype.reset=function(){this.Ri=0},t}(),mr=function(){function t(t,n){void 0===t&&(t=[]),void 0===n&&(n=512e3),this.Ni=t,this.Ti=new pr(n)}return t.prototype.addEvent=function(t){this.Ti.addString(ct(t)),csArray.prototype.push.call(this.Ni,t)},t.prototype.addEventByTimestamp=function(t){for(var n=0;n<this.Ni.length;n+=1){if(this.Ni[n].date>=t.date)break}csArray.prototype.splice.call(this.Ni,n,0,t)},t.prototype.eventsCount=function(){return this.Ni.length},t.prototype.clearEvents=function(){this.Ti.reset(),this.Ni=[]},t.prototype.isFull=function(){return this.eventsCount()>=200},t.prototype.isThresholdReached=function(){return this.Ti.isThresholdReached()},t.prototype.getEvents=function(){return this.Ni},t.prototype.extractEvents=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var i=[],r=[];return csArray.prototype.forEach.call(this.Ni,(function(n){-1!==csArray.prototype.indexOf.call(t,n.type)?csArray.prototype.push.call(i,n):csArray.prototype.push.call(r,n)})),this.Ni=r,i},t.prototype.stringifyEvents=function(){return ct(this.Ni)},t.prototype.Oi=function(t){t.type===ii.INITIAL_DOM&&(window.CSDomSerialized=window.CSDomSerialized?window.CSDomSerialized+1:1)},X([pi("RecordingBatch.addEvent")],t.prototype,"addEvent",null),t}(),gr=function(){function t(){this.ki=1}return t.prototype.getCurrentIndex=function(){return this.ki},t.prototype.increment=function(){this.ki+=1},t.prototype.reset=function(){this.ki=1},t.prototype.getRequestParameters=function(){return{ri:"".concat(this.ki)}},t}(),Sr=function(){function t(){}return t.prototype.emit=function(n,i,r,e){void 0===e&&(e=document);var s="".concat(void 0!==r?r:t.Ii),u="".concat(s).concat(n),o=t.createEvent(u,{detail:i});null!==o&&e.dispatchEvent(o)},t.createEvent=function(t,n){if(void 0===n&&(n={}),"function"==typeof CustomEvent)return new CustomEvent(t,n);var i=this.Ci();if(null===i)return null;var r=n.bubbles,e=void 0!==r&&r,s=n.cancelable,u=void 0!==s&&s,o=n.detail;return i.initCustomEvent(t,e,u,o),i},t.Ci=function(){try{return document.createEvent("CustomEvent")}catch(t){return null}},t.Ii="cs.tracking.",t}(),Ar=function(){function t(){this.isStarted=!1}return t.prototype.start=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];this.isStarted||(this.isStarted=!0,this.onStart.apply(this,t))},t.prototype.stop=function(){this.isStarted&&(this.isStarted=!1,this.onStop())},t.prototype.restart=function(){this.stop(),this.start()},t}();!function(t){t.Visible="visible",t.Hidden="hidden",t.Blur="blur",t.PagehideVisible="pagehideVisible",t.PagehideHidden="pagehideHidden"}(wr||(wr={}));var br,Er=function(){function t(){var t=this;this.xi=!1,this._i=function(n){try{switch(n.type){case"visibilitychange":if("hidden"===document.visibilityState)return t.Mi(wr.Hidden);break;case"pagehide":return"hidden"===document.visibilityState?t.Mi(wr.PagehideHidden):t.Mi(wr.PagehideVisible);case"blur":return t.Mi(wr.Blur);default:return}}catch(t){}}}return t.prototype.start=function(){this.xi||(this.xi=!0,this.Pi(),this.Di(),this.Li())},t.prototype.stop=function(){this.xi&&(this.xi=!1,this.Ui(),this.ji(),this.qi())},t.prototype.onEvent=function(t){this.Mi=t},t.prototype.Pi=function(){document.addEventListener("visibilitychange",this._i)},t.prototype.Ui=function(){document.removeEventListener("visibilitychange",this._i)},t.prototype.Di=function(){window.addEventListener("pagehide",this._i)},t.prototype.ji=function(){window.removeEventListener("pagehide",this._i)},t.prototype.Li=function(){window.addEventListener("blur",this._i)},t.prototype.qi=function(){window.removeEventListener("blur",this._i)},t}();!function(t){t[t.Active=0]="Active",t[t.Paused=1]="Paused",t[t.Stopped=2]="Stopped"}(br||(br={}));var Rr,Nr,Tr,Or=function(){function t(t,n,i){void 0===i&&(i=[]);this.Hi=t,this.zi=n,this.Bi=i,this.Fi=null,this.Vi=br.Active,this.Gi=[]}return t.prototype.reset=function(){this.Fi=null,this.Gi=[],this.Vi=br.Active},t.prototype.disconnect=function(){this.Vi=br.Stopped},t.prototype.Ji=function(){var n=this;this.zi(br.Paused),this.Vi=br.Paused,setTimeout((function(){n.Vi===br.Paused&&n.Wi()}),t.STOP_TIMEOUT)},t.prototype.Yi=function(){this.zi(br.Active),this.Vi=br.Active,Ki(this.Gi,this.Hi),this.Gi=[]},t.prototype.Wi=function(){this.Gi=[],this.zi(br.Stopped),this.Vi=br.Stopped},t.prototype.pushEvent=function(t,n){if(n.isUserEvent&&(this.Fi=t.date,this.Vi!==br.Active))return this.Yi(),void this.Hi(t);if(this.Xi(t))this.Hi(t);else switch(this.Vi){case br.Active:if(this.$i(t,n))return this.Ji(),void csArray.prototype.push.call(this.Gi,t);this.Hi(t);break;case br.Paused:csArray.prototype.push.call(this.Gi,t);case br.Stopped:}},t.prototype.$i=function(n,i){return!i.isUserEvent&&null!==this.Fi&&n.date-this.Fi>t.INACTIVITY_TIMEOUT},t.prototype.Xi=function(t){return csArray.prototype.indexOf.call(this.Bi,t.type)>-1},t.INACTIVITY_TIMEOUT=5e3,t.STOP_TIMEOUT=5e3,t}();function kr(){var t=new Set;return{add:function(n){t.add(n),1===t.size&&setTimeout((function(){t.clear()}))},has:function(n){return t.has(n)},del:function(n){t.delete(n)},values:function(){return ir(t)},get count(){return t.size}}}function Ir(t,n){void 0===n&&(n=Mr.SHOW_ALL);var i=n|Mr.SHOW_ELEMENT,r=[document.createTreeWalker(t,i,null,!1)],e=Cr(t);e&&csArray.prototype.push.call(r,document.createTreeWalker(e,i,null,!1));var s=null;return{root:t,nextNode:function(){if(e){var t=e;return e=null,t}for(;r.length>0;){if(s){t=s;return s=null,t}var u=r[r.length-1].nextNode();if(u){var o=Cr(u);if(n&Mr.SHOW_DOCUMENT_FRAGMENT&&o&&(s=o),o&&csArray.prototype.push.call(r,document.createTreeWalker(o,i,null,!1)),Pr[u.nodeType]&n)return u}else csArray.prototype.pop.call(r)}return null},visitAll:function(i){Pr[t.nodeType]&n&&i(t);for(var r=this.nextNode();r;)Pr[r.nodeType]&n?(i(r),r=this.nextNode()):r=this.nextNode()},collectAll:function(t){var n=[];return this.visitAll((function(i){return csArray.prototype.push.call(n,t?t(i):i)})),n}}}function Cr(t){return t&&N(t)?t.shadowRoot:null}var xr,_r=null!==(Nr=Gt.Node)&&void 0!==Nr?Nr:{},Mr=null!==(Tr=Gt.NodeFilter)&&void 0!==Tr?Tr:{},Pr=((Rr={})[2]=Mr.SHOW_ATTRIBUTE,Rr[4]=Mr.SHOW_CDATA_SECTION,Rr[8]=Mr.SHOW_COMMENT,Rr[11]=Mr.SHOW_DOCUMENT_FRAGMENT,Rr[9]=Mr.SHOW_DOCUMENT,Rr[10]=Mr.SHOW_DOCUMENT_TYPE,Rr[1]=Mr.SHOW_ELEMENT,Rr[_r.ENTITY_NODE]=Mr.SHOW_ENTITY,Rr[_r.ENTITY_REFERENCE_NODE]=Mr.SHOW_ENTITY_REFERENCE,Rr[_r.NOTATION_NODE]=Mr.SHOW_NOTATION,Rr[7]=Mr.SHOW_PROCESSING_INSTRUCTION,Rr[3]=Mr.SHOW_TEXT,Rr);function Dr(){var t=new Error,n=t.stack?csArray.prototype.filter.call(csString.prototype.split.call(t.stack,"\n"),(function(t){return"Error"!==t&&-1===csString.prototype.indexOf.call(csString.prototype.toLowerCase.call(t),"promise ")&&-1===csString.prototype.indexOf.call(t,"[native code]")})):[];if(0===n.length)return"";var i=function(t){return t.length>0?Lr(t[0]):""}(n);return""===i?"":(n=function(t,n){return csArray.prototype.filter.call(t,(function(t){return-1===csString.prototype.indexOf.call(t,n)}))}(n,i),0===n.length?"":Lr(n[0]))}function Lr(t){var n,i="";n=t;var r=(-1!==csString.prototype.indexOf.call(n,"@")?new RegExp("@(.+):(\\d+):(\\d+)$"):new RegExp("\\((.+):(\\d+):(\\d+)\\)")).exec(t);return r&&(i=r[1]),i}!function(t){t.isSupported=function(){return!!Element.prototype.attachShadow},t.getShadowRoot=function(t){return t&&N(t)?t.shadowRoot:null},t.getAllShadowHosts=function(t){return Ir(t,NodeFilter.SHOW_DOCUMENT_FRAGMENT).collectAll((function(t){return t.host}))}}(xr||(xr={}));var Ur=function(t){return t};function jr(t){var n,i=t.target,r=t.methodName,e=t.hook,s=t.hookPrepareArgs,u=void 0===s?Ur:s,o=t.options;if(!(null===(n=Object.getOwnPropertyDescriptor(i,r))||void 0===n?void 0:n.writable))return an.warn("Cannot intercept read only function '".concat(csString(r),"' of object '").concat(i,"'")),null;var c,h,a=!1,f=i[r];if("function"==typeof f){var v=function(){var t=u(arguments),n=f.apply(this,arguments);if(a){var i=void 0;o&&o.withCallerName&&(i=Dr());try{e({result:n,context:this,args:t,callerName:i})}catch(t){an.error(t)}}return n};(c=v).prototype=(h=f).prototype,Object.defineProperty(c,"toString",{value:function(){return h.toString()}}),i[r]=v}return{activate:function(){return a=!0},deactivate:function(){return a=!1}}}function qr(t,n,i){var r=!1,e=Object.getOwnPropertyDescriptor(t,n);if(e){if(!e.configurable)return an.warn("Cannot intercept read only property '".concat(csString(n),"' of object '").concat(t,"'")),null;Object.defineProperty(t,n,$n($n({},e.get?{get:function(){return e.get.apply(this,arguments)}}:{}),e.set?{set:function(){var t=arguments,s=this[n],u=e.set.apply(this,t);if(r)try{i(this,t[0],s)}catch(t){an.error(t)}return u}}:{}))}return{activate:function(){return r=!0},deactivate:function(){return r=!1}}}var Hr,zr=function(){function t(t){this.Nn=t}var n;return t.Ki=function(t){this.Un.forEach((function(n){t(n,"initial")}))},t.Zi=function(t){var n=this;if(csArray.prototype.push.call(this.Qi,t),!this.li){this.li=!0,this.ci.observe(document,this.tr);for(var i=0,r=xr.getAllShadowHosts(document);i<r.length;i++){var e=r[i],s=csElementshadowRoot.apply(e);this.Un.add(s),this.ci.observe(s,this.tr)}this.nr||(this.nr=jr({target:Element.prototype,methodName:"attachShadow",hook:function(t){return t.result.isConnected&&n.ir(t.result)}})),this.nr.activate()}this.Ki(t)},t.rr=function(t){var n;this.Qi=csArray.prototype.filter.call(this.Qi,(function(n){return n!==t})),0===this.Qi.length&&(this.Qi=[],this.li=!1,this.ci.disconnect(),null===(n=this.nr)||void 0===n||n.deactivate(),this.Un.clear())},Object.defineProperty(t.prototype,"shadowRoots",{get:function(){return ir(n.Un)},enumerable:!1,configurable:!0}),t.prototype.observe=function(){xr.isSupported()&&n.Zi(this.Nn)},t.prototype.disconnect=function(){xr.isSupported()&&n.rr(this.Nn)},n=t,t.Qi=[],t.Un=new Set,t.li=!1,t.tr={childList:!0,subtree:!0},t.ci=new csMutationObserver((function(t){for(var i=0,r=t;i<r.length;i++){var e=r[i];e.target.isConnected&&Ki(e.addedNodes,n.er),Ki(e.removedNodes,n.ur)}})),t.ir=function(t){n.Un.has(t)||(n.ci.observe(t,n.tr),n.Un.add(t),Ki(n.Qi,(function(n){return n(t,"added")})))},t.er=function(t){Ir(t,NodeFilter.SHOW_DOCUMENT_FRAGMENT).visitAll(n.ir)},t.ur=function(t){t.isConnected||Ir(t,NodeFilter.SHOW_DOCUMENT_FRAGMENT).visitAll((function(t){n.Un.has(t)&&(n.Un.delete(t),Ki(n.Qi,(function(n){return n(t,"removed")})))}))},t}(),Br={childList:!0,subtree:!0,attributes:!0,characterData:!0,characterDataOldValue:!0,attributeOldValue:!0},Fr=function(){function t(t,n){this.Nn=t,this.cr=n}var n;return t.observe=function(t,n){var i=this;csArray.prototype.push.call(this.callbacks,t),n&&csArray.prototype.push.call(this.shadowRootCallbacks,n),this.started?n&&csArray.prototype.forEach.call(xr.getAllShadowHosts(document),(function(t){return n(csElementshadowRoot.apply(t),"initial")})):(this.mutationObserver=new csMutationObserver((function(t){csArray.prototype.forEach.call(i.callbacks,(function(n){return n(t,i.mutationObserver)}))})),this.mutationObserver.observe(document,Br),this.shadowRootObserver=new zr(this.onShadowRoot),this.shadowRootObserver.observe(),this.started=!0,Ki(this.shadowRootObserver.shadowRoots,(function(t){return i.mutationObserver.observe(t,Br)})))},t.disconnect=function(t,n){var i,r;this.callbacks=csArray.prototype.filter.call(this.callbacks,(function(n){return n!==t})),n&&(this.shadowRootCallbacks=csArray.prototype.filter.call(this.shadowRootCallbacks,(function(t){return t!==n}))),0===this.callbacks.length&&(this.callbacks=[],this.shadowRootCallbacks=[],null===(i=this.shadowRootObserver)||void 0===i||i.disconnect(),null===(r=this.mutationObserver)||void 0===r||r.disconnect(),this.started=!1)},Object.defineProperty(t.prototype,"shadowRoots",{get:function(){var t,i;return null!==(i=null===(t=n.shadowRootObserver)||void 0===t?void 0:t.shadowRoots)&&void 0!==i?i:[]},enumerable:!1,configurable:!0}),t.prototype.observe=function(){n.observe(this.Nn,this.cr)},t.prototype.disconnect=function(){n.disconnect(this.Nn,this.cr)},n=t,t.callbacks=[],t.shadowRootCallbacks=[],t.started=!1,t.mutationObserver=new csMutationObserver((function(t){csArray.prototype.forEach.call(n.callbacks,(function(i){return i(t,n.mutationObserver)}))})),t.onShadowRoot=function(t,i){Ki(n.shadowRootCallbacks,(function(n){return n(t,i)})),"removed"!==i&&n.mutationObserver.observe(t,Br)},t}(),Vr=function(){function t(t){var n=this;this.hr="",this.ar=kr(),this.vr=function(t){if(""!==n.hr){for(var i=[],r=0,e=$i(t,(function(t){return t.addedNodes}));r<e.length;r++){var s=e[r];b(s)&&nr(n.lr(s,n.hr),i)}i.length&&n.Nn(i)}},this.Nn=t,this.wr=new Fr(this.vr)}return Object.defineProperty(t.prototype,"selectors",{get:function(){return""===this.hr?null:this.hr},enumerable:!1,configurable:!0}),t.prototype.observe=function(t){var n=this;""===this.hr?this.wr.observe():this.hr+=",",this.hr+=t;var i=this.lr(document,t);i.length&&(Ki(i,(function(t){n.ar.add(t)})),this.Nn(i))},t.prototype.disconnect=function(){this.wr.disconnect(),this.hr=""},t.prototype.lr=function(t,n){var i=this,r=$i(xr.getAllShadowHosts(t),(function(t){return window.csquerySelectorAll[t.shadowRoot.nodeType].call(t.shadowRoot,n)}));return nr(window.csquerySelectorAll[t.nodeType].call(t,n),r),a(t)&&Ni.call(t,n)&&csArray.prototype.push.call(r,t),csArray.prototype.filter.call(r,(function(t){return!1===i.ar.has(t)}))},t}();!function(t){var n,i;t.ANONYMIZATION_STATUS_PROP="anonymizationStatus",t.CS_CAPTURE_ATTRIBUTE="data-cs-capture",t.ANONMIZATION_WHITELISTED_STATUS="whitelisted",t.start=function(){new Vr((function(n){return function(n){Ki(n,(function(n){Ir(n).visitAll((function(n){return function(n){ki.setProperty(n,t.ANONYMIZATION_STATUS_PROP,t.ANONMIZATION_WHITELISTED_STATUS)}(n)}))}))}(n)})).observe("".concat(i))},t.stop=function(){n},t.setWhitelistedElementsSelector=function(t){i=t},t.getWhitelistedElementsSelector=function(){return i},t.isWhitelisted=function(n){return ki.getProperty(n,t.ANONYMIZATION_STATUS_PROP)===t.ANONMIZATION_WHITELISTED_STATUS||function(n){if(n instanceof Node)return a(n)&&n.hasAttribute(t.CS_CAPTURE_ATTRIBUTE);return n.attributes&&csArray.prototype.some.call(n.attributes,(function(n){return n.name===t.CS_CAPTURE_ATTRIBUTE}))}(n)}}(Hr||(Hr={}));var Gr=function(t,n){return Gr=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])},Gr(t,n)};function Jr(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function i(){this.constructor=t}Gr(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}var Wr=function(){return Wr=Object.assign||function(t){for(var n,i=1,r=arguments.length;i<r;i++)for(var e in n=arguments[i])Object.prototype.hasOwnProperty.call(n,e)&&(t[e]=n[e]);return t},Wr.apply(this,arguments)};function Yr(t,n,i,r){return new(i||(i=Promise))((function(e,s){function u(t){try{c(r.next(t))}catch(t){s(t)}}function o(t){try{c(r.throw(t))}catch(t){s(t)}}function c(t){var n;t.done?e(t.value):(n=t.value,n instanceof i?n:new i((function(t){t(n)}))).then(u,o)}c((r=r.apply(t,n||[])).next())}))}function Xr(t,n){var i,r,e,s,u={label:0,sent:function(){if(1&e[0])throw e[1];return e[1]},trys:[],ops:[]};return s={next:o(0),throw:o(1),return:o(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function o(s){return function(o){return function(s){if(i)throw new TypeError("Generator is already executing.");for(;u;)try{if(i=1,r&&(e=2&s[0]?r.return:s[0]?r.throw||((e=r.return)&&e.call(r),0):r.next)&&!(e=e.call(r,s[1])).done)return e;switch(r=0,e&&(s=[2&s[0],e.value]),s[0]){case 0:case 1:e=s;break;case 4:return u.label++,{value:s[1],done:!1};case 5:u.label++,r=s[1],s=[0];continue;case 7:s=u.ops.pop(),u.trys.pop();continue;default:if(!(e=u.trys,(e=e.length>0&&e[e.length-1])||6!==s[0]&&2!==s[0])){u=0;continue}if(3===s[0]&&(!e||s[1]>e[0]&&s[1]<e[3])){u.label=s[1];break}if(6===s[0]&&u.label<e[1]){u.label=e[1],e=s;break}if(e&&u.label<e[2]){u.label=e[2],u.ops.push(s);break}e[2]&&u.ops.pop(),u.trys.pop();continue}s=n.call(t,u)}catch(t){s=[6,t],r=0}finally{i=e=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,o])}}}Object.create;Object.create;function $r(t){return Tt(t,"data:")}function Kr(t){return Tt(t,"#")}function Zr(t){return!!t&&Ot(t,".css")}function Qr(t){var n=csString.prototype.trim.call(t);if(""===t)return[];var i,r=(i=n,csString.prototype.split.call(i,/\s(.+)/)),e=r[0],s=r[1];return s?(Ot(e,",")||(s=function(t){return csString.prototype.split.call(t,/,(.+)/)[1]||""}(s)),ti([te(e)],Qr(s),!0)):[te(e)]}function te(t){return csString.prototype.split.call(t,/,$/)[0]}var ne=/(@import\s*("([^"]+)"|'([^']+)'))|(url\s*\(\s*((("([^"\]]+)"|'([^'\]]+)')\s*)|([^)\]]+))\))/g;function ie(t,n){var i=csString.prototype.replace.call(t,ne,(function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];var r,e,s=t[3]||t[4],u=t[9]||t[10]||t[11],o=(r=(s||u).trim(),e=/(\\)*\\(?:([a-fA-F0-9]{1,6})|(.))[\n\t\x20]?/g,csString.prototype.replace.call(r,e,(function(t,n,i,r){if("\\"===n)return csString.prototype.slice.call(t,1);if(r)return r;var e=parseInt(i,16);return 55296<=e&&e<=57343||0===e||e>1114111?"�":csString.fromCodePoint(e)}))),c=s?"@import ":"",h=n(o)||o;return"".concat(c,"url(").concat(function(t){if(-1===csString.prototype.indexOf.call(t,'"'))return'"'.concat(t,'"');if(-1===csString.prototype.indexOf.call(t,"'"))return"'".concat(t,"'");return t}(h),")")}));return i}function re(t){var n=new Set;return ie(t,(function(t){var i,r;return n.add(null!==(r=null===(i=csString.prototype.match.call(t,/^["|'](.*)?["|']$/))||void 0===i?void 0:i[1])&&void 0!==r?r:t),t})),ir(n)}var ee=new Map,se=!Vt&&document.implementation.createHTMLDocument("");function ue(t){if(!w(t))return null;var n=oe(t);if(null===n||0===n.length)return null;var i="";if(jt(t.textContent))Ki(n,(function(t){return i+=t.cssText}));else{var r=function(t){if(!se)return 0;var n=ee.get(t.textContent);if(n)return n;var i=t.cloneNode(!0);i.textContent=t.textContent,se.head.appendChild(i);var r=oe(i);return n=r?r.length:0,ee.set(t.textContent,n),se.head.removeChild(i),n}(t);if(r===n.length)return null;for(var e=new csArray(n.length-r),s=r,u=0;s<n.length;s+=1,u+=1)e[u]=n[s];Ki(e,(function(t){return i+=t.cssText}))}return i}function oe(t){try{if(t.disabled)return null;var n=t.sheet;return n?n.cssRules||n.rules:null}catch(t){if("SecurityError"!==t.name&&"InvalidAccessError"!==t.name)throw t;return null}}var ce,he,ae=function(t){this.csId=Mi(t),this.props=Ci.getStore(t)},fe=function(t){function n(n){var i=t.call(this,n)||this;return i.nodeType=3,i.data=n.data,i}return Jr(n,t),n}(ae),ve=function(t){function n(n){var i,r=t.call(this,n)||this;r.attributes=[],r.nodeType=1,r.localName=Wi(n),r.namespaceURI=null!==(i=n.namespaceURI)&&void 0!==i?i:void 0,r.children=[];var e=ue(n);if(e){r.children=new csArray(csNodechildNodes.apply(n).length);var s=document.createTextNode(e),u=new fe(s);csArray.prototype.push.call(r.children,u)}return r}return Jr(n,t),n.isElement=function(t){return 1===t.nodeType},n.getAttribute=function(t,n){return null==t.attributes?void 0:csArray.prototype.find.call(t.attributes,(function(t){return t.name===n}))},n.getAttributeValue=function(t,n){var i;return null===(i=this.getAttribute(t,n))||void 0===i?void 0:i.value},n}(ae),le=function(){function t(t){var n=this;this.type="asyncEvent",this.yr=!1,t&&t((function(t){return n.resolve(t)}))}return t.prototype.resolve=function(t){if(this.yr)throw new Error("AsyncEvent already resolve.");null==t.timestamp&&(t=Wr(Wr({},t),{timestamp:this.timestamp})),this.pr=t,this.yr=!0,this.Nn&&this.Nn(this.pr)},t.prototype.complete=function(t){this.yr&&t(this.pr),this.Nn=t},t.prototype.wait=function(){var t=this;return new Promise((function(n){return t.complete(n)}))},t}();!function(t){function n(){var t=[r()];return document.documentElement&&csArray.prototype.push.call(t,document.documentElement.scrollHeight,document.documentElement.offsetHeight,document.documentElement.clientHeight),document.body&&csArray.prototype.push.call(t,document.body.scrollHeight,document.body.offsetHeight),Math.max.apply(Math,t)}function i(){return document.documentElement.scrollWidth}function r(){return window.innerHeight}function e(){return window.innerWidth}function s(){var t=window.csScreen.width;return Ct(t)&&t>0?t:window.screen.width}function u(){var t=window.csScreen.height;return Ct(t)&&t>0?t:window.screen.height}t.documentHeight=n,t.documentWidth=i,t.windowHeight=r,t.windowWidth=e,t.screenWidth=s,t.screenHeight=u,t.windowOffsetX=function(){return window.pageXOffset},t.windowOffsetY=function(){return window.pageYOffset},t.getRequestParameters=function(){return{dw:"".concat(i()),dh:"".concat(n()),ww:"".concat(e()),wh:"".concat(r()),sw:"".concat(s()),sh:"".concat(u())}}}(ce||(ce={}));var de,we=null!==(he=Gt.Node)&&void 0!==he?he:Object;!function(t){var n="isConnected"in we.prototype?function(t){return t.isConnected}:function(t){return!(t.ownerDocument&&t.ownerDocument.compareDocumentPosition(t)&t.DOCUMENT_POSITION_DISCONNECTED)};function i(t){var n;return t.parentElement?t.parentElement:t.getRootNode?null===(n=t.getRootNode())||void 0===n?void 0:n.host:null}function r(t){var n,i;if(!1===(null===(n=t.checkVisibility)||void 0===n?void 0:n.call(t,{checkOpacity:!0,checkVisibilityCSS:!0})))return!0;if(!t.offsetParent){if(!t.getBoundingClientRect)return an.warn("SUP-11432: Element doesn't have getBoundingClientRect. Node: ".concat(t instanceof we," Ctor: ").concat(null===(i=null==t?void 0:t.constructor)||void 0===i?void 0:i.name)),!1;var r=t.getBoundingClientRect();if(0==r.width&&0==r.height)return!0}var e,s=window.getComputedStyle(t);return!s||("none"===s.display||"hidden"===s.visibility||"collapse"===s.visibility||"0"===s.opacity||"opacity(0)"===s.filter||"0px"===s.width&&"0px"===s.height||("transparent"===(e=s.color)||/^(rgba|hsla)\(\d+, \d+%?, \d+%?, 0\)$/.test(e)))}function e(t){var n=t.getBoundingClientRect(),i=n.left+.5*n.width,r=n.top+.5*n.height;return s(document,i,r)}function s(t,n,i){var r=t.elementFromPoint(n,i);if(!r)return null;var e=xr.getShadowRoot(r);return e&&e!=document.body.getRootNode()&&e!==t?s(e,n,i):r}function u(t){var n=e(t);return null!==n&&(t===n||t.contains(n))}t.forEachChild=function(t,n){for(var i=t;i;i=csNodenextSibling.apply(i))n(t)},t.isConnected=function(t){return n(t)},t.getAncestors=function(t,n){var i=[],r=function(t){csArray.prototype.push.call(i,t);for(var n=t.getRootNode(),r=t;(null==r?void 0:r.parentElement)&&r.parentElement!==n;)csArray.prototype.push.call(i,r.parentElement),r=r.parentElement;return csArray.prototype.push.call(i,n),i};if(n)for(var e=t;e;){r(e);var s=e.getRootNode();if(!(s instanceof ShadowRoot))break;e=s.host}else r(t);return i},t.isDescendantOf=function n(i,r){if(i===r||r.contains(i))return!0;var e=t.getParentElement(i);return!(!e||e===i)&&n(e,r)},t.getParentElement=i,t.findAllElements=function(t,n){var i;void 0===n&&(n=document);for(var r=Yi(window.csquerySelectorAll[n.nodeType].call(n,t)),e=0,s=xr.getAllShadowHosts(n);e<s.length;e++){var u=s[e],o=csElementshadowRoot.apply(u),c=Yi(window.csquerySelectorAll[o.nodeType].call(o,t));(i=csArray.prototype.push).call.apply(i,ti([r],c,!1))}return r},t.isHiddenByCSS=r,t.areAncestorsHiddenByCSS=function t(n){if(r(n))return!0;var e=i(n);return null!=e&&t(e)},t.getTopAncestorHiddenByCSS=function(t){var n=null,e=t;do{if(!r(e))break;n=e}while(e=i(e));return n},t.getTopElement=e,t.getElementOnTop=function(n){if(!n.getBoundingClientRect)return null;var i=n.getBoundingClientRect(),r=i.x+i.width/2,e=i.y+i.height/2;return t.getTopElementFromPoint(document,r,e)},t.getTopElementFromPoint=s,t.isVisibleInDocument=function(t){return!function(t){var n=t.getBoundingClientRect();return n.right+ce.windowOffsetX()<0||n.bottom+ce.windowOffsetY()<0}(t)&&!r(t)&&!function(t){var n=e(t);return null!==n&&!t.contains(n)}(t)},t.isVisibleInViewportInForeground=function(t){return!r(t)&&u(t)},t.isInViewPort=u,t.getAttributeNS=function(t,n,i){var r=t.getAttributeNS(n,i);return""===r?t.hasAttributeNS(n,i)?r:null:r},t.isElementFocusable=function(t){return!!t.hasAttribute("tabIndex")||("true"===t.getAttribute("contentEditable")||(!(!l(t)||!t.hasAttribute("href"))||(!(!(S(t)||p(t)||y(t)||(n=t,a(n)&&"button"===n.localName))||t.hasAttribute("disabled"))||!(!function(t){return a(t)&&"details"===t.localName}(t)&&!function(t){return a(t)&&"summary"===t.localName}(t)))));var n}}(de||(de={}));var ye,pe=csSymbol(),me=function(){function t(t){var n,i,r,e,s=this;this.Nn=t,this.mr=null,this.gr=null,this.Nn=function(n){return ar((function(){return t(n)}))},"function"==typeof(null===(i=null===(n=window.CSSStyleSheet)||void 0===n?void 0:n.prototype)||void 0===i?void 0:i.insertRule)&&(this.mr=jr({target:window.CSSStyleSheet.prototype,methodName:"insertRule",hook:function(t){var n=t.context,i=t.args;s.Sr(n,i)}})),"function"==typeof(null===(e=null===(r=window.CSSStyleSheet)||void 0===r?void 0:r.prototype)||void 0===e?void 0:e.deleteRule)&&(this.gr=jr({target:window.CSSStyleSheet.prototype,methodName:"deleteRule",hook:function(t){var n=t.context,i=t.args;s.Ar(n,i)}}))}return t.prototype.observe=function(){var t,n;null===(t=this.mr)||void 0===t||t.activate(),null===(n=this.gr)||void 0===n||n.activate()},t.prototype.disconnect=function(){var t,n;null===(t=this.mr)||void 0===t||t.deactivate(),null===(n=this.gr)||void 0===n||n.deactivate()},t.prototype.Sr=function(t,n){var i=n[0],r=n[1];if(null!=t[pe]||t.ownerNode){var e={type:"cssRuleInserted",sheet:t,rule:i,index:r};this.Nn(e)}},t.prototype.Ar=function(t,n){var i=n[0];if(null!=t[pe]||t.ownerNode){var r={type:"cssRuleDeleted",sheet:t,index:i};this.Nn(r)}},t}(),ge=function(){function t(t){var n=this;this.br=1,this.Er=new Set,this.Rr=null,this.Nr=null,this.Tr=function(t,i){"initial"!==i&&"added"!==i||n.Or(t,t.adoptedStyleSheets)},this.kr=function(t){var i=t.sheet;if(n.Er.has(i))if("cssRuleInserted"===t.type){var r={type:"adoptedStyleSheetRuleInserted",sheetId:i[pe],rule:t.rule,index:t.index};n.Nn(r)}else if("cssRuleDeleted"===t.type){var e={type:"adoptedStyleSheetRuleDeleted",sheetId:i[pe],index:t.index};n.Nn(e)}},this.Nn=function(i){return ar((function(){return Zn(n,void 0,void 0,(function(){return Qn(this,(function(n){switch(n.label){case 0:return[4,vr(2)];case 1:return n.sent(),t(i),[2]}}))}))}))},this.Ir=new zr(this.Tr),"adoptedStyleSheets"in Document.prototype&&(this.Rr=qr(window.Document.prototype,"adoptedStyleSheets",(function(t,i){n.Or(t,i)}))),"ShadowRoot"in window&&"adoptedStyleSheets"in window.ShadowRoot.prototype&&(this.Nr=qr(window.ShadowRoot.prototype,"adoptedStyleSheets",(function(t,i){n.Or(t,i)}))),this.Cr=new me(this.kr)}return t.prototype.observe=function(){var t,n;this.Or(document,document.adoptedStyleSheets),this.Ir.observe(),null===(t=this.Rr)||void 0===t||t.activate(),null===(n=this.Nr)||void 0===n||n.activate(),this.Cr.observe()},t.prototype.disconnect=function(){var t,n;this.Er.clear(),this.Ir.disconnect(),null===(t=this.Rr)||void 0===t||t.deactivate(),null===(n=this.Nr)||void 0===n||n.deactivate(),this.Cr.disconnect()},t.prototype.Or=function(t,n){if(n.length){this._r(n);var i={type:"adoptedStyleSheetsSet",target:t,sheetsIds:Xi(n,(function(t){return t[pe]}))};this.Nn(i)}},t.prototype._r=function(t){var n=this;Ki(t,(function(t){if(!n.Er.has(t)){var i=n.br++;t[pe]=i,n.Er.add(t);var r={type:"adoptedStyleSheetRegistered",sheetId:i,cssRules:n.Mr(t)};n.Nn(r)}}))},t.prototype.Mr=function(t){var n=[];try{n=Xi(t.cssRules,(function(t){return t.cssText}))}catch(t){}return n},t}();function Se(t){for(var n,i=[],r=function(t){for(var n=new Map,i=function(t,i){var r=n.get(t);r||n.set(t,r=[]),csArray.prototype.push.call(r,i)},r=function(t){switch(t.type){case"attributes":i(t.target,{operation:"attribute",mutation:t});break;case"characterData":i(t.target,{operation:"characterData",mutation:t});break;case"childList":Ki(t.removedNodes,(function(n){return i(n,{operation:"remove",mutation:t})})),Ki(t.addedNodes,(function(n){return i(n,{operation:"insert",mutation:t})}))}},e=0,s=t;e<s.length;e++){r(s[e])}return n}(t),e=0,s=t;e<s.length;e++){var u=s[e];switch(u.type){case"attributes":var o=Ae(u,t);o&&csArray.prototype.push.call(i,o);break;case"characterData":csArray.prototype.push.call(i,u);break;case"childList":(n=csArray.prototype.push).call.apply(n,ti([i],be(u,r),!1))}}return csArray.prototype.filter.call(i,(function(t){return!function(t,n,i){if(t.attributeName){for(var r=n.get(t.target),e=r.length-1;e>=0;e--){var s=r[e];if(s.mutation.target===t.target&&s.mutation.attributeName===t.attributeName)return s.mutation!==t}return!1}if(t.addedNodes.length)return Qi(i,(function(n){return n!==t&&Qi(n.addedNodes,(function(n){return t.target===n||de.isDescendantOf(t.target,n)}))}));return!1}(t,r,i)}))}function Ae(t,n){return t}function be(t,n){var i,r,e;if(!function(t){return Qi(t.addedNodes,(function(t){return n.get(t).length>1}))||Qi(t.removedNodes,(function(t){return n.get(t).length>1}))}(t)){var s=Re(t),u=Ne(t);if(s||u){var o=[];return csArray.prototype.push.call(o,{nextSibling:s,previousSibling:u,target:t.target,type:"childList",addedNodes:t.addedNodes,removedNodes:t.removedNodes}),o}return[t]}var c=function(t,n){return tr(t.addedNodes,(function(i){var r=Te(i,n),e=csArray.prototype.filter.call(n.get(i),(function(t){return"insert"===t.operation}));switch(r){case ye.Insert:return t===e[e.length-1].mutation;case ye.None:return!0;case ye.Move:case ye.Remove:case ye.NoOp:return!1}}))}(t,n),h=function(t,n){return tr(t.removedNodes,(function(i){var r=Te(i,n),e=csArray.prototype.filter.call(n.get(i),(function(t){return"remove"===t.operation}));switch(r){case ye.Remove:return t===e[e.length-1].mutation;case ye.None:return!0;case ye.Move:case ye.Insert:case ye.NoOp:return!1}}))}(t,n),a=function(t,n){return tr(t.addedNodes,(function(i){var r=csArray.prototype.filter.call(n.get(i),(function(t){return"insert"===t.operation}));return Te(i,n)===ye.Move&&t===r[r.length-1].mutation}))}(t,n),f=Ee(c),v=Ee(a),l=[];if(f.length>1||v.length>1){var d=function(t,n,i,r){var e=[],s=!0;return Ki(t,(function(t){0!==t.length&&(csArray.prototype.push.call(e,{nextSibling:csNodenextSibling.apply(t[t.length-1]),previousSibling:t[0].previousSibling,target:i.target,type:"childList",addedNodes:t,removedNodes:s?r:[]}),s=!1)})),Ki(n,(function(t){0!==t.length&&csArray.prototype.push.call(e,{nextSibling:csNodenextSibling.apply(t[t.length-1]),previousSibling:t[0].previousSibling,target:i.target,movedNodes:t,addedNodes:[],removedNodes:[],type:"childList"})})),function(t,n){var i=function(t){var n;return(null===(n=t.movedNodes)||void 0===n?void 0:n.length)?t.movedNodes[0]:t.addedNodes[0]},r=function(n){return function(t,n){for(var i=t.length,r=0;r<i;r++)if(n(t[r],r))return r;return-1}(t.addedNodes,(function(t){return t===i(n)}))};csArray.prototype.sort.call(n,(function(t,n){return r(t)-r(n)}))}(i,e),e}(f,v,t,h);return(i=csArray.prototype.push).call.apply(i,ti([l],d,!1)),l}return(c.length>0||h.length>0)&&csArray.prototype.push.call(l,{nextSibling:null!==(r=Re(t))&&void 0!==r?r:t.nextSibling,previousSibling:null!==(e=Ne(t))&&void 0!==e?e:t.previousSibling,target:t.target,type:"childList",addedNodes:c,removedNodes:h}),a.length&&csArray.prototype.push.call(l,{nextSibling:csNodenextSibling.apply(a[0]),previousSibling:a[0].previousSibling,target:t.target,movedNodes:a,addedNodes:[],removedNodes:[],type:"childList"}),l}function Ee(t){if(t.length<=1)return[t];for(var n=[],i=0,r=0;r<t.length-1;r+=1)csNodenextSibling.apply(t[r])!==t[r+1]&&(csArray.prototype.push.call(n,csArray.prototype.slice.call(t,i,r+1)),i=r+1);return i>0&&csArray.prototype.push.call(n,csArray.prototype.slice.call(t,i,t.length)),n}function Re(t){if(t.nextSibling&&!t.nextSibling.isConnected){if(t.addedNodes.length)return csNodenextSibling.apply(t.addedNodes[t.addedNodes.length-1]);if(t.removedNodes.length)return csNodenextSibling.apply(t.removedNodes[t.removedNodes.length-1])}return null}function Ne(t){if(t.previousSibling&&!t.previousSibling.isConnected){if(t.addedNodes.length)return t.addedNodes[0].previousSibling;if(t.removedNodes.length)return t.removedNodes[0].previousSibling}return null}function Te(t,n){var i,r,e=null==n.get(t)?void 0:csArray.prototype.filter.call(n.get(t),(function(t){return"remove"===t.operation||"insert"===t.operation}));return!e||e.length<=1?ye.None:"".concat(null===(i=e[0])||void 0===i?void 0:i.operation,"-").concat(null===(r=e[e.length-1])||void 0===r?void 0:r.operation)}!function(t){t.Move="remove-insert",t.Remove="remove-remove",t.NoOp="insert-remove",t.Insert="insert-insert",t.None="none"}(ye||(ye={}));var Oe=function(){function t(t){var n=this;this.Nn=t,this.Pr=kr(),this.Dr=function(t){t.sheet.ownerNode&&("cssRuleInserted"===t.type?n.Nn({type:t.type,target:t.sheet.ownerNode,rule:t.rule,index:t.index}):"cssRuleDeleted"===t.type&&n.Nn({type:t.type,target:t.sheet.ownerNode,index:t.index}))},this.Nn=function(n){return ar((function(){return t(n)}))},this.Lr=new me((function(t){return ar((function(){return Zn(n,void 0,void 0,(function(){return Qn(this,(function(n){switch(n.label){case 0:return[4,vr()];case 1:return n.sent(),this.Dr(t),[2]}}))}))}))})),"adoptedStyleSheets"in Document.prototype&&(this.Ur=new ge(t))}return t.prototype.observe=function(){var t,n=this;this.ci=new Fr((function(t){return n.jr(t)}),(function(t,i){"added"===i&&n.qr(t)})),this.ci.observe(),this.Lr.observe(),null===(t=this.Ur)||void 0===t||t.observe()},t.prototype.disconnect=function(){var t,n;null===(t=this.ci)||void 0===t||t.disconnect(),this.Lr.disconnect(),null===(n=this.Ur)||void 0===n||n.disconnect()},t.prototype.jr=function(t){var n=this,i=Se(t);Ki(t,(function(t){return n.Pr.add(t)})),Zn(n,void 0,void 0,(function(){var t,n,r;return Qn(this,(function(e){switch(e.label){case 0:t=0,n=i,e.label=1;case 1:if(!(t<n.length))return[3,7];if(!(r=n[t]))throw new Error("empty record");switch(r.type){case"attributes":return[3,2];case"characterData":return[3,3];case"childList":return[3,4]}return[3,6];case 2:return this.Hr(r),[3,6];case 3:return this.zr(r),[3,6];case 4:return[4,vr()];case 5:return e.sent(),this.Br(r),[3,6];case 6:return t++,[3,1];case 7:return[2]}}))}))},t.prototype.Hr=function(t){var n={type:"attributeChanged",target:t.target,attribute:t.attributeName,namespace:t.attributeNamespace,oldValue:t.oldValue,newValue:de.getAttributeNS(t.target,t.attributeNamespace,t.attributeName)};this.Nn(n)},t.prototype.zr=function(t){var n={type:"characterDataChanged",target:t.target,oldValue:t.oldValue,newValue:t.target.data};this.Nn(n)},t.prototype.Br=function(t){var n,i,r;if(null===(n=t.removedNodes)||void 0===n?void 0:n.length){var e={type:"nodesRemoved",target:t.target,nodes:Xi(t.removedNodes,(function(t){return t}))};this.Nn(e)}if(null===(i=t.movedNodes)||void 0===i?void 0:i.length){var s={type:"nodesMoved",target:t.target,nodes:t.movedNodes,previousSibling:t.movedNodes[0].previousSibling||void 0,nextSibling:csNodenextSibling.apply(t.movedNodes[t.movedNodes.length-1])||void 0};this.Nn(s)}if(null===(r=t.addedNodes)||void 0===r?void 0:r.length){var u=[];if(Ki(t.addedNodes,(function(t){csArray.prototype.push.call(u,t)})),0===u.length)return;var o={type:"nodesAdded",target:t.target,previousSibling:t.previousSibling,nextSibling:t.nextSibling,nodes:u};this.Nn(o)}},t.prototype.qr=function(t){return Zn(this,void 0,void 0,(function(){var n,i;return Qn(this,(function(r){switch(r.label){case 0:return[4,vr()];case 1:return r.sent(),n=t.host,Qi(this.Pr.values(),(function(t){return Qi(t.addedNodes,(function(t){return t===n||de.isDescendantOf(n,t)}))}))?[2]:(i={type:"shadowRootAttached",target:t.host,shadowRoot:t},this.Nn(i),[2])}}))}))},t}(),ke=function(t){function n(n){var i=t.call(this,n)||this;return i.nodeType=4,i.data=n.data,i}return Jr(n,t),n}(ae),Ie=function(t){function n(n){var i=t.call(this,n)||this;return i.nodeType=8,i.data=n.data,i}return Jr(n,t),n}(ae),Ce=function(t){function n(n){var i=t.call(this,n)||this;return i.nodeType=10,i.name=n.name,i.publicId=n.publicId,i.systemId=n.systemId,i}return Jr(n,t),n}(ae),xe=function(t){function n(i){var r=t.call(this,i)||this;return r.nodeType=9,r.baseURI=n.getBaseURI(i),r.children=[],r}return Jr(n,t),n.getBaseURI=function(t){var n=t.baseURI;if(null==n){var i=t.getElementsByTagName("base");n=0!==i.length?i[0].href:t.URL}return n},n}(ae),_e=function(t){function n(n){var i=t.call(this,n)||this;return i.nodeType=11,i.mode=n.mode,i.children=[],i}return Jr(n,t),n}(ae),Me=function(){function t(t,n,i){var r;"string"==typeof t?(this.name=t,this.value=n,this.namespaceURI=null!=i?i:""):(this.name=t.name,this.value=t.value,this.namespaceURI=null!==(r=t.namespaceURI)&&void 0!==r?r:"")}return t.create=function(n){for(var i,r,e=n.attributes,s=new csArray(e.length),u=0;u<s.length;u++){var o=e[u];s[u]=new t(o.name,o.value,o.namespaceURI),"href"===o.name&&d(n)&&(s[u].value=null!==(r=null===(i=n.sheet)||void 0===i?void 0:i.href)&&void 0!==r?r:o.value)}return s},t}(),Pe={workTime:40,async:!0};De();function De(t){return void 0===t&&(t=Pe),function(n,i){var r;null!==(r=t.workTime)&&void 0!==r||(t.workTime=Pe.workTime);var e,s=new sr,u=function(t,n){t.hasChildNodes()&&s.push({node:t,serializedNode:n});var i=t instanceof Element&&csElementshadowRoot.apply(t);if(i){var r=n.shadowRoot=Le(i);u(i,r)}},o=!0,c=8,h=function(){var r;if(o)e=Le(n),u(n,e),o=!1;else if(s.isEmpty)return;for(var a=function(t){if(t<1)throw new Error("Precision should be >= 1");var n=0,i=performance.now();return{started:i,elapsed:function(){return++n%t==0&&(i=performance.now()),i-this.started}}}(100);!s.isEmpty;){if(t.async&&a.elapsed()>=t.workTime)return void(--c<=0&&setTimeout(h));var f=s.pop(),v=f.node,l=null!==(r=f.serializedNode.children)&&void 0!==r?r:[];if(!m(v))for(var d=0,w=csNodefirstChild.apply(v);w;w=csNodenextSibling.apply(w)){var y=Le(w);l[d++]=y,u(w,y)}}t.async?setTimeout((function(){return i(e)})):i(e)};if(t.async)for(var a=0;a<c;a++)setTimeout(h,1);else t.workTime=1/0,h()}}function Le(t){var n,i;switch(t.nodeType){case 1:i=n=new ve(t),n.attributes=function(t){if(m(t))return[];return Me.create(t)}(t);break;case 3:i=new fe(t);break;case 4:i=new ke(t);break;case 8:i=new Ie(t);break;case 10:i=new Ce(t);break;case 9:i=new xe(t);break;case 11:i=new _e(t);break;default:throw new Error("Node type not supported: "+t.nodeType)}return i}var Ue,je=function(){function t(){this.Fr=[],this.isStarted=!1}return t.prototype.produceEvent=function(t){var n;this.isStarted&&(null!==(n=t.timestamp)&&void 0!==n||(t.timestamp=Et()),csArray.prototype.forEach.call(this.Fr,(function(n){return n(t)})))},t.prototype.start=function(){this.isStarted||(this.isStarted=!0,this.onStart())},t.prototype.stop=function(){this.isStarted&&(this.isStarted=!1,this.onStop(),this.Fr=[])},t.prototype.subscribe=function(t){var n=this;return csArray.prototype.push.call(this.Fr,t),function(){var i=csArray.prototype.indexOf.call(n.Fr,t);csArray.prototype.splice.call(n.Fr,i,1)}},t}(),qe=De();!function(t){function n(){var n=null!==t&&t.apply(this,arguments)||this;return n.wr=new Oe((function(t){return n.Vr(t)})),n}Jr(n,t),n.prototype.onStart=function(){this.wr.observe(),this.produceEvent(new le((function(t){return qe(document.documentElement,(function(n){t({type:"DomEvent",domEvent:"initialDOM",initialDOM:n})}))})))},n.prototype.onStop=function(){var t;null===(t=this.wr)||void 0===t||t.disconnect()},n.prototype.Vr=function(t){var n={type:"DomEvent",domEvent:t.type};if(!this.Gr(t)){switch("target"in t&&(n.target=Pi(t.target),n.targetProps=ki.getProperties(t.target)),t.type){case"attributeChanged":n.attribute=t.attribute,n.namespace=t.namespace,n.newValue=t.newValue,n.oldValue=t.oldValue,n.localName=Wi(t.target),n.linkRel=v(t.target)?t.target.rel:null,n.parentLocalName=t.target.parentElement?Wi(t.target.parentElement):null,"input"===n.localName&&(n.inputType=t.target.getAttribute("type"));break;case"characterDataChanged":n.newValue=t.newValue,n.oldValue=t.oldValue,n.targetNodeType=t.target.nodeType,n.parentLocalName=t.target.parentElement?Wi(t.target.parentElement):null;break;case"nodesAdded":var i=new le,r=Wr({},n);u=t.nodes,o=function(n){i.resolve(Wr(Wr({},r),{nodes:n,nextSibling:t.nextSibling?Pi(t.nextSibling):null,previousSibling:t.previousSibling?Pi(t.previousSibling):null}))},c=0,h=new csArray(u.length),Ki(u,(function(t,n){qe(t,(function(t){h[n]=t,++c===u.length&&o(h)}))})),n=i;break;case"nodesMoved":n.previousSibling=t.previousSibling?Pi(t.previousSibling):null,n.nextSibling=t.nextSibling?Pi(t.nextSibling):null,n.nodesIds=Xi(t.nodes,Pi);break;case"nodesRemoved":n.nodes=Xi(t.nodes,Pi);break;case"shadowRootAttached":n.shadowRoot=Pi(t.shadowRoot);var e=new le,s=Wr({},n);qe(t.shadowRoot,(function(t){e.resolve(Wr(Wr({},s),{shadowRoot:t}))})),n=e;break;case"cssRuleInserted":n.index=t.index,n.rule=t.rule;break;case"cssRuleDeleted":n.index=t.index;break;case"adoptedStyleSheetRegistered":n.sheetId=t.sheetId,n.cssRules=t.cssRules;break;case"adoptedStyleSheetsSet":n.sheetsIds=t.sheetsIds;break;case"adoptedStyleSheetRuleInserted":n.sheetId=t.sheetId,n.rule=t.rule,n.index=t.index;break;case"adoptedStyleSheetRuleDeleted":n.sheetId=t.sheetId,n.index=t.index}var u,o,c,h;this.produceEvent(n)}},n.prototype.Gr=function(t){switch(t.type){case"nodesAdded":case"nodesMoved":case"nodesRemoved":case"shadowRootAttached":return Ii.isSensitive(t.target)||Ii.isSensitiveChild(t.target);case"characterDataChanged":var n=t.target.parentElement;return null!==n&&(Ii.isSensitive(n)||Ii.isSensitiveChild(n));case"attributeChanged":return Ii.isSensitiveChild(t.target)||Ii.isSensitiveAttribute(t.target,t.attribute);case"cssRuleInserted":case"cssRuleDeleted":return Ii.isSensitiveChild(t.target);default:return!1}}}(je);!function(t){t.isDOMEvent=function(t){return"DomEvent"===t.type}}(Ue||(Ue={}));var He,ze=function(){function t(){this.Fr=[]}return t.prototype.start=function(){},t.prototype.stop=function(){this.Fr.length=0,this.Fr=[]},t.prototype.pushEvent=function(t){var n=this;if(this.isListening(t)){var i=this.Fr;setTimeout((function(){var r=n.processEvent(t);null!=r&&csArray.prototype.forEach.call(i,(function(t){return t(r)}))}))}else setTimeout((function(){csArray.prototype.forEach.call(n.Fr,(function(n){return n(t)}))}))},t.prototype.subscribe=function(t){var n=this;return csArray.prototype.push.call(this.Fr,t),function(){n.Fr=csArray.prototype.filter.call(n.Fr,(function(n){return n!==t}))}},t.prototype.emitEvent=function(t){var n=this;ar((function(){return csArray.prototype.forEach.call(n.Fr,(function(n){return n(t)}))}))},t}();function Be(t){for(var n=new ArrayBuffer(t.length),i=new Uint8Array(n),r=0,e=t.length;r<e;r+=1)i[r]=csString.prototype.charCodeAt.call(t,r);return n}function Fe(t){for(var n=new Uint8Array(t),i="",r=0;r<n.byteLength;r+=1)i+=csString.fromCodePoint(n[r]);return i}function Ve(t){return Be(self.atob(t))}function Ge(t){var n=csArray.from(new Uint8Array(t));return csArray.prototype.join.call(csArray.prototype.map.call(n,(function(t){return csString.prototype.padStart.call(t.toString(16),2,"0")})),"")}function Je(t){var n=-1!==csString.prototype.indexOf.call(t,";base64,"),i=csString.prototype.indexOf.call(t,","),r=n?[csString.prototype.substring.call(t,0,i-7),csString.prototype.substring.call(t,i+1)]:[csString.prototype.substring.call(t,0,i),csString.prototype.substring.call(t,i+1)];!n&&/^%3Csvg/i.test(r[1])&&(r[1]=decodeURIComponent(r[1]));var e=n?Ve(r[1]):Be(r[1]);return new Blob([e],{type:csString.prototype.replace.call(r[0],"data:","")})}!function(t){var n="replaceAll"in csString.prototype;t.stringReplaceAll=function(t,i,r){if(n)return csString.prototype.replaceAll.call(t,i,r);var e,s=new RegExp((e=i,csString.prototype.replace.call(e,/[.*+?^${}()|[\]\\]/g,"\\$&")),"g");return csString.prototype.replace.call(t,s,r)}}(He||(He={}));var We=function(){function t(){}return t.toStaticResourceEvent=function(n,i,r){return Yr(this,void 0,void 0,(function(){var e,s,u,o;return Xr(this,(function(c){switch(c.label){case 0:return[4,t.Jr(n)];case 1:return(e=c.sent())?[4,t.Wr(e)]:[2,null];case 2:return s=c.sent(),u=$r(n)?void 0:n,o={type:"StaticResourceManagerEvent",timestamp:r,resourceId:i,resource:{hash:s,data:e}},u&&(o.originalResourceName=u),[2,o]}}))}))},t.toCSSStaticResourceEvent=function(n,i,r,e){return Yr(this,void 0,void 0,(function(){var s,u,o,c;return Xr(this,(function(h){switch(h.label){case 0:return[4,t.Yr(n,e)];case 1:return s=h.sent(),u=Yt(n),(o=s.get(u))?(c={type:"StaticResourceManagerEvent",timestamp:r,resourceId:i,resource:{hash:o.hash,data:o.data}},s.delete(u),s.size&&(c.nestedResources=[],s.forEach((function(t){t&&csArray.prototype.push.call(c.nestedResources,{hash:t.hash,data:t.data})}))),[2,c]):[2,null]}}))}))},t.Wr=function(t){return Yr(this,void 0,void 0,(function(){var n;return Xr(this,(function(i){switch(i.label){case 0:return[4,t.arrayBuffer()];case 1:return n=i.sent(),[4,crypto.subtle.digest(this.Xr,n)];case 2:return[2,Ge(i.sent())]}}))}))},t.Jr=function(t){return Yr(this,void 0,void 0,(function(){var n,i;return Xr(this,(function(r){switch(r.label){case 0:return $r(t)?[3,3]:[4,window.fetch(t)];case 1:return[4,r.sent().blob()];case 2:return n=r.sent(),[3,4];case 3:if(!(i=Je(t)))return[2,null];n=i,r.label=4;case 4:return[2,n]}}))}))},t.Yr=function(n,i){return Yr(this,void 0,void 0,(function(){var r,e,s,u,o,c,h,a,f,v,l,d,w,y,p,m;return Xr(this,(function(g){switch(g.label){case 0:r=new Map,e=Yt(n),s=[{resourceRawPath:n,resourceAbsolutePath:e}],g.label=1;case 1:if(!(s.length>0))return[3,17];if(u=csArray.prototype.pop.call(s),!i&&null!==u.resourceAbsolutePath&&!$r(u.resourceAbsolutePath))return r.set(u.resourceAbsolutePath,null),[3,1];if(void 0!==r.get(u.resourceAbsolutePath))return[3,1];g.label=2;case 2:return g.trys.push([2,15,,16]),null===u.resourceRawPath||csString.prototype.indexOf.call(u.resourceRawPath,".css")>0?u.data?[3,5]:[4,fetch(u.resourceAbsolutePath)]:[3,8];case 3:return y=g.sent(),o=u,[4,y.text()];case 4:o.data=g.sent(),g.label=5;case 5:for(u.nestedResources||(u.nestedResources=re(u.data)),c=!1,h=!1,a=function(n){var i=$r(n)?n:u.resourceAbsolutePath?Xt(n,u.resourceAbsolutePath):Yt(n),e=r.get(i);if(void 0!==e){if(null!==e){var o=t.$r(e,n);u.data=He.stringReplaceAll(u.data,n,o)}return"continue"}var a=void 0!==csArray.prototype.find.call(s,(function(t){return t.resourceAbsolutePath===i}));a||(c=!0,h||(csArray.prototype.push.call(s,u),h=!0),csArray.prototype.push.call(s,{resourceRawPath:n,resourceAbsolutePath:i}))},f=0,v=u.nestedResources;f<v.length;f++)l=v[f],a(l);return c?[3,7]:[4,t.Kr(u.data)];case 6:d=g.sent(),r.set(u.resourceAbsolutePath,{hash:d.hash,data:d.data}),g.label=7;case 7:return[3,14];case 8:return w=void 0,$r(u.resourceAbsolutePath)?[3,11]:[4,fetch(u.resourceAbsolutePath)];case 9:return[4,(y=g.sent()).blob()];case 10:return w=g.sent(),[3,12];case 11:if(!(p=Je(u.resourceAbsolutePath)))return r.set(u.resourceAbsolutePath,null),[3,1];w=p,g.label=12;case 12:return[4,t.Wr(w)];case 13:m=g.sent(),r.set(u.resourceAbsolutePath,{hash:m,data:w}),g.label=14;case 14:return[3,16];case 15:return g.sent(),r.set(u.resourceAbsolutePath,null),[3,16];case 16:return[3,1];case 17:return[2,r]}}))}))},t.$r=function(n,i){var r="cs://resources/".concat(n.hash);return $r(i)||(r+="?".concat(t.Zr,"=").concat(i)),r},t.Kr=function(n){return Yr(this,void 0,void 0,(function(){var i,r,e;return Xr(this,(function(s){switch(s.label){case 0:return[4,(i=new Blob([n],{type:"text/css"})).arrayBuffer()];case 1:return r=s.sent(),[4,crypto.subtle.digest(t.Xr,r)];case 2:return e=s.sent(),[2,{data:i,hash:Ge(e)}]}}))}))},t.Xr="SHA-256",t.Zr="original-resource-name",t}(),Ye=function(t){function n(){var n=t.call(this)||this;return n.Qr="cssrm://",n.te=0,n.ne=!1,n}return Jr(n,t),n.prototype.onInitialDOMDone=function(t){var n={type:"DomEvent",domEvent:"initialDOM",initialDOM:t,timestamp:0};this.processEvent(n)},n.prototype.isListening=function(t){return!!n.isSupported()&&(t=this.ie(t),!!Ue.isDOMEvent(t)&&("initialDOM"===t.domEvent||"nodesAdded"===t.domEvent||"attributeChanged"===t.domEvent||"characterDataChanged"===t.domEvent))},n.prototype.processEvent=function(t){switch(t.domEvent){case"initialDOM":case"nodesAdded":this.re(t);break;case"attributeChanged":this.ee(t);break;case"characterDataChanged":this.se(t)}return t},n.prototype.disableOnlineAssets=function(){this.ne=!1},n.prototype.enableOnlineAssets=function(){this.ne=!0},n.prototype.isOnlineAssetsActivated=function(){return this.ne},n.prototype.ie=function(t){var n,i=t;switch(null===(n=t.originalEvent)||void 0===n?void 0:n.type){case lr.MUTATION_CHARACTER_DATA:i.type="DomEvent",i.domEvent="characterDataChanged",i.parentLocalName=t.originalEvent[dr].parentLocalName,i.newValue=t.originalEvent[dr].newValue,i.target=t.originalEvent.args[0],i.timestamp=t.originalEvent.date;break;case lr.MUTATION_ATTRIBUTE:i.type="DomEvent",i.domEvent="attributeChanged",i.attribute=t.originalEvent[dr].attribute,i.newValue=t.originalEvent[dr].newValue,i.oldValue=t.originalEvent[dr].oldValue,i.parentLocalName=t.originalEvent[dr].parentLocalName,i.localName=t.originalEvent[dr].localName,i.target=t.originalEvent.args[0],i.timestamp=t.originalEvent.date;break;case lr.MUTATION_INSERT:i.type="DomEvent",i.domEvent="nodesAdded",i.nodes=[t.originalEvent[dr].nodes],i.target=t.originalEvent.args[0],i.nextSibling=t.originalEvent.args[1],i.timestamp=t.originalEvent.date}return i},n.prototype.re=function(t){for(var n=this,i=0,r="initialDOM"===t.domEvent?[t.initialDOM]:t.nodes;i<r.length;i++){var e=r[i];ki.traverse(e,(function(t,i){if(3===t.nodeType&&i)n.ue(t,i.localName);else if(ve.isElement(t)){var r=Zi(t.attributes,(function(t){return"style"===t.name}));if(r&&(r.value=n.oe(r.value)),n.ce(t)||n.he(t,i)){var e=Zi(t.attributes,(function(t){return"src"===t.name}));e&&e.value&&(e.value=n.ae(e.value));var s=Zi(t.attributes,(function(t){return"srcset"===t.name}));if(s)return void(s.value=n.fe(s.value))}if(n.ve(t)&&n.ne){var u=Zi(t.attributes,(function(t){return"href"===t.name}));if(!u||!u.value)return;n.te++,n.le(Yt(u.value),n.te,!0),n.de(t,u,n.te)}}}))}},n.prototype.de=function(t,n,i){csArray.prototype.push.call(t.attributes,{name:"data-cs-original-href",namespaceURI:"",value:n.value}),n.value=this.Qr+i},n.prototype.ue=function(t,n){if(t&&"style"===n){var i=this.oe(t.data);null!==i&&(t.data=i)}},n.prototype.se=function(t){if("style"===t.parentLocalName&&t.newValue){var n=this.oe(t.newValue);null!==n&&(t.newValue=n)}},n.prototype.ee=function(t){if(t.newValue&&t.newValue!==t.oldValue){var n="src"===t.attribute,i="srcset"===t.attribute;if("style"===t.attribute)t.newValue=this.oe(t.newValue);else if(n||i){var r="img"===t.localName,e="source"===t.localName&&t.parentLocalName&&"picture"===t.parentLocalName;(r||e)&&(n&&(t.newValue=this.ae(t.newValue)),i&&(t.newValue=this.fe(t.newValue)))}}},n.prototype.ae=function(t){return $r(t)||this.ne?(this.te++,this.le(t,this.te,!1,Et()),this.Qr+this.te):t},n.prototype.fe=function(t){if(!this.ne)return t;for(var n=t,i=Qr(t),r=Et(),e=0,s=i;e<s.length;e++){var u=s[e];this.te++,this.le(Yt(u),this.te,!1,r),n=csString.prototype.replace.call(n,u,this.Qr+this.te)}return n},n.prototype.oe=function(t){for(var n=re(t),i=t,r=Et(),e=0,s=n;e<s.length;e++){var u=s[e],o=$r(u);if((o||this.ne)&&!this.we(u)){this.te++,i=csString.prototype.replace.call(i,u,this.Qr+this.te);var c=Zr(u);o?this.le(u,this.te,!1,r):this.ne&&(c?this.le(u,this.te,!0,r):this.le(Yt(u),this.te,!1,r))}}return i},n.prototype.le=function(t,n,i,r){var e=this;void 0===r&&(r=Et());var s=i?We.toCSSStaticResourceEvent:We.toStaticResourceEvent,u=new le((function(i){return Yr(e,void 0,void 0,(function(){var e,u;return Xr(this,(function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),[4,s(t,n,r,this.ne)];case 1:return(e=o.sent())?i(e):an.warn("Failed to process static resource: ".concat(t)),[3,3];case 2:return u=o.sent(),an.warn(u),[3,3];case 3:return[2]}}))}))}));this.emitEvent(u)},n.prototype.ce=function(t){return"img"===t.localName},n.prototype.he=function(t,n){return"source"===t.localName&&!!n&&"picture"===n.localName},n.prototype.ve=function(t){return"link"===t.localName&&csArray.prototype.some.call(t.attributes,(function(t){return"rel"===t.name&&"stylesheet"===t.value}))},n.isSupported=function(){return Nt()&&("crypto"in self||"crypto"in window)&&!!crypto&&!!crypto.subtle&&!!crypto.subtle.digest&&!!csArray.from},n.prototype.we=function(t){return 0===csString.prototype.replace.call(t,/['"]+/g,"").length},n}(ze),Xe=function(t){function n(n,i,r,e,s,u,o,c,h,a,f,v,l,d,w,y,p,m,g,S,A,b){void 0===m&&(m=[]);var E=t.call(this)||this;return E.L=n,E.ye=i,E.pe=r,E.ge=e,E.Se=s,E.Ae=u,E.be=o,E.Ee=c,E.Re=h,E.X=a,E.Ne=f,E.Te=v,E.Oe=l,E.ke=d,E.Ie=w,E.Ce=y,E.xe=p,E._e=m,E.Me=g,E.Pe=S,E.De=A,E.Le=b,E.Ue=0,E.je=0,E.qe=0,E.He=new Sr,E.ze={allowFromQuotaService:!0,allowFromSerialization:!0},E.Be=ni((function(){E.ye.eventsCount()>0&&E.Fe()}),2e3),E.Ve=function(t){return E.processBrowserEvent(t)},E.Ge=function(t){return E.Je(t)},E.We=0,E.Ye=0,E.Xe=new Er,E.$e=!1,E.Ke=51200,E.Ze=!1,E.Qe=!1,E.ns=[],E.rs=new Or((function(t){return E.es(t)}),(function(t){switch(t){case br.Active:E.Ae.start();break;case br.Stopped:E.Ae.stop()}}),[ii.RESOURCE_HASHES]),E.ss=function(t){E.xe.removeBatchInProgress("".concat(t.params.sn,".").concat(t.params.pn,".").concat(t.params.ri))},E}return J(n,t),n.prototype.init=function(){this.us(),this.Ce.onLoad(this.ss),this.Ce.onError(this.ss)},n.prototype.us=function(){var t,n,i,r=this;this.Pe.onEvent(this.Ve,this.Ge),this.be.onEvent(this.Ge),this.Ee.onEvent(this.Ge),null===(t=this.Ie)||void 0===t||t.onTextNodeToEncrypt(this.Ve),null===(n=this.Ie)||void 0===n||n.onApiErrorToEncrypt((function(t){r.cs(t)})),null===(i=this.Ie)||void 0===i||i.onUserIdentifierToEncrypt(this.Ve),this.Xe.onEvent((function(t){return t===wr.Blur?r.hs():r.$e?void 0:(r.$e=!0,setTimeout((function(){r.$e=!1})),t===wr.Hidden?r.hs():r.fs())}))},n.prototype.isRecording=function(){return this.X.hasValidSession()&&this.isStarted},n.prototype.hs=function(){var t=this;if(this.canSendEvents()){this.Pe.flush(),this.xe.saveBatchesInProgress(),Ki(this._e,(function(n){var i,r;return Ki(null!==(r=null===(i=n.getPendingEvents)||void 0===i?void 0:i.call(n))&&void 0!==r?r:[],(function(n){return t.ye.addEvent(n)}))}));var n=this.ye.getEvents();if(0!==n.length){var i=this.Ce.getQueryParams();i.rst=this.getRecordingStartTimestamp(),i.let=this.getRecordingLastEventTimestamp();var r=this.ge.getCurrentIndex();i.ri=r.toString(),this.Me.removeQueryParams(),this.Me.setQueryParams(i),this.Ye=n[n.length-1].date;var e=this.ye.stringifyEvents();if(e.length>this.Ke){var s=this.vs();if(s.length>0){var u=ct(s);this.Me.send(u)||this.xe.save({key:"".concat(i.sn,".").concat(i.pn,".").concat(i.ri,".last"),metadata:W(W({},i),{datatype:"json"}),events:u}),this.ge.increment()}if(this.ye.eventsCount()>0){i.ri=this.ge.getCurrentIndex().toString();var o=this.ye.stringifyEvents();this.xe.save({key:"".concat(i.sn,".").concat(i.pn,".").concat(i.ri,".last"),metadata:W(W({},i),{datatype:"json"}),events:o}),this.ge.increment()}}else{this.Me.send(e)||this.xe.save({key:"".concat(i.sn,".").concat(i.pn,".").concat(i.ri,".last"),metadata:W(W({},i),{datatype:"json"}),events:e}),this.ge.increment()}this.Me.removeQueryParams(),this.ye.clearEvents()}}},n.prototype.fs=function(){var t=this;if(this.canSendEvents()){this.Pe.flush();var n=this.Ce.getQueryParams();this.xe.saveBatchesInProgress(),n.rst=this.getRecordingStartTimestamp(),delete n.ri,n.hlm="true",this.Me.removeQueryParams(),Ki(this._e,(function(n){var i,r;return Ki(null!==(r=null===(i=n.getPendingEvents)||void 0===i?void 0:i.call(n))&&void 0!==r?r:[],(function(n){return t.ye.addEvent(n)}))}));var i=this.ye.getEvents();if(0===i.length)return delete n.let,delete n.rst,this.Me.setQueryParams(n),this.Me.send(),void this.Me.removeQueryParams();this.Ye=i[i.length-1].date,n.let=this.getRecordingLastEventTimestamp(),this.Me.setQueryParams(n);var r=this.ye.stringifyEvents();if(r.length>this.Ke){var e=this.vs();if(e.length>0){var s=ct(e);this.Me.send(s)||this.xe.save({key:"".concat(n.sn,".").concat(n.pn,".last"),metadata:W(W({},n),{datatype:"json"}),events:s})}else delete n.let,delete n.rst,delete n.ri,this.Me.removeQueryParams(),this.Me.setQueryParams(n),this.Me.send(),this.Me.removeQueryParams();if(this.ye.eventsCount()>0){n.rst=this.getRecordingStartTimestamp(),n.let=this.getRecordingLastEventTimestamp();var u=this.ge.getCurrentIndex();n.ri=u.toString();var o=this.ye.stringifyEvents();this.xe.save({key:"".concat(n.sn,".").concat(n.pn,".").concat(n.ri,".last"),metadata:W(W({},n),{datatype:"json"}),events:o}),this.ge.increment()}}else{this.Me.send(r)||(this.xe.save({key:"".concat(n.sn,".").concat(n.pn,".").concat(n.ri,".last"),metadata:W(W({},n),{datatype:"json"}),events:r}),this.ge.increment())}this.Me.removeQueryParams(),this.ye.clearEvents()}},n.prototype.isMutationTrackerStarted=function(){return this.Ae.isStarted()},n.prototype.blockSendingEventsFromQuotaService=function(){this.ze.allowFromQuotaService=!1},n.prototype.allowSendingEventsFromQuotaService=function(){this.ze.allowFromQuotaService=!0},n.prototype.blockSendingEventsFromSerialization=function(){this.ze.allowFromSerialization=!1},n.prototype.allowSendingEventsFromSerialization=function(){this.ze.allowFromSerialization=!0},n.prototype.canSendEvents=function(){return this.ze.allowFromQuotaService&&this.ze.allowFromSerialization},n.prototype.onIframeJavascriptError=function(t){this.ls(t)},n.prototype.onIframeDetailedApiError=function(t){this.ds(t)},n.prototype.onIframeRecordingUserEvent=function(t){for(var n=0,i=t;n<i.length;n++){var r=i[n];this.Je(r)}},n.prototype.onIframeRecordingBrowserEvent=function(t){if(this.isMutationTrackerStarted())for(var n=0,i=t;n<i.length;n++){var r=i[n];this.processBrowserEvent(r)}},n.prototype.processBrowserEvent=function(t){this.Re.isCurrentPageviewValid()&&this.rs.pushEvent(t,{isUserEvent:!1})},n.prototype.Je=function(t){this.Re.isSessionValid()&&this.rs.pushEvent(t,{isUserEvent:!0})},n.prototype.es=function(t){this.ye.addEvent(t),this.ye.isThresholdReached()?this.pushEvents():this.ye.isFull()&&this.Be(),this.ws(t)},n.prototype.ws=function(t){this.L.emitDebugEvents&&this.He.emit("recordingEvent",W(W({},t),{typeName:ii[t.type]}))},n.prototype.onStart=function(){var t=this;this.rs.reset(),Hr.start(),this.Xe.start(),this.initStates(),this.Se.start(),this.Pe.start(),this.Ee.start(),this.Ne&&this.Te&&this.Ne.subscribe(n.ys,(function(n){return t.ls(n)})),this.Oe&&this.ke&&this.Le&&this.Oe.subscribe(n.ys,(function(n){return t.ds(n)}),{detailedEvent:!0}),this.L.emitDebugEvents&&this.He.emit("replayRecordingStarted"),csArray.prototype.forEach.call(this.ns,(function(n){return t.ps(n)})),this.ns=[]},n.prototype.onStop=function(){var t;this.rs.disconnect(),Hr.stop(),this.Xe.stop(),this.Se.stop(),this.be.stop(),this.Ee.stop(),this.Ne&&this.Ne.unsubscribe(n.ys),this.Oe&&this.Oe.unsubscribe(n.ys),this.Pe.stop(),this.Qe=!1,null===(t=this.De)||void 0===t||t.disableOnlineAssets()},n.prototype.clearStates=function(){this.Ae.flushEvents(),this.Pe.flush(),this.Be.cancel(),this.pushEvents(),this.Ce.removeQueryParams()},n.prototype.initStates=function(){this.We=Et(),this.ge.reset(),this.Ue=0,this.je=0,this.qe=0,this.Ce.setQueryParams(this.pe.getRequestParameters())},n.prototype.pushEvents=function(){Ki(this._e,(function(t){var n;return null===(n=t.flushEvents)||void 0===n?void 0:n.call(t)})),this.ye.eventsCount()>0&&(this.isStarted?this.Fe():this.ye.clearEvents())},n.prototype.Fe=function(){if(this.canSendEvents()){var t=this.ye.getEvents();this.Ye=t[t.length-1].date;var n=this.ge.getCurrentIndex();this.Ce.setQueryParams({ri:n.toString(),rst:this.getRecordingStartTimestamp(),let:this.getRecordingLastEventTimestamp()});var i=this.Ce.getQueryParams();this.xe.addBatchInProgress("".concat(i.sn,".").concat(i.pn,".").concat(n),this.Ce.getQueryParams(),t),this.Ce.send(t),this.ge.increment(),this.ye.clearEvents(),this.gs&&this.gs()}},n.prototype.addInitialDom=function(t){var n;null===(n=this.De)||void 0===n||n.onInitialDOMDone(t.args[0]),this.ye.addEventByTimestamp(t),this.ws(t)},n.prototype.ds=function(t){if(this.Le&&(t.plainCustomRequestHeaders||t.plainCustomResponseHeaders||t.requestBodyAttributes||t.responseBodyAttributes||t.customRequestHeaders||t.customResponseHeaders||t.queryParameters||t.requestBody||t.responseBody)){if(this.Le.truncate(t),this.Ie)return void this.Ie.registerApiErrorToEncrypt(t);t.customRequestHeaders="",t.customResponseHeaders="",t.requestBodyAttributes="",t.responseBodyAttributes="",t.queryParameters="",t.requestBody="",t.responseBody=""}this.cs(t)},n.prototype.cs=function(t){if(this.je<n.Ss){var i={type:ii.API_ERROR,date:Et(),args:[this.ke.anonymize(t)]};this.Ve(i),this.je=this.je+1}},n.prototype.ls=function(t){if(this.Ue<n.As){var i={type:ii.JAVASCRIPT_ERROR,date:Et(),args:[this.Te.anonymize(t)]};this.Ve(i),this.Ue=this.Ue+1}},n.prototype.bs=function(t){if(this.qe<n.Es){var i={type:ii.CUSTOM_ERROR,date:Et(),args:[t]};this.Ve(i),this.qe=this.qe+1}},n.prototype.Rs=function(t){var i,r;t===Nn.ETR_SESSION?this.Ce.setQueryParams(((i={})[n.Ns]=n.Ts,i)):t===Nn.ETR_PAGE&&this.Ce.setQueryParams(((r={})[n.Os]=n.Ts,r))},n.prototype.clearEvents=function(){this.ye.clearEvents()},n.prototype.onCustomJavaScriptErrorEvent=function(t){this.ls(t)},n.prototype.onCustomErrorEvent=function(t){this.bs(t)},n.prototype.onPageEvent=function(t){this.ks(t)},n.prototype.onUserIdentifierEvent=function(t){var n,i={userIdentifier:t,date:Et(),keyId:this.L.encryptionPublicKeyId};null===(n=this.Ie)||void 0===n||n.registerUserIdentifierToEncrypt(i)},n.prototype.onEventTriggerRecording=function(t,n){this.isStarted?this.ps({eventName:t,eventType:n}):csArray.prototype.push.call(this.ns,{eventName:t,eventType:n})},n.prototype.ps=function(t){this.Rs(t.eventType),this.ks(t.eventName),this.pushEvents()},n.prototype.ks=function(t){var i={type:ii.PAGE_EVENT,date:Et(),args:[{eventName:csString.prototype.slice.call(t,0,n.Is)}]};this.ye.addEvent(i)},n.prototype.triggerUnanonymizationConsentGranted=function(){var t={date:Et(),type:ii.UNANONYMIZED_CONSENT_GRANTED};this.ye.addEvent(t)},n.prototype.triggerUnanonymizationConsentWithdrawn=function(){var t={date:Et(),type:ii.UNANONYMIZED_CONSENT_WITHDRAWN};this.ye.addEvent(t)},n.prototype.triggerRecordingForSessionGranted=function(){var t={date:Et(),type:ii.RECORDING_INFO_EVENT,args:[ri.RECORDING_CONSENT_FOR_SESSION_GRANTED]};this.ye.addEvent(t)},n.prototype.triggerRecordingForSessionWithdrawn=function(){var t={date:Et(),type:ii.RECORDING_INFO_EVENT,args:[ri.RECORDING_CONSENT_FOR_SESSION_WITHDRAWN]};this.ye.addEvent(t)},n.prototype.activateOnlineAssetsOnNextPageview=function(){this.Ze=!0,this.Qe=!0},n.prototype.getStaticResourceManagerStatus=function(){return this.De?{isStarted:this.L.useStaticResourceManager&&Ye.isSupported(),onlineAssets:{activated:this.De.isOnlineAssetsActivated(),enabledOnNextPageview:this.Ze,enabledForChildrenOnNextStart:this.Qe}}:null},n.prototype.updateStaticResourceManagerOnlineAssets=function(){this.De&&this.Ze&&(this.De.enableOnlineAssets(),this.Qe=!0,this.Ze=!1)},n.prototype.onRecordingRequestSent=function(t){this.gs=t},n.prototype.getRecordingStartTimestamp=function(){return this.We.toString()},n.prototype.getRecordingLastEventTimestamp=function(){return this.Ye.toString()},n.prototype.onOptOut=function(){Ki(this._e,(function(t){var n;return null===(n=t.releaseResources)||void 0===n?void 0:n.call(t)}))},n.prototype.vs=function(){return this.ye.extractEvents(ii.API_ERROR,ii.JAVASCRIPT_ERROR,ii.CUSTOM_ERROR,ii.TEXT_VISIBILITY,ii.POINTER_DOWN)},n.ys="RecordingService",n.Is=255,n.As=20,n.Ss=20,n.Es=20,n.Os="etrp",n.Ns="etrs",n.Ts="1",X([pi("addInitialDom")],n.prototype,"addInitialDom",null),n}(Ar),$e=function(t){function n(n,i,r){var e=t.call(this)||this;return e.Yt=n,e.Me=i,e.Ce=r,e.Cs=!1,e.xs={},e._s=function(t){if(0!==t.length)for(var n=0,i=t;n<i.length;n++){var r=i[n],s=r.metadata,u=r.events;e.Ms(s.rt)&&e.Ce.send(u,s)}},window.addEventListener("focus",(function(){e.recover()})),e}return J(n,t),n.prototype.onStart=function(){this.xs={}},n.prototype.onStop=function(){},n.prototype.recover=function(){this.Yt.recover(this._s)},n.prototype.addBatchInProgress=function(t,n,i){this.xs[t]={metadata:W({},n),events:i}},n.prototype.removeBatchInProgress=function(t){delete this.xs[t]},n.prototype.blockSendingLastMessage=function(){this.Cs=!1},n.prototype.allowSendingLastMessage=function(){this.Cs=!0},n.prototype.sendLastMessageBeacon=function(){if(this.Cs){var t=this.Ce.getQueryParams(),n=(t.ri,t.rst,t.let,Y(t,["ri","rst","let"]));n.hlm="true",this.Me.setQueryParams(n),this.Me.send()}},n.prototype.Ms=function(t){return!!t&&-1===csString.prototype.indexOf.call(t,En.TEMPORARILY_RECORDED)},n.prototype.saveBatchesInProgress=function(){var t=this;csArray.prototype.forEach.call(Object.keys(this.xs),(function(n){var i=t.xs[n],r=i.metadata,e=i.events;t.Yt.save({key:"".concat(r.sn,".").concat(r.pn,".").concat(r.ri),metadata:W(W({},r),{datatype:"json"}),events:csJSON.stringify(e)})}))},n.prototype.save=function(t){this.Yt.save(t)},X([wn("RecordingRecovery")],n.prototype,"recover",null),n}(Ar),Ke=/[\u4E00-\u9FFF]|[\u3000-\u303F]|[\u3040-\u309F]|[\u30A0-\u30FF]|[\uFF00-\uFFEF]/g,Ze=/[^本\s]/g;function Qe(t){var n=csString.prototype.replace.call(t,Ke,"本");return csString.prototype.replace.call(n,Ze,"a")}var ts,ns=function(){function t(t,n,i){this.Ps=t,this.Ds=n,this.Ie=i,this.Ls=!1}return t.prototype.setAnonymization=function(t){this.Us=t},t.prototype.isDOMSerializationInProgress=function(){return this.Ls},t.prototype.serializeInitialDom=function(t,n){if(this.Ps.isAsynchronous())this.serializeDocumentAsync(t).then((function(t){t&&n(t)})).catch((function(t){hn.error(t)}));else{var i=this.js(t);n(i)}},t.prototype.js=function(t){return{args:[this.Ps.serialize(t,{withAnonymization:this.Us})],date:Et(),type:ii.INITIAL_DOM}},t.prototype.serializeDocumentAsync=function(t){return $(this,void 0,void 0,(function(){return K(this,(function(n){switch(n.label){case 0:this.Ls=!0,n.label=1;case 1:return n.trys.push([1,,3,4]),[4,this.Ps.startSerializeAsync(t,{withAnonymization:this.Us})];case 2:return[2,n.sent()];case 3:return this.Ls=!1,[7];case 4:return[2]}}))}))},t.prototype.serializeMutationCharacterData=function(t){var n,i=Mi(t.target);if(!i)return null;var r=t.target;if(r.data===t.oldValue)return null;if(f(r)&&(null===(n=this.Ie)||void 0===n?void 0:n.shouldEncrypt(r)))return this.Ie.registerTextNodeMutationToEncrypt({targetId:i,textNode:r,serializedTextData:Qe(r.data),date:t.date}),null;var e=this.Ds.getAnonymizedText(this.Us,r,r.data);f(r)&&(e=this.Ps.serializeTextMutation(r,e));var s=[i,e];return this.qs(this.Ps)&&this.isDOMSerializationInProgress()&&this.Ps.handleMutationCharacterData(t,s),s},t.prototype.serializeAttachShadowEvent=function(t){var n=Mi(t.target);return n?[n,this.Ps.serialize(t.shadowRoot)]:null},t.prototype.serializeMutationAttribute=function(t){var n=Mi(t.target);if(!n)return null;var i=t.target,r=t.attributeName,e=t.attributeNamespace,s=de.getAttributeNS(t.target,e,r);s&&(s=this.Ds.getAnonymizedAttributeValue(i,this.Us,r,s),s=this.Ps.serializeAttributeMutationValue(t.target,r,s));var u=[n,e,r,s];return this.qs(this.Ps)&&this.isDOMSerializationInProgress()&&this.Ps.handleMutationAttribute(t.oldValue?this.Ds.getAnonymizedAttributeValue(i,this.Us,r,t.oldValue):t.oldValue,u),u},t.prototype.serializeMutationChildList=function(t,n){var i=Mi(t.target);return i?this.qs(this.Ps)&&this.isDOMSerializationInProgress()?this.Ps.serializeMutationChildList(t,this.Us,n):{removedNodes:this.Hs(t),addedNodes:this.zs(t,i,n)}:(Ki(t.addedNodes,(function(t){var i=n.get(t);i&&n.set(t,i-1)})),null)},t.prototype.qs=function(t){return t.isAsynchronous()},t.prototype.Hs=function(t){for(var n=[],i=0;i<t.removedNodes.length;i+=1){var r=Mi(t.removedNodes[i]);r&&(Di(t.removedNodes[i]),csArray.prototype.push.call(n,[r]))}return n},t.prototype.zs=function(t,n,i){var r=[],e=null;if(t.nextSibling&&t.nextSibling.isConnected){var s=Mi(t.nextSibling);e=void 0!==s?s:null}for(var u=0;u<t.addedNodes.length;u+=1){var o=t.addedNodes[u],c=this.Ps.serialize(o,{excludedNodes:i,withAnonymization:this.Us}),h=i.get(o);h&&i.set(o,h-1),csArray.prototype.push.call(r,[n,e,c])}return r},X([mi("serializeDocumentAsync")],t.prototype,"serializeDocumentAsync",null),t}(),is=function(){function t(t,n){var i=this;this.Bs=t,this.Se=n,this.Fs()&&(this.Vs=qr(window.CSSStyleDeclaration.prototype,"cssText",(function(t,n){return i.setStyleDeclarationCssText(t,n)})))}return t.prototype.onEvent=function(t){this.pi=t},t.prototype.start=function(){this.Gs=this.Se.registerToInsertRuleInterceptor(this.sendInsertion.bind(this)),this.Js=this.Se.registerToDeleteRuleInterceptor(this.sendDeletion.bind(this)),this.Vs&&this.Vs.activate()},t.prototype.stop=function(){var t,n;null===(t=this.Gs)||void 0===t||t.call(this),null===(n=this.Js)||void 0===n||n.call(this),this.Vs&&this.Vs.deactivate()},t.prototype.setStyleDeclarationCssText=function(t,n){var i=this.Ws(t);if((null==i?void 0:i.ownerNode)&&(!a(i.ownerNode)||!Ii.isSensitiveChild(i.ownerNode))){var r=Mi(i.ownerNode);if(r){var e=this.Ys(i.cssRules,t.parentRule),s={date:Et(),type:ii.STYLESHEET_CSS_TEXT_UPDATE,args:[r,e,n]};this.pi(s),this.Bs.scanCssString(n)}}},t.prototype.Ws=function(t){var n=t.parentRule;return n&&n.parentStyleSheet},t.prototype.Ys=function(t,n){return csArray.prototype.indexOf.call(csArray.from(t),n)},t.prototype.Fs=function(){return window.CSSStyleDeclaration&&window.CSSStyleDeclaration.prototype&&Object.getOwnPropertyDescriptor(window.CSSStyleDeclaration.prototype,"cssText")},t.prototype.sendInsertion=function(t,n){var i=n[0],r=n[1];if(t.ownerNode&&(!a(t.ownerNode)||!Ii.isSensitiveChild(t.ownerNode))){var e=Mi(t.ownerNode);if(e){var s={date:Et(),type:ii.STYLESHEET_RULE_INSERT,args:Mt(r)?[e,i,r]:[e,i]};this.pi(s),this.Bs.scanCssString(i)}}},t.prototype.sendDeletion=function(t,n){var i=n[0];if(t.ownerNode&&(!a(t.ownerNode)||!Ii.isSensitiveChild(t.ownerNode))){var r=Mi(t.ownerNode);if(r){var e={date:Et(),type:ii.STYLESHEET_RULE_DELETE,args:[r,i]};this.pi(e)}}},X([wn("styleSheetRuleTracker.setStyleDeclarationCssText")],t.prototype,"setStyleDeclarationCssText",null),X([wn("styleSheetRuleTracker.sendInsertion")],t.prototype,"sendInsertion",null),X([wn("styleSheetRuleTracker.sendDeletion")],t.prototype,"sendDeletion",null),t}(),rs="data-cs-mask",es=function(){function t(){}return t.prototype.beforeSerializeChildren=function(t,n){return Ii.isSensitive(t)||this.Xs(t)?[]:n},t.prototype.beforeSerializeAttributes=function(t,n){return Ii.isSensitive(t)&&!m(t)&&(csArray.prototype.push.call(n,this.$s(t)),t.hasAttribute(rs)||csArray.prototype.push.call(n,document.createAttribute(rs))),csArray.prototype.filter.call(n,(function(n){return!Ii.isSensitiveAttribute(t,n.name)}))},t.prototype.Xs=function(t){return R(t)&&Ii.isSensitive(t.host)},t.prototype.$s=function(t){var n=t.getBoundingClientRect(),i=document.createAttribute("style");return i.value="width: ".concat(n.width,"px !important; height: ").concat(n.height,"px !important;"),t.__contentsquare_height=n.height,t.__contentsquare_width=n.width,i},t}();!function(t){t[t.WebElement=0]="WebElement",t[t.MobileView=1]="MobileView",t[t.WebViewContainer=2]="WebViewContainer"}(ts||(ts={}));var ss=function(t){this.csId=Mi(t),this.format=ts.WebElement,t.__contentsquare_artificial&&(this.artificial=t.__contentsquare_artificial)};var us=function(t){function n(n){var i=t.call(this,n)||this;return i.attributes=[],i.localName=Wi(n),i.namespaceURI=n.namespaceURI,i.children=[],i.nodeType=1,i}return Jr(n,t),n}(ss),os=["id","class","style","src","srcset","sizes","href","rel","type","width","height","media","align","dir","bgcolor","color","border","colspan","rowspan","cols","rows","size","start","slot",D],cs=function(){function t(t,n){this.U=t,this.L=n,this.Ks=new Set}return t.prototype.init=function(){var t=this;csArray.prototype.forEach.call(os,(function(n){t.Ks.add(n)})),csArray.prototype.forEach.call(this.L.whitelistedAttributes,(function(n){t.Ks.add(n)}))},t.prototype.beforeSerializeChildren=function(t,n,i){return(w(t)||Hr.isWhitelisted(t))&&(i.withAnonymization=!1),n},t.prototype.serializeAttribute=function(t,n,i,r){i.anonymized=r.withAnonymization;var e=this.getAnonymizedAttributeValue(t,r.withAnonymization,i.name,i.value);i.value=e},t.prototype.serializeTextNode=function(t,n,i){n.data=this.getAnonymizedText(i.withAnonymization,t,n.data)},t.prototype.serializeCDATASectionNode=function(t,n,i){var r=t.data;return n.data=i.withAnonymization?Qe(r):this.U.anonymizePII(r),n},t.prototype.getAnonymizedText=function(t,n,i){if(csNodeparentNode.apply(n)){if(w(csNodeparentNode.apply(n)))return i;if(t&&Hr.isWhitelisted(csNodeparentNode.apply(n)))return this.U.anonymizeCreditCard(this.U.anonymizeEmail(i))}return t?Qe(i):this.U.anonymizeCreditCard(this.U.anonymizeEmail(i))},t.prototype.getAnonymizedAttributeValue=function(t,n,i,r){return this.Zs(i)||g(t)||a(e=t)&&"slot"===e.localName?r:n&&y(t)&&("submit"===t.type||"button"===t.type)&&"value"===i?Qe(r):n?"":this.U.anonymizeCreditCard(this.U.anonymizeEmail(r));var e},t.prototype.afterSerialize=function(t,n,i){null==n.anonymized&&(n.anonymized=i.withAnonymization),n instanceof us&&n.shadowRoot&&null==n.shadowRoot.anonymized&&(n.shadowRoot.anonymized=i.withAnonymization)},t.prototype.Zs=function(t){return this.Ks.has(t)},t}(),hs=function(){function t(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];this.Qs=t}return t.prototype.addProvider=function(t){csArray.prototype.push.call(this.Qs,t)},t.prototype.getRequestParameters=function(){return csArray.prototype.reduce.call(this.Qs,(function(t,n){return W(W({},n.getRequestParameters()),t)}),{})},t}(),as=function(){function t(t,n){var i=this;this.Rn=t,this.U=n,this.tu=[{boundElement:window,type:"hashchange",listener:function(){return i.hashChangeListener()}},{boundElement:document,type:"visibilitychange",listener:function(){return i.visibilityChangeListener()}}]}return t.prototype.onEvent=function(t){this.pi=t},t.prototype.start=function(){this.Wn(),this.triggerInitialEvents()},t.prototype.stop=function(){this.Qn()},t.prototype.Wn=function(){csArray.prototype.forEach.call(this.tu,(function(t){return hi(t)}))},t.prototype.Qn=function(){csArray.prototype.forEach.call(this.tu,(function(t){return ai(t)}))},t.prototype.triggerInitialEvents=function(){this.hashChangeListener()},t.prototype.hashChangeListener=function(){var t={type:ii.HASH_CHANGE,args:[this.U.anonymizePII(this.Rn.href)],date:Et()};this.pi(t)},t.prototype.visibilityChangeListener=function(){var t={type:ii.VISIBILITY_CHANGE,args:[document.visibilityState],date:Et()};this.pi(t)},X([wn("hashChange")],t.prototype,"hashChangeListener",null),X([wn("visibilityChange")],t.prototype,"visibilityChangeListener",null),t}(),fs=function(){function t(t){var n=this;this.Nn=t,this.nu=kr(),this.iu=function(t){ar((function(){for(var i=0,r=t;i<r.length;i++){var e=r[i];"childList"===e.type&&Ki(e.addedNodes,(function(t){Ir(t,NodeFilter.SHOW_ELEMENT).visitAll((function(t){n.nu.has(t)||(n.nu.add(t),n.Nn(t))}))}))}}))},this.ru=new Fr(this.iu)}return t.prototype.observe=function(){var t=this;this.ru.observe(),Ir(document,NodeFilter.SHOW_ELEMENT).visitAll((function(n){t.nu.add(n),t.Nn(n)}))},t.prototype.disconnect=function(){this.ru.disconnect()},t}(),vs=function(){function t(t,n,i){void 0===n&&(n=30),void 0===i&&(i=0);var r=this;this.eu=t,this.su=n,this.ou=i,this.hu=new sr,this.K=!1,this.au=0,this.fu=function(){for(r.au=0;r.hu.length;){if(r.au>=r.su)return void setTimeout(r.fu,r.ou);var t=Et(),n=r.hu.pop();if(!n)break;r.runTask(n);var i=Et()-t;r.au+=i}r.K=!1}}return t.prototype.schedule=function(t,n){void 0===n&&(n=!1),this.eu&&!n?(this.hu.push(t),this.vu()):t()},t.prototype.vu=function(){var t=this;this.K||(this.K=!0,setTimeout((function(){t.fu()})))},t.prototype.runTask=function(t){t()},t.prototype.runPendingTasks=function(){var t=this;this.hu.forEach((function(n){t.runTask(n)})),this.hu.clear()},t.prototype.clearQueue=function(){this.hu.clear()},t.prototype.isEmpty=function(){return 0===this.hu.length},X([wn("TaskScheduler"),pi("runTask")],t.prototype,"runTask",null),X([pi("runPendingTasks")],t.prototype,"runPendingTasks",null),t}(),ls=function(){function t(t){void 0===t&&(t=!1);var n=this;this.lu=!1,this.taskScheduler=new vs(t),this.du=new fs((function(t){return n.taskScheduler.schedule((function(){return n.wu(t)}))})),this.ci=new Fr((function(t){return n.taskScheduler.schedule((function(){return n.vr(t)}))}))}return t.prototype.start=function(){this.lu||(this.lu=!0,this.du.observe(),this.ci.observe())},t.prototype.stop=function(){this.du.disconnect(),this.ci.disconnect(),this.lu=!1},t.prototype.onEvent=function(t){this.pi=t},t.prototype.onAsset=function(t){this.yu=t},t.prototype.onStyleSheetFound=function(t){this.pu=t},t.prototype.scanText=function(t){f(t)&&csNodeparentNode.apply(t)&&w(csNodeparentNode.apply(t))&&this.scanCssString(t.data)},t.prototype.scanCssString=function(t){this.mu(re(t))},t.prototype.wu=function(t){this.lu&&Ii.getSensitiveDetails(t).state===Ii.SensitiveState.NotSensitive&&this.gu(t)},t.prototype.gu=function(t,n){Ii.getSensitiveDetails(t).state!==Ii.SensitiveState.NotSensitive||n&&Ii.isSensitiveAttribute(t,n)||(w(t)?this.Su(t):this.Au(t,n)||(this.bu(t,n),this.Eu(t,n),this.Ru(t,n)))},t.prototype.Au=function(t,n){var i,r,e;if(d(t)&&(!n||"href"===n)&&t.href){var s=(null===(i=t.sheet)||void 0===i?void 0:i.href)||t.href,u={assetId:s,assetBasePath:window.location.href,assetRawPath:t.getAttribute("href")};return null===(r=this.pu)||void 0===r||r.call(this,u),null===(e=this.yu)||void 0===e||e.call(this,u),this.Nu(s),!0}return!1},t.prototype.Su=function(t){for(var n,i,r=new Set,e=0;e<csNodechildNodes.apply(t).length;e++){var s=csNodechildNodes.apply(t)[e];if(3===s.nodeType)for(var u=0,o=re(s.data);u<o.length;u++){var c=o[u];r.add(c)}}try{i=null===(n=t.sheet)||void 0===n?void 0:n.cssRules}catch(t){"SecurityError"===t.name||"InvalidAccessError"===t.name||hn.error(t.message)}if(i)for(e=0;e<i.length;e++)for(var h=0,a=re(i.item(e).cssText);h<a.length;h++){c=a[h];r.add(c)}this.mu(ir(r))},t.prototype.Tu=function(t){return!this.Ou(t)&&!$r(t)&&!Kr(t)},t.prototype.bu=function(t,n){var i,r;if(a(r=t)&&"img"===r.localName){if(!n||"src"===n){var e=t.getAttribute("src");e&&this.Tu(e)&&(this.Nu(t.src),null===(i=this.yu)||void 0===i||i.call(this,{assetId:t.src,assetRawPath:e,assetBasePath:window.location.href}))}n&&"srcset"!==n||!t.srcset||this.ku(t.srcset)}},t.prototype.Eu=function(t,n){if(1===t.nodeType){if(t.hasAttribute&&(!n||"style"===n)&&t.hasAttribute("style")){var i=t.getAttribute("style");if("string"!=typeof i)throw new Error("Unexpected style: "+t.outerHTML);this.scanCssString(i)}}else an.warn("StaticResourceUrlTracker: Wrong element nodeType: ".concat(null==t?void 0:t.nodeName,"/").concat(t.nodeType))},t.prototype.ku=function(t){this.mu(Qr(t))},t.prototype.Ru=function(t,n){var i,r;if((g(r=t)&&"image"===r.localName||function(t){return g(t)&&"use"===t.localName}(t)||function(t){return g(t)&&"feImage"===t.localName}(t))&&(!n||"href"===n||"xlink:href"===n)){var e=t.getAttribute("href")||t.getAttribute("xlink:href");if(e&&this.Tu(e)){var s=Yt(e);this.Nu(s),null===(i=this.yu)||void 0===i||i.call(this,{assetId:s,assetRawPath:e,assetBasePath:window.location.href})}}},t.prototype.mu=function(t){var n=this;return csArray.prototype.forEach.call(csArray.prototype.map.call(csArray.prototype.filter.call(csArray.prototype.filter.call(csArray.prototype.filter.call(t,(function(t){return!n.Ou(t)})),(function(t){return!$r(t)})),(function(t){return!Kr(t)})),(function(t){return{rawUrl:t,absoluteUrl:Yt(t)}})),(function(t){var i;n.pi&&n.Nu(t.absoluteUrl),null===(i=n.yu)||void 0===i||i.call(n,{assetId:t.absoluteUrl,assetBasePath:window.location.href,assetRawPath:t.rawUrl})}))},t.prototype.vr=function(t){for(var n=0,i=t;n<i.length;n++){var r=i[n];switch(r.type){case"attributes":this.gu(r.target,r.attributeName);break;case"characterData":this.scanText(r.target)}}},t.prototype.Nu=function(t){var n,i={date:Et(),type:ii.STATIC_RESOURCE_URL,args:[t]};null===(n=this.pi)||void 0===n||n.call(this,i)},t.prototype.Ou=function(t){return/^https:\/\/\w+:\w+@/.test(t)},t}(),ds=function(t){function n(n){var i=t.call(this)||this;return i.Iu=n,i.Cu=new Map,i}return J(n,t),n.prototype.init=function(){this.xu(),this._u()},n.prototype._u=function(){var t=this;this.wr=new csMutationObserver((function(n){ar((function(){return t.handleMutations(n)}),"low")}))},n.prototype.xu=function(){var t=this;this.Mu()&&(this.Pu=jr({target:Element.prototype,methodName:"attachShadow",hook:function(n){var i=n.context,r=n.result;return t.handleAttachShadow(i,r)}})),this.Du()&&(this.Lu=jr({target:Element.prototype,methodName:"createShadowRoot",hook:function(n){var i=n.context,r=n.result;return t.handleAttachShadow(i,r)}}))},n.prototype.onChildListMutation=function(t){this.Uu=t},n.prototype.onCharacterDataMutation=function(t){this.ju=t},n.prototype.onAttributesMutation=function(t){this.qu=t},n.prototype.onAttachShadowMutation=function(t){this.Hu=t},n.prototype.observe=function(t,n){this.isStarted&&this.wr.observe(t,n)},n.prototype.onStart=function(){this.Pu&&this.Pu.activate(),this.Lu&&this.Lu.activate()},n.prototype.onStop=function(){this.Pu&&this.Pu.deactivate(),this.Lu&&this.Lu.deactivate(),this.Iu.clearQueue(),this.wr.disconnect()},n.prototype.flushPendingMutations=function(){if(this.isStarted){!function(){for(hr++;!cr.isEmpty;)cr.pop()();for(;!or.isEmpty;)or.pop()()}(),this.Iu.runPendingTasks();var t=this.wr.takeRecords();this.handleMutations(t,!0)}},n.prototype.Mu=function(){return window.Element&&window.Element.prototype&&"function"==typeof window.Element.prototype.attachShadow},n.prototype.Du=function(){return window.Element&&window.Element.prototype&&"function"==typeof window.Element.prototype.createShadowRoot},n.prototype.handleMutations=function(t,n){var i=this;void 0===n&&(n=!1);var r=Et(),e=t.length>1?this.zu(t):t;this.Iu.isEmpty()&&this.Cu.clear(),this.Bu(e);for(var s=function(t){var s=e[t];s.date=r,u.Iu.schedule((function(){i.processMutation(s,i.Cu)}),n)},u=this,o=0;o<e.length;o+=1)s(o)},n.prototype.zu=function(t){for(var n=new Map,i=0;i<t.length;i+=1){if("attributes"===(f=t[i]).type){var r=f.target,e=f.attributeNamespace,s=f.attributeName,u="".concat(e||""," ").concat(s),o=n.get(r),c=de.getAttributeNS(r,e,s)===f.oldValue?"none":"last";if(o)o.has(u)||o.set(u,c);else{var h=new Map;h.set(u,c),n.set(r,h)}}}var a=[];for(i=t.length-1;i>=0;i-=1){var f;if("attributes"===(f=t[i]).type){r=f.target,e=f.attributeNamespace,s=f.attributeName,u="".concat(e||""," ").concat(s);"last"===(o=n.get(r)).get(u)&&(csArray.prototype.push.call(a,f),o.set(u,"none"))}else csArray.prototype.push.call(a,f)}return csArray.prototype.reverse.call(a)},n.prototype.handleAttachShadow=function(t,n){this.Hu({shadowRoot:n,date:Et(),target:t})},n.prototype.processMutation=function(t,n){switch(t.type){case"attributes":this.qu(t);break;case"characterData":this.ju(t);break;case"childList":this.Uu(t,n);break;default:throw new Error("mutation type is not supported")}},n.prototype.Bu=function(t){var n=this;csArray.prototype.forEach.call(t,(function(t){Ki(t.addedNodes,(function(t){var i=n.Cu.get(t);i?n.Cu.set(t,i+1):n.Cu.set(t,1)}))}))},X([wn("handleMutations")],n.prototype,"handleMutations",null),X([pi("handleAttachShadow")],n.prototype,"handleAttachShadow",null),X([pi("processMutation")],n.prototype,"processMutation",null),n}(Ar),ws=function(t){function n(){var n=null!==t&&t.apply(this,arguments)||this;return n.Fu={subtree:!0,attributes:!0,childList:!0,characterData:!0,attributeOldValue:!0,characterDataOldValue:!0},n}return J(n,t),n.prototype.init=function(){t.prototype.init.call(this),this.Jn()},n.prototype.Jn=function(){var t=this;ji((function(n){t.observe(n,t.Fu)}))},n}(ds),ys=function(){function t(t){this.Vu=[],this.Gu=[],this.Ht={},this.zt=t}return t.prototype.setQueryParams=function(t){var n=this;csArray.prototype.forEach.call(Object.keys(t),(function(i){n.Ht[i]=t[i]}))},t.prototype.removeQueryParams=function(t){var n=this;t?csArray.prototype.forEach.call(t,(function(t){delete n.Ht[t]})):this.Ht={}},t.prototype.onBeaconSuccess=function(t){csArray.prototype.push.call(this.Vu,t)},t.prototype.onBeaconFailure=function(t){csArray.prototype.push.call(this.Gu,t)},t.prototype.send=function(t){var n=this,i=ot.toQuery(W(W({},this.Ht),{ct:gn.UNCOMPRESSED})),r=this.Ju(i,t);return r?csArray.prototype.forEach.call(this.Vu,(function(t){return t()})):csArray.prototype.forEach.call(this.Gu,(function(t){return t(n.Ht)})),r},t.prototype.Ju=function(t,n){try{if("function"!=typeof csNavigatorsendBeacon)return!1;var i=csNavigatorsendBeacon("".concat(this.zt,"?").concat(t),n||"");if(i)return i}catch(t){}return"function"==typeof navigator.sendBeacon&&navigator.sendBeacon("".concat(this.zt,"?").concat(t),n||"")},t}(),ps=function(t){function n(n){var i=t.call(this,n)||this;return i.name=n.name,i.publicId=n.publicId,i.systemId=n.systemId,i.nodeType=10,i}return Jr(n,t),n}(ss),ms=function(t){var n;this.name=t.name,this.value=t.value,this.namespaceURI=null!==(n=t.namespaceURI)&&void 0!==n?n:""},gs=function(t){function n(n){var i=t.call(this,n)||this;return i.data=n.data,i.nodeType=3,i}return Jr(n,t),n}(ss),Ss=function(t){function n(n){var i=t.call(this,n)||this;return i.data=n.data,i.nodeType=4,i}return Jr(n,t),n}(ss),As=function(t){function n(n){var i=t.call(this,n)||this;return i.data=n.data,i.nodeType=8,i}return Jr(n,t),n}(ss),bs=function(t){function n(i){var r=t.call(this,i)||this;return r.baseURI=n.getBaseURI(i),r.children=[],r.nodeType=9,r}return Jr(n,t),n.getBaseURI=function(t){var n=t.baseURI;if(null==n){var i=t.getElementsByTagName("base");n=0!==i.length?i[0].href:t.URL}return n},n}(ss),Es=function(t){function n(n){var i=t.call(this,n)||this;return i.mode=n.mode,i.children=[],i.nodeType=11,i}return Jr(n,t),n}(ss),Rs=function(){function t(n){for(var i=function(i){var e=csArray.prototype.map.call(csArray.prototype.filter.call(n,(function(t){return t[i]})),(function(t){return function(n,r,e,s){return t[i](n,r,e,s)}})),s=t.Wu(e);r[i]=s},r=this,e=0,s=t.Yu;e<s.length;e++){i(s[e])}}return t.create=function(n){return new t(n)},t.Wu=function(t){var n=csArray.prototype.map.call(t,(function(t){return function(n,i,r,e){return t(n,i,r,e)||i}})),i=n[0],r=n[1],e=n[2],s=n[3],u=n[4];switch(t.length){case 0:return function(t,n){return n};case 1:return t[0];case 2:return function(t,n,e,s){return r(t,i(t,n,e,s),e,s)};case 3:return function(t,n,s,u){return e(t,r(t,i(t,n,s,u),s,u),s,u)};case 4:return function(t,n,u,o){return s(t,e(t,r(t,i(t,n,u,o),u,o),u,o),u,o)};case 5:return function(t,n,o,c){return u(t,s(t,e(t,r(t,i(t,n,o,c),o,c),o,c),o,c),o,c)};default:return function(n,i,r,e){for(var s=i,u=0;u<t.length;u++)s=t[u](n,i,r,e)||s;return i}}},t.Yu=["beforeSerializeAttributes","beforeSerializeChildren","afterSerialize","afterSerializeShadowRoot","serializeElementNode","serializeAttribute","serializeTextNode","serializeCDATASectionNode","serializeCommentNode","serializeDocumentNode","serializeShadowRootNode","serializeTextMutation","serializeAttributeMutationValue"],t}(),Ns=function(){function t(t){this.Xu=Rs.create(t)}return t.prototype.isAsynchronous=function(){return!0},t.prototype.serializeTextMutation=function(t,n){return this.Xu.serializeTextMutation(t,n)},t.prototype.serializeAttributeMutationValue=function(t,n,i){return this.Xu.serializeAttributeMutationValue(t,i,n)},t.prototype.serialize=function(t,n){var i,r=Wr({},n),e=t.nodeType;switch(e){case 1:i=this.$u(t,r);break;case 3:i=this.Ku(t,r);break;case 4:i=this.Zu(t,r);break;case 7:case 8:i=this.Qu(t,r);break;case 10:i=new ps(t);break;case 9:i=this.no(t,r);break;case 11:i=this.io(t,r);break;default:throw new Error("serialization is not supported (nodeType: ".concat(e,")"))}return this.Xu.afterSerialize(t,i,r),i},t.prototype.$u=function(t,n){var i=new us(t);this.Xu.serializeElementNode(t,i,n),i.attributes=this.ro(t,n);var r=csElementshadowRoot.apply(t);return r&&(i.shadowRoot=this.eo(r,n)),i.children=this.so(t,n),i},t.prototype.ro=function(t,n){var i=Yi(t.attributes);i=this.Xu.beforeSerializeAttributes(t,i,n);for(var r=0;r<i.length;++r){var e=i[r];i[r]=this.uo(t,e,n)}return i},t.prototype.uo=function(t,n,i){var r=new ms(n);return this.Xu.serializeAttribute(t,n,r,i),r},t.prototype.runBeforeSerializeChildrenHook=function(t,n,i){var r=i||csNodechildNodes.apply(t);return r=n.excludedNodes?tr(r,(function(t){return!n.excludedNodes.get(t)})):r,Yi(r=this.Xu.beforeSerializeChildren(t,r,n))},t.prototype.so=function(t,n){if(n.skipChildrenSerialization)return[];for(var i=this.runBeforeSerializeChildrenHook(t,n),r=0;r<i.length;++r){var e=i[r];i[r]=this.serialize(e,n)}return i},t.prototype.Ku=function(t,n){var i=new gs(t);return this.Xu.serializeTextNode(t,i,n),i},t.prototype.Zu=function(t,n){var i=new Ss(t);return this.Xu.serializeCDATASectionNode(t,i,n),i},t.prototype.Qu=function(t,n){var i=new As(t);return this.Xu.serializeCommentNode(t,i,n),i},t.prototype.no=function(t,n){var i=new bs(t);return this.Xu.serializeDocumentNode(t,i,n),i.children=this.so(t,n),i},t.prototype.eo=function(t,n){var i=new Es(t);return this.Xu.serializeShadowRootNode(t,i,n),i.children=this.so(t,n),this.Xu.afterSerializeShadowRoot(t,i,n),i},t.prototype.io=function(t,n){if(t.mode)return this.eo(t,n);throw new Error("Not implemented yet.")},t}();function Ts(){return $(this,void 0,void 0,(function(){return K(this,(function(t){switch(t.label){case 0:return[4,new Promise((function(t){setTimeout((function(){t()}),0)}))];case 1:return t.sent(),[2]}}))}))}var Os=function(){function t(){this.oo=!1,this.co=new Map,this.ho={},this.ao=new Map,this.fo=new Map,this.vo=new Set,this.lo=new Map}return t.prototype.beforeSerializeChildren=function(t,n){var i=this;return this.oo?tr(n,(function(t){return!i.isAddedNodeDuringSerialization(t)})):n},t.prototype.beforeSerializeAttributes=function(t,n,i){if(!this.oo)return n;var r=Mi(t);if(!r)return n;var e=this.fo.get(r);return e?csArray.prototype.filter.call(n,(function(t){var n="".concat(t.name).concat(t.namespaceURI||""),i=e.get(n);return!(i&&null===i.value)})):n},t.prototype.serializeTextNode=function(t,n,i){if(this.oo){var r=this.ao.get(n.csId);r&&(n.data=r)}},t.prototype.serializeCommentNode=function(t,n){if(this.oo){var i=this.ao.get(n.csId);i&&(n.data=i)}},t.prototype.afterSerialize=function(t,n,i){this.oo&&(csNodeparentNode.apply(t)&&!this.getSerializedNodeByNode(csNodeparentNode.apply(t))||i.skipRegisterNode||this.do(n,i))},t.prototype.afterSerializeShadowRoot=function(t,n,i){this.oo&&(i.skipRegisterNode||this.do(n,i))},t.prototype.enable=function(){this.oo=!0,this.wo()},t.prototype.disable=function(){this.oo=!1,this.wo()},t.prototype.setDefaultSerializationOptions=function(t){this.ho=t},t.prototype.getSerializedNodeById=function(t){var n;return null===(n=this.co.get(t))||void 0===n?void 0:n.serializedNode},t.prototype.getSerializedNodeByNode=function(t){var n,i=Mi(t);if(i)return null===(n=this.co.get(i))||void 0===n?void 0:n.serializedNode},t.prototype.getOptions=function(t){var n,i=Mi(t);return i&&(null===(n=this.co.get(i))||void 0===n?void 0:n.options)||this.ho},t.prototype.registerInitialCharacterData=function(t,n){this.ao.get(t)||this.ao.set(t,n)},t.prototype.registerInitialAttributes=function(t,n,i,r){var e=this.fo.get(t),s="".concat(i).concat(n||"");if(e){if(e.has(s))return}else e=new Map,this.fo.set(t,e);var u={name:i,namespaceURI:n||"",value:r};e.set(s,u)},t.prototype.markAddedTreeAsProcessed=function(t){for(var n,i=document.createNodeIterator(t,NodeFilter.SHOW_ALL,null,!1);n=i.nextNode();){var r=Mi(n);r&&this.vo.add(r)}},t.prototype.markRemovedNodeAsProcessed=function(t,n,i){var r=Mi(i),e=Mi(t);if(r&&e){var s=this.lo.get(r);if(s)csArray.prototype.push.call(s.removedNodeIds,e),csArray.prototype.indexOf.call(s.childNodeIds,e)<0&&csArray.prototype.push.call(s.childNodeIds,e);else{for(var u=[],o=n?Mi(n):null,c=0;c<csNodechildNodes.apply(i).length;c+=1){var h=Mi(csNodechildNodes.apply(i)[c]);h&&!this.vo.has(h)&&(o&&h===o&&csArray.prototype.push.call(u,e),csArray.prototype.push.call(u,h))}null===o&&csArray.prototype.push.call(u,e);var a=[e];this.lo.set(r,{childNodeIds:u,removedNodeIds:a})}}},t.prototype.addSerializedChildToParent=function(t,n,i){var r=this.getSerializedNodeByNode(t);r&&Is(r)&&this.yo(n,r,i)},t.prototype.isAddedNodeDuringSerialization=function(t){var n=Mi(t);return!!n&&this.vo.has(n)},t.prototype.getInitialIndexInParent=function(t,n){var i=Mi(n),r=Mi(t);if(!i||!r)return-1;var e=this.lo.get(i);return e?csArray.prototype.indexOf.call(e.childNodeIds,r):-1},t.prototype.wo=function(){this.co.clear(),this.ao.clear(),this.fo.clear(),this.vo.clear(),this.lo.clear()},t.prototype.do=function(t,n){t.csId&&(this.po(t.csId,t,n),this.mo(t.csId,t),this.co.set(t.csId,{serializedNode:t,options:n}))},t.prototype.po=function(t,n,i){if(function(t){return t instanceof us}(n)){var r=this.fo.get(t);if(r){for(var e=0,s=n.attributes;e<s.length;e++){var u=s[e],o="".concat(u.name).concat(u.namespaceURI||""),c=r.get(o);c&&null!==c.value&&(u.value=c.value,r.delete(o))}r.forEach((function(t){null!==t.value&&csArray.prototype.push.call(n.attributes,{name:t.name,value:t.value,namespaceURI:t.namespaceURI,anonymized:i.withAnonymization||!1})}))}}},t.prototype.yo=function(t,n,i){(i.csId||ks(i))&&(t>=0?csArray.prototype.splice.call(n.children,t,0,i):ks(i)&&csArray.prototype.push.call(n.children,i))},t.prototype.mo=function(t,n){var i;if(Is(n)){var r=this.lo.get(t);if(r)for(var e=0,s=r.removedNodeIds;e<s.length;e++){var u=s[e],o=csArray.prototype.indexOf.call(r.childNodeIds,u);if(-1!==o){var c=null===(i=this.co.get(u))||void 0===i?void 0:i.serializedNode;void 0!==c&&this.yo(o,n,c)}}}},t}();function ks(t){return"artificial"in t}function Is(t){return"children"in t}var Cs,xs={taskTime:25},_s=function(t){function n(n,i,r){void 0===i&&(i=new Os),void 0===r&&(r=xs);var e=t.call(this,Z([i],n,!0))||this;return e.So=i,e.Ao=r,e.bo=0,e.Eo=e.Ao.taskTime,e}return J(n,t),n.prototype.isAsynchronous=function(){return!0},n.prototype.handleMutationAttribute=function(t,n){var i=n[0],r=n[1],e=n[2];this.So.getSerializedNodeById(i)||this.So.registerInitialAttributes(i,r,e,t)},n.prototype.handleMutationCharacterData=function(t,n){var i=n[0];this.So.getSerializedNodeById(i)||this.So.registerInitialCharacterData(i,t.oldValue||"")},n.prototype.serializeMutationChildList=function(t,n,i){var r=this.zs(t,n,i);return this.Ro(t),{removedNodes:this.Hs(t,n),addedNodes:r}},n.prototype.startSerializeAsync=function(t,n){return void 0===n&&(n={}),$(this,void 0,void 0,(function(){return K(this,(function(i){return this.bo+=1,this.So.setDefaultSerializationOptions(n),[2,this.To(t,n)]}))}))},n.prototype.zs=function(t,n,i){var r=[],e=null;if(t.nextSibling&&t.nextSibling.isConnected){var s=Mi(t.nextSibling);e=void 0!==s?s:null}for(var u=Mi(t.target),o=0;o<t.addedNodes.length;o+=1){var c=t.addedNodes[o],h=this.serialize(c,{excludedNodes:i,skipRegisterNode:!0,withAnonymization:n}),a=i.get(c);a&&i.set(c,a-1),csArray.prototype.push.call(r,[u,e,h])}return r},n.prototype.Ro=function(t){for(var n=0;n<t.addedNodes.length;n+=1){var i=t.addedNodes[n];this.So.markAddedTreeAsProcessed(i)}},n.prototype.Oo=function(t,n){if(!n)return-1;var i=this.So.getInitialIndexInParent(t,n);return i>=0?i:csArray.prototype.indexOf.call(csNodechildNodes.apply(n),t)},n.prototype.Hs=function(t,n){for(var i=[],r=0;r<t.removedNodes.length;r+=1){var e=t.removedNodes[r];if(this.So.markRemovedNodeAsProcessed(e,t.nextSibling,t.target),this.ko(e))this.Io(e)&&this.Co(e,n);else{var s=this.serialize(e,{withAnonymization:n});if(this.Io(t.target)){var u=this.Oo(e,t.target);this.So.addSerializedChildToParent(t.target,u,s)}}var o=Mi(e);o&&(Di(e),csArray.prototype.push.call(i,[o]))}return i},n.prototype.Co=function(t,n){for(var i=0;i<csNodechildNodes.apply(t).length;i+=1){var r=csNodechildNodes.apply(t)[i];if(this.Io(r))this.Co(r,n);else if(!this.So.isAddedNodeDuringSerialization(r)){var e=this.serialize(r,{withAnonymization:n}),s=this.Oo(r,t);this.So.addSerializedChildToParent(t,s,e)}}},n.prototype.Io=function(t){return!!this.So.getSerializedNodeByNode(t)},n.prototype.ko=function(t){return this.Io(t)||this.So.isAddedNodeDuringSerialization(t)},n.prototype.To=function(t,n){return void 0===n&&(n={}),$(this,void 0,void 0,(function(){var i,r,e,s,u,o,c,h,f,v,l;return K(this,(function(d){switch(d.label){case 0:return i=this.bo,r=Et(),this.So.enable(),n.skipChildrenSerialization=!0,e=[t],[4,Ts()];case 1:if(d.sent(),i!==this.bo)return[2,null];this.xo=csDate.now(),this.serialize(t,n),d.label=2;case 2:if(!(e.length>0))return[3,7];s=csArray.prototype.pop.call(e),u=this.So.getOptions(s),o=this.runBeforeSerializeChildrenHook(s,u),c=csArray.prototype.shift.call(o),d.label=3;case 3:return c?csDate.now()-this.xo>this.Eo?[4,Ts()]:[3,5]:[3,6];case 4:if(d.sent(),i!==this.bo)return[2,null];this.xo=csDate.now(),d.label=5;case 5:return this.ko(c)?(c=csArray.prototype.shift.call(o),[3,3]):(csArray.prototype.push.call(e,c),h=this.serialize(c,u),f=this.Oo(c,s),this.So.addSerializedChildToParent(s,f,h),a(c)&&csElementshadowRoot.apply(c)&&(v=csElementshadowRoot.apply(c),csArray.prototype.push.call(e,v)),c=csArray.prototype.shift.call(o),[3,3]);case 6:return[3,2];case 7:if(!(l=this.So.getSerializedNodeByNode(t)))throw this.So.disable(),new Error("traverseAndSerialize : fail to serialize");return this.So.disable(),[2,{args:[l],date:r,type:ii.INITIAL_DOM}]}}))}))},n}(Ns),Ms=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return J(n,t),n.prototype.isAsynchronous=function(){return!1},n}(Ns),Ps=function(){function t(){this._o=new Map,this.Mo=document.implementation.createHTMLDocument("")}return t.prototype.beforeSerializeChildren=function(t,n){if(!w(t))return n;var i=this.Po(t);if(null===i||0===i.length)return n;if(jt(t.textContent)){var r=Yi(n);return csArray.prototype.push.call(r,this.Do(i)),r}var e=this.Lo(t);if(e===i.length)return n;for(var s=new csArray(i.length-e),u=e,o=0;u<i.length;u+=1,o+=1)s[o]=i[u];r=Yi(n);return csArray.prototype.push.call(r,this.Do(s)),r},t.prototype.Lo=function(t){var n=this._o.get(t.textContent);if(n)return n;var i=t.cloneNode(!0);i.textContent=t.textContent,this.Mo.head.appendChild(i);var r=this.Po(i);return n=r?r.length:0,this._o.set(t.textContent,n),this.Mo.head.removeChild(i),n},t.prototype.Po=function(t){try{if(t.disabled)return null;var n=t.sheet;return n?n.cssRules||n.rules:null}catch(t){if("SecurityError"!==t.name&&"InvalidAccessError"!==t.name)throw t;return null}},t.prototype.Do=function(t){var n="";Ki(t,(function(t){return n+=t.cssText}));var i=document.createTextNode(n);return i.__contentsquare_artificial=!0,i},t}(),Ds=function(){function t(t){this.Se=t,this.br=1,this.li=!1}return t.prototype.isAdoptedStyleSheetsSupported=function(){return"adoptedStyleSheets"in Document.prototype&&"queueMicrotask"in window},t.prototype.init=function(){this.isAdoptedStyleSheetsSupported()&&(this.Uo=new Set,this.jo=qr(window.ShadowRoot.prototype,"adoptedStyleSheets",this.qo.bind(this)),this.Ho=qr(window.Document.prototype,"adoptedStyleSheets",this.qo.bind(this)))},t.prototype.onEvent=function(t){this.pi=t},t.prototype.start=function(){!this.li&&this.isAdoptedStyleSheetsSupported()&&(this.li=!0,this.zo(),this.jo&&this.jo.activate(),this.Ho&&this.Ho.activate())},t.prototype.stop=function(){this.li&&this.isAdoptedStyleSheetsSupported()&&(this.li=!1,this.Bo(),this.Uo.clear(),this.jo&&this.jo.deactivate(),this.Ho&&this.Ho.deactivate())},t.prototype.serializeDocumentNode=function(t){var n;(null===(n=t.adoptedStyleSheets)||void 0===n?void 0:n.length)&&this.qo(t,t.adoptedStyleSheets)},t.prototype.serializeShadowRootNode=function(t){var n;(null===(n=t.adoptedStyleSheets)||void 0===n?void 0:n.length)&&this.qo(t,t.adoptedStyleSheets)},t.prototype.zo=function(){this.Gs=this.Se.registerToInsertRuleInterceptor(this.Fo.bind(this)),this.Js=this.Se.registerToDeleteRuleInterceptor(this.Vo.bind(this))},t.prototype.Bo=function(){var t,n;null===(t=this.Gs)||void 0===t||t.call(this),null===(n=this.Js)||void 0===n||n.call(this)},t.prototype.qo=function(t,n){var i=this;this.li&&ar((function(){csArray.prototype.forEach.call(n,(function(t){return i.Go(t)}));var r=csArray.prototype.map.call(n,(function(t){return i.Jo(t)})),e=Mi(t);if(e){var s={type:ii.SET_ADOPTED_STYLE_SHEETS,args:[e,r],date:Et()};i.pi(s)}}))},t.prototype.Jo=function(t){return t.__adopted_stylesheet_id},t.prototype.Fo=function(t,n){var i=n[0],r=n[1],e=this.Wo(t);if(e){var s={date:Et(),type:ii.ADOPTED_STYLESHEET_RULE_INSERT,args:Mt(r)?[e,i,r]:[e,i]};this.pi(s)}},t.prototype.Vo=function(t,n){var i=n[0],r=this.Wo(t);if(r&&r){var e={date:Et(),type:ii.ADOPTED_STYLESHEET_RULE_DELETE,args:[r,i]};this.pi(e)}},t.prototype.Wo=function(t){return this.Uo.has(t)&&t.__adopted_stylesheet_id?t.__adopted_stylesheet_id:null},t.prototype.Go=function(t){if(!this.Uo.has(t)){var n=this.br++;t.__adopted_stylesheet_id=n,this.Uo.add(t);var i=this.Yo(t),r={type:ii.REGISTER_ADOPTED_STYLE_SHEET,args:[n,i],date:Et()};this.pi(r)}},t.prototype.Yo=function(t){var n=[];try{n=csArray.prototype.map.call(t.cssRules,(function(t){return t.cssText}))}catch(t){hn.warn("AdoptedStylesheetsTracker.serializeStyleSheet: could not extract cssRules")}return{cssRules:n}},t}(),Ls=function(){function t(){}return t.isRecordingSupported=function(){return"MutationObserver"in window&&"visibilityState"in document},t.isAsyncSerializationSupported=function(){return"Promise"in window&&"findIndex"in csArray.prototype},t}(),Us=function(){function t(){this.li=!1,this.Xo=[],this.$o=[],this.Ko()}return t.prototype.registerToInsertRuleInterceptor=function(t){var n=this;return this.Zo(this.Xo,t)?function(){}:(csArray.prototype.push.call(this.Xo,t),function(){n.Xo=csArray.prototype.filter.call(n.Xo,(function(n){return n!==t}))})},t.prototype.registerToDeleteRuleInterceptor=function(t){var n=this;return this.Zo(this.$o,t)?function(){}:(csArray.prototype.push.call(this.$o,t),function(){n.$o=csArray.prototype.filter.call(n.$o,(function(n){return n!==t}))})},t.prototype.start=function(){var t,n;this.li||(this.li=!0,null===(t=this.mr)||void 0===t||t.activate(),null===(n=this.gr)||void 0===n||n.activate())},t.prototype.stop=function(){var t,n;this.li&&(this.li=!1,null===(t=this.mr)||void 0===t||t.deactivate(),null===(n=this.gr)||void 0===n||n.deactivate())},t.prototype.Zo=function(t,n){return csArray.prototype.indexOf.call(t,n)>-1},t.prototype.Qo=function(t,n){csArray.prototype.forEach.call(this.Xo,(function(i){return i(t,n)}))},t.prototype.tc=function(t,n){csArray.prototype.forEach.call(this.$o,(function(i){return i(t,n)}))},t.prototype.Ko=function(){var t=this;this.nc()&&(this.mr=jr({target:window.CSSStyleSheet.prototype,methodName:"insertRule",hook:function(n){var i=n.context,r=n.args;t.Qo(i,r)}})),this.rc()&&(this.gr=jr({target:window.CSSStyleSheet.prototype,methodName:"deleteRule",hook:function(n){var i=n.context,r=n.args;return t.tc(i,r)}}))},t.prototype.nc=function(){var t,n;return"function"==typeof(null===(n=null===(t=window.CSSStyleSheet)||void 0===t?void 0:t.prototype)||void 0===n?void 0:n.insertRule)},t.prototype.rc=function(){var t,n;return"function"==typeof(null===(n=null===(t=window.CSSStyleSheet)||void 0===t?void 0:t.prototype)||void 0===n?void 0:n.deleteRule)},t}(),js=function(){function t(t){this.ec={},this.sc=new pr(t)}return t.prototype.save=function(t){var n=t.key,i=t.metadata,r=t.events;this.sc.isThresholdReached()||(this.sc.addString(n),"string"==typeof r?this.sc.addString(r):this.sc.addArrayBuffer(r),this.sc.isThresholdReached()||(this.ec[n]={metadata:i,events:r}))},t.prototype.recover=function(t){var n=this,i=[];csArray.prototype.forEach.call(this.oc(),(function(t){var r=n.ec[t];void 0!==r&&(delete r.metadata.datatype,csArray.prototype.push.call(i,r),n.cc(t))})),0!==i.length&&(t(i),this.sc.reset())},t.prototype.oc=function(){return Object.keys(this.ec)},t.prototype.cc=function(t){delete this.ec[t]},t}();!function(t){t[t.NOT_STARTED=0]="NOT_STARTED",t[t.OPEN_IN_PROGRESS=1]="OPEN_IN_PROGRESS",t[t.OPEN_FAILED=2]="OPEN_FAILED",t[t.READY=3]="READY"}(Cs||(Cs={}));var qs,Hs,zs,Bs,Fs=function(){function t(t,n,i){this.hc=t,this.ac=i,this.fc=Cs.NOT_STARTED,this.vc=[],this.lc=0,this.wc=self.origin,this.yc="object"==typeof window?"":"worker-",this.sc=new pr(n),this.mc()}return t.prototype.mc=function(){return $(this,void 0,void 0,(function(){return K(this,(function(t){switch(t.label){case 0:return[4,this.gc()];case 1:return t.sent(),this.fc===Cs.READY?this.Sc():this.ac(this.vc),[2]}}))}))},t.prototype.Sc=function(){var t=this;csArray.prototype.forEach.call(this.vc,(function(n){t.save(n)})),this.vc=[]},t.prototype.save=function(t){return $(this,void 0,void 0,(function(){var n,i,r;return K(this,(function(e){switch(e.label){case 0:return e.trys.push([0,2,,3]),this.fc===Cs.OPEN_IN_PROGRESS?(csArray.prototype.push.call(this.vc,t),[2]):this.fc!==Cs.READY||this.sc.isThresholdReached()?[2]:(n=t.key,i=t.metadata,r=t.events,this.sc.addString(n),"string"==typeof r?this.sc.addString(r):this.sc.addArrayBuffer(r),this.sc.isThresholdReached()?[2]:[4,this.vn.put("".concat(this.wc,"/").concat(n),new Response(r,{headers:i}))]);case 1:return e.sent(),[3,3];case 2:return e.sent(),[3,3];case 3:return[2]}}))}))},t.prototype.recover=function(t){return $(this,void 0,void 0,(function(){return K(this,(function(n){switch(n.label){case 0:return this.vn?[3,2]:[4,this.gc()];case 1:if(n.sent(),this.fc!==Cs.READY)return[2];n.label=2;case 2:return this.Ac(t),[2]}}))}))},t.prototype.gc=function(){return $(this,void 0,void 0,(function(){var t;return K(this,(function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),this.fc=Cs.OPEN_IN_PROGRESS,t=this,[4,self.caches.open("".concat(this.yc).concat(this.hc))];case 1:return t.vn=n.sent(),this.fc=Cs.READY,[3,3];case 2:return n.sent(),this.fc=Cs.OPEN_FAILED,[3,3];case 3:return[2]}}))}))},t.prototype.Ac=function(t){return $(this,void 0,void 0,(function(){var n,i,r,e,s=this;return K(this,(function(u){switch(u.label){case 0:return u.trys.push([0,5,6,7]),this.lc++,this.lc>1?[2]:[4,this.vn.keys()];case 1:return 0===(n=u.sent()).length?[2]:[4,this.vn.matchAll()];case 2:return i=u.sent(),r=csArray.prototype.map.call(i,(function(t){var n={};t.headers.forEach((function(t,i){n[i]=t})),delete n["content-type"];var i=n.datatype;return delete n.datatype,"json"===i||"base64"===i?t.text().then((function(t){return{metadata:n,events:t}})):t.arrayBuffer().then((function(t){return{metadata:n,events:t}}))})),[4,Promise.all(r)];case 3:return e=u.sent(),[4,Promise.all(csArray.prototype.map.call(n,(function(t){return s.vn.delete(t)})))];case 4:return u.sent(),t(e),this.sc.reset(),[3,7];case 5:return u.sent(),[3,7];case 6:return this.lc--,[7];case 7:return[2]}}))}))},t}(),Vs=function(){function t(t){self.caches?this.bc(t):this.Ec()}return t.prototype.save=function(t){this.Rc.save(t)},t.prototype.recover=function(t){this.Rc.recover(t)},t.prototype.bc=function(n){var i=this;this.Rc=new Fs(n,t.Nc,(function(t){i.Ec(t)}))},t.prototype.Ec=function(n){var i=this;this.Rc=new js(t.Nc),n&&csArray.prototype.forEach.call(n,(function(t){i.Rc.save(t)}))},t.Nc=16777216,t}(),Gs=function(){function t(t){var n,i=this;this.Ie=t,this.pi=tt,this.li=!1,this.Tc=new Set,this.Oc=kr(),this.kc=function(t){return i.inputHandler(t)},this.Ic=[],this.Cc(),this.xc(),null===(n=this.Ie)||void 0===n||n.onInputNodeToEncrypt((function(t){i.pi(t)})),this._c=new Vr((function(t){for(var n=0,r=t;n<r.length;n++){var e=r[n];i.Mc(e)&&i.Pc(e,Mi(e))}}))}return t.prototype.start=function(){this.li||(this._c.observe(csArray.prototype.join.call(t.Dc,",")),this.li=!0,hi({type:"keyup",boundElement:document,listener:this.kc}),hi({type:"change",boundElement:document,listener:this.kc}),Ki(this.Ic,(function(t){return t.activate()})))},t.prototype.stop=function(){var t=this;this.li&&(this._c.disconnect(),this.li=!1,ai({type:"keyup",boundElement:document,listener:this.kc}),ai({type:"change",boundElement:document,listener:this.kc}),this.Tc.forEach((function(n){ai({type:"change",boundElement:n,listener:t.kc})})),this.Tc.clear(),Ki(this.Ic,(function(t){return t.deactivate()})))},t.prototype.onEvent=function(t){this.pi=t},t.prototype.Pc=function(t,n){var i,r,e;if(!this.Oc.has(t))if(this.Oc.add(t),this.Lc(t)){var s={type:ii.INPUT_SELECT,args:[n,t.selectedIndex],date:Et()};this.pi(s)}else if(this.Uc(t)){var u={type:ii.INPUT_CHECKABLE,args:[n,t.checked],date:Et()};this.pi(u)}else{var o=this.jc(t),c=this.qc(t);if(o||c){var h=null!==(i=t.value)&&void 0!==i?i:"";if(null===(r=this.Ie)||void 0===r?void 0:r.shouldEncrypt(t))return void(null===(e=this.Ie)||void 0===e||e.registerInputNodeToEncrypt({targetId:n,targetValue:h,date:Et()}));var a=c?"0":"•",f={type:ii.INPUT_TEXT,args:[n,csString.prototype.replace.call(h,/\S/g,a)],date:Et()};this.pi(f)}}},t.prototype.inputHandler=function(t){var n=this,i=gi(t),r=Mi(i);r&&this.Mc(i)&&de.isConnected(i)&&ar((function(){n.Pc(i,r)}))},t.prototype.afterSerializeShadowRoot=function(t){this.Tc.has(t)||(hi({type:"change",listener:this.kc,boundElement:t}),this.Tc.add(t))},t.prototype.Cc=function(){this.trackChanges(HTMLInputElement,"checked"),this.trackChanges(HTMLInputElement,"value")},t.prototype.xc=function(){this.trackChanges(HTMLSelectElement,"selectedIndex"),this.trackChanges(HTMLSelectElement,"value"),this.trackChanges(HTMLOptionElement,"selected",!0)},t.prototype.trackChanges=function(t,n,i){var r=this;void 0===i&&(i=!1);var e=qr(t.prototype,n,(function(t,n,e){if(e!==n&&de.isConnected(t)){var s=i?t.parentElement:t;r.Hc(s)}}));e&&csArray.prototype.push.call(this.Ic,e)},t.prototype.Lc=function(t){return"SELECT"===t.nodeName},t.prototype.zc=function(t){return"INPUT"===t.nodeName},t.prototype.jc=function(t){return"TEXTAREA"===t.nodeName||this.zc(t)&&!this.qc(t)&&!this.Uc(t)},t.prototype.qc=function(t){return this.zc(t)&&"number"===t.type},t.prototype.Uc=function(t){return this.zc(t)&&("checkbox"===t.type||"radio"===t.type)},t.prototype.Mc=function(t){return!Ii.isSensitive(t)&&!Ii.isSensitiveChild(t)&&(y(t)||S(t)||p(t))},t.prototype.Hc=function(t){var n=this;if(this.li&&de.isConnected(t)){var i=Mi(t);i&&this.Mc(t)&&ar((function(){n.Pc(t,i)}))}},t.Dc=["textarea","input:not([type])",'input[type="text"]','input[type="email"]','input[type="search"]','input[type="tel"]','input[type="url"]','input[type="password"]','input[type="number"]','input[type="checkbox"]','input[type="radio"]',"select"],X([Si()],t.prototype,"inputHandler",null),X([wn()],t.prototype,"trackChanges",null),t}(),Js=function(){function t(t){var n=this;this.Nn=t,this.Bc={boundElement:window,type:"resize",listener:function(){return n.resizeListener()}},this.Nn=t}return t.prototype.observe=function(){hi(this.Bc),this.Xn()},t.prototype.Xn=function(){this.resizeListener()},t.prototype.disconnect=function(){ai(this.Bc)},t.prototype.resizeListener=function(){var t={width:ce.windowWidth(),height:ce.windowHeight()};this.Nn(t)},Kn([wn("resize")],t.prototype,"resizeListener",null),t}();!function(t){t.PORTRAIT="Portrait",t.LANDSCAPE="Landscape"}(qs||(qs={})),function(t){t.PORTRAIT_PRIMARY="portrait-primary",t.PORTRAIT_SECONDARY="portrait-secondary",t.LANDSCAPE_PRIMARY="landscape-primary",t.LANDSCAPE_SECONDARY="landscape-secondary"}(Hs||(Hs={})),function(t){t[t.PORTRAIT=0]="PORTRAIT",t[t.PORTRAIT_REVERSE=180]="PORTRAIT_REVERSE",t[t.LANDSCAPE=-90]="LANDSCAPE",t[t.LANDSCAPE_REVERSE=90]="LANDSCAPE_REVERSE"}(zs||(zs={})),function(t){function n(){return"orientation"in window.csScreen}function i(){return"orientation"in window}t.isScreenOrientationApiSupported=n,t.isDeprecatedScreenOrientationApiSupported=i;var r=n()?function(){switch(window.csScreen.orientation.type){case Hs.PORTRAIT_PRIMARY:case Hs.PORTRAIT_SECONDARY:return qs.PORTRAIT;case Hs.LANDSCAPE_PRIMARY:case Hs.LANDSCAPE_SECONDARY:return qs.LANDSCAPE;default:return qs.PORTRAIT}}:i()?function(){switch(window.orientation){case zs.PORTRAIT:case zs.PORTRAIT_REVERSE:return qs.PORTRAIT;case zs.LANDSCAPE:case zs.LANDSCAPE_REVERSE:return qs.LANDSCAPE;default:return qs.PORTRAIT}}:function(){return qs.LANDSCAPE};t.getCurrentOrientation=function(){return r()}}(Bs||(Bs={}));var Ws,Ys=function(t){function n(){var n=null!==t&&t.apply(this,arguments)||this;return n.Fc=null,n.Vc=null,n.Gc=new Js((function(t){n.produceEvent(Wr(Wr({},t),{type:"viewportResize"})),n.onScreenPotentiallyChanged()})),n}return Jr(n,t),n.prototype.onScreenPotentiallyChanged=function(){var t=Bs.getCurrentOrientation(),n=this.Jc(t),i=n.screenWidth,r=n.screenHeight;if(i!==this.Fc||r!==this.Vc){this.Fc=i,this.Vc=r;var e={type:"screenResize",width:i,height:r};this.produceEvent(e)}},n.prototype.Jc=function(t){var n,i,r=ce.screenWidth(),e=ce.screenHeight();return t===qs.PORTRAIT?(n=r,i=e):(n=Math.max(r,e),i=Math.min(r,e)),{screenWidth:n,screenHeight:i}},n.prototype.onStart=function(){this.Gc.observe()},n.prototype.onStop=function(){this.Fc=null,this.Vc=null,this.Gc.disconnect()},n}(je),Xs=function(t){function n(){var n=t.call(this)||this;n.Wc="object"==typeof window.customElements&&"function"==typeof window.customElements.whenDefined&&"function"==typeof window.Promise,n.Yc=function(t){for(var i=0,r=t;i<r.length;i++){var e=r[i];Ii.isSensitive(e)||Ii.isSensitiveChild(e)||a(s=e)&&csString.prototype.indexOf.call(s.tagName,"-")>0&&-1===csString.prototype.indexOf.call(s.tagName,":")&&-1===csString.prototype.indexOf.call(s.tagName,'"')&&-1===csString.prototype.indexOf.call(s.tagName,",")&&csArray.prototype.indexOf.call(T,csString.prototype.toLocaleLowerCase.call(s.tagName))<0&&n.Xc(csString.prototype.toLowerCase.call(e.tagName))}var s};var i,r,e=(i=n.Yc,r=kr(),{push:function(t){0===r.count&&setTimeout((function(){i(r.values())})),r.add(t)}});return n.du=new fs((function(t){return e.push(t)})),n.$c=new Set,n}return Jr(n,t),n.prototype.onStart=function(){this.Wc&&this.du.observe()},n.prototype.onStop=function(){this.$c.clear(),this.du.disconnect()},n.prototype.Xc=function(t){return Yr(this,void 0,void 0,(function(){return Xr(this,(function(n){switch(n.label){case 0:return this.$c.has(t)?[2]:(this.$c.add(t),[4,window.customElements.whenDefined(t)]);case 1:return n.sent(),this.produceEvent({type:"CustomElementRegistration",tagName:csString.prototype.toLowerCase.call(t)}),[2]}}))}))},n}(je);!function(t){t.isNavigationTimingObserverSupported=function(){var t,n;return(null==(null===(t=window.PerformanceObserver)||void 0===t?void 0:t.supportedEntryTypes)?void 0:csArray.prototype.indexOf.call(null===(n=window.PerformanceObserver)||void 0===n?void 0:n.supportedEntryTypes,"navigation"))>=0},t.getTimeOrigin=function(){return window.performance.timeOrigin}}(Ws||(Ws={}));var $s,Ks,Zs=function(){function t(t){this.Nn=t}return t.Kc=function(){return new window.PerformanceObserver((function(n){return t.Zc(n)}))},t.Zc=function(n){var i=n.getEntriesByType("navigation")[0];i&&(this.Qc=i,t.th(i))},t.Zi=function(n){t.nh(n),t.Qc&&n(t.Qc),t.ih||t.rh()},t.nh=function(n){t.eh.add(n)},t.uh=function(n){t.eh.delete(n)},t.rh=function(){if(!t.oh)return t.Qc||(t.Qc={requestStart:window.performance.timing.requestStart,domInteractive:window.performance.timing.domInteractive}),void t.th(t.Qc);t.oh.observe({type:"navigation",buffered:!0}),t.ih=!0},t.th=function(n){t.eh.forEach((function(t){t(n)}))},t.rr=function(n){t.uh(n),0===t.eh.size&&t.hh()},t.hh=function(){var n;t.ih&&(null===(n=t.oh)||void 0===n||n.disconnect(),t.ih=!1,t.Qc=null,t.oh=this.Kc())},t.prototype.observe=function(){t.Zi(this.Nn)},t.prototype.disconnect=function(){t.rr(this.Nn)},t.oh=Ws.isNavigationTimingObserverSupported()?t.Kc():null,t.ih=!1,t.eh=new Set,t.Qc=null,t}(),Qs=function(t){function n(){var n=null!==t&&t.apply(this,arguments)||this;return n.ah=null,n.fh=new Zs((function(t){if(!n.ah){var i=n.yh(t);i&&(n.ah=i,n.produceEvent(i))}})),n}return Jr(n,t),n.prototype.onStart=function(){this.ah?this.produceEvent(this.ah):this.fh.observe()},n.prototype.onStop=function(){this.fh.disconnect()},n.prototype.yh=function(t){var n=Ws.getTimeOrigin();return{type:"PerformanceTiming",timings:{timeOrigin:n,requestStart:Math.floor(n+t.requestStart),domInteractive:Math.floor(n+t.domInteractive)},timestamp:Et()}},n}(je);!function(t){t[t.TAP=0]="TAP",t[t.LONG_PRESS=1]="LONG_PRESS",t[t.DRAG=2]="DRAG",t[t.FLICK=3]="FLICK",t[t.PINCH_IN=4]="PINCH_IN",t[t.PINCH_OUT=5]="PINCH_OUT"}($s||($s={})),function(t){t[t.UP=1]="UP",t[t.DOWN=2]="DOWN",t[t.LEFT=3]="LEFT",t[t.RIGHT=4]="RIGHT"}(Ks||(Ks={}));var tu,nu=function(){function t(){}return t.prototype.compute=function(t,n){var i=this.ph(n.x)-this.ph(t.x),r=this.ph(n.y)-this.ph(t.y),e=n.time-t.time;return{duration:e,distance:this.mh(i,r),direction:this.gh(i,r),velocity:this.Sh(i,r,e)}},t.prototype.computePinchMetrics=function(t,n){var i=this.ph(n.x)-this.ph(t.x),r=this.ph(n.y)-this.ph(t.y);return{duration:n.time-t.time,distance:this.mh(i,r)}},t.prototype.getScale=function(t,n){return Math.abs(n/t-1)},t.prototype.ph=function(t){return t/window.devicePixelRatio},t.prototype.mh=function(t,n){return Math.round(Math.sqrt(t*t+n*n))},t.prototype.Sh=function(t,n,i){var r=i/1e3,e=t/r,s=n/r;return Math.round(Math.abs(e)+Math.abs(s))},t.prototype.gh=function(t,n){return Math.abs(t)>Math.abs(n)?t>0?Ks.RIGHT:Ks.LEFT:n>0?Ks.DOWN:Ks.UP},t}(),iu=function(){function t(){this.Ah={},this.bh=function(){},this.Eh=new nu,this.Rh()}return t.isGestureDetectionSupported=function(){return void 0!==window.devicePixelRatio},t.prototype.onGesture=function(t){this.bh=t},t.prototype.isValidTouchEvent=function(t){return"touches"in t&&"changedTouches"in t},t.prototype.processActionDown=function(t){if(this.Nh(t)){this.Th(t)&&this.Rh();var n={x:t.touches[0].clientX,y:t.touches[0].clientY,time:Et()};if(1===t.touches.length)this.Ah.startPinchTime=n.time,this.Ah.firstTouch=n;else if(2===t.touches.length&&(this.Ah.secondTouch={x:t.touches[1].clientX,y:t.touches[1].clientY,time:Et()},this.Ah.firstTouch&&this.Ah.secondTouch)){var i=this.Eh.computePinchMetrics(this.Ah.firstTouch,this.Ah.secondTouch);this.Oh=i.distance}csArray.prototype.push.call(this.kh,n),this.Ih=gi(t)}},t.prototype.processActionMove=function(){this.Ch=!0},t.prototype.processActionUp=function(t){if(this.xh(t)){if(csArray.prototype.push.call(this.kh,{x:t.changedTouches[0].clientX,y:t.changedTouches[0].clientY,time:Et()}),this._h(t)&&this.Ah.startPinchTime){var n={x:t.touches[0].clientX,y:t.touches[0].clientY,time:this.Ah.startPinchTime},i={x:t.changedTouches[0].clientX,y:t.changedTouches[0].clientY,time:Et()};this.Ah.firstTouch&&(this.Ah.firstTouch=n,this.Ah.secondTouch=i),this.Mh(t)}this.Oh||this.Ph()&&this.Dh(t)}},t.prototype.Rh=function(){this.kh=[],this.Ih=null,this.Ch=!1,this.Oh=null,this.Lh=!0},t.prototype.Dh=function(t){var n=this.Eh.compute(this.kh[0],this.kh[1]);this.Lh=t.isTrusted;var i=this.Ch?this.Uh(n):this.jh(n);if(this.qh(i.type,t.changedTouches)){var r=t.changedTouches[0];i.pageX=Xn(r.pageX,1),i.pageY=Xn(r.pageY,1)}this.bh(i,t)},t.prototype.Mh=function(t){if(this.Ah.firstTouch&&this.Ah.secondTouch){var n=this.Eh.computePinchMetrics(this.Ah.firstTouch,this.Ah.secondTouch);this.Lh=t.isTrusted;var i=this.Hh(n);i&&this.bh(i,t)}},t.prototype.Hh=function(t){if(this.Oh&&!(this.Eh.getScale(this.Oh,t.distance)<.1))return{type:this.Oh>t.distance?$s.PINCH_IN:$s.PINCH_OUT,target:this.Ih,distance:t.distance,isTrusted:this.Lh}},t.prototype.Uh=function(t){return{type:t.velocity<100?$s.DRAG:$s.FLICK,target:this.Ih,velocity:t.velocity,distance:t.distance,direction:t.direction,isTrusted:this.Lh}},t.prototype.jh=function(t){return{type:t.duration<1e3?$s.TAP:$s.LONG_PRESS,target:this.Ih,isTrusted:this.Lh}},t.prototype.qh=function(t,n){return t===$s.TAP&&n&&1===n.length},t.prototype.Th=function(t){return 1===t.touches.length},t.prototype.Ph=function(){return 2===this.kh.length},t.prototype.Nh=function(t){return t.touches.length>0},t.prototype.xh=function(t){return t.changedTouches.length>0},t.prototype._h=function(t){return this.Ch&&!!this.Oh&&1===t.changedTouches.length&&1===t.touches.length},t}(),ru=function(){function t(t){this.Nn=t}return t.prototype.observe=function(){t.zh&&t.Bh(this.Nn)},t.prototype.disconnect=function(){t.zh&&t.Fh(this.Nn)},t.Vh=function(n,i){t.eh.forEach((function(t){return t(n,i)}))},t.Bh=function(n){t.eh.has(n)||(t.eh.add(n),1===t.eh.size&&(t.Gh.onGesture(t.Vh),csArray.prototype.forEach.call(t.tu,(function(t){return hi(t)}))))},t.Fh=function(n){t.eh.delete(n),0===t.eh.size&&csArray.prototype.forEach.call(t.tu,(function(t){return ai(t)}))},t.Jh=function(n){if(t.Gh.isValidTouchEvent(n))switch(n.type){case"touchstart":t.Gh.processActionDown(n);break;case"touchmove":t.Gh.processActionMove();break;case"touchend":t.Gh.processActionUp(n)}},t.tu=[{boundElement:document,type:"touchstart",listener:function(n){return t.Jh(n)}},{boundElement:document,type:"touchmove",listener:function(n){return t.Jh(n)}},{boundElement:document,type:"touchend",listener:function(n){return t.Jh(n)}}],t.zh=iu.isGestureDetectionSupported(),t.eh=new Set,t.Gh=new iu,t}(),eu=function(t){function n(){var n=t.call(this)||this;return n.Wh=new ru(n.Yh.bind(n)),n}return Jr(n,t),n.prototype.onStart=function(){this.Wh.observe()},n.prototype.onStop=function(){this.Wh.disconnect()},n.prototype.Yh=function(t){var n=this.Xh(t);n&&this.produceEvent(n)},n.prototype.Xh=function(t){if(!this.$h(t))return null;var n=Mi(t.target);return n?{type:"Gesture",targetId:n,data:{type:t.type,direction:t.direction,distance:t.distance,velocity:t.velocity,pageX:t.pageX,pageY:t.pageY}}:null},n.prototype.$h=function(t){return null!==t.target&&!(a(t.target)&&Ii.isSensitiveChild(t.target))},n}(je),su=function(){function t(t){this.Nn=t,this.Kh=new sr,this.Zh=!1}return t.prototype.onEvent=function(t){if(this.Nn)throw new Error("callback already set");return this.Nn=t,this},t.prototype.push=function(t){this.Kh.push(t),this.Qh()},t.pipe=function(n,i){for(var r=n,e=function(n){var i=new t((function(t){n.pushEvent(t)}));Ki(r,(function(t){return t.subscribe((function(t){return i.push(t)}))})),r=[n]},s=0,u=i;s<u.length;s++){e(u[s])}var o=new t;return Ki(r,(function(t){return t.subscribe((function(t){return o.push(t)}))})),o},t.prototype.Qh=function(){var t=this;if(!this.Zh){if(this.Zh=!0,!this.Nn)throw new Error("callback not set");var n=this.Kh.pop(),i=function(n){t.Nn(n),t.Zh=!1,t.Kh.isEmpty||t.Qh()};n instanceof le?n.complete(i):i(n)}},t}(),uu=function(){function t(t,n){void 0===n&&(n=[]);var i=this;this.producers=t,this.processors=n,this.li=!1,this.eh=[],this.Hi=function(t){return csArray.prototype.forEach.call(i.eh,(function(n){return n(t)}))}}return t.prototype.start=function(){if(this.li)throw new Error("Recording is already started.");su.pipe(this.producers,this.processors).onEvent(this.Hi),Ki(this.producers,(function(t){return t.start()})),Ki(this.processors,(function(t){return t.start()})),this.li=!0},t.prototype.stop=function(){for(var t=0,n=this.producers;t<n.length;t++){n[t].stop()}for(var i=0,r=this.processors;i<r.length;i++){r[i].stop()}this.li=!1,this.eh=[]},t.prototype.subscribe=function(t){var n=this;if(this.li)throw new Error("Recording is already started.");return csArray.prototype.push.call(this.eh,t),function(){return n.eh=csArray.prototype.filter.call(n.eh,(function(n){return n!==t}))}},t}(),ou="RSA-OAEP",cu="AES-CTR";!function(t){var n,i,r,e=!1,s=null,u=window.TextEncoder?new window.TextEncoder:null;function o(){var t,n;return null!=(null===(n=null===(t=window.self.crypto)||void 0===t?void 0:t.subtle)||void 0===n?void 0:n.encrypt)&&null!=window.self.CryptoKey}function c(n){return Zn(this,void 0,void 0,(function(){var r;return Qn(this,(function(u){switch(u.label){case 0:return!o()||e?[2,null]:[4,i];case 1:u.sent(),(r=Be(n)).byteLength>190&&(r=r.slice(0,190)),u.label=2;case 2:return u.trys.push([2,4,,5]),[4,t.crypto.encrypt({name:ou},s,r)];case 3:return[2,Fe(u.sent())];case 4:return u.sent(),[2,null];case 5:return[2]}}))}))}function h(n){var i;return Zn(this,void 0,void 0,(function(){var r;return Qn(this,(function(e){switch(e.label){case 0:if(!o())return[2,null];e.label=1;case 1:return e.trys.push([1,3,,4]),[4,t.crypto.exportKey("jwk",n)];case 2:return r=e.sent(),[2,null!==(i=r.k)&&void 0!==i?i:null];case 3:return e.sent(),[2,null];case 4:return[2]}}))}))}t.crypto=null===(n=window.crypto)||void 0===n?void 0:n.subtle,t.prop="toEncrypt",t.MAX_DIGEST_INPUT_SIZE=100,t.isKeyImported=function(){return!e},t.getCryptoKey=function(){return s},t.isSupported=o,t.importKey=function(n){return Zn(this,void 0,void 0,(function(){return Qn(this,(function(r){switch(r.label){case 0:return[4,i=t.crypto.importKey("spki",Ve(n),{name:ou,hash:"SHA-256"},!1,["encrypt"]).catch((function(){return e=!0,null}))];case 1:return s=r.sent(),i=void 0,s||an.warn("Fail to import public key '".concat(n,"'")),[2]}}))}))},t.asymmetricEncrypt=c,t.symmetricEncrypt=function(n,i){return Zn(this,void 0,void 0,(function(){var r,s;return Qn(this,(function(c){switch(c.label){case 0:if(!o()||e)return[2,null];r={counter:i.initializationVector,name:cu,length:64},s=u.encode(n),c.label=1;case 1:return c.trys.push([1,3,,4]),[4,t.crypto.encrypt(r,i.cryptoKey,s)];case 2:return[2,Fe(c.sent())];case 3:return c.sent(),[2,null];case 4:return[2]}}))}))},t.encryptSecret=function(t){return Zn(this,void 0,void 0,(function(){var n,i;return Qn(this,(function(r){switch(r.label){case 0:return[4,h(t)];case 1:if(!(n=r.sent()))throw new Error("Export secret failed");return[4,c(n)];case 2:if(!(i=r.sent()))throw new Error("Encrypt secret failed");return[2,i]}}))}))},t.generateSymmetricKey=function(){return Zn(this,void 0,void 0,(function(){return Qn(this,(function(n){switch(n.label){case 0:if(!o()||e)return[2,null];n.label=1;case 1:return n.trys.push([1,3,,4]),[4,t.crypto.generateKey({name:cu,length:128},!0,["encrypt","decrypt"])];case 2:return[2,{cryptoKey:n.sent(),initializationVector:window.crypto.getRandomValues(new Uint8Array(16))}];case 3:return n.sent(),[2,null];case 4:return[2]}}))}))},t.setDigestSalt=function(t){r=t},t.digest=function(n){return Zn(this,void 0,void 0,(function(){var i;return Qn(this,(function(e){switch(e.label){case 0:n=csString.prototype.toLocaleLowerCase.call(csString.prototype.trim.call(n)),r&&(n="".concat(n,":").concat(r)),i=u.encode(n),e.label=1;case 1:return e.trys.push([1,3,,4]),[4,t.crypto.digest("SHA-1",i)];case 2:return[2,Ge(e.sent())];case 3:return e.sent(),[2,null];case 4:return[2]}}))}))},t.generateKeyPair=function(){return window.crypto.subtle.generateKey({name:"RSA-OAEP",modulusLength:2048,publicExponent:new Uint8Array([1,0,1]),hash:"SHA-256"},!0,["encrypt","decrypt"])}}(tu||(tu={}));var hu=function(t){function n(n){var i=t.call(this)||this;return i._e=n,i}return J(n,t),n.prototype.subscribe=function(n){return t.prototype.subscribe.call(this,n)},n.prototype.onStart=function(){var t=this;Ki(this._e,(function(n){n.onEvent((function(n){return t.Hi(n)}))})),Ki(this._e,(function(t){var n;null===(n=t.start)||void 0===n||n.call(t)}))},n.prototype.onStop=function(){Ki(this._e,(function(t){var n;return null===(n=t.stop)||void 0===n?void 0:n.call(t)}))},n.prototype.Hi=function(t){this.produceEvent({timestamp:Et(),type:"Legacy",originalEvent:t})},n}(je);function au(t){var n=function(t){var n={type:fu(t.type)};for(var i in t){var r=t[i];void 0!==r&&"type"!==i&&(n[i]=r)}return n}(t.data);return{type:ii.GESTURE_RECOGNITION,args:[t.targetId,n],date:t.timestamp}}function fu(t){switch(t){case $s.DRAG:case $s.FLICK:return si.SWIPE;case $s.LONG_PRESS:return si.LONG_PRESS;case $s.TAP:return si.TAP;case $s.PINCH_IN:return si.PINCH_IN;case $s.PINCH_OUT:return si.PINCH_OUT}}var vu;function lu(t){return function(t,n){var i=[];return{push:function(t){csArray.prototype.push.call(i,t),i.length===n.batchSize&&this.flush()},flush:function(){if(i.length){var n=i;i=[],t(n)}}}}((function(n){var i={visibleInViewPort:n},r={type:ii.TEXT_VISIBILITY,date:Et(),args:[i]};t(r)}),{batchSize:20})}!function(t){t.REQUEST_START="requestStart",t.DOM_INTERACTIVE="domInteractive",t.TIME_ORIGIN="timeOrigin"}(vu||(vu={}));W(W({},{connectEnd:"ce",connectStart:"cs",decodedBodySize:"dbs",domainLookupEnd:"dle",domainLookupStart:"dls",duration:"d",fetchStart:"fs",initiatorType:"it",name:"n",nextHopProtocol:"nhp",redirectEnd:"re",redirectStart:"rs",requestStart:"rqs",responseEnd:"rse",responseStart:"rss",responseStatus:"rst",secureConnectionStart:"scs",startTime:"st",transferSize:"ts"}),{domComplete:"dc",domContentLoadedEventEnd:"dclee",domContentLoadedEventStart:"dcles",domInteractive:"di",loadEventEnd:"lee",loadEventStart:"les",type:"t"});var du=0;var wu,yu=function(){function t(t,n){var i=this;this.ta=t,this.na=n,this.ia=function(){},this.ra=function(){},this.ea=lu((function(t){return i.ia(t)}))}return t.prototype.start=function(){var t=this;this.sa={processEvent:function(t,n){if(t.originalEvent.type===ii.PERFORMANCE_RESOURCE_TIMING)return du>=500?null:(du+=1,n(W(W({},t.originalEvent),{date:t.timestamp})));n(t.originalEvent)},reset:function(){du=0}},this.ta.subscribe((function(n){var i,r,e=n,s=e.timestamp;switch(e.type){case"Legacy":t.sa.processEvent(e,t.ia);break;case"CustomElementRegistration":t.ia({type:ii.CUSTOM_ELEMENT_REGISTRATION,date:s,args:[e.tagName]});break;case"DomEvent":!function(t,n){var i=t.timestamp;switch(t.domEvent){case"initialDOM":var r=t.initialDOM;n({type:ii.INITIAL_DOM,date:i,args:[r]});break;case"nodesAdded":csArray.prototype.forEach.call(t.nodes,(function(r){n({type:ii.MUTATION_INSERT,date:i,args:[t.target,t.nextSibling,r]})}));break;case"nodesMoved":n({type:ii.MUTATION_MOVE,date:i,args:[t.target,t.nextSibling,t.nodesIds]});break;case"nodesRemoved":csArray.prototype.forEach.call(t.nodesIds,(function(t){n({type:ii.MUTATION_REMOVE,date:i,args:[t]})}));break;case"attributeChanged":var e=t.target,s=t.namespace,u=t.attribute,o=t.newValue;n({type:ii.MUTATION_ATTRIBUTE,date:i,args:[e,s,u,o]});break;case"characterDataChanged":e=t.target,o=t.newValue,n({type:ii.MUTATION_CHARACTER_DATA,date:i,args:[e,o]});break;case"cssRuleInserted":e=t.target;var c=t.rule,h=Mt(a=t.index)?[e,c,a]:[e,c];n({type:ii.STYLESHEET_RULE_INSERT,date:i,args:h});break;case"cssRuleDeleted":e=t.target;var a=t.index;n({type:ii.STYLESHEET_RULE_DELETE,date:i,args:[e,a]});break;case"shadowRootAttached":e=t.target;var f=t.shadowRoot;n({type:ii.ATTACH_SHADOW,date:i,args:[e,f]});break;case"adoptedStyleSheetRegistered":var v=t.sheetId,l=t.cssRules;n({type:ii.REGISTER_ADOPTED_STYLE_SHEET,date:i,args:[v,l]});break;case"adoptedStyleSheetsSet":e=t.target;var d=t.sheetsIds;n({type:ii.SET_ADOPTED_STYLE_SHEETS,date:i,args:[e,d]});break;case"adoptedStyleSheetRuleInserted":v=t.sheetId,c=t.rule,h=Mt(a=t.index)?[v,c,a]:[v,c],n({type:ii.ADOPTED_STYLESHEET_RULE_INSERT,date:i,args:h});break;case"adoptedStyleSheetRuleDeleted":v=t.sheetId,a=t.index,n({type:ii.ADOPTED_STYLESHEET_RULE_DELETE,date:i,args:[v,a]});break;default:hn.error("translateDOMEvent: DOMEvent not supported")}}(e,t.ia);break;case"encryptedCharacterDataChanged":var u=e.target,o=e.rawData,c=e.encryptedData,h=e.encryptionMetadata;t.ia({type:ii.MUTATION_ENCRYPTED_CHARACTER_DATA,date:s,args:[u,o,c,h]});break;case"StaticResource":var a=e.url;t.ia({type:ii.STATIC_RESOURCE_URL,date:s,args:[a]});break;case"Gesture":var f=au(n);null===(i=t.ra)||void 0===i||i.call(t,f);break;case"TextVisibility":t.ea.push(e.text);break;case"StaticResourceManagerEvent":null===(r=t.na)||void 0===r||r.processEvent(e);break;case"screenResize":var v=e.width,l=e.height,d={type:ii.SCREEN_RESIZE,date:s,args:[v,l]};t.ia(d);break;case"viewportResize":v=e.width,l=e.height;var w={type:ii.RESIZE,date:s,args:[v,l]};t.ia(w);break;case"PerformanceTiming":t.ia(function(t){return{type:ii.PERFORMANCE_TIMINGS,args:[{performanceTiming:vu.REQUEST_START,timestamp:t.timings.requestStart},{performanceTiming:vu.DOM_INTERACTIVE,timestamp:t.timings.domInteractive},{performanceTiming:vu.TIME_ORIGIN,timestamp:t.timings.timeOrigin}],date:t.timestamp}}(e));break;default:hn.error("WebRecorderEventTranslator: Event not supported (".concat(e.type,")"))}})),this.ta.start()},t.prototype.stop=function(){var t;this.reset(),this.flush(),this.ta.stop(),null===(t=this.na)||void 0===t||t.flushEvents()},t.prototype.flush=function(){this.ea.flush()},t.prototype.onEvent=function(t,n){var i,r=this;this.ia=t,this.ra=n,null===(i=this.na)||void 0===i||i.onEvent((function(t){return r.ia(t)}))},t.prototype.reset=function(){this.sa.reset()},t}();function pu(t,n){var i,r,e,s,u=null,o=function(c){var h=Et();if(!c&&null!==u){var a=n-(h-u);if(a>0)return void(r=window.setTimeout(o,a))}var f=h-e;r=null,u=null,e=null,s=t.apply(void 0,ti([f],i,!1))},c=function(){for(var t=[],c=0;c<arguments.length;c++)t[c]=arguments[c];if(i=ti([],t,!0),!e)return e=Et(),r=window.setTimeout(o,n),s;u=Et()};return c.flushPending=function(){r&&(window.clearTimeout(r),o(!0))},c.cancel=function(){u=null,e=null,r&&(window.clearTimeout(r),r=null)},c}function mu(t){return void 0===t&&(t=0),function(n,i,r){var e=r.value,s=!1;r.value=function(){for(var n=this,i=[],r=0;r<arguments.length;r++)i[r]=arguments[r];s||(s=!0,setTimeout((function(){s=!1,e.apply(n,i)}),t))}}}!function(t){t[t.NOT_EXIST=2]="NOT_EXIST"}(wu||(wu={}));var gu,Su,Au=function(t){function n(n,i,r){var e=t.call(this)||this;return e.na=n,e.ua=i,e.oa=r,e.ca={},e.ha=new Set,e.Zh=!1,e}return J(n,t),n.prototype.initState=function(){var t=this;Nt()&&(this.aa=this.oa.getRequestParameters(),this.fa="".concat(this.ua,"/exist?").concat(ot.toQuery(this.aa)),this.va="".concat(this.ua,"/putTag?").concat(ot.toQuery(this.aa)),this.da=pu((function(){return $(t,void 0,void 0,(function(){return K(this,(function(t){switch(t.label){case 0:if(this.Zh)return this.da(),[2];this.Zh=!0,t.label=1;case 1:return t.trys.push([1,,3,4]),[4,this.wa()];case 2:return t.sent(),[3,4];case 3:return this.Zh=!1,[7];case 4:return[2]}}))}))}),300),this.na.onSendStaticResource((function(n){t.ya(n)})))},n.prototype.onStart=function(){},n.prototype.onStop=function(){},n.prototype.onIframeStaticResource=function(t){this.ya(t)},n.prototype.ya=function(t){var n=this;this.pa(t.resource.hash,t.resource.data),t.nestedResources&&t.nestedResources.length>0&&csArray.prototype.forEach.call(t.nestedResources,(function(t){n.pa(t.hash,t.data)}))},n.prototype.pa=function(t,n){this.ha.has(t)||(this.ha.add(t),this.ca[t]=n,this.da())},n.prototype.wa=function(){return $(this,void 0,void 0,(function(){var t,n,i,r=this;return K(this,(function(e){switch(e.label){case 0:return t=this.ca,this.ca={},[4,this.ma(t)];case 1:return(n=e.sent()).length?(i=this.ga(n),[4,Promise.all(csArray.prototype.map.call(i,(function(t){return window.fetch(r.va,{method:"POST",body:t})})))]):[2];case 2:return e.sent(),[2]}}))}))},n.prototype.Sa=function(t){return $(this,void 0,void 0,(function(){var n,i;return K(this,(function(r){switch(r.label){case 0:return r.trys.push([0,3,,4]),(n=Object.keys(t)).length?(i={projectId:this.aa.pid,filter:wu.NOT_EXIST,hashes:n,touch:!0},[4,window.fetch(this.fa,{method:"POST",body:csJSON.stringify(i)})]):[2,[]];case 1:return[4,r.sent().json()];case 2:return[2,r.sent()];case 3:return r.sent(),[2,[]];case 4:return[2]}}))}))},n.prototype.ma=function(t){return $(this,void 0,void 0,(function(){var n,i;return K(this,(function(r){switch(r.label){case 0:return n=[],[4,this.Sa(t)];case 1:return i=r.sent(),csArray.prototype.forEach.call(i,(function(i){var r=t[i];r?csArray.prototype.push.call(n,{hash:i,data:r}):hn.warn("SRM: received unknown hash: "+i)})),[2,n]}}))}))},n.prototype.ga=function(t){for(var n=0,i=[new FormData],r=0,e=t;r<e.length;r++){var s=e[r],u=s.data,o=s.hash,c=i.length-1;if((n+=u.size)<8388608)i[c].append("",u,o);else{var h=new FormData;h.append("",u,o),n=u.size,csArray.prototype.push.call(i,h)}}return i},n}(Ar),bu=function(){function t(t){void 0===t&&(t=100),this.Aa=t,this.ba={},this.Ea=null,this.Zr="original-resource-name"}return t.prototype.onEvent=function(t){this.Ra=t},t.prototype.processEvent=function(t){this.Na(t.resourceId,t.resource.hash,t.originalResourceName),this.Ta(t)},t.prototype.flushEvents=function(){this.Ea&&clearTimeout(this.Ea),this.Oa()},t.prototype.onSendStaticResource=function(t){this.Ta=t},t.prototype.Oa=function(){if(Object.keys(this.ba).length){var t={type:ii.RESOURCE_HASHES,date:Et(),args:[this.ba]};this.Ea=null,this.ba={},this.Ra(t)}},t.prototype.Na=function(t,n,i){var r=this,e=n;i&&(e+="?".concat(this.Zr,"=").concat(i)),this.ba[t]=e,this.Ea||(this.Ea=window.setTimeout((function(){return r.Oa()}),this.Aa))},t}(),Eu="v2/recording",Ru=["setCapturedElementsSelector"],Nu=["setPIISelectors"],Tu=["isRecording"],Ou=["replay:resourceManager:enableForOnlineResource:nextPageviewOnly","cssrm:onlineAssets:activateForNextPageview"],ku=["replay:resourceManager:getStatus","cssrm:getStatus"],Iu=function(){function t(t,n,i,r,e,s,u,o,c,h,a,f,v,l,d,w,y,p,m,g,S){this.ka=t,this.X=n,this.L=i,this.aa=r,this.Ia=e,this.U=s,this.Re=u,this.ai=o,this.Ne=c,this.Te=h,this.Oe=a,this.ke=f,this.hi=v,this.Ca=l,this.xa=d,this._a=w,this.Iu=y,this.Ma=p,this.Pa=m,this.Le=g,this.Da=S}return t.prototype.init=function(){var t=this,n=[],i=new Vs("csPersisted");this.La(i);var r=new gr;this.ye=new mr;var e=new es;this.Ua=new cs(this.U,this.L),this.Ua.init();var s=new ls;csArray.prototype.push.call(n,s);var u=new ws(this.Iu),o=[new Ps,e,this.Ua];this.L.useStaticResourceManager&&Ye.isSupported()&&(this.De=new Ye,this.na=new bu,this.ja=new Au(this.na,this.L.getStaticResourceManagerUri(),this.aa),this.xa.addListener(this.ja));var c=new Us,h=new Ds(c);h.init(),csArray.prototype.push.call(n,h),h.isAdoptedStyleSheetsSupported()&&csArray.prototype.push.call(o,h);var a,f=new Gs(this.Ie);csArray.prototype.push.call(o,f),a=this.qa()?new _s(o):new Ms(o);var v=new hs(r,this.aa,{getRequestParameters:function(){return{let:t.recordingService.getRecordingLastEventTimestamp()}}},{getRequestParameters:function(){return{rst:t.recordingService.getRecordingStartTimestamp()}}},{getRequestParameters:function(){return{rt:csArray.prototype.join.call(t.X.getRecordingStates(),",")}}}),l=new ys("".concat(this.L.getRecordingUri(),"/").concat(Eu));this.oi=new ns(a,this.Ua,this.Ie),this.oi.setAnonymization(this.Da.shouldUseAnonymization()),this.be=new Bi,this.be.init();var d=new yr(this.oi,u,this.hi,this.ai);this.xe=new $e(i,l,this.Ce),csArray.prototype.push.call(n,new is(s,c)),csArray.prototype.push.call(n,new as(window.location,this.U));var w=[new hu(csArray.prototype.filter.call(Z([d],n,!0),(function(t){return t}))),new Ys,new Xs,new Qs,new eu];var y=[];this.De&&csArray.prototype.push.call(y,this.De);var p=new uu(w,y),m=new yu(p,this.na);this.recordingService=new Xe(this.L,this.ye,v,r,c,d,this.be,f,this.Re,this.X,this.Ne,this.Te,this.Oe,this.ke,this.Ie,this.Ce,this.xe,n,l,m,this.De,this.Le),this.Ca.addListener(this.recordingService),this.xa.addListener(this.recordingService),this.ja&&this.xa.addListener(this.ja),u.init(),this.recordingService.init(),this.Ia.register(Tu,(function(){return t.X.isReplayRecorded()&&!t._a.isUrlExcludedForSessionReplay()})),this.Ia.register(Ru,(function(n){Hr.setWhitelistedElementsSelector(n),t.hi.emitRecordingStatusChange()})),this.Ia.register(Nu,(function(n){t.ai.setPIISelectors(n),t.hi.emitRecordingStatusChange()})),this.Ia.register(Ou,(function(){t.recordingService.activateOnlineAssetsOnNextPageview(),t.hi.emitRecordingStatusChange()})),this.Ia.register(ku,(function(){return t.recordingService.getStaticResourceManagerStatus()})),this.ka.enableRecordingStatus(this.recordingService,this.ai,this.Da,this.X,this.Ie)},t.prototype.onAfterNaturalPageView=function(){var t;null===(t=this.ja)||void 0===t||t.initState()},t.prototype.onStartTracking=function(){this.xe.recover(),this.oi.setAnonymization(this.Da.shouldUseAnonymization()),this.X.isReplayRecorded()&&!this._a.isUrlExcludedForSessionReplay()&&(this.X.isTemporarilyRecorded()&&this.recordingService.blockSendingEventsFromQuotaService(),this.Ha())},t.prototype.onArtificialPageViewEnd=function(){this.recordingService.clearStates(),!this.X.isReplayRecorded()||this._a.isUrlExcludedForSessionReplay()||this.X.isTemporarilyRecorded()||this.xe.sendLastMessageBeacon()},t.prototype.onAfterArtificialPageView=function(){this.oi.setAnonymization(this.Da.shouldUseAnonymization()),this.X.isReplayRecorded()&&!this._a.isUrlExcludedForSessionReplay()?(this.X.isTemporarilyRecorded()&&this.recordingService.blockSendingEventsFromQuotaService(),this.za()):this.Ba()},t.prototype.onBeforeSessionRenewal=function(){this.recordingService.clearStates(),this.Ba()},t.prototype.onOptout=function(){this.Ba(),this.recordingService.onOptOut()},t.prototype.onReplayUnanonymizationConsentGranted=function(){this.oi.setAnonymization(this.Da.shouldUseAnonymization()),this.recordingService.triggerUnanonymizationConsentGranted(),this.hi.emitRecordingStatusChange()},t.prototype.onReplayUnanonymizationConsentWithdrawn=function(){this.oi.setAnonymization(this.Da.shouldUseAnonymization()),this.recordingService.triggerUnanonymizationConsentWithdrawn(),this.hi.emitRecordingStatusChange()},t.prototype.onRecordingStateChange=function(t,n){t===En.NOT_RECORDED&&n===Rn.ETR_OFF?(this.recordingService.clearEvents(),this.Ba()):(this.Ce.setQueryParams({rt:csArray.prototype.join.call(this.X.getRecordingStates(),",")}),this.recordingService.allowSendingEventsFromQuotaService(),this.oi.isDOMSerializationInProgress()||this.recordingService.pushEvents())},t.prototype.onInitialDomStart=function(){this.recordingService.blockSendingEventsFromSerialization(),this.xe.blockSendingLastMessage()},t.prototype.onInitialDomDone=function(t){this.recordingService.allowSendingEventsFromSerialization(),this.recordingService.addInitialDom(t),this.xe.allowSendingLastMessage(),this.be.start(),this.recordingService.pushEvents()},t.prototype.onAfterReplayRecordingConsentGranted=function(){this.X.isReplayRecorded()&&!this._a.isUrlExcludedForSessionReplay()&&(this.X.isTemporarilyRecorded()&&this.recordingService.blockSendingEventsFromQuotaService(),this.Ha(),this.recordingService.triggerRecordingForSessionGranted())},t.prototype.onAfterReplayRecordingConsentWithdrawn=function(){this.recordingService.isRecording()&&(this.recordingService.triggerRecordingForSessionWithdrawn(),this.recordingService.clearStates(),this.Ba())},t.prototype.Ha=function(){var t;this.recordingService.updateStaticResourceManagerOnlineAssets(),this.recordingService.start(),null===(t=this.ja)||void 0===t||t.start(),this.xe.start(),this.hi.emitRecordingStatusChange()},t.prototype.Ba=function(){var t;this.recordingService.stop(),null===(t=this.ja)||void 0===t||t.stop(),this.xe.stop(),this.hi.emitRecordingStatusChange()},t.prototype.za=function(){this.Ba(),this.Ha()},t.prototype.La=function(t){this.Ce=this.Ma.create("".concat(this.L.getRecordingUri(),"/").concat(Eu),!0,"byteArray",t)},t.prototype.qa=function(){return Ls.isAsyncSerializationSupported()&&this.L.asyncSerializerEnabled},t.prototype.Fa=function(){return!!this.L.encryptionPublicKey&&this.L.encryptionPublicKeyId>0&&tu.isSupported()},X([pi("Recording.onStartTracking")],t.prototype,"onStartTracking",null),X([pi("onInitialDomDone")],t.prototype,"onInitialDomDone",null),t}();!function(t){t[t.NOT_NEEDED=1]="NOT_NEEDED",t[t.NOT_EXPRESSED=2]="NOT_EXPRESSED",t[t.WITHDRAWN=3]="WITHDRAWN",t[t.GRANTED=4]="GRANTED"}(gu||(gu={})),function(t){t.isReplayConsentNeeded=function(t){return t.replayConsentRequiredForSession},t.isRecordingBlockedByConsent=function(t){return t.recordingState===En.BLOCKED_BY_CONSENT_NOT_EXPRESSED||t.recordingState===En.BLOCKED_BY_CONSENT_WITHDRAWN},t.isRecordingWithDrawn=function(t){return t.recordingState===En.BLOCKED_BY_CONSENT_WITHDRAWN}}(Su||(Su={}));var Cu=function(){function t(t,n,i,r){this.Y=t,this.X=n,this.L=i,this.Va=r,this.Ga=!1}return t.prototype.isNaturalPageViewSent=function(){return this.Ga},t.prototype.setNaturalPageViewSent=function(t){this.Ga=t},t.prototype.getTrackingContext=function(){var t=this.X.getSession();if(!t)return null;var n=this.getSessionKey();if(!n)return null;var i=this.Ja(t),r=this.Wa(),e=this.Ya(),s=this.Xa();return{projectId:r,sessionKey:n,pageNumber:i,pageViewType:e,isRecording:this.$a(),uxaDomain:s,recordingConsentState:this.Ka(t)}},t.prototype.getSessionKey=function(){var t=this.Y.getVisitor();return t?"".concat(t.id,".").concat(t.visitsCount):null},t.prototype.Ka=function(t){return Su.isReplayConsentNeeded(this.L)?t.recordingState===En.BLOCKED_BY_CONSENT_NOT_EXPRESSED?gu.NOT_EXPRESSED:t.recordingState===En.BLOCKED_BY_CONSENT_WITHDRAWN?gu.WITHDRAWN:gu.GRANTED:gu.NOT_NEEDED},t.prototype.Ja=function(t){return t.pageNumber},t.prototype.Wa=function(){return this.L.projectId},t.prototype.Ya=function(){return this.Va.getPageViewType()},t.prototype.Xa=function(){return this.L.uxaDomain},t.prototype.$a=function(){return this.X.isReplayRecorded()},t}(),xu=function(){function t(t){this.Za=t,this.Qa=[]}return t.prototype.handleCommand=function(t){if(Dt(t)&&(this.tf(t),this.Za.isNaturalPageViewSent())){var n=this.Za.getTrackingContext();null!==n&&this.nf(t,n)}},t.prototype.tf=function(t){csArray.prototype.push.call(this.Qa,t)},t.prototype.executeRegisteredCallbacks=function(){var t=this,n=this.Za.getTrackingContext();null!==n&&csArray.prototype.map.call(this.Qa,(function(i){return t.nf(i,n)}))},t.prototype.nf=function(t,n){setTimeout((function(){t(n)}))},t}(),_u=function(){function t(t){this.Za=t,this.if=[]}return t.prototype.handleCommand=function(t){return this.Za.isNaturalPageViewSent()?this.rf(t):void this.ef(t)},t.prototype.rf=function(t){var n=this.Za.getSessionKey();return this.Zo(t)&&null!==n&&this.nf(t.callback,n),n},t.prototype.ef=function(t){this.Zo(t)&&csArray.prototype.push.call(this.if,t.callback)},t.prototype.flushPendingCallbacks=function(){var t=this,n=this.Za.getSessionKey();null!==n&&csArray.prototype.forEach.call(this.if,(function(i){t.nf(i,n)})),this.if=[]},t.prototype.Zo=function(t){return t&&"function"==typeof t.callback},t.prototype.nf=function(t,n){setTimeout((function(){t(n)}))},t}(),Mu=function(){function t(t,n){this.sf=t,this.Za=n}return t.prototype.onTrackingContextRequestCallback=function(t){var n=this.Za.getTrackingContext();null!==n&&this.sf.sendToChildren(rn.TrackingContextResultMessage,W(W({},t),{trackingContext:n}))},t.prototype.onIframeIntegrationCallback=function(t){if(this.Za.isNaturalPageViewSent()){var n=this.Za.getTrackingContext();null!==n&&(t.trackingContext=n,this.sf.sendToChildren(rn.IntegrationCallback,t))}},t.prototype.sendAfterPageViewCallbackToChildren=function(){var t=this.Za.getTrackingContext();if(null!==t){var n={trackingContext:t,initiator:tn.AfterPageView};this.sf.sendToChildren(rn.IntegrationCallback,n)}},t}();function Pu(t,n){var i,r=t.isRecording,e=t.pageNumber,s=t.projectId,u=t.uxaDomain,o=/^(.+)\.(\d+)$/.exec(t.sessionKey);if(r&&o){var c=o[1],h=o[2];i="".concat(u,"/quick-playback/index.html?pid=").concat(s,"&uu=").concat(c,"&sn=").concat(h,"&pvid=").concat(e,"&recordingType=cs"),n.withTimestamp&&(i+="&t=".concat(Et()-n.recordingStartTimestamp))}return{replayLink:i,isRecording:r}}var Du,Lu,Uu=function(){function t(t){this.Za=t}return t.prototype.handleCommand=function(t,n){_t(t)&&Dt(n)&&this.nf(t,n)},t.prototype.nf=function(t,n){var i=this;setTimeout((function(){var r=i.Za.getTrackingContext();if(r){var e=Pu(r,t);n(e)}}))},t}(),ju=function(){function t(){this.Qa=new Set}return t.prototype.handleCommand=function(t,n){var i=this;return Dt(t)?this.Qa.has(t)?null:(this.Qa.add(t),n&&(this.yc=n,this.uf(t,n)),function(){return i.Qa.delete(t)}):null},t.prototype.executeCallbacks=function(t){var n=this;this.cf(t)&&(this.yc=t,this.Qa.forEach((function(i){return n.uf(i,t)})))},t.prototype.uf=function(t,n){setTimeout((function(){try{t(n)}catch(t){}}))},t.prototype.cf=function(t){var n=t.isRecording,i=t.recordingStartTimestamp,r=t.etrState;return this.yc&&(this.yc.isRecording!==n||this.yc.recordingStartTimestamp!==i||this.yc.etrState!==r)},t}(),qu=["afterPageView"],Hu=["getSessionKey"],zu=["onRecordingStateChange"],Bu=["replay:link:generate"],Fu=function(){function t(t,n,i,r,e,s,u,o){this.Y=t,this.X=n,this.Ia=i,this.hf=r,this.sf=e,this.L=s,this.Va=u,this.ka=o}return t.prototype.init=function(){var t=this;this.Za=new Cu(this.Y,this.X,this.L,this.Va),this.af=new xu(this.Za),this.ff=new _u(this.Za),this.vf=new ju,this.lf=new Uu(this.Za),this.df=new Mu(this.sf,this.Za),this.hf.addListener(this.df),this.Ia.register(Hu,(function(n){return t.ff.handleCommand(n)})),this.Ia.register(qu,(function(n){return t.af.handleCommand(n)})),this.Ia.register(zu,(function(n){t.vf.handleCommand(n,t.ka.getRecordingStatus())})),this.Ia.register(Bu,(function(n,i){t.wf&&t.lf.handleCommand(W(W({},n),{recordingStartTimestamp:t.ka.getRecordingStatus().recordingStartTimestamp}),i)}))},t.prototype.onAfterNaturalPageView=function(){this.Za.setNaturalPageViewSent(!0),this.ff.flushPendingCallbacks(),this.af.executeRegisteredCallbacks(),this.df.sendAfterPageViewCallbackToChildren()},t.prototype.onAfterArtificialPageView=function(){this.af.executeRegisteredCallbacks(),this.df.sendAfterPageViewCallbackToChildren()},t.prototype.onRecordingStateChange=function(){this.vf.executeCallbacks(this.ka.getRecordingStatus())},t.prototype.onRecordingStatusChange=function(){this.vf.executeCallbacks(this.ka.getRecordingStatus())},t.prototype.setRecordingService=function(t){this.wf=t},X([mu()],t.prototype,"onRecordingStateChange",null),X([mu()],t.prototype,"onRecordingStatusChange",null),t}(),Vu=function(){function t(t,n){this.key=csString.prototype.slice.call(t,0,512),this.value=xt(n)?csString.prototype.slice.call(n,0,255):n}return t.isValid=function(t,n){return xt(t)&&(xt(n)||Ct(n))},t}(),Gu=function(t){function n(n,i){var r=t.call(this)||this;return r.yf=n,r.U=i,r.pf=[],r}return J(n,t),n.prototype.onStart=function(){var t=this;csArray.prototype.forEach.call(this.pf,(function(n){return t.trackDynamicVariable(n.key,n.value)})),this.pf=[]},n.prototype.onStop=function(){},n.prototype.trackDynamicVariable=function(t,n){this.isStarted?Vu.isValid(t,n)&&this.yf.add(new Vu(this.U.anonymizePII(t),this.U.anonymizePII(n))):csArray.prototype.push.call(this.pf,{key:t,value:n})},n}(Ar),Ju=function(){function t(t){this.mf=t,this.yf=[]}return t.prototype.add=function(t){csArray.prototype.push.call(this.yf,t),this.setBatchReadyCall()},t.prototype.clear=function(){this.yf=[]},t.prototype.onBatchReady=function(t){this.gf=t},t.prototype.getRequestParameters=function(){for(var t={},n=0,i=this.yf;n<i.length;n++){var r=i[n];t[r.key]=r.value}return{dv:this.mf.compressSync(csJSON.stringify(t),"base64"),ct:this.mf.algorithm}},t.prototype.setBatchReadyCall=function(){this.gf()},X([mu(),wn("dynamicVariablesBatchReady")],t.prototype,"setBatchReadyCall",null),t}(),Wu=["trackDynamicVariable"],Yu=function(){function t(t,n,i,r,e,s){this.Ia=t,this.X=n,this.L=i,this.aa=r,this.mf=e,this.U=s,this.M=new vt(this.L.getTrackerUri(),"dvar"),this.yf=new Ju(this.mf),this.Sf=new Gu(this.yf,this.U)}return t.prototype.init=function(){var t=this;this.M.setRequestParametersProviders(this.aa,this.yf),this.X.setDynamicVariablesService(this.Sf),this.yf.onBatchReady((function(){return t.M.send()})),this.M.after((function(){return t.yf.clear()})),this.Ia.register(Wu,(function(n){var i=void 0===n?{}:n,r=i.key,e=i.value;t.Sf.trackDynamicVariable(r,e)}))},t.prototype.onStartTracking=function(){this.Sf.start()},t}(),Xu=function(){function t(t,n){this.id=t,this.revenue=n}return t.from=function(n){var i=new t(n.id,parseFloat(n.revenue));return isNaN(parseFloat(n.tax))||(i.tax=parseFloat(n.tax)),isNaN(parseFloat(n.shipping))||(i.shipping=parseFloat(n.shipping)),xt(n.currency)&&n.currency.length<=10&&(i.currency=n.currency),i},t.prototype.hasValidRevenue=function(){return!isNaN(this.revenue)&&this.revenue>=0},t.isValid=function(t){return Pt(t)&&It(t.revenue)&&xt(t.currency)&&t.currency.length<=10&&(!Pt(t.id)||xt(t.id))},t}(),$u=function(){function t(t,n,i,r){this.id=t,this.name=n,this.price=i,this.quantity=r}return t.from=function(n){if(!t.Af(n))return null;var i=new t(n.id,n.name,parseFloat(n.price),parseInt(n.quantity,10));return Mt(n.sku)&&(i.sku=n.sku),Mt(n.category)&&(i.category=n.category),Mt(n.merchant)&&n.merchant.length>0&&(i.merchant=n.merchant.slice(0,100)),i},t.Af=function(t){return Pt(t)&&xt(t.id)&&xt(t.name)&&It(parseFloat(t.price))&&Ct(parseInt(t.quantity,10))&&(!Mt(t.sku)||xt(t.sku))&&(!Mt(t.category)||xt(t.category))&&(!Mt(t.merchant)||xt(t.merchant))},t}(),Ku=function(){function t(t,n,i){this.U=t,this.bf=n,this.Re=i,this.clear()}return t.prototype.addTransaction=function(t){var n=this.U.anonymizeFields(t,["id"]);this.Ef=Xu.from(n)},t.prototype.getTransaction=function(){return this.Ef},t.prototype.sendTransaction=function(){null!==this.bf&&null!==this.Re&&this.Re.isSessionValid()&&(this.Ef.hasValidRevenue()?this.bf.send():hn.warn("Transaction Service: unable to send transaction with invalid parameters"))},t.prototype.addItem=function(t){if(!Dt(t)){var n=this.U.anonymizeFields(t,["id","name","sku","category"]),i=$u.from(n);null!==i&&csArray.prototype.push.call(this.Rf,i)}},t.prototype.getItems=function(){return this.Rf},t.prototype.clear=function(){this.Ef=Xu.from({revenue:NaN}),this.Rf=[]},t.prototype.getRequestParameters=function(){var t={id:this.Ef.id?"".concat(this.Ef.id):"",revenue:"".concat(this.Ef.revenue)};return Mt(this.Ef.tax)&&(t.tax="".concat(this.Ef.tax)),Mt(this.Ef.shipping)&&(t.shipping="".concat(this.Ef.shipping)),Mt(this.Ef.currency)&&(t.cu="".concat(this.Ef.currency)),t.items=window.csJSON.stringify(this.Rf),t},t}(),Zu=function(){function t(t,n){this.Nf=t,this.Re=n,this.Tf=null}return t.prototype.addToCart=function(t){var n={};xt(t.sku)&&(n.sku=csString.prototype.slice.call(t.sku,0,100)),xt(t.merchant)&&(n.merchant=csString.prototype.slice.call(t.merchant,0,100)),(n.sku||n.merchant)&&(this.Tf=n,this.sendCartItem())},t.prototype.getCartItem=function(){return this.Tf},t.prototype.sendCartItem=function(){this.Re.isSessionValid()&&this.Nf.send()},t.prototype.clear=function(){this.Tf=null},t.prototype.getRequestParameters=function(){if(!this.Tf)return{};var t={};return xt(this.Tf.sku)&&this.Tf.sku.length>0&&(t.sku=this.Tf.sku),xt(this.Tf.merchant)&&this.Tf.merchant.length>0&&(t.me=this.Tf.merchant),t},t}(),Qu=["ecommerce:addToCart","ec:cart:add"],to=["ecommerce:addTransaction","ec:transaction:create"],no=["ecommerce:addItem","ec:transaction:items:add"],io=["ecommerce:send","ec:transaction:send"],ro=function(){function t(t,n,i,r,e,s,u){this.L=t,this.oa=n,this.Y=i,this.Ia=r,this.U=e,this.Re=s,this.tt=u}return t.prototype.init=function(){var t=new vt(this.L.getTrackerUri(),"transaction"),n=new vt(this.L.getTrackerUri(),"addtocart"),i=new Ku(this.U,t,this.Re),r=new Zu(n,this.Re),e=new hs(this.oa,this.Y,this.tt,i);t.setRequestParametersProviders(e),t.after((function(){i.clear()}));var s=new hs(this.oa,this.Y,this.tt,r);n.setRequestParametersProviders(s),n.after((function(){r.clear()})),this.Ia.register(to,(function(t){i.addTransaction(t)})),this.Ia.register(no,(function(t){return i.addItem(t)})),this.Ia.register(io,(function(){return i.sendTransaction()})),this.Ia.register(Qu,(function(t){r.addToCart(t)}))},t}(),eo=function(){function t(t){this.Of=t.performance}return t.prototype.getRequestParameters=function(){if(this.kf())return{};var t=this.If();return{str:t.startRender,di:t.domInteractive,dc:t.domComplete,fl:t.fullyLoaded}},t.prototype.If=function(){var t=this.Of.timing;return{startRender:"".concat(t.domLoading-t.requestStart),domInteractive:"".concat(t.domInteractive-t.requestStart),domComplete:"".concat(t.domComplete-t.requestStart),fullyLoaded:"".concat(t.loadEventEnd-t.requestStart)}},t.prototype.kf=function(){return!(this.Of&&this.Of.timing&&this.Of.timing.loadEventEnd>0)},t}();function so(t){return void 0!==t.tgt}!function(t){t[t.RESIZE=0]="RESIZE",t[t.SCROLL=1]="SCROLL",t[t.MOUSEMOVE=2]="MOUSEMOVE",t[t.MOUSEDOWN=3]="MOUSEDOWN",t[t.MOUSEUP=4]="MOUSEUP",t[t.CLICK=5]="CLICK",t[t.MOUSEOVER=6]="MOUSEOVER",t[t.MOUSEOUT=7]="MOUSEOUT",t[t.CHANGE=10]="CHANGE",t[t.FOCUSIN=11]="FOCUSIN",t[t.FOCUSOUT=12]="FOCUSOUT",t[t.TAP=14]="TAP",t[t.KEYDOWN=15]="KEYDOWN",t[t.KEYUP=16]="KEYUP",t[t.COMMAND=17]="COMMAND",t[t.SUBMIT=18]="SUBMIT",t[t.PERFORMANCE=19]="PERFORMANCE",t[t.DRAG=20]="DRAG",t[t.FLICK=21]="FLICK",t[t.KEYBOARD_NAVIGATION=22]="KEYBOARD_NAVIGATION",t[t.ZOOM=23]="ZOOM",t[t.VIEWPORT_SCALE=24]="VIEWPORT_SCALE",t[t.TEXT_HIGHLIGHT=25]="TEXT_HIGHLIGHT",t[t.DEAD_CLICK=30]="DEAD_CLICK",t[t.DEAD_ZOOM=31]="DEAD_ZOOM",t[t.PAGE_RELOAD=32]="PAGE_RELOAD",t[t.THRASHED_CURSOR=33]="THRASHED_CURSOR",t[t.BLANK_PAGE=34]="BLANK_PAGE"}(Du||(Du={})),function(t){t.SUCCESS="success",t.FAILURE="failure",t.ATTEMPT="attempt"}(Lu||(Lu={}));var uo,oo=function(){function t(){}return t.build=function(t,n,i){return csArray.prototype.reduce.call(i,(function(n,i){return i.enhanceAnalysisEvent(t,n)}),n)},t}(),co=function(){function t(){}return t.prototype.isEventTypeSupported=function(t){return-1!==csArray.prototype.indexOf.call(this.supportedEventTypes,t)},t.prototype.enhanceAnalysisEvent=function(t,n){return this.isEventTypeSupported(n.type)?this.baseEnhanceAnalysisEvent(t,n):n},t}(),ho=function(t){function n(n){var i=t.call(this)||this;return i.Cf=n,i.supportedEventTypes=[Du.MOUSEDOWN,Du.MOUSEUP,Du.CLICK,Du.MOUSEOVER,Du.TAP,Du.DRAG,Du.FLICK],i}return J(n,t),n.prototype.baseEnhanceAnalysisEvent=function(t,n){return n.tgt||(n.tgt=this.Cf.getEventTargetPath(t)),n},n}(co),ao=function(){function t(t,n,i,r){this.L=t,this.Cf=n,this.xf=i,this._f=r,this.Mf=[],csArray.prototype.push.call(this.Mf,new ho(this.Cf))}return t.prototype.processGesture=function(t,n){switch(t.type){case $s.TAP:this.Pf(n);break;case $s.FLICK:this.Df(t,n);break;case $s.DRAG:this.Lf(t,n)}},t.prototype.Pf=function(t){var n={type:Du.TAP,ts:0,x:0,y:0,tgt:""},i=oo.build(t,n,this.Mf);i.tgt!==z.INVALID_ELEMENT&&this.pi(i)},t.prototype.Lf=function(t,n){var i,r,e={type:Du.DRAG,ts:0,fd:t.direction,tgt:""};(null===(i=this._f)||void 0===i?void 0:i.collectGestureDistance)&&(e.distance=t.distance),(null===(r=this._f)||void 0===r?void 0:r.collectGestureVelocity)&&(e.velocity=t.velocity);var s=oo.build(n,e,this.Mf);s.tgt!==z.INVALID_ELEMENT&&this.pi(s)},t.prototype.Df=function(t,n){var i,r,e={type:Du.FLICK,ts:0,fd:t.direction,tgt:""};(null===(i=this._f)||void 0===i?void 0:i.collectGestureDistance)&&(e.distance=t.distance),(null===(r=this._f)||void 0===r?void 0:r.collectGestureVelocity)&&(e.velocity=t.velocity);var s=oo.build(n,e,this.Mf);s.tgt!==z.INVALID_ELEMENT&&this.pi(s)},t.prototype.onEvent=function(t){this.pi=t},t.prototype.start=function(){var n=this;this.xf.subscribe(t.Uf,(function(t,i){return n.processGesture(t,i)}))},t.prototype.stop=function(){this.xf.unsubscribe(t.Uf)},t.Uf="AnalysisGestureTracker",X([Si()],t.prototype,"processGesture",null),t}();!function(t){t.getRelativePosition=function(t){var n=gi(t);if(!(n&&a(n)&&Dt(n.getBoundingClientRect)&&Pt(t.pageX)&&Pt(t.pageY)))return{xRel:-1,yRel:-1,valid:!1};var i=n.getBoundingClientRect(),r=t.pageX-i.left-ce.windowOffsetX(),e=t.pageY-i.top-ce.windowOffsetY();n!==document.documentElement&&(r+=n.scrollLeft,e+=n.scrollTop);var s=Math.max(n.scrollWidth,i.width),u=Math.max(n.scrollHeight,i.height);return{xRel:Math.round(r/s*65535),yRel:Math.round(e/u*65535),valid:!0}}}(uo||(uo={}));var fo,vo,lo,wo,yo,po,mo=function(t){function n(n,i){var r=t.call(this)||this;return r.C=n,r.Cf=i,r.supportedEventTypes=[Du.MOUSEMOVE,Du.CLICK],r.jf="",r}return J(n,t),n.prototype.baseEnhanceAnalysisEvent=function(t,n){var i=uo.getRelativePosition(t),r=i.valid,e=i.xRel,s=i.yRel;if(r){var u=this.Cf.getEventTargetPath(t);u!==z.INVALID_ELEMENT&&(n.xRel=e,n.yRel=s,n.type===Du.MOUSEMOVE&&(u!==this.jf||this.C.iframesTracking?(this.jf=u,n.tgtHM=u):n.tgtHM=""))}else n.type===Du.MOUSEMOVE&&(this.jf="");return n},n}(co),go=function(t){function n(){var n=null!==t&&t.apply(this,arguments)||this;return n.supportedEventTypes=[Du.CHANGE],n.qf=["text","email","number","search","tel","url","password"],n}return J(n,t),n.prototype.baseEnhanceAnalysisEvent=function(t,n){var i=gi(t);return y(i)&&csArray.prototype.indexOf.call(this.qf,i.type)>=0&&(n.isBlank=""===i.value),n},n}(co),So=function(){function t(t,n,i){var r=this;this.C=t,this.Cf=n,this.Hf=i,this.zf="select, select *, input, textarea",this.Bf="select, select *, input, textarea",this.Ff="a, a *, button, button *, select, select *, input, textarea",this.Vf="input, select, textarea",this.Gf=150,this.Jf=400,this.Wf=!1,this.Yf=pu((function(t,n){return r.scrollListener(t,n)}),this.Gf),this.Xf=pu((function(t){return r.resizeListener(t)}),this.Gf),this.$f=ni((function(t){return r.mouseMoveListener(t)}),this.Jf),this.Kf=[{boundElement:window,type:"resize",listener:function(){return r.Xf()}},{boundElement:document,type:"scroll",listener:function(t){return r.Yf(t)}},{boundElement:window,type:"mousemove",listener:function(t){r.$f(function(t){return t.composedPath&&Object.defineProperty(t,"__csOriginalTarget",{value:t.composedPath()[0],writable:!1,enumerable:!1}),t}(t))}},{boundElement:document,type:"mousedown",listener:function(t){return r.mouseDownListener(t)}},{boundElement:document,type:"mouseup",listener:function(t){return r.mouseUpListener(t)}},{boundElement:document,type:"click",listener:function(t){return r.clickListener(t)}}],this.Zf=[{type:"change",listener:this.Hf.on(this.Bf,(function(t){return r.changeListener(t)}))}],this.Qf=Z([{boundElement:document,type:"mouseover",listener:this.Hf.on(this.Ff,(function(t){return r.mouseOverListener(t)}))},{boundElement:document,type:"mouseout",listener:this.Hf.on(this.Ff,(function(t){return r.mouseOutListener(t)}))},{boundElement:document,type:"focusin",listener:this.Hf.on(this.zf,(function(t){return r.focusInListener(t)}))},{boundElement:document,type:"focusout",listener:this.Hf.on(this.zf,(function(t){return r.focusOutListener(t)}))},{boundElement:document,type:"keyup",listener:this.Hf.on(this.Vf,(function(t){return r.keyUpListener(t)}))},{boundElement:document,type:"keydown",listener:this.Hf.on(this.Vf,(function(t){return r.keyDownListener(t)}))},{boundElement:document,type:"copy",listener:this.Hf.on(this.Vf,(function(t){return r.copyListener(t)}))},{boundElement:document,type:"cut",listener:this.Hf.on(this.Vf,(function(t){return r.cutListener(t)}))},{boundElement:document,type:"paste",listener:this.Hf.on(this.Vf,(function(t){return r.pasteListener(t)}))}],csArray.prototype.map.call(this.Zf,(function(t){return W(W({},t),{boundElement:document})})),!0),this.Mf=[],this.ii={},this.Un=new Set,this.Tr=function(t,n){switch(n){case"initial":r.Un.add(t);break;case"added":r.Un.has(t)||(r.Un.add(t),r.Wn(t));break;case"removed":r.Qn(t),r.Un.delete(t)}},this.Ir=new zr(this.Tr),this.Gn(),this.C.mouseMoveHeatmapEnabled&&csArray.prototype.push.call(this.Mf,new mo(this.C,this.Cf)),csArray.prototype.push.call(this.Mf,new go,new ho(this.Cf))}return t.prototype.Wn=function(t){if(E(t)){var n=this.tv();csArray.prototype.forEach.call(n,(function(t){return hi(t)}))}else{n=this.nv();csArray.prototype.forEach.call(n,(function(n){hi(W(W({},n),{boundElement:t}))}))}},t.prototype.Qn=function(t){if(E(t)){var n=this.tv();csArray.prototype.forEach.call(n,(function(t){return ai(t)}))}else{n=this.nv();csArray.prototype.forEach.call(n,(function(n){ai(W(W({},n),{boundElement:t}))}))}},t.prototype.onEvent=function(t){this.pi=t},t.prototype.start=function(){var t=this;this.Ir.observe(),this.Wn(document),this.Un.forEach((function(n){return t.Wn(n)})),this.resizeListener()},t.prototype.stop=function(){var t=this;this.Qn(document),csArray.prototype.forEach.call(this.Ir.shadowRoots,(function(n){return t.Qn(n)})),this.Ir.disconnect(),this.Un.clear()},t.prototype.flushPendingDebouncedListeners=function(){this.Yf.flushPending(),this.Xf.flushPending()},t.prototype.nv=function(){return this.Hf.isMatchesSelectorSupported()?this.Zf:(hn.warn("Element.matches is not implemented yet"),[])},t.prototype.tv=function(){return this.Hf.isMatchesSelectorSupported()?Z(Z([],this.Kf,!0),this.Qf,!0):(hn.warn("Element.matches is not implemented yet"),this.Kf)},t.prototype.resizeListener=function(t){var n=Ai.getScrollContainer(),i=Lt(n);i&&(this.Wf=!0);var r={type:Du.RESIZE,ts:0,x:i?n.clientWidth:ce.windowWidth(),y:i?n.clientHeight:ce.windowHeight()};void 0!==t&&(r.d=t),this.pi(r)},t.prototype.scrollListener=function(t,n){var i=Ai.isEventOnScrollContainer(n);!this.Wf&&i&&this.resizeListener();var r={type:Du.SCROLL,ts:0,x:i?csEventtarget.apply(n).scrollLeft:ce.windowOffsetX(),y:i?csEventtarget.apply(n).scrollTop:ce.windowOffsetY(),d:t},e=oo.build(n,r,this.Mf);this.pi(e)},t.prototype.mouseMoveListener=function(t){var n={type:Du.MOUSEMOVE,ts:0,x:t.pageX,y:t.pageY},i=oo.build(t,n,this.Mf);this.pi(i)},t.prototype.mouseDownListener=function(t){var n={type:Du.MOUSEDOWN,ts:0,x:t.pageX,y:t.pageY,tgt:""},i=oo.build(t,n,this.Mf);this.iv(i)},t.prototype.mouseUpListener=function(t){var n={type:Du.MOUSEUP,ts:0,x:t.pageX,y:t.pageY,tgt:""},i=oo.build(t,n,this.Mf);this.iv(i)},t.prototype.clickListener=function(t){var n={type:Du.CLICK,ts:0,x:t.pageX,y:t.pageY,tgt:""},i=oo.build(t,n,this.Mf);this.iv(i)},t.prototype.mouseOverListener=function(t){var n={type:Du.MOUSEOVER,ts:0,x:t.pageX,y:t.pageY,tgt:""},i=oo.build(t,n,this.Mf);this.iv(i)},t.prototype.mouseOutListener=function(t){var n={type:Du.MOUSEOUT,ts:0,x:t.pageX,y:t.pageY,tgt:this.Cf.getEventTargetPath(t)},i=oo.build(t,n,this.Mf);this.iv(i)},t.prototype.focusInListener=function(t){var n={type:Du.FOCUSIN,ts:0,tgt:this.Cf.getEventTargetPath(t)},i=oo.build(t,n,this.Mf);this.iv(i)},t.prototype.focusOutListener=function(t){var n={type:Du.FOCUSOUT,ts:0,tgt:this.Cf.getEventTargetPath(t)},i=oo.build(t,n,this.Mf);this.iv(i)},t.prototype.changeListener=function(t){var n={type:Du.CHANGE,ts:0,tgt:this.Cf.getEventTargetPath(t)},i=oo.build(t,n,this.Mf);this.iv(i)},t.prototype.copyListener=function(t){var n={type:Du.COMMAND,ts:0,tgt:this.Cf.getEventTargetPath(t),key:oi.COPY};this.iv(n)},t.prototype.cutListener=function(t){var n={type:Du.COMMAND,ts:0,tgt:this.Cf.getEventTargetPath(t),key:oi.CUT};this.iv(n)},t.prototype.pasteListener=function(t){var n={type:Du.COMMAND,ts:0,tgt:this.Cf.getEventTargetPath(t),key:oi.PASTE};this.iv(n)},t.prototype.keyUpListener=function(t){var n={type:Du.KEYUP,ts:0,tgt:this.Cf.getEventTargetPath(t),key:this.rv(t)};this.iv(n)},t.prototype.keyDownListener=function(t){var n={type:Du.KEYDOWN,ts:0,tgt:this.Cf.getEventTargetPath(t),key:this.rv(t)};this.iv(n)},t.prototype.rv=function(t){var n=this.ii[t.key];return void 0===n?ui.ALPHANUMERICAL:n},t.prototype.iv=function(t){so(t)&&t.tgt!==z.INVALID_ELEMENT&&this.pi(t)},t.prototype.Gn=function(){this.ii[" "]=ui.SPACE,this.ii.Spacebar=ui.SPACE,this.ii.Enter=ui.ENTER,this.ii.Backspace=ui.BACKSPACE,this.ii.Delete=ui.DELETE,this.ii.ArrowUp=ui.ARROWUP,this.ii.ArrowDown=ui.ARROWDOWN,this.ii.ArrowLeft=ui.ARROWLEFT,this.ii.ArrowRight=ui.ARROWRIGHT,this.ii.Up=ui.ARROWUP,this.ii.Down=ui.ARROWDOWN,this.ii.Left=ui.ARROWLEFT,this.ii.Right=ui.ARROWRIGHT,this.ii.CapsLock=ui.CAPSLOCK,this.ii.Shift=ui.SHIFT,this.ii.Tab=ui.TAB},X([wn("Event handler type: resize")],t.prototype,"resizeListener",null),X([wn("Event handler type: scroll")],t.prototype,"scrollListener",null),X([wn("Event handler type: mouseMove"),Si()],t.prototype,"mouseMoveListener",null),X([wn("Event handler type: mouseDown"),Si()],t.prototype,"mouseDownListener",null),X([wn("Event handler type: mouseUp"),Si()],t.prototype,"mouseUpListener",null),X([wn("Event handler type: click"),Si()],t.prototype,"clickListener",null),X([wn("Event handler type: mouseOver"),Si()],t.prototype,"mouseOverListener",null),X([wn("Event handler type: mouseOut"),Si()],t.prototype,"mouseOutListener",null),X([wn("Event handler type: focusIn")],t.prototype,"focusInListener",null),X([wn("Event handler type: focusOut")],t.prototype,"focusOutListener",null),X([wn("Event handler type: change")],t.prototype,"changeListener",null),X([wn("Event handler type: copy")],t.prototype,"copyListener",null),X([wn("Event handler type: cut")],t.prototype,"cutListener",null),X([wn("Event handler type: paste")],t.prototype,"pasteListener",null),X([wn("Event handler type: keyup")],t.prototype,"keyUpListener",null),X([wn("Event handler type: keydown")],t.prototype,"keyDownListener",null),t}(),Ao=function(){function t(){var t=this;this.ev=100,this.sv=0,this.uv=ce.documentHeight(),this.ov={boundElement:document,type:"scroll",listener:function(n){return t.maxScrollRateListener(n)}},this.sv=this.cv(Ai.getScrollContainer()).maxScrollRate}return t.prototype.onEvent=function(t){this.pi=t},t.prototype.start=function(){hi(this.ov)},t.prototype.stop=function(){ai(this.ov)},t.prototype.reset=function(){var t=Ai.getScrollContainer(),n=this.cv(t),i=n.maxScrollRate,r=n.maxDocumentHeight;this.uv=r,this.sv=i,this.pi()},t.prototype.cv=function(t){var n=0,i=0;if(null===t)i=ce.documentHeight(),n=this.hv(i);else{var r=this.av(t);i=this.fv(t,r),n=this.vv(t,r)}return{maxScrollRate:n,maxDocumentHeight:i}},t.prototype.maxScrollRateListener=function(t){var n=null;Ai.isEventOnScrollContainer(t)&&(n=csEventtarget.apply(t));var i=this.cv(n),r=i.maxScrollRate,e=i.maxDocumentHeight;(r>this.sv||e>this.uv)&&(this.sv=r,e>this.uv&&(this.uv=e),this.pi())},t.prototype.hv=function(t){var n=Math.round(this.lv()/t*100);return Math.min(n,this.ev)},t.prototype.lv=function(){var t=ce.windowHeight();return ce.windowOffsetY()+t},t.prototype.vv=function(t,n){var i=t.scrollTop+t.clientHeight+t.getBoundingClientRect().top+n,r=this.fv(t,n),e=Math.round(i/r*100);return Math.min(e,this.ev)},t.prototype.av=function(t){var n=window.getComputedStyle(t).paddingTop||"0px";return parseInt(n,10)},t.prototype.fv=function(t,n){return t.scrollHeight+t.getBoundingClientRect().top+n},t.prototype.getRequestParameters=function(){return{sr:"".concat(this.sv),mdh:"".concat(this.uv)}},X([wn("MaxScrollRate handler")],t.prototype,"maxScrollRateListener",null),t}(),bo=function(){function t(t,n,i,r,e,s,u,o,c,h,a,f,v,l,d,w,y,p,m,g,S){this.L=t,this.wv=n,this.xf=i,this.yv=r,this.pv=e,this.mv=s,this.gv=u,this.Sv=o,this.Re=c,this.Yt=h,this.Av=a,this.bv=f,this.Xe=v,this.Ce=l,this.Ev=d,this.Rv=w,this.Nv=y,this.Tv=p,this.Ov=m,this.kv=g,this.Iv=S,this.He=new Sr,this.Cv=!1}return t.prototype.init=function(){var t,n,i,r,e,s,u,o=this;this.wv.onEvent((function(t){return o.Je(t)})),this.xf.onEvent((function(t){return o.Je(t)})),this.yv.onEvent((function(){var t=o.yv.getRequestParameters();o.Ce.setQueryParams(t),o.gv.setQueryParams(t)})),this.bv.onEvent((function(t){return o.xv(t)})),this._v(),null===(t=this.Ev)||void 0===t||t.onEvent((function(t){return o.Je(t)})),null===(n=this.Ov)||void 0===n||n.onEvent((function(t){return o.Je(t)})),null===(i=this.Rv)||void 0===i||i.onEvent((function(t){return o.Je(t)})),null===(r=this.Nv)||void 0===r||r.onEvent((function(t){return o.Je(t)})),this.Mv(),null===(e=this.Tv)||void 0===e||e.onEvent((function(t){return o.xv(t)})),null===(s=this.kv)||void 0===s||s.onEvent((function(t){return o.xv(t)})),null===(u=this.Iv)||void 0===u||u.onEvent((function(t){return o.xv(t)}))},t.prototype.Mv=function(){var t=this;this.gv.onBeaconSuccess((function(){t.mv.clearEvents()})),this.gv.onBeaconFailure((function(n){t.Pv(n)}))},t.prototype.initStates=function(){var t=this.Sv.getRequestParameters(),n=this.pv.getRequestParameters(),i=this.yv.getRequestParameters();this.Ce.setQueryParams(t),this.Ce.setQueryParams(n),this.Ce.setQueryParams(i),this.gv.setQueryParams(t),this.gv.setQueryParams(n),this.gv.setQueryParams(i),this.Dv()},t.prototype.clearStates=function(t){var n,i;this.wv.flushPendingDebouncedListeners(),null===(n=this.Rv)||void 0===n||n.flushPendingKeyboardNavigationEvent(),null===(i=this.Nv)||void 0===i||i.flushPendingTextHighlightEvent(),t?(this.Lv(),this.sendLastMessageBeacon()):this.sendEvents(),this.yv.reset(),this.bv.stop(),this.Ce.removeQueryParams()},t.prototype.start=function(t){var n,i,r,e,s,u,o;t||null===(n=this.Tv)||void 0===n||n.start(),this.Xe.start(),this.wv.start(),this.yv.start(),this.xf.start(),null===(i=this.Ev)||void 0===i||i.start(),null===(r=this.Nv)||void 0===r||r.start(),t||this.bv.start(),null===(e=this.Rv)||void 0===e||e.start(),null===(s=this.Ov)||void 0===s||s.start(),null===(u=this.kv)||void 0===u||u.start(),null===(o=this.Iv)||void 0===o||o.start()},t.prototype.collectInitialEvents=function(){var t;null===(t=this.Ev)||void 0===t||t.collectInitialEvents()},t.prototype.onIframeAnalysisEvent=function(t){this.es(t)},t.prototype.xv=function(t){this.Re.isCurrentPageviewValid()&&this.es(t)},t.prototype.Je=function(t){this.Re.isSessionValid()&&this.es(t)},t.prototype.es=function(t){this.mv.addEvent(this.Uv(t)),this.mv.isFull()&&this.sendEvents(),this.L.emitDebugEvents&&this.He.emit("analysisEvent",W(W({},t),{typeName:Du[t.type]}))},t.prototype.Uv=function(t){return t.ts=this.jv(),t},t.prototype.Lv=function(){this.gv.setQueryParams({hlm:"true"}),this.Cv=!0},t.prototype.sendLastMessageBeacon=function(){this.gv.setQueryParams(this.pv.getRequestParameters()),this.gv.send(this.mv.stringifyEvents()),this.gv.removeQueryParams(["hlm"]),this.Cv=!1},t.prototype.sendEvents=function(){this.mv.isEmpty()||(this.Ce.setQueryParams(this.Sv.getRequestParameters()),this.Ce.setQueryParams(this.pv.getRequestParameters()),this.Ce.send(this.mv.getEvents()),this.mv.clearEvents())},t.prototype.stop=function(){var t,n,i,r,e,s,u;this.Xe.stop(),this.wv.stop(),this.yv.stop(),this.xf.stop(),this.bv.stop(),null===(t=this.Ev)||void 0===t||t.stop(),null===(n=this.Rv)||void 0===n||n.stop(),null===(i=this.Nv)||void 0===i||i.stop(),null===(r=this.Ov)||void 0===r||r.stop(),this.mv.empty(),null===(e=this.Tv)||void 0===e||e.stop(),null===(s=this.kv)||void 0===s||s.stop(),null===(u=this.Iv)||void 0===u||u.stop()},t.prototype.Dv=function(){this.qv=Et()},t.prototype.jv=function(){return Et()-this.qv},t.prototype._v=function(){var t=this;this.Xe.onEvent((function(n){var i,r;null===(i=t.Rv)||void 0===i||i.flushPendingKeyboardNavigationEvent(),null===(r=t.Nv)||void 0===r||r.flushPendingTextHighlightEvent(),n===wr.PagehideVisible?t.Lv():n===wr.PagehideHidden?(t.Lv(),t.sendLastMessageBeacon()):t.mv.isEmpty()&&!t.Cv||t.sendLastMessageBeacon()}))},t.prototype.Pv=function(t){try{this.mv.isEmpty()&&!this.Cv||this.Yt.save({requestParameters:t,events:this.mv.getEvents()})}catch(t){}},t.prototype.pushSubmitEvent=function(t,n){if(function(t){return t===Lu.SUCCESS||t===Lu.FAILURE||t===Lu.ATTEMPT}(t))if(Lt(n)){var i={status:t,type:Du.SUBMIT,ts:0,tgt:this.Av.getElementPath(n)};i.tgt!==z.INVALID_ELEMENT&&this.xv(i)}else hn.warn("AnalysisEvents Service: invalid element: ".concat(n));else hn.warn("AnalysisEvents Service: invalid submit status: ".concat(t))},t}(),Eo=function(){function t(t,n){var i=this;this.Yt=t,this.Ce=n,this.Hv=function(){"visible"===document.visibilityState&&i.zv()}}return t.prototype.start=function(){this.zv(),this.Pi()},t.prototype.stop=function(){this.Ui()},t.prototype.getRecoveryStorage=function(){return this.Yt},t.prototype.zv=function(){var t=this.Yt.recover();if(null!==t){var n=t,i=n.requestParameters,r=n.events;this.Ce.send(r,i)}},t.prototype.Pi=function(){document.addEventListener("visibilitychange",this.Hv)},t.prototype.Ui=function(){document.removeEventListener("visibilitychange",this.Hv)},t}(),Ro=function(){function t(t){this.hc=t}return t.prototype.save=function(t){localStorage.setItem(this.hc,csJSON.stringify(t))},t.prototype.clear=function(){localStorage.removeItem(this.hc)},t.prototype.recover=function(){var t=localStorage.getItem(this.hc);if(null===t)return null;var n=null;try{n=csJSON.parse(t)}catch(n){hn.error("Invalid item in localStorage.\n         (key:".concat(this.hc,"; value:").concat(t,")"))}finally{this.clear()}return n},t}(),No=function(){function t(t){var n=this;this.Bv=t,this.Fv=function(t){return n.processMetric(t)},this.xi=!1}return t.prototype.onEvent=function(t){this.pi=t},t.prototype.start=function(){this.xi||(this.xi=!0,this.Bv.onFCP(this.Fv),this.Bv.onCLS(this.Fv),this.Bv.onFID(this.Fv),this.Bv.onLCP(this.Fv),this.Bv.onTTFB(this.Fv),this.Bv.onINP(this.Fv))},t.prototype.stop=function(){this.xi=!1},t.prototype.processMetric=function(t){if(this.xi){var n={type:Du.PERFORMANCE,name:t.name,val:t.value,ts:0};this.pi(n)}},X([wn("Performance metric handler")],t.prototype,"processMetric",null),t}(),To=-1,Oo=function(t){addEventListener("pageshow",(function(n){n.persisted&&(To=n.timeStamp,t(n))}),!0)},ko=function(){return window.performance&&performance.getEntriesByType&&performance.getEntriesByType("navigation")[0]},Io=function(){var t=ko();return t&&t.activationStart||0},Co=function(t,n){var i=ko(),r="navigate";return To>=0?r="back-forward-cache":i&&(document.prerendering||Io()>0?r="prerender":document.wasDiscarded?r="restore":i.type&&(r=i.type.replace(/_/g,"-"))),{name:t,value:void 0===n?-1:n,rating:"good",delta:0,entries:[],id:"v3-".concat(Date.now(),"-").concat(Math.floor(8999999999999*Math.random())+1e12),navigationType:r}},xo=function(t,n,i){try{if(PerformanceObserver.supportedEntryTypes.includes(t)){var r=new PerformanceObserver((function(t){Promise.resolve().then((function(){n(t.getEntries())}))}));return r.observe(Object.assign({type:t,buffered:!0},i||{})),r}}catch(t){}},_o=function(t,n,i,r){var e,s;return function(u){n.value>=0&&(u||r)&&((s=n.value-(e||0))||void 0===e)&&(e=n.value,n.delta=s,n.rating=function(t,n){return t>n[1]?"poor":t>n[0]?"needs-improvement":"good"}(n.value,i),t(n))}},Mo=function(t){requestAnimationFrame((function(){return requestAnimationFrame((function(){return t()}))}))},Po=function(t){var n=function(n){"pagehide"!==n.type&&"hidden"!==document.visibilityState||t(n)};addEventListener("visibilitychange",n,!0),addEventListener("pagehide",n,!0)},Do=function(t){var n=!1;return function(i){n||(t(i),n=!0)}},Lo=-1,Uo=function(){return"hidden"!==document.visibilityState||document.prerendering?1/0:0},jo=function(t){"hidden"===document.visibilityState&&Lo>-1&&(Lo="visibilitychange"===t.type?t.timeStamp:0,Ho())},qo=function(){addEventListener("visibilitychange",jo,!0),addEventListener("prerenderingchange",jo,!0)},Ho=function(){removeEventListener("visibilitychange",jo,!0),removeEventListener("prerenderingchange",jo,!0)},zo=function(){return Lo<0&&(Lo=Uo(),qo(),Oo((function(){setTimeout((function(){Lo=Uo(),qo()}),0)}))),{get firstHiddenTime(){return Lo}}},Bo=function(t){document.prerendering?addEventListener("prerenderingchange",(function(){return t()}),!0):t()},Fo=[1800,3e3],Vo=function(t,n){n=n||{},Bo((function(){var i,r=zo(),e=Co("FCP"),s=xo("paint",(function(t){t.forEach((function(t){"first-contentful-paint"===t.name&&(s.disconnect(),t.startTime<r.firstHiddenTime&&(e.value=Math.max(t.startTime-Io(),0),e.entries.push(t),i(!0)))}))}));s&&(i=_o(t,e,Fo,n.reportAllChanges),Oo((function(r){e=Co("FCP"),i=_o(t,e,Fo,n.reportAllChanges),Mo((function(){e.value=performance.now()-r.timeStamp,i(!0)}))})))}))},Go=[.1,.25],Jo={passive:!0,capture:!0},Wo=new Date,Yo=function(t,n){fo||(fo=n,vo=t,lo=new Date,Ko(removeEventListener),Xo())},Xo=function(){if(vo>=0&&vo<lo-Wo){var t={entryType:"first-input",name:fo.type,target:fo.target,cancelable:fo.cancelable,startTime:fo.timeStamp,processingStart:fo.timeStamp+vo};wo.forEach((function(n){n(t)})),wo=[]}},$o=function(t){if(t.cancelable){var n=(t.timeStamp>1e12?new Date:performance.now())-t.timeStamp;"pointerdown"==t.type?function(t,n){var i=function(){Yo(t,n),e()},r=function(){e()},e=function(){removeEventListener("pointerup",i,Jo),removeEventListener("pointercancel",r,Jo)};addEventListener("pointerup",i,Jo),addEventListener("pointercancel",r,Jo)}(n,t):Yo(n,t)}},Ko=function(t){["mousedown","keydown","touchstart","pointerdown"].forEach((function(n){return t(n,$o,Jo)}))},Zo=[100,300],Qo=0,tc=1/0,nc=0,ic=function(t){t.forEach((function(t){t.interactionId&&(tc=Math.min(tc,t.interactionId),nc=Math.max(nc,t.interactionId),Qo=nc?(nc-tc)/7+1:0)}))},rc=function(){return yo?Qo:performance.interactionCount||0},ec=function(){"interactionCount"in performance||yo||(yo=xo("event",ic,{type:"event",buffered:!0,durationThreshold:0}))},sc=[200,500],uc=0,oc=function(){return rc()-uc},cc=[],hc={},ac=function(t){var n=cc[cc.length-1],i=hc[t.interactionId];if(i||cc.length<10||t.duration>n.latency){if(i)i.entries.push(t),i.latency=Math.max(i.latency,t.duration);else{var r={id:t.interactionId,latency:t.duration,entries:[t]};hc[r.id]=r,cc.push(r)}cc.sort((function(t,n){return n.latency-t.latency})),cc.splice(10).forEach((function(t){delete hc[t.id]}))}},fc=[2500,4e3],vc={},lc=[800,1800],dc=function t(n){document.prerendering?Bo((function(){return t(n)})):"complete"!==document.readyState?addEventListener("load",(function(){return t(n)}),!0):setTimeout(n,0)},wc=function(t,n){n=n||{};var i=Co("TTFB"),r=_o(t,i,lc,n.reportAllChanges);dc((function(){var e=ko();if(e){var s=e.responseStart;if(s<=0||s>performance.now())return;i.value=Math.max(s-Io(),0),i.entries=[e],r(!0),Oo((function(){i=Co("TTFB",0),(r=_o(t,i,lc,n.reportAllChanges))(!0)}))}}))},yc=function(){function t(){}return t.prototype.onFCP=function(t){Vo(t,{reportAllChanges:!0})},t.prototype.onCLS=function(t){!function(t,n){n=n||{},Vo(Do((function(){var i,r=Co("CLS",0),e=0,s=[],u=function(t){t.forEach((function(t){if(!t.hadRecentInput){var n=s[0],i=s[s.length-1];e&&t.startTime-i.startTime<1e3&&t.startTime-n.startTime<5e3?(e+=t.value,s.push(t)):(e=t.value,s=[t])}})),e>r.value&&(r.value=e,r.entries=s,i())},o=xo("layout-shift",u);o&&(i=_o(t,r,Go,n.reportAllChanges),Po((function(){u(o.takeRecords()),i(!0)})),Oo((function(){e=0,r=Co("CLS",0),i=_o(t,r,Go,n.reportAllChanges),Mo((function(){return i()}))})),setTimeout(i,0))})))}(t,{reportAllChanges:!0})},t.prototype.onFID=function(t){!function(t,n){n=n||{},Bo((function(){var i,r=zo(),e=Co("FID"),s=function(t){t.startTime<r.firstHiddenTime&&(e.value=t.processingStart-t.startTime,e.entries.push(t),i(!0))},u=function(t){t.forEach(s)},o=xo("first-input",u);i=_o(t,e,Zo,n.reportAllChanges),o&&Po(Do((function(){u(o.takeRecords()),o.disconnect()}))),o&&Oo((function(){var r;e=Co("FID"),i=_o(t,e,Zo,n.reportAllChanges),wo=[],vo=-1,fo=null,Ko(addEventListener),r=s,wo.push(r),Xo()}))}))}(t,{reportAllChanges:!0})},t.prototype.onLCP=function(t){!function(t,n){n=n||{},Bo((function(){var i,r=zo(),e=Co("LCP"),s=function(t){var n=t[t.length-1];n&&n.startTime<r.firstHiddenTime&&(e.value=Math.max(n.startTime-Io(),0),e.entries=[n],i())},u=xo("largest-contentful-paint",s);if(u){i=_o(t,e,fc,n.reportAllChanges);var o=Do((function(){vc[e.id]||(s(u.takeRecords()),u.disconnect(),vc[e.id]=!0,i(!0))}));["keydown","click"].forEach((function(t){addEventListener(t,(function(){return setTimeout(o,0)}),!0)})),Po(o),Oo((function(r){e=Co("LCP"),i=_o(t,e,fc,n.reportAllChanges),Mo((function(){e.value=performance.now()-r.timeStamp,vc[e.id]=!0,i(!0)}))}))}}))}(t,{reportAllChanges:!0})},t.prototype.onTTFB=function(t){wc(t,{reportAllChanges:!0})},t.prototype.onINP=function(t){!function(t,n){n=n||{},Bo((function(){var i;ec();var r,e=Co("INP"),s=function(t){t.forEach((function(t){t.interactionId&&ac(t),"first-input"===t.entryType&&!cc.some((function(n){return n.entries.some((function(n){return t.duration===n.duration&&t.startTime===n.startTime}))}))&&ac(t)}));var n,i=(n=Math.min(cc.length-1,Math.floor(oc()/50)),cc[n]);i&&i.latency!==e.value&&(e.value=i.latency,e.entries=i.entries,r())},u=xo("event",s,{durationThreshold:null!==(i=n.durationThreshold)&&void 0!==i?i:40});r=_o(t,e,sc,n.reportAllChanges),u&&("PerformanceEventTiming"in window&&"interactionId"in PerformanceEventTiming.prototype&&u.observe({type:"first-input",buffered:!0}),Po((function(){s(u.takeRecords()),e.value<0&&oc()>0&&(e.value=0,e.entries=[]),r(!0)})),Oo((function(){cc=[],uc=rc(),e=Co("INP"),r=_o(t,e,sc,n.reportAllChanges)})))}))}(t,{reportAllChanges:!0})},t}(),pc=function(){function t(t){void 0===t&&(t=[]),this.Ni=t}return t.prototype.stringifyEvents=function(){return csJSON.stringify(this.Ni)},t.prototype.addEvent=function(t){csArray.prototype.push.call(this.Ni,t)},t.prototype.eventsCount=function(){return this.Ni.length},t.prototype.clearEvents=function(){this.Ni=[]},t.prototype.empty=function(){this.clearEvents()},t.prototype.isFull=function(){return this.eventsCount()>=50},t.prototype.isEmpty=function(){return 0===this.Ni.length},t.prototype.getEvents=function(){return this.Ni},t}(),mc="v2/events",gc=["submit"],Sc=function(){function t(t,n,i,r,e,s,u,o,c,h){this.L=t,this.oa=n,this.Y=i,this.Av=r,this.Hf=e,this.Ia=s,this.Re=u,this.xf=o,this.hf=c,this.Ma=h}return t.prototype.init=function(){var t=this,n=new pc,i=this.Ma.create("".concat(this.L.getTrackerUri(),"/").concat(mc),!0,"base64");this.Vv=this.Gv(i),this.Jv=this.Wv(n,this.Vv.getRecoveryStorage(),i),this.Jv.init(),this.hf.addListener(this.Jv),this.Ia.register(gc,(function(n,i){t.Jv.pushSubmitEvent(n,i)}))},t.prototype.onStartTracking=function(t){this.Vv.start(),this.Jv.start(t)},t.prototype.onAfterNaturalPageView=function(){this.Jv.initStates()},t.prototype.onAfterArtificialPageView=function(){this.Jv.initStates(),this.Jv.collectInitialEvents()},t.prototype.onArtificialPageViewEnd=function(){this.Jv.clearStates(!0)},t.prototype.onBeforeSessionRenewal=function(){this.Jv.clearStates(),this.Jv.stop(),this.Vv.stop()},t.prototype.onOptout=function(){this.Jv.stop(),this.Vv.stop()},t.prototype.Wv=function(t,n,i){var r=new eo(window),e=new Ao,s=new So(this.L,this.Av,this.Hf),u=new ao(this.L,this.Av,this.xf),o=new No(new yc),c=new Er;var h=new ys("".concat(this.L.getTrackerUri(),"/").concat(mc)),a=new hs(this.oa,this.Y);return new bo(this.L,s,u,e,r,t,h,a,this.Re,n,this.Av,o,c,i,undefined,undefined,undefined,undefined,undefined,undefined,undefined)},t.prototype.Gv=function(t){return new Eo(new Ro("csAnalysisEventsPersisted"),t)},t}();!function(t){t.Artificial="a",t.Renewal="r",t.Natural="n"}(po||(po={}));var Ac=function(t){function n(n,i,r,e){var s=t.call(this)||this;return s.hi=n,s.Yv=i,s.tt=r,s.Va=e,s}return J(n,t),n.prototype.init=function(){this.Xv()},n.prototype.onStart=function(t){t?this.$v():this.Kv()},n.prototype.onStop=function(){},n.prototype.triggerArtificialPageView=function(t,n){this.isStarted?this.Zv(t,n):Pt(t)&&this.tt.overridePath(t,n)},n.prototype.Kv=function(){this.Va.setPageViewType(po.Natural),this.hi.emitBeforeNaturalPageView(),this.Yv.send(),this.tt.cleanupOverrideLifespan(),this.hi.emitAfterNaturalPageView()},n.prototype.$v=function(){this.Va.setPageViewType(po.Renewal),this.hi.emitBeforeNaturalPageView(),this.Yv.send(),this.hi.emitAfterNaturalPageView()},n.prototype.Zv=function(t,n){this.Va.setPageViewType(po.Artificial),this.hi.emitArtificialPageViewEnd(),Pt(t)&&this.tt.overridePath(t,n),this.hi.emitBeforeArtificialPageView(),this.Yv.send(),this.tt.cleanupOverrideLifespan(),this.hi.emitAfterArtificialPageView()},n.prototype.Xv=function(){var t=this;window.addEventListener("pageshow",(function(n){t.isStarted&&n.persisted&&t.Zv()}))},n}(Ar),bc=window.navigator.language||window.navigator.userLanguage||window.navigator.browserLanguage||window.navigator.systemLanguage||"unknown";function Ec(){return{la:bc}}var Rc,Nc=function(){function t(t){this.Pa=t,this.Qv=[],this.tl=!1}return t.prototype.getRequestParameters=function(){return{dr:this.nl()}},t.prototype.addUrlMaskingPattern=function(t){var n=this.Pa.getUrlMaskingPattern(t);csArray.prototype.push.call(this.Qv,n)},t.prototype.enableRemoveQueryString=function(){this.tl=!0},t.prototype.disableRemoveQueryString=function(){this.tl=!1},t.prototype.nl=function(){var t=this.tl?this.Pa.removeQueryString(this.il()):this.il();return this.Pa.anonymizeUrl(t,this.Qv)},t.prototype.il=function(){var t="";try{t=window.top.document.referrer}catch(n){if(window.parent)try{t=window.parent.document.referrer}catch(n){t=""}}return""===t&&(t=document.referrer),"string"!=typeof t&&(t=""),t},t}(),Tc=function(){function t(t){this.X=t,this.rl=this.el()&&"currentScript"in document}return t.prototype.sl=function(){var t=window.CSCurrentScript;if(!t)return null;var n=window.performance.getEntriesByName(t.src,"resource")[0];return!n||this.ul(n)?null:Math.round(n.responseEnd-n.fetchStart)},t.prototype.ul=function(t){var n=t.transferSize;return void 0!==n?0===n||300===n||n<t.encodedBodySize:t.connectStart===t.domainLookupEnd},t.prototype.getRequestParameters=function(){if(!this.rl||1!==this.Ja())return{};var t=this.sl();return null===t?{}:{dt:"".concat(Math.min(t,99999))}},t.prototype.Ja=function(){var t;return(null===(t=this.X.getSession())||void 0===t?void 0:t.pageNumber)||null},t.prototype.el=function(){return"object"==typeof window.performance&&"function"==typeof window.performance.getEntriesByName},t}(),Oc=["trackPageview"],kc=["setPath"],Ic=["setQuery"],Cc=["referrer:maskUrl"],xc=["referrer:removeQueryString"],_c=["referrer:keepQueryString"],Mc=function(){function t(t,n,i,r,e,s,u,o,c,h,a,f){this.L=t,this.Ia=n,this.hi=i,this.aa=r,this.Y=e,this.X=s,this.ol=u,this.un=o,this.Pa=c,this.tt=h,this._a=a,this.Va=f}return t.prototype.init=function(){var t=this,i=new vt(this.L.getTrackerUri(),"pageview");this.cl=new Ac(this.hi,i,this.tt,this.Va);var r=new Nc(this.Pa);this.cl.init();var e=new hs(this.aa,this.Y,ce,r,this.tt,this.ol,n,this.un,this.Va,new Tc(this.X),this._a);i.setRequestParametersProviders(e),this.Ia.register(Oc,(function(n,i){xt(n)?t.hl(i)?t.cl.triggerArtificialPageView(n,i):t.cl.triggerArtificialPageView(n):t.cl.triggerArtificialPageView()})),this.Ia.register(kc,(function(n,i){xt(n)&&(t.hl(i)?t.tt.overridePath(n,i):t.tt.overridePath(n))})),this.Ia.register(Ic,(function(n,i){xt(n)&&(t.hl(i)?t.tt.overrideQuery(n,i):t.tt.overrideQuery(n))})),this.Ia.register(Cc,(function(t){return r.addUrlMaskingPattern(t)})),this.Ia.register(xc,(function(){return r.enableRemoveQueryString()})),this.Ia.register(_c,(function(){return r.disableRemoveQueryString()}))},t.prototype.start=function(t){this.cl.start(t)},t.prototype.onBeforeSessionRenewal=function(){this.cl.stop()},t.prototype.hl=function(t){return _t(t)&&null!==t},t}(),Pc=function(){function t(t){this.Cf=t}return t.prototype.on=function(t,n){var i=this;return function(r){i.Cf.hasValidEventTarget(r)&&i.al(r,t)&&n(r)}},t.prototype.al=function(t,n){var i=gi(t);return C.call(i,n)},t.prototype.isMatchesSelectorSupported=function(){return!!C},t}(),Dc=function(){function t(){}return t.prototype.onLoad=function(t){this.Kt=t},t.prototype.onLoadCallbackExecute=function(){this.Kt()},t.prototype.start=function(){var t=this.onLoadCallbackExecute.bind(this);this.vl(t)},t.prototype.vl=function(t){function n(){document.removeEventListener("DOMContentLoaded",n),window.removeEventListener("load",n),t()}"complete"===document.readyState||"loading"!==document.readyState&&!document.documentElement.doScroll?setTimeout(t):(document.addEventListener("DOMContentLoaded",n),window.addEventListener("load",n))},X([wn("onLoad")],t.prototype,"onLoadCallbackExecute",null),t}(),Lc=function(){function t(t,n,i){this.L=t,this.Y=n,this.X=i,this.qv=Et()}return t.prototype.resetStartTime=function(){this.qv=Et()},t.prototype.getSessionData=function(){var t=this.L.projectId,n=this.Y.getVisitor();null==n&&hn.warn("Visitor is null. This happens when a snippet tries to get Session Data before the tag was initialized.");var i=null!=n?n:{},r=i.id,e=i.visitsCount,s=this.X.getSession();return null===s&&hn.warn("Session is null. This happens when a snippet tries to get Session Data before the tag was initialized."),{projectId:t,userId:r,sessionNumber:e,pageNumber:(null!=s?s:{}).pageNumber,relativeTimestamp:Et()-this.qv}},t}(),Uc=["clearSession"],jc=["extendSession"],qc=["getSessionData"],Hc=["session:start:newVisitor"],zc=["session:clear:visitor"],Bc=function(){function t(t,n,i,r){this.L=t,this.Y=n,this.X=i,this.Ia=r}return t.prototype.init=function(){var t=this;this.ll=new Lc(this.L,this.Y,this.X),this.Ia.register(Uc,(function(){return t.X.removeSession()})),this.Ia.register(jc,(function(){return t.X.extendSessionPeriodically()}),{disableApplyPending:!0}),this.Ia.register(qc,(function(){return t.ll.getSessionData()}),{disableApplyPending:!0}),this.Ia.register(Hc,(function(){return t.Y.renewVisitor()})),this.Ia.register(zc,(function(){t.Y.resetVisitor()}),{disableApplyImmediate:!0})},t.prototype.onBeforeNaturalPageView=function(){this.Y.createOrUpdateVisitor(),this.X.createOrUpdateSession()},t.prototype.onBeforeArtificialPageView=function(){this.X.abortQuotaServiceRequest(),this.Y.createOrUpdateVisitor(),this.X.createOrUpdateSession()},t.prototype.onAfterNaturalPageView=function(){this.ll.resetStartTime()},t.prototype.onAfterArtificialPageView=function(){this.ll.resetStartTime()},t.prototype.onOptout=function(){this.Y.removeVisitor(),this.X.removeSession()},t.prototype.onRecordingStateChange=function(t,n){this.X.updateRecordingState(t,n)},t}(),Fc=function(){function t(t,n){this.X=t,this.Y=n,this.dl=!1}return t.prototype.onSessionExpired=function(t){this.wl=t},t.prototype.isSessionValid=function(){if(this.dl)return!0;var t=this.X.hasValidSession(),n=!1;return this.X.pollCacheRefreshEvent()&&(n=this.Y.isSessionRenewed()),t&&!n||!this.yl()?t:(this.pl=Et(),this.dl=!0,this.wl(),this.dl=!1,this.X.hasValidSession())},t.prototype.isCurrentPageviewValid=function(){var t=this.X.hasValidSession();return this.X.pollCacheRefreshEvent(!1)?!this.Y.isSessionRenewed():t},t.prototype.startNewSession=function(){this.wl()},t.prototype.yl=function(){return!Mt(this.pl)||Et()-this.pl>6e4},t}();function Vc(t){return t.tagDeploymentMode===Rc.DualCollectionReview||t.tagDeploymentMode===Rc.DualCollection}!function(t){t.ContentSquare="CONTENTSQUARE",t.LoadedByClicktale="LOADED_BY_CLICKTALE",t.LoadClicktalePtc="LOAD_CLICKTALE_PTC",t.DualCollectionReview="DUAL_COLLECTION_REVIEW",t.DualCollection="DUAL_COLLECTION",t.ContentSquareTagClickTaleEndpoints="CONTENTSQUARE_TAG_CLICKTALE_ENDPOINTS"}(Rc||(Rc={}));var Gc,Jc=function(){function t(t,n,i){this.L=t,this.X=n,this.ai=i}return t.prototype.init=function(){this.ml=!1,this.gl=!1},t.prototype.loadClicktalePtc=function(){!this.ml&&this.L.ptcDomain&&this.L.ptcGuid&&this.Sl()},t.prototype.startDataCollection=function(t){this.gl||(this.L.tagDeploymentMode===Rc.LoadClicktalePtc&&this.Al()&&this.ai.initCTPII(),Vc(this.L)&&(this.ai.initCTPII(),t(),this.gl=!0))},t.prototype.Al=function(){return this.X.isReplayRecorded()},t.prototype.Sl=function(){this.ml=!0;var t=this.bl();document.getElementsByTagName("head")[0].appendChild(t)},t.prototype.bl=function(){var t=document.createElementNS("http://www.w3.org/1999/xhtml","script");return t.async=!0,t.crossOrigin="anonymous",t.type="text/javascript",this.L.ptcSha512&&this.L.ptcSnapshotPath?(t.integrity="sha512-".concat(this.L.ptcSha512),t.src="https://".concat(this.L.ptcDomain,"/").concat(this.L.ptcSnapshotPath,"/ptc.js")):t.src="https://".concat(this.L.ptcDomain,"/ptc/").concat(this.L.ptcGuid,".js"),t},t}();!function(t){t.isRecording=function(){return window.ClickTaleIsRecording&&window.ClickTaleIsRecording()},t.stopRecording=function(){window.ClickTaleStop&&window.ClickTaleStop()},t.triggerLogicalPageView=function(t){window.ClickTaleLogicalWithUploadPage&&window.ClickTaleLogicalWithUploadPage(t)},t.sendPageEvent=function(t){window.ClickTaleEvent&&window.ClickTaleEvent(t)},t.sendEventTriggerRecording=function(t){window.ClickTaleEventTrigger&&window.ClickTaleEventTrigger(t)}}(Gc||(Gc={}));var Wc,Yc=function(){function t(t,n,i,r,e,s){this.L=t,this.X=n,this.tt=i,this.Ia=r,this.El=e,this.ai=s}return t.prototype.init=function(){var t=this;this.Rl=new Jc(this.L,this.X,this.ai),this.Rl.init(),this.Nl(),this.Ia.register(["startDataCollection"],(function(){t.Rl.startDataCollection(t.El)}))},t.prototype.Nl=function(){Vc(this.L)&&this.Rl.loadClicktalePtc()},t.prototype.onAfterNaturalPageView=function(){this.L.tagDeploymentMode===Rc.LoadClicktalePtc&&this.Rl.loadClicktalePtc()},t.prototype.onAfterArtificialPageView=function(){!this.X.isReplayRecorded()&&Gc.isRecording()&&this.L.tagDeploymentMode===Rc.LoadClicktalePtc&&Gc.triggerLogicalPageView(this.tt.getAnonymizedUrl())},t.prototype.onAfterSessionRenewal=function(){!this.X.isReplayRecorded()&&Gc.isRecording()&&Gc.triggerLogicalPageView(this.tt.getAnonymizedUrl())},t.prototype.onOptout=function(){Gc.isRecording()&&Gc.stopRecording()},t}(),Xc="@user-identifier@",$c=function(t){function n(n,i,r,e){var s=t.call(this)||this;return s.L=n,s.Tl=i,s.mf=r,s.Ol=e,s.kl=[],s.ns=[],s}return J(n,t),n.prototype.onStart=function(){var t=this;csArray.prototype.forEach.call(this.kl,(function(n){return t.trackPageEvent(n)})),this.kl=[],csArray.prototype.forEach.call(this.ns,(function(n){return t.trackEventTriggerRecording(n)})),this.ns=[]},n.prototype.onStop=function(){},n.prototype.trackPageEvent=function(t){this.isStarted?n.Il(t)&&(this.Cl(t)?tu.isSupported()&&this.xl(t):this._l(t)):csArray.prototype.push.call(this.kl,t)},n.prototype.Cl=function(t){return nt(t,Xc)},n.prototype.xl=function(t){return $(this,void 0,void 0,(function(){var n,i;return K(this,(function(r){switch(r.label){case 0:return this.L.customHashIdEnabled?(n=csString.prototype.slice.call(t,17)).length>tu.MAX_DIGEST_INPUT_SIZE?(hn.warn("UserIdentifier event: invalid user identifier"),[2]):[4,tu.digest(n)]:[2];case 1:return(i=r.sent())?(this.Ml={eventName:i,isETR:!1,isCustomHashId:!0},this.Pl()):hn.warn("Page event: unable to compute customHashId"),this.L.encryptionEnabled?(this.Ol.emitUserIdentifierEvent(n),[2]):[2]}}))}))},n.prototype._l=function(t){this.Ol.emitPageEvent(t),this.Ml={eventName:t,isETR:!1,isCustomHashId:!1},this.Pl(),this.L.tagDeploymentMode===Rc.LoadClicktalePtc&&Gc.sendPageEvent(t)},n.prototype.trackEventTriggerRecording=function(t){this.isStarted?n.Il(t)&&(this.L.malkaEtrEnabled?this.Dl(t):this.Ll(t)):csArray.prototype.push.call(this.ns,t)},n.prototype.Dl=function(t){nt(t,"@ETP@")?this.Ol.emitEventTriggerRecording(t,Nn.ETR_PAGE):this.Ol.emitEventTriggerRecording(t,Nn.ETR_SESSION),this.Ml={eventName:t,isETR:!0,isCustomHashId:!1},this.Pl()},n.prototype.Ll=function(t){(function(t){return Vc(t)||t.tagDeploymentMode===Rc.LoadClicktalePtc})(this.L)&&(this.Ol.emitEventTriggerRecording(t,Nn.ETR_LEGACY),this.Ml={eventName:t,isETR:!0,isCustomHashId:!1},this.Pl(),this.L.tagDeploymentMode===Rc.LoadClicktalePtc&&Gc.sendEventTriggerRecording(t))},n.prototype.getRequestParameters=function(){return{value:this.mf.compressSync(this.Ml.eventName,"base64"),ct:this.mf.algorithm,isETR:"".concat(this.Ml.isETR),isCustomHashId:"".concat(this.Ml.isCustomHashId)}},n.prototype.Pl=function(){this.Tl.send()},n.Il=function(t){return xt(t)&&!!csString.prototype.trim.call(t)},n}(Ar),Kc=["trackPageEvent"],Zc=["trackEventTriggerRecording"],Qc=function(){function t(t,n,i,r,e){this.L=t,this.Ia=n,this.mf=i,this.aa=r,this.Ol=e}return t.prototype.init=function(){var t=this,n=new vt(this.L.getTrackerUri(),"pageEvent");this.Ul=new $c(this.L,n,this.mf,this.Ol),n.setRequestParametersProviders(this.Ul,this.aa),this.Ia.register(Kc,(function(n){t.Ul.trackPageEvent(n)})),this.Ia.register(Zc,(function(n){t.Ul.trackEventTriggerRecording(n)}))},t.prototype.onStartTracking=function(){this.Ul.start()},t}(),th=function(){function t(){this.subscriptions={}}return t.prototype.subscribe=function(t,n){this.subscriptions[t]=n,1===Object.keys(this.subscriptions).length&&this.onStartTracking()},t.prototype.unsubscribe=function(t){delete this.subscriptions[t],0===Object.keys(this.subscriptions).length&&this.onStopTracking()},t}();!function(t){t.ellipsis="…",t.truncateStringWithEllipsis=function(n,i){return n.length<=i?n:csString.prototype.slice.call(n,0,i-t.ellipsis.length)+t.ellipsis}}(Wc||(Wc={}));var nh=function(t){function n(){var n=t.call(this)||this;return n.jl=!1,n.Bc={boundElement:window,type:"error",listener:function(t){return n.errorListener(t)}},n}return J(n,t),n.prototype.onStartTracking=function(){hi(this.Bc,this.jl)},n.prototype.onStopTracking=function(){ai(this.Bc,this.jl)},n.prototype.errorListener=function(t){var n=this.ql(t);for(var i in this.subscriptions){(0,this.subscriptions[i])(n)}},n.prototype.Hl=function(t){return t=null!=t?t:"[NO ERROR MESSAGE]",Wc.truncateStringWithEllipsis(t,n.zl)},n.prototype.ql=function(t){return{errorType:"jsError",message:this.Hl(t.message),filename:t.filename,lineno:t.lineno,colno:t.colno}},n.truncatedErrorMessageMarker="…",n.zl=1024,X([wn("Event handler type: error")],n.prototype,"errorListener",null),n}(th),ih=document.createElement("div");function rh(t){if(!(!!t&&xt(t)))return hn.warn("isValidSelector: invalid selector provided '".concat(t,"'")),!1;try{return C.call(ih,t),!0}catch(n){return hn.warn("isValidSelector: invalid selector provided '".concat(t,"'")),!1}}var eh,sh,uh=["[data-cs-mask]","#c1_card_info_id"],oh=function(){function t(t,n){var i;this.L=t,this.Bl=n,this.Fl=Z(["script"],uh,!0),this.Vl=[{selector:"input:not([type=button]):not([type=submit])",attrName:"value"}],this.Gl={PIISelectors:Z([".ctHidden,textarea"],uh,!0),Attributes:[{selector:".ctHidden,input:not([type=button]):not([type=submit])",attrName:"value"}]},this.Jl=[],this.Wl="",Vc(this.L)||(this.Wl=this.Yl(this.Wl,this.Fl),(i=csArray.prototype.push).call.apply(i,Z([this.Jl],this.Vl,!1)))}return t.prototype.setPIISelectors=function(t){var n,i=this;if(t){if(null===(n=t.PIISelectors)||void 0===n?void 0:n.length){var r=csArray.prototype.filter.call(t.PIISelectors,(function(t){return rh(t)}));this.Wl=this.Yl(this.Wl,r)}t.Attributes instanceof Array&&csArray.prototype.forEach.call(t.Attributes,(function(t){t&&t.attrName&&rh(t.selector)&&!i.Xl(t)&&csArray.prototype.push.call(i.Jl,t)}))}},t.prototype.getPIISelectors=function(){return{PIISelectors:[this.Wl],Attributes:this.Jl}},t.prototype.initCTPII=function(){var t,n,i,r=this;if(this.Wl=this.Yl(this.Wl,this.Gl.PIISelectors),null===(i=null===(n=null===window||void 0===window?void 0:window.ClickTaleSettings)||void 0===n?void 0:n.DOM)||void 0===i?void 0:i.PII){var e=csArray.prototype.filter.call(window.ClickTaleSettings.DOM.PII.Text,(function(t){return rh(t)}));this.Wl=this.Yl(this.Wl,e),(t=csArray.prototype.push).call.apply(t,Z([this.Jl],this.Gl.Attributes,!1)),csArray.prototype.forEach.call(window.ClickTaleSettings.DOM.PII.Attributes,(function(t){t.attr&&rh(t.rule)&&csArray.prototype.push.call(r.Jl,{selector:t.rule,attrName:t.attr})}))}},t.prototype.identifySensitiveNodes=function(){this.Bl.startSensitiveIdentifier(this.Wl,this.Jl,(function(){}))},t.prototype.unidentifyAllSensitiveNodes=function(){this.Bl.stopSensitiveIdentifier()},t.prototype.unidentifySensitiveNodes=function(t){de.isConnected(t)||this.Bl.unidentifySensitiveNodes(t)},t.prototype.onSensitiveElementResize=function(t){this.Bl.onSensitiveElementResize(t)},t.prototype.Yl=function(t,n){if(0===n.length)return t;if(0===t.length)return csArray.prototype.join.call(n,",");for(var i=csString.prototype.split.call(t,","),r=0,e=n;r<e.length;r++)for(var s=e[r],u=0,o=csString.prototype.split.call(s,",");u<o.length;u++){var c=o[u];-1===csArray.prototype.indexOf.call(i,c)&&csArray.prototype.push.call(i,c)}return csArray.prototype.join.call(i,",")},t.prototype.Xl=function(t){return csArray.prototype.some.call(this.Jl,(function(n){return n.selector===t.selector&&n.attrName===t.attrName}))},t}(),ch=function(){function t(t){this.Ia=t}return t.prototype.init=function(){this.$l(t.Kl,Bt),this.$l(t.Zl,zt)},t.prototype.$l=function(t,n){this.Ia.register([t],(function(t,i){xt(t)&&(xt(i)||Ut(i))&&hn.error(i,"".concat(n).concat(t))}))},t.Zl="logSnippetError",t.Kl="logImplementationSnippetError",t}(),hh=function(){function t(t,n,i,r){this.L=t,this.sf=n,this.ka=i,this.hf=r}return t.prototype.init=function(){var t=this;this.sf.onChildMessage((function(n,i,r){return t.hf.emitIframeEvent(n,i,r)})),this.sf.setRecordingStatusCallback((function(){return t.ka.getRecordingStatus()}))},t.prototype.onStartTracking=function(){this.L.iframesTracking&&this.sf.start()},t.prototype.onOptout=function(){this.L.iframesTracking&&this.sf.stop()},t.prototype.onRecordingStatusChange=function(){this.L.iframesTracking&&this.sf.onRecordingStatusChange(this.ka.getRecordingStatus())},t}(),ah=function(t){function n(n){var i=t.call(this)||this;return i.L=n,i.Ql=0,i.td=new Map,i.nd={boundElement:window,type:"message",listener:function(t){return i.rd(t)}},i}return J(n,t),n.prototype.onChildMessage=function(t){this.sd=t},n.prototype.setRecordingStatusCallback=function(t){this.ud=t},n.prototype.onRecordingStatusChange=function(t){var n=this,i=en.buildBaseMessage(rn.RecordingStatus,nn.Parent,this.L.projectId);i.content=t,this.td.forEach((function(t){!n.od(t)&&t.port&&en.sendChannelMessage(t.port,i)}))},n.prototype.sendToChildren=function(t,n){var i=en.buildBaseMessage(t,nn.Parent,this.L.projectId);i.content=n,this.ad(i)},n.prototype.onStart=function(){hi(this.nd,!1),this.vd()},n.prototype.onStop=function(){this.ld(),ai(this.nd,!1),this.dd()},n.prototype.vd=function(){var t=this,n=this.wd();this.yd(n),csArray.prototype.forEach.call(n,(function(n){if(null===t.pd(n)){var i={iframe:n};t.td.set(t.Ql,i),t.Ql+=1}})),this.md()},n.prototype.wd=function(){var t=this;return csArray.prototype.filter.call(de.findAllElements("iframe"),(function(n){return t.gd(n)}))},n.prototype.yd=function(t){var n=this;this.td.forEach((function(i,r){i.iframe&&-1===csArray.prototype.indexOf.call(t,i.iframe)&&n.Sd(r,i)}))},n.prototype.Sd=function(t,n){n.port&&en.closeChannelPort(n.port),this.td.delete(t)},n.prototype.dd=function(){this.td.forEach((function(t){t.port&&en.closeChannelPort(t.port)})),this.td.clear()},n.prototype.pd=function(t){var n=null;return this.td.forEach((function(i,r){null===n&&i.iframe===t&&(n=r)})),n},n.prototype.gd=function(t){return t.id!==i&&(!t.src||Kt($t(t.src),this.L.hostnames))},n.prototype.ad=function(t){this.td.forEach((function(n){n.port&&en.sendChannelMessage(n.port,t)}))},n.prototype.md=function(){var t=this;this.td.forEach((function(n,i){if(n.iframe.contentWindow){var r=t.Ad(i);en.sendPostMessage(n.iframe.contentWindow,"*",r)}}))},n.prototype.ld=function(){var t=this.bd();this.td.forEach((function(n){n.port?en.sendChannelMessage(n.port,t):n.iframe.contentWindow&&en.sendPostMessage(n.iframe.contentWindow,"*",t)}))},n.prototype.Ad=function(t){return en.buildBaseMessage(rn.Discovery,nn.Parent,this.L.projectId,t)},n.prototype.bd=function(){return en.buildBaseMessage(rn.Stop,nn.Parent,this.L.projectId)},n.prototype.Ed=function(t,n){var i=this,r=this.td.get(t);void 0!==r?(r.port=n,r.port.onmessage=function(t){i.Rd(t,r)}):hn.error("Parent received channel messaging initialization from unknow child id : ".concat(t," (").concat(this.Ql,")"))},n.prototype.Nd=function(t){if(t.port){var n=en.buildBaseMessage(rn.RecordingStatus,nn.Parent,this.L.projectId),i=this.ud();this.od(t)&&(i.isRecording=!1,i.isMutationTrackerStarted=!1),n.content=i,en.sendChannelMessage(t.port,n)}},n.prototype.Rd=function(t,n){if(void 0!==n){var i=t.data.type,r=t.data.content;i===rn.EndOfBufferedMessages?this.Nd(n):this.sd(n.iframe,i,r)}else hn.error("Parent received channelMessage from unknown child : ".concat(csJSON.stringify(t.data)))},n.prototype.rd=function(t){if(en.isMessageValid(t,nn.Child,this.L.projectId,this.L.hostnames))switch(t.data.type){case rn.Discovery:if(void 0===t.data.id)return void this.vd();if(t.ports&&1===t.ports.length&&this.td.has(t.data.id))return void this.Ed(t.data.id,t.ports[0]);hn.error("Parent received wrong channelMessage initialization : (".concat(t.origin,") : ").concat(csJSON.stringify(t.data)));break;case rn.ChildLogMessage:this.sd(null,rn.ChildLogMessage,t.data.content);break;default:hn.warn("Parent received unexpected postMessage type from child (".concat(t.origin,") : ").concat(csJSON.stringify(t.data)))}},n.prototype.od=function(t){return Ii.isSensitive(t.iframe)||Ii.isSensitiveChild(t.iframe)},n}(Ar),fh=function(){function t(t){this.Td=t}return t.prototype.buildApiErrors=function(t,n){var i=this.Td.collectDataPoints(t,n);if(null===i)return null;var r=this.Od(t,i);return n?{apiError:r,detailedApiError:this.kd(t,i)}:{apiError:r}},t.prototype.kd=function(t,n){var i=this.Id(t);return n.collectQueryParam&&t.queryParameters&&(i.queryParameters=t.queryParameters),n.collectRequestBody&&t.requestBody&&(i.requestBody=t.requestBody),n.collectResponseBody&&t.requestBody&&(i.responseBody=t.responseBody),Object.keys(n.standardRequestHeaders).length>0&&(i.standardRequestHeaders=n.standardRequestHeaders),Object.keys(n.standardResponseHeaders).length>0&&(i.standardResponseHeaders=n.standardResponseHeaders),Object.keys(n.customRequestHeaders).length>0&&(i.customRequestHeaders=csJSON.stringify(n.customRequestHeaders)),Object.keys(n.customResponseHeaders).length>0&&(i.customResponseHeaders=csJSON.stringify(n.customResponseHeaders)),Object.keys(n.plainCustomRequestHeaders).length>0&&(i.plainCustomRequestHeaders=n.plainCustomRequestHeaders),Object.keys(n.plainCustomResponseHeaders).length>0&&(i.plainCustomResponseHeaders=n.plainCustomResponseHeaders),n.plainResponseBodyAttributes&&Object.keys(n.plainResponseBodyAttributes).length>0&&(i.plainResponseBodyAttributes=n.plainResponseBodyAttributes),n.plainRequestBodyAttributes&&Object.keys(n.plainRequestBodyAttributes).length>0&&(i.plainRequestBodyAttributes=n.plainRequestBodyAttributes),Object.keys(n.responseBodyAttributes).length>0&&(i.responseBodyAttributes=csJSON.stringify(n.responseBodyAttributes)),Object.keys(n.requestBodyAttributes).length>0&&(i.requestBodyAttributes=csJSON.stringify(n.requestBodyAttributes)),i},t.prototype.Id=function(t){return{errorType:"apiError",url:t.url,method:t.method,requestTime:t.requestTime,responseTime:t.responseTime,statusCode:t.statusCode,library:t.library}},t.prototype.Od=function(t,n){var i=this.Id(t);return n.matchingBodyContents.length>0&&(i.matchingBodyContents=n.matchingBodyContents),Object.keys(n.plainResponseBodyAttributes).length>0&&(i.plainBodyResponseAttributes=n.plainResponseBodyAttributes),i},t}(),vh=function(t){function n(n,i,r){var e=t.call(this)||this;return e.Cd=n,e.xd=i,e._d=r,e.Md=0,e.Pd=new fh(r),e}return J(n,t),n.prototype.subscribe=function(n,i,r){(null==r?void 0:r.detailedEvent)&&(Object.defineProperty(i,"detailedEvent",{value:r.detailedEvent}),this.Md++),t.prototype.subscribe.call(this,n,i)},n.prototype.unsubscribe=function(n){var i;(null===(i=this.subscriptions[n])||void 0===i?void 0:i.hasOwnProperty("detailedEvent"))&&this.Md--,t.prototype.unsubscribe.call(this,n)},n.prototype.init=function(){var t=this,n=this._d.computeApiErrorCollectionOptions();this.Cd.setCollectionOptions(n),this.Cd.onEvent((function(n){return t.Dd(n)})),this.xd.setCollectionOptions(n),this.xd.onEvent((function(n){return t.Dd(n)}))},n.prototype.onStartTracking=function(){this.Cd.start(),this.xd.start()},n.prototype.onStopTracking=function(){this.Cd.stop(),this.xd.stop()},n.prototype.Dd=function(t){var n=this.Pd.buildApiErrors(t,0!==this.Md);if(n)for(var i in this.subscriptions){var r=this.subscriptions[i];r.hasOwnProperty("detailedEvent")?n.detailedApiError&&r(n.detailedApiError):r(n.apiError)}},n}(th),lh=function(){function t(t){this.Pa=t,this.Qv=[]}return t.prototype.addUrlMaskingPattern=function(t){var n=this.Pa.getUrlMaskingPattern(t);csArray.prototype.push.call(this.Qv,n)},t.prototype.getUrlMaskingPatterns=function(){return this.Qv},t.prototype.anonymize=function(t){var n=this.Pa.removeQueryString(t.url);return W(W({},t),{url:this.Pa.anonymizeUrl(n,this.Qv),library:t.library?this.Pa.anonymizeUrl(t.library,this.Qv):void 0})},t}(),dh=function(){function t(t,n){this.U=t,this.tt=n}return t.prototype.anonymize=function(t){return xt(t.message)&&(t.message=this.Ld(t.message),t.message=this.U.anonymizePII(t.message)),xt(t.filename)&&(t.filename=this.tt.computeOverriddenUrl(t.filename)),t},t.prototype.Ld=function(t){return csString.prototype.replace.call(t,/(value\s*=\s*".*"|value\s*=\s*'.*')/,"value='".concat("CS_ANONYMIZED_VALUE","'"))},t}(),wh=function(t){function n(n){var i=t.call(this)||this;return i.Ud=n,i.tu=[{boundElement:document,type:"touchstart",listener:function(t){return i.es(t)}},{boundElement:document,type:"touchmove",listener:function(t){return i.es(t)}},{boundElement:document,type:"touchend",listener:function(t){return i.es(t)}}],i.jd=new iu,i.jd.onGesture((function(t,n){return i.Yh(t,n)})),i}return Jr(n,t),n.prototype.Yh=function(t,n){for(var i in this.subscriptions){(0,this.subscriptions[i])(t,n)}},n.prototype.onStartTracking=function(){this.canDetectGesture()&&csArray.prototype.forEach.call(this.tu,(function(t){return hi(t)}))},n.prototype.onStopTracking=function(){this.canDetectGesture()&&csArray.prototype.forEach.call(this.tu,(function(t){return ai(t)}))},n.prototype.canDetectGesture=function(){return void 0!==window.devicePixelRatio},n.prototype.es=function(t){var n=this;this.Ud.tryToExecute("process gesture event",(function(){if(n.jd.isValidTouchEvent(t))switch(t.type){case"touchstart":n.jd.processActionDown(t);break;case"touchmove":n.jd.processActionMove();break;case"touchend":n.jd.processActionUp(t)}}))()},n.isSwipe=function(t){return t.type===$s.FLICK||t.type===$s.DRAG},n}(th),yh=function(t){function n(n,i){var r=t.call(this)||this;return r.Ce=n,r.qd=i,r.Hd=0,r}return J(n,t),n.prototype.onStart=function(){var t=this;hn.isPerfLoggingActive()&&(this.zd=window.setInterval((function(){return t.Bd()}),n.Fd))},n.prototype.onStop=function(){hn.isPerfLoggingActive()&&(this.Bd(),clearInterval(this.zd))},n.prototype.Bd=function(){if(!(fi.isEmpty()||this.Hd>=n.Vd)){var t=fi.getAll();this.Hd++;var i=W({a:n.Gd,l:n.Jd},this.qd.getRequestParameters()),r=csArray.prototype.map.call(t,(function(t){return W(W({},t),i)}));this.Ce.send(r),fi.clear()}},n.Gd="uxa",n.Jd="perf",n.Fd=5e3,n.Vd=5,n}(Ar),ph=function(){function t(t,n,i){this.L=t,this.qd=n,this.Ma=i}return t.prototype.init=function(){this.Wd=new yh(this.Ma.create(this.L.getLoggerUri(),!0),this.qd)},t.prototype.onStartTracking=function(){this.Wd.start()},t.prototype.onOptout=function(){this.Wd.stop()},t}(),mh=function(){function t(){this.Yd=!1}return t.prototype.enableRecordingStatus=function(t,n,i,r,e){this.Yd=!0,this.wf=t,this.ai=n,this.Da=i,this.X=r,this.Ie=e},t.prototype.getRecordingStatus=function(){var t,n,i,r;return this.Yd?{isRecording:this.wf.isRecording(),isMutationTrackerStarted:this.wf.isMutationTrackerStarted(),PIISelectors:this.ai.getPIISelectors(),capturedElementSelector:Hr.getWhitelistedElementsSelector(),useAnonymization:this.Da.shouldUseAnonymization(),encryptionSelectors:null===(t=this.Ie)||void 0===t?void 0:t.getEncryptionSelectors(),activateOnlineAssetsOnNextStart:null===(n=this.wf.getStaticResourceManagerStatus())||void 0===n?void 0:n.onlineAssets.enabledForChildrenOnNextStart,recordingStartTimestamp:parseInt(this.wf.getRecordingStartTimestamp(),10),etrState:null!==(r=null===(i=this.X.getSession())||void 0===i?void 0:i.etrState)&&void 0!==r?r:Rn.ETR_OFF}:{isRecording:!1,recordingStartTimestamp:0,etrState:Rn.ETR_OFF}},t}(),gh=function(t){function n(n,i,r,e){var s=t.call(this)||this;return s.Oe=n,s.Xd=i,s.oa=r,s.ke=e,s.$d=[],s.je=0,s}return J(n,t),n.prototype.init=function(){this.Oe.init()},n.prototype.initStates=function(){this.Kd(),this.$d=[],this.je=0,this.Dv()},n.prototype.Dv=function(){this.qv=Et()},n.prototype.jv=function(){return Et()-this.qv},n.prototype.onStart=function(){var t=this;this.Oe.subscribe(n.ys,(function(n){return t.es(n)}))},n.prototype.onStop=function(){this.Oe.unsubscribe(n.ys)},n.prototype.onIframeApiError=function(t){this.es(t)},n.prototype.es=function(t){this.isStarted&&this.je<n.Zd&&(t.relativeTime=this.jv(),csArray.prototype.push.call(this.$d,this.ke.anonymize(t)),this.Qd())},n.prototype.Kd=function(){this.Xd.removeQueryParams(),this.Xd.setQueryParams(this.oa.getRequestParameters())},n.prototype.Qd=function(){this.Xd.send({errors:this.$d}),this.$d=[],this.je+=1},n.ys="ApiErrorsService",n.Zd=20,n}(Ar),Sh=["api-errors:maskUrl"],Ah=function(){function t(t,n,i,r,e,s,u){this.Oe=t,this.ke=n,this.L=i,this.oa=r,this.hf=e,this.Ia=s,this.Ma=u}return t.prototype.init=function(){var t=this.Ma.create("".concat(this.L.getTrackerUri(),"/").concat("api-errors"),!0);this.tw=new gh(this.Oe,t,this.oa,this.ke),this.tw.init(),this.hf.addListener(this.tw),this.nw()},t.prototype.nw=function(){var t=this;this.Ia.register(Sh,(function(n){return t.ke.addUrlMaskingPattern(n)}))},t.prototype.onStartTracking=function(){this.tw.start()},t.prototype.onAfterNaturalPageView=function(){this.tw.initStates()},t.prototype.onAfterArtificialPageView=function(){this.tw.initStates()},t.prototype.onBeforeSessionRenewal=function(){this.tw.stop()},t.prototype.onOptout=function(){this.tw.stop()},t}(),bh=function(t){function n(n,i,r,e,s,u){var o=t.call(this)||this;return o.Ne=n,o.iw=i,o.oa=r,o.Te=e,o.Ca=s,o.tt=u,o.rw=[],o.Ue=0,o.ew=[],o}return J(n,t),n.prototype.initStates=function(){this.qv=Et(),this.iw.removeQueryParams(),this.iw.setQueryParams(this.oa.getRequestParameters()),this.rw=[],this.Ue=0},n.prototype.onStart=function(){var t=this;this.Ne.subscribe(n.ys,(function(n){return t.es(n)})),this.uw()},n.prototype.onStop=function(){this.Ne.unsubscribe(n.ys)},n.prototype.onIframeJavascriptError=function(t){this.es(t)},n.prototype.trackCustomError=function(t){var n={errorType:"jsError",message:"".concat("Custom Error:"," ").concat(t),lineno:1,colno:1,filename:"https://cserror.com/texterror.js"};this.ow(n)},n.prototype.ow=function(t){var n=this;this.isStarted?this.es(t,(function(t){return n.Ca.emitCustomJavaScriptErrorEvent(t)})):csArray.prototype.push.call(this.ew,t)},n.prototype.uw=function(){var t=this;this.isStarted&&(csArray.prototype.forEach.call(this.ew,(function(n){return t.ow(n)})),this.ew=[])},n.prototype.es=function(t,n){if(this.isStarted&&this.Ue<20){var i=W(W({},t),{pageUrl:this.tt.getAnonymizedUrl(),rt:this.jv()});this.Te.anonymize(i),csArray.prototype.push.call(this.rw,i),this.Qd(),n&&n(i)}},n.prototype.jv=function(){return Et()-this.qv},n.prototype.Qd=function(){this.iw.send({errors:this.rw}),this.rw=[],this.Ue+=1},n.ys="JavaScriptErrorsService",n}(Ar),Eh=["trackError"],Rh=function(){function t(t,n,i,r,e,s,u,o,c){this.Ne=t,this.Te=n,this.L=i,this.oa=r,this.hf=e,this.Ia=s,this.Ca=u,this.tt=o,this.Ma=c}return t.prototype.init=function(){var t=this.Ma.create("".concat(this.L.getTrackerUri(),"/").concat("errors"),!0);this.cw=new bh(this.Ne,t,this.oa,this.Te,this.Ca,this.tt),this.hf.addListener(this.cw),this.nw()},t.prototype.nw=function(){var t=this;this.L.jsCustomErrorsEnabled&&!this.L.customErrors.enabled&&this.Ia.register(Eh,(function(n){t.cw.trackCustomError(n)}))},t.prototype.onStartTracking=function(){this.cw.start()},t.prototype.onAfterNaturalPageView=function(){this.cw.initStates()},t.prototype.onAfterArtificialPageView=function(){this.cw.initStates()},t.prototype.onBeforeSessionRenewal=function(){this.cw.stop()},t.prototype.onOptout=function(){this.cw.stop()},t}(),Nh=function(){function t(){this.hw=po.Natural}return t.prototype.setPageViewType=function(t){this.hw=t},t.prototype.getPageViewType=function(){return this.hw},t.prototype.getRequestParameters=function(){return{pvt:this.hw}},t}(),Th=function(){function t(t){this.Re=t}return t.prototype.onAfterVisitorRenewal=function(){this.Re.startNewSession()},t}(),Oh=function(){function t(){var t=this;this.xi=!1,this._c=null,this.aw=null,this.ci=null,this.Ir=null,this.Gc=null,this.fw=function(){},this.lw=["value","checked","src","data","alt"],this.yw={state:Ii.SensitiveState.Child},this.pw=function(n){for(var i=0,r=n;i<r.length;i++){var e=r[i];if(Ii.isSensitive(e.target)||Ii.isSensitiveChild(e.target))for(var s=0;s<e.addedNodes.length;s+=1){var u=e.addedNodes[s];Ii.isSensitive(u)||Ii.isSensitiveChild(u)||a(u)&&t.mw(u)}}}}return t.prototype.startSensitiveIdentifier=function(t,n,i){var r,e,s,u,o,c=this;if(!this.xi){if(this.xi=!0,null!==(r=this.Gc)&&void 0!==r||(this.Gc=this.gw()),0!==t.length&&(null!==(e=this._c)&&void 0!==e||(this._c=this.Sw()),this._c.observe(t)),0!==n.length){null!==(s=this.aw)&&void 0!==s||(this.aw=this.Aw(n));var h=Ii.getComputedAttributeSelector(n);this.aw.observe(h)}null!==(u=this.ci)&&void 0!==u||(this.ci=new Fr(this.pw)),this.ci.observe(),null!==(o=this.Ir)&&void 0!==o||(this.Ir=new zr((function(t,n){return"added"===n&&c.bw(t)}))),this.Ir.observe(),setTimeout(i)}},t.prototype.stopSensitiveIdentifier=function(){var t,n,i,r;this.xi&&(this.xi=!1,this._c&&(this.Ew(document),this._c.disconnect()),null===(t=this.aw)||void 0===t||t.disconnect(),null===(n=this.ci)||void 0===n||n.disconnect(),null===(i=this.Ir)||void 0===i||i.disconnect(),null===(r=this.Gc)||void 0===r||r.disconnect())},t.prototype.unidentifySensitiveNodes=function(t){this.Ew(t)},t.prototype.onSensitiveElementResize=function(t){this.fw=t},t.prototype.gw=function(){var t=this;return window.ResizeObserver?new ResizeObserver((function(n){csArray.prototype.forEach.call(n,(function(n){t.Rw(n)}))})):null},t.prototype.Sw=function(){var t=this;return new Vr((function(n){csArray.prototype.forEach.call(n,(function(n){t.Nw(n)?t.mw(n):(t.Tw(n),t.Ow(n))}))}))},t.prototype.Aw=function(t){var n=this;return new Vr((function(i){csArray.prototype.forEach.call(i,(function(i){return n.kw(i,t)}))}))},t.prototype.Rw=function(t){var n=t.target.getBoundingClientRect(),i=Ii.getSensitiveDetails(t.target);if(i.state===Ii.SensitiveState.Parent&&(n.width!==i.width||n.height!==i.height)){var r={state:Ii.SensitiveState.Parent,width:n.width,height:n.height};Ii.setSensitiveProperty(t.target,r),this.fw({target:t.target,width:n.width,height:n.height})}},t.prototype.Ow=function(t){this.Gc&&a(t)&&!m(t)&&this.Gc.observe(t)},t.prototype.Nw=function(t){var n=csNodeparentNode.apply(t);return n?Ii.isSensitive(n)||Ii.isSensitiveChild(n):!!R(t)&&(Ii.isSensitive(t.host)||Ii.isSensitiveChild(t.host))},t.prototype.bw=function(t){(Ii.isSensitive(t.host)||Ii.isSensitiveChild(t.host))&&Ii.setSensitiveProperty(t,this.yw)},t.prototype.Ew=function(t){Ir(t,NodeFilter.SHOW_ELEMENT).visitAll((function(t){Ii.unsetSensitiveProperty(t)}))},t.prototype.Tw=function(t){var n=this,i=t.getBoundingClientRect(),r={state:Ii.SensitiveState.Parent,width:i.width,height:i.height};Ii.setSensitiveProperty(t,r),this.Iw(t),Ir(t).visitAll((function(i){return i!=t&&Ii.setSensitiveProperty(i,n.yw)}))},t.prototype.mw=function(t){var n=this;Ii.setSensitiveProperty(t,this.yw),Ir(t).visitAll((function(i){return i!=t&&Ii.setSensitiveProperty(i,n.yw)}))},t.prototype.Iw=function(t){for(var n,i=null!==(n=ki.getProperty(t,Ii.sensitiveAttributeProp))&&void 0!==n?n:{attributes:[]},r=0;r<this.lw.length;r+=1){var e=this.lw[r];-1===csArray.prototype.indexOf.call(i.attributes,e)&&csArray.prototype.push.call(i.attributes,e)}0!==i.attributes.length&&Ii.setSensitiveAttributeProperty(t,i)},t.prototype.kw=function(t,n){for(var i,r=null!==(i=ki.getProperty(t,Ii.sensitiveAttributeProp))&&void 0!==i?i:{attributes:[]},e=function(i){var e=t.attributes[i].name;-1===csArray.prototype.indexOf.call(r.attributes,e)&&csArray.prototype.some.call(n,(function(n){return csString.prototype.indexOf.call(n.attrName,e)>-1&&Ni.call(t,n.selector)}))&&csArray.prototype.push.call(r.attributes,e)},s=0;s<t.attributes.length;s+=1)e(s);0!==r.attributes.length&&Ii.setSensitiveAttributeProperty(t,r)},t}();!function(t){t.replayRecordingUnmaskedUrlRegex="replayRecordingUnmaskedUrlRegex",t.replayRecordingMaskedUrlRegex="replayRecordingMaskedUrlRegex",t.replayRecordingUnmaskedUrlRegexRules="replayRecordingUnmaskedUrlRegexRules",t.replayRecordingMaskedUrlRegexRules="replayRecordingMaskedUrlRegexRules"}(eh||(eh={})),function(t){t.START="start",t.NOT_START="not-start",t.END="end",t.NOT_END="not-end",t.CONTAIN="contain",t.NOT_CONTAIN="not-contain",t.EXACT="exact",t.NOT_EXACT="not-exact"}(sh||(sh={}));var kh,Ih=function(){function t(t,n,i,r){this.ol=t,this.L=n,this.tt=i,this.Cw=r}return t.prototype.init=function(){this.xw()},t.prototype.shouldUseAnonymization=function(){if(this.ol.isReplayUnanonymizedAllowedByConsent()){switch(this.L.anonymisationMethod){case null:case eh.replayRecordingMaskedUrlRegex:return!(!this.L.replayRecordingMaskedUrlRegex||!this.L.replayRecordingMaskedUrlRegex.test(this.tt.getAnonymizedUrl()));case eh.replayRecordingMaskedUrlRegexRules:return this.Cw.evaluateUrl(this.tt.getAnonymizedUrl())}return!1}switch(this.L.anonymisationMethod){case null:case eh.replayRecordingUnmaskedUrlRegex:return!(this.L.replayRecordingUnmaskedUrlRegex&&this.L.replayRecordingUnmaskedUrlRegex.test(this.tt.getAnonymizedUrl()));case eh.replayRecordingUnmaskedUrlRegexRules:return!this.Cw.evaluateUrl(this.tt.getAnonymizedUrl())}return!0},t.prototype.xw=function(){this.L.anonymisationMethod===eh.replayRecordingMaskedUrlRegexRules&&this.L.replayRecordingMaskedUrlRegexRules?this.Cw.setRegexRules(this.L.replayRecordingMaskedUrlRegexRules):this.L.anonymisationMethod===eh.replayRecordingUnmaskedUrlRegexRules&&this.L.replayRecordingUnmaskedUrlRegexRules&&this.Cw.setRegexRules(this.L.replayRecordingUnmaskedUrlRegexRules)},t}(),Ch=function(){function t(){this._w=[]}return t.prototype.setRegexRules=function(t){var n=this;this._w=csArray.prototype.map.call(t,(function(t){return n.Mw(t)}))},t.prototype.evaluateUrl=function(t){var n=this;return csArray.prototype.some.call(this._w,(function(i){var r,e,s=n.Pw(t,i);return(null==i?void 0:i.notOperator)?!(null===(r=i.regex)||void 0===r?void 0:r.test(s)):null===(e=i.regex)||void 0===e?void 0:e.test(s)}))},t.prototype.Pw=function(t,n){var i=Qt(t);return i?n.ignoreQueryParams&&n.ignoreURIFragments?"".concat(i.origin).concat(i.pathname):n.ignoreQueryParams?"".concat(i.origin).concat(i.pathname).concat(i.hash):n.ignoreURIFragments?"".concat(i.origin).concat(i.pathname).concat(i.search):t:t},t.prototype.Dw=function(t){return t.ignoreCaseSensitivity?"i":""},t.prototype.Mw=function(t){switch(t.operator){case sh.NOT_START:t.notOperator=!0;case sh.START:t.regex=new RegExp("^".concat(t.value),this.Dw(t));break;case sh.NOT_END:t.notOperator=!0;case sh.END:t.regex=new RegExp("".concat(t.value,"$"),this.Dw(t));break;case sh.NOT_CONTAIN:t.notOperator=!0;case sh.CONTAIN:t.regex=new RegExp("".concat(t.value),this.Dw(t));break;case sh.NOT_EXACT:t.notOperator=!0;case sh.EXACT:t.regex=new RegExp("^".concat(t.value,"$"),this.Dw(t));break;default:hn.warn("buildRegexWithRule, unknown type: ".concat(t.operator))}return t},t}(),xh=function(){function t(){this.Lw=["application/json","application/graphql","application/xml","text/plain","text/csv","text/html","text/xml"]}return t.prototype.setCollectionOptions=function(t){this.Uw=t},t.prototype.isValidBodyType=function(t){var n=t["content-type"];if(!n)return!1;var i=csString.prototype.toLocaleLowerCase.call(n);return Qi(this.Lw,(function(t){return nt(i,t)}))},t.prototype.canCollect=function(t,n){return this.jw(t,n)&&this.qw(n)},t.prototype.jw=function(t,n){return t>=400||t>=200&&t<300&&this.Uw.statusCodes.has(t)&&this.Hw(n)},t.prototype.Hw=function(t){return Qi(this.Uw.urls,(function(n){return-1!==csString.prototype.indexOf.call(t,n)}))},t.prototype.qw=function(t){return function(t,n){for(var i=t.length,r=0;r<i;r++)if(!n(t[r],r))return!1;return!0}(this.Uw.excludedDomains,(function(n){return-1===csString.prototype.indexOf.call(t,n)}))},t}(),_h=function(t){function n(){var n=t.call(this)||this;return n.zw=csSymbol("ApiCall"),n.xi=!1,n.Bw=null,n.Fw=null,n.Vw=null,n.Gw=function(t){var i=t.context,r=t.args,e=t.callerName;return n.interceptOpen(i,r,e)},n.Jw=function(t){var i=t.context,r=t.args;return n.interceptSetRequestHeader(i,r)},n.Ww=function(t){var i=t.context,r=t.args;return n.interceptSend(i,r)},n}return J(n,t),n.prototype.onEvent=function(t){this.pi=t},n.prototype.start=function(){this.xi||(this.Yw(),this.Bw&&this.Bw.activate(),this.Fw&&this.Fw.activate(),this.Vw&&this.Vw.activate(),this.xi=!0)},n.prototype.stop=function(){this.xi&&(this.Bw&&this.Bw.deactivate(),this.Fw&&this.Fw.deactivate(),this.xi=!1)},n.prototype.Yw=function(){this.Bw||(this.Bw=jr({target:XMLHttpRequest.prototype,methodName:"open",hook:this.Gw,options:{withCallerName:!0}})),this.Fw||(this.Fw=jr({target:XMLHttpRequest.prototype,methodName:"setRequestHeader",hook:this.Jw})),this.Vw||(this.Vw=jr({target:XMLHttpRequest.prototype,methodName:"send",hook:this.Ww}))},n.prototype.interceptOpen=function(t,n,i){var r=this;if(n[1]&&xt(n[1])){var e=csString.prototype.split.call(n[1],"?"),s=e[0],u=e[1];t[this.zw]={library:i,requestTime:Et(),method:n[0],url:Yt(s),queryParameters:u,statusCode:0,responseHeaders:{},requestHeaders:{},responseBody:"",requestBody:""},t.addEventListener("readystatechange",(function(){return r.readyStateChangeListener(t)}))}},n.prototype.readyStateChangeListener=function(n){n[this.zw]&&n.readyState===XMLHttpRequest.DONE&&this.canCollect(n.status,n[this.zw].url)&&(n[this.zw].responseTime=Et(),n[this.zw].statusCode=n.status,n[this.zw].responseHeaders=this.Xw(n.getAllResponseHeaders()),!t.prototype.isValidBodyType.call(this,n[this.zw].responseHeaders)||""!==n.responseType&&"text"!==n.responseType||(n[this.zw].responseBody=n.responseText),this.pi(n[this.zw]))},n.prototype.interceptSetRequestHeader=function(t,n){if(t[this.zw]){var i=n[0],r=csString.prototype.valueOf.call(new csString(n[1]));"string"==typeof i&&0!==r.length&&(i=csString.prototype.toLowerCase.call(csString.prototype.trim.call(i)),r=csString.prototype.trim.call(r),t[this.zw].requestHeaders[i]?t[this.zw].requestHeaders[i]+=", ".concat(r):t[this.zw].requestHeaders[i]=r)}},n.prototype.interceptSend=function(n,i){n[this.zw]&&t.prototype.isValidBodyType.call(this,n[this.zw].requestHeaders)&&"string"==typeof i[0]&&(n[this.zw].requestBody=i[0])},n.prototype.Xw=function(t){var n={};return csArray.prototype.forEach.call(csString.prototype.split.call(t,/[\r\n]+/),(function(t){var i=csString.prototype.split.call(t,/:\s*/),r=i[0],e=i[1];e&&(n[csString.prototype.toLowerCase.call(r)]=csString.prototype.trim.call(e))})),n},X([wn("XhrRequestTracker.interceptOpen")],n.prototype,"interceptOpen",null),X([wn("XhrRequestTracker.readyStateChangeListener")],n.prototype,"readyStateChangeListener",null),X([wn("XhrRequestTracker.interceptSetRequestHeader")],n.prototype,"interceptSetRequestHeader",null),X([wn("XhrRequestTracker.interceptSend")],n.prototype,"interceptSend",null),n}(xh),Mh=function(t){function n(){var n=t.call(this)||this;return n.xi=!1,n.$w=null,n.Kw=function(t){var i=t.result,r=t.args,e=t.callerName;n.interceptFetch(i,r,e)},n}return J(n,t),n.prototype.onEvent=function(t){this.pi=t},n.prototype.start=function(){this.xi||this.Zw()&&(this.Qw(),this.$w&&this.$w.activate(),this.xi=!0)},n.prototype.stop=function(){this.xi&&(this.$w&&this.$w.deactivate(),this.xi=!1)},n.prototype.Zw=function(){return!!window.fetch&&"function"==typeof window.fetch},n.prototype.ty=function(t){if(t[0]&&"function"==typeof t[0].clone){var n=Yi(t);return n[0]=t[0].clone(),n}return t},n.prototype.Qw=function(){this.$w||(this.$w=jr({target:window,methodName:"fetch",hook:this.Kw,hookPrepareArgs:this.ty,options:{withCallerName:!0}}))},n.prototype.interceptFetch=function(n,i,r){return $(this,void 0,void 0,(function(){var e,s,u,o,c,h,a,f,v,l,d,w,y;return K(this,(function(p){switch(p.label){case 0:if(e=i[0],s=i[1],!xt((u=new Request(e,s)).url))return[2];o=Et(),p.label=1;case 1:return p.trys.push([1,3,,4]),[4,n];case 2:return c=p.sent(),[3,4];case 3:if(h=p.sent(),this.ny(h)||this.iy(h)||this.ey(h))return[2];throw h;case 4:return a=csString.prototype.split.call(u.url,"?"),f=a[0],v=a[1],l=Yt(f),t.prototype.canCollect.call(this,c.status,l)?(d={library:r,method:u.method,url:l,queryParameters:v,requestTime:o,responseTime:Et(),statusCode:c.status,requestBody:"",responseBody:"",requestHeaders:this.sy(u.headers),responseHeaders:this.sy(c.headers)},c.bodyUsed||!t.prototype.isValidBodyType.call(this,d.responseHeaders)?[3,6]:(w=d,[4,c.clone().text()])):[3,9];case 5:w.responseBody=p.sent(),p.label=6;case 6:return t.prototype.isValidBodyType.call(this,d.requestHeaders)?(y=d,[4,u.text()]):[3,8];case 7:y.requestBody=p.sent(),p.label=8;case 8:this.pi(d),p.label=9;case 9:return[2]}}))}))},n.prototype.ny=function(t){return t instanceof TypeError},n.prototype.iy=function(t){return t instanceof DOMException&&"AbortError"===t.name},n.prototype.ey=function(t){return t instanceof DOMException&&csArray.prototype.some.call(n.uy,(function(n){return n===t.name}))},n.prototype.sy=function(t){var n={};return t.forEach((function(t,i){t&&(n[csString.prototype.toLowerCase.call(i)]=csString.prototype.trim.call(t))})),n},n.uy=["NoModificationAllowedError","InvalidStateError","OperationError"],X([wn("FetchRequestTracker.interceptFetch")],n.prototype,"interceptFetch",null),n}(xh),Ph=function(){function t(){this.oy=64e3,this.hy=5e3,this.vy=2e3,this.ly=8e3,this.Wc=!!self.TextEncoder,this.Wc&&(this.wy=new TextEncoder)}return t.prototype.yy=function(t){return this.wy.encode(t).byteLength},t.prototype.py=function(n,i,r){var e=0;n[i]&&(e+=this.yy(n[i]))>this.ly&&(e=0,n[i]=t.truncatedErrorMessageMarker),n[r]&&(e+=this.yy(csJSON.stringify(n[r])))>this.ly&&(n[r]=t.truncatedObjectMarker)},t.prototype.my=function(n){n.queryParameters&&this.yy(n.queryParameters)>this.vy&&(n.queryParameters=t.truncatedErrorMessageMarker)},t.prototype.gy=function(n){n.requestBody&&this.yy(n.requestBody)>this.oy&&(n.requestBody=t.truncatedErrorMessageMarker),n.responseBody&&this.yy(n.responseBody)>this.hy&&(n.responseBody=t.truncatedErrorMessageMarker)},t.prototype.truncate=function(t){this.Wc?(this.my(t),this.gy(t),this.py(t,"customResponseHeaders","plainCustomResponseHeaders"),this.py(t,"customRequestHeaders","plainCustomRequestHeaders")):(t.queryParameters="",t.requestBody="",t.responseBody="",t.customResponseHeaders="",t.customRequestHeaders="",t.plainCustomResponseHeaders={},t.plainCustomRequestHeaders={})},t.truncatedErrorMessageMarker=Wc.ellipsis,t.truncatedObjectMarker={"…":Wc.ellipsis},t}();!function(t){t.isValidJSONPath=function(t){if(!t)return!0;if(!function(t){for(var n=[],i=0;i<t.length;++i)if("["===t[i])csArray.prototype.push.call(n,t[i]);else if("]"===t[i]){if(!(csString.prototype.indexOf.call(t,"[")>-1))return!1;csArray.prototype.pop.call(n)}return 0===n.length}(t))return!1;var n=csString.prototype.split.call(t,/[\[\]]/);return csArray.prototype.every.call(n,(function(t){var n=t[0],i=t[t.length-1];if(("'"===n||'"'===n)&&n!==i)return!1;var r=csString.prototype.split.call(t,".");return 0===r[0].length&&csArray.prototype.shift.call(r),csArray.prototype.every.call(r,(function(t){var n=/^\-?\d+$/.exec(t);return n?parseInt(n[0],10)>=0:"$"===t||/\w+/.test(t)}))}))},t.getJSONPathValue=function(t,n){if(t){var i=csString.prototype.split.call(t,/[\$\[\]]/),r=[];csArray.prototype.forEach.call(i,(function(t){var n;"'"!==t[0]&&'"'!==t[0]?(n=csArray.prototype.push).call.apply(n,ti([r],csArray.prototype.filter.call(csString.prototype.split.call(t,"."),(function(t){return t.length>0})),!1)):csArray.prototype.push.call(r,csString.prototype.substring.call(t,1,t.length-1))})),"$"===r[0]&&csArray.prototype.shift.call(r);for(var e=n,s=0,u=r;s<u.length;s++){var o=u[s];if(void 0===e[o])return;e=e[o]}return e}}}(kh||(kh={}));var Dh,Lh=function(){function t(){this.Sy=new Set(["age","cache-control","clear-site-data","expires","pragma","warning","downlink","ect","rtt","last-modified","connection","keep-alive","accept","accept-encoding","accept-language","expect","access-control-allow-origin","access-control-allow-credentials","access-control-allow-headers","access-control-allow-methods","access-control-expose-headers","access-control-max-age","access-control-request-headers","access-control-request-method","origin","timing-allow-origin","content-length","content-type","content-encoding","content-language","via","host","referrer-policy","user-agent","allow","server","accept-ranges","range","if-range","content-range","cross-origin-embedder-policy","cross-origin-opener-policy","cross-origin-resource-policy","content-security-policy","content-security-policy-report-only","expect-ct","feature-policy","strict-transport-security","upgrade-insecure-requests","x-content-type-options","x-download-options","x-frame-options","x-permitted-cross-domain-policies","x-powered-by","x-xss-protection","sec-fetch-site","sec-fetch-mode","sec-fetch-user","sec-fetch-dest"])}return t.prototype.isValidStandardHeader=function(t){return this.Sy.has(t)},t}(),Uh=function(){function t(){this.Ay=64e3,this.by=50,this.Ey={collectQueryParam:!1,collectRequestBody:!1,collectResponseBody:!1,matchingBodyContents:[],plainResponseBodyAttributes:{},plainRequestBodyAttributes:{},requestBodyAttributes:{},responseBodyAttributes:{},standardRequestHeaders:{},standardResponseHeaders:{},customRequestHeaders:{},customResponseHeaders:{},plainCustomRequestHeaders:{},plainCustomResponseHeaders:{}},this.Ry=new Lh}return t.prototype.Ny=function(t){return t.length<=this.Ay},t.prototype.Ty=function(t){var n=t["content-type"];return void 0!==n&&(Tt(n,"application/json")||Tt(n,"application/graphql"))},t.prototype.Oy=function(t,n){return t&&this.Ny(t)&&this.Ty(n)},t.prototype.ky=function(t,n,i,r){var e="request"===r?this.Iy:this.Cy;if(void 0!==e||this.Oy(n,i)){if(void 0===e)try{e=csJSON.parse(n),"request"===r?this.Iy=e:this.Cy=e}catch(t){return}var s=kh.getJSONPathValue(t,e);if(void 0!==s&&(null===s||!_t(s))){var u=xt(s)?s:csJSON.stringify(s);return Wc.truncateStringWithEllipsis(u,this.by)}}},t.prototype.isBodyAttributeValueFound=function(t,n){var i,r;return"request-response"!==n.type&&"response"!==n.type||(i=this.ky(n.path,t.responseBody,t.responseHeaders,"response")),"request-response"!==n.type&&"request"!==n.type||(r=this.ky(n.path,t.requestBody,t.requestHeaders,"request")),Mt(i)||Mt(r)},t.prototype.collectBodyAttribute=function(t,n,i){var r;"request-response"!==n.type&&"response"!==n.type||(r=this.ky(n.path,t.responseBody,t.responseHeaders,"response"))&&(n.encrypted?this.Ey.responseBodyAttributes[n.path]=r:(r=i(r),this.Ey.plainResponseBodyAttributes[n.path]=r)),"request-response"!==n.type&&"request"!==n.type||(r=this.ky(n.path,t.requestBody,t.requestHeaders,"request"))&&(n.encrypted?r&&(this.Ey.requestBodyAttributes[n.path]=r):(r=i(r),this.Ey.plainRequestBodyAttributes[n.path]=r))},t.prototype.isBodyContentMatching=function(t,n){return!!t.responseBody&&!!new RegExp(n,"i").test(t.responseBody)},t.prototype.collectBodyContent=function(t){-1===csArray.prototype.indexOf.call(this.Ey.matchingBodyContents,t)&&csArray.prototype.push.call(this.Ey.matchingBodyContents,t)},t.prototype.collectCustomHeaders=function(t,n,i){var r=csString.prototype.toLocaleLowerCase.call(n.headerName);!t.responseHeaders[r]||"request-response"!==n.type&&"response"!==n.type||(n.encrypted?this.Ey.customResponseHeaders[r]=t.responseHeaders[r]:this.Ey.plainCustomResponseHeaders[r]=i(t.responseHeaders[r])),!t.requestHeaders[r]||"request-response"!==n.type&&"request"!==n.type||(n.encrypted?this.Ey.customRequestHeaders[r]=t.requestHeaders[r]:this.Ey.plainCustomRequestHeaders[r]=i(t.requestHeaders[r]))},t.prototype.collectStandardHeaders=function(t){if(!(Object.keys(this.Ey.standardRequestHeaders).length>0||Object.keys(this.Ey.standardResponseHeaders).length>0)){for(var n=0,i=Object.entries(t.requestHeaders);n<i.length;n++){var r=i[n],e=r[0],s=r[1];this.Ry.isValidStandardHeader(e)&&(this.Ey.standardRequestHeaders[e]=s)}for(var u=0,o=Object.entries(t.responseHeaders);u<o.length;u++){var c=o[u],h=c[0];s=c[1];this.Ry.isValidStandardHeader(h)&&(this.Ey.standardResponseHeaders[h]=s)}}},t.prototype.setCollectQueryParam=function(t){t&&(this.Ey.collectQueryParam=!0)},t.prototype.setCollectResponseBody=function(t){t&&(this.Ey.collectResponseBody=!0)},t.prototype.setCollectRequestBody=function(t){t&&(this.Ey.collectRequestBody=!0)},t.prototype.getCollectedDataPoints=function(){return this.Ey},t}();!function(t){t.CONTENTSQUARE="contentsquare.net",t.CLICKTALE="clicktale.net",t.FAKE_TRACKER="fake-tracker.content-square.fr"}(Dh||(Dh={}));var jh,qh=function(){function t(){}return t.prototype.computeApiErrorCollectionOptions=function(){var t=new Set,n=[];if(this.rules)for(var i=0,r=this.rules;i<r.length;i++){var e=r[i];void 0!==e.statusCode&&t.add(e.statusCode),void 0!==e.url&&-1===csArray.prototype.indexOf.call(n,e.url)&&csArray.prototype.push.call(n,e.url)}var s=[Dh.CONTENTSQUARE,Dh.CLICKTALE];return csArray.prototype.push.call(s,Dh.FAKE_TRACKER),{statusCodes:t,urls:n,excludedDomains:s}},t}(),Hh=function(t){function n(n,i){var r=t.call(this)||this;return r.xy=n,r.U=i,r.rules=n.collectionRules,r}return J(n,t),n.prototype.collectDataPoints=function(t,n){this.Ey=new Uh;var i=!1;if(this.xy.collectionRules)for(var r=0,e=this.xy.collectionRules;r<e.length;r++){var s=e[r];this._y(s,t)&&this.My(s,t)&&this.Py(s,t)&&(i=!0,this.Dy(t,s,n))}return i||(i=this.Ly(t)),i&&n&&this.xy.collectStandardHeaders&&this.Ey.collectStandardHeaders(t),i?this.Ey.getCollectedDataPoints():null},n.prototype.computeApiErrorCollectionOptions=function(){for(var t=this.xy.collectionRules||[],n=new Set,i=[],r=0,e=t;r<e.length;r++){var s=e[r];void 0!==s.statusCode&&n.add(s.statusCode),void 0!==s.url&&-1===csArray.prototype.indexOf.call(i,s.url)&&csArray.prototype.push.call(i,s.url)}var u=[Dh.CONTENTSQUARE,Dh.CLICKTALE];return csArray.prototype.push.call(u,Dh.FAKE_TRACKER),{statusCodes:n,urls:i,excludedDomains:u}},n.prototype._y=function(t,n){return(!t.statusCode&&n.statusCode>=400||void 0!==t.statusCode&&t.statusCode===n.statusCode)&&(!t.url||-1!==csString.prototype.indexOf.call(n.url,t.url))},n.prototype.My=function(t,n){return!t.bodyContent||this.Ey.isBodyContentMatching(n,t.bodyContent)},n.prototype.Py=function(t,n){var i=csArray.prototype.find.call(t.bodyAttributePaths,(function(t){return t.primary}));return void 0===i||this.Ey.isBodyAttributeValueFound(n,i)},n.prototype.Ly=function(t){return t.statusCode>=400},n.prototype.Dy=function(t,n,i){var r=this;n.bodyContent&&this.Ey.collectBodyContent(n.bodyContent);var e=Zi(n.bodyAttributePaths,(function(t){return 1===t.primary}));if(e&&this.Ey.collectBodyAttribute(t,e,(function(t){return r.U.anonymizePII(t)})),i){this.Ey.setCollectQueryParam(n.collectQueryParam),this.Ey.setCollectResponseBody(n.collectResponseBody),this.Ey.setCollectRequestBody(n.collectRequestBody);for(var s=0,u=n.customHeaders;s<u.length;s++){var o=u[s];this.Ey.collectCustomHeaders(t,o,(function(t){return r.U.anonymizePII(t)}))}for(var c=0,h=tr(n.bodyAttributePaths,(function(t){return!t.primary}));c<h.length;c++){var a=h[c];this.Ey.collectBodyAttribute(t,a,(function(t){return r.U.anonymizePII(t)}))}}},n}(qh),zh=function(t){function n(n,i){var r=t.call(this)||this;return r.xy=n,r.U=i,r.rules=n.configurableApiErrorRules,r}return J(n,t),n.prototype.collectDataPoints=function(t,n){this.Ey=new Uh;var i=this.Uy(t,this.xy.configurableApiErrorRules);return i.isMatching?(i.matchingBodyContents.length>0&&this.Ey.collectBodyContent(i.matchingBodyContents[0]),n&&this.jy(t),this.Ey.getCollectedDataPoints()):null},n.prototype.computeApiErrorCollectionOptions=function(){for(var t=this.xy.configurableApiErrorRules||[],n=new Set,i=[],r=0,e=t;r<e.length;r++){var s=e[r];void 0!==s.statusCode&&n.add(s.statusCode),void 0!==s.url&&-1===csArray.prototype.indexOf.call(i,s.url)&&csArray.prototype.push.call(i,s.url)}var u=[Dh.CONTENTSQUARE,Dh.CLICKTALE];return csArray.prototype.push.call(u,Dh.FAKE_TRACKER),{statusCodes:n,urls:i,excludedDomains:u}},n.prototype.Uy=function(t,n){if(t.statusCode>=400)return{isMatching:!0,matchingBodyContents:[]};if(n)for(var i=0,r=n;i<r.length;i++){var e=r[i];if(this.qy(t,e))return{isMatching:!0,matchingBodyContents:e.bodyContent?[e.bodyContent]:[]}}return{isMatching:!1,matchingBodyContents:[]}},n.prototype.qy=function(t,n){return!(t.statusCode!==n.statusCode||-1===csString.prototype.indexOf.call(t.url,n.url)||n.bodyContent&&!this.Ey.isBodyContentMatching(t,n.bodyContent))},n.prototype.jy=function(t){this.xy.collectStandardHeaders&&this.Ey.collectStandardHeaders(t),this.xy.validCustomHeaders&&this.Hy(t,this.xy.validCustomHeaders,Number(!0)),this.xy.plainCustomHeaders&&this.Hy(t,this.xy.plainCustomHeaders,Number(!1)),this.Hw(t.url,this.xy.validUrls)&&(this.xy.collectQueryParam&&this.Ey.setCollectQueryParam(Number(this.xy.collectQueryParam)),this.xy.collectResponseBody&&this.Ey.setCollectResponseBody(Number(this.xy.collectResponseBody)),this.xy.collectRequestBody&&this.Ey.setCollectRequestBody(Number(this.xy.collectRequestBody)))},n.prototype.Hy=function(t,n,i){for(var r=this,e=0,s=n;e<s.length;e++){var u=s[e];this.Ey.collectCustomHeaders(t,{headerName:u,encrypted:i,type:"request-response"},(function(t){return r.U.anonymizePII(t)}))}},n.prototype.Hw=function(t,n){return!!n&&csArray.prototype.some.call(n,(function(n){return-1!==csString.prototype.indexOf.call(t,n)}))},n}(qh),Bh=function(){function t(t,n,i,r,e,s,u,o,c,h,a,f,v,l,d,w,y,p,m,g,S,A,b,E,R,N,T){var O=this;this.oa=t,this.mf=n,this.Y=i,this.X=r,this.hi=e,this.Ia=s,this.zy=u,this.L=o,this.By=c,this.Fy=h,this.Vy=a,this.ol=f,this.U=v,this.Av=l,this.Pa=d,this.tt=w,this.Gy=y,this.Ol=p,this.hf=m,this.un=g,this.Jy=S,this._a=A,this.Wy=b,this.Iu=E,this.Ma=R,this.cn=N,this.Yy=T,this.Xy=function(t){void 0===t&&(t=!1),O.$y.start(t),O.Ky.start()}}return t.prototype.start=function(){var t,n,i,r,e,s,u,o,c,h,a,f,v,l,d,w=this;(this.By.init(),this.Fy.init(),this.Fy.isActive())||(this.Iu.schedule((function(){v=new Fc(w.X,w.Y),d=new Th(v),f=new Pc(w.Av),t=new Sc(w.L,w.oa,w.Y,w.Av,f,w.Ia,v,new wh(hn),w.hf,w.Ma),n=new Yu(w.Ia,w.X,w.L,w.oa,w.mf,w.U);var y=new Oh;l=new oh(w.L,y),a=new mh;var p=new ah(w.L);(h=new hh(w.L,p,a,w.hf)).init();var m=new Nh;i=new Fu(w.Y,w.X,w.Ia,w.hf,p,w.L,m,a),r=new ro(w.L,w.oa,w.Y,w.Ia,w.U,v,w.tt),w.$y=new Mc(w.L,w.Ia,w.hi,w.oa,w.Y,w.X,w.ol,w.un,w.Pa,w.tt,w._a,m),e=new Bc(w.L,w.Y,w.X,w.Ia),s=new Yc(w.L,w.X,w.tt,w.Ia,w.Xy,l),u=new Qc(w.L,w.Ia,w.mf,w.oa,w.Ol),o=new ch(w.Ia),c=new ph(w.L,new kt(w.L,w.U),w.Ma),w.Ky=new Dc})),this.L.apiErrors.enabled&&this.Iu.schedule((function(){var t,n;n=(null===(t=w.L.apiErrors.collectionRules)||void 0===t?void 0:t.length)?new Hh(w.L.apiErrors,w.U):new zh(w.L.apiErrors,w.U),w.Oe=new vh(new _h,new Mh,n),w.ke=new lh(w.Pa),w.Le=new Ph;var i=new Ah(w.Oe,w.ke,w.L,w.oa,w.hf,w.Ia,w.Ma);i.init(),w.hi.addListener(i)})),this.L.jsErrorsEnabled&&this.Iu.schedule((function(){w.Ne=new nh,w.Te=new dh(w.U,w.tt);var t=new Rh(w.Ne,w.Te,w.L,w.oa,w.hf,w.Ia,w.Ol,w.tt,w.Ma);t.init(),w.hi.addListener(t)})),this.Iu.schedule((function(){w.Vy.init()})),this.Iu.schedule((function(){i.init()})),this.Iu.schedule((function(){n.init()})),this.Iu.schedule((function(){r.init()})),this.Iu.schedule((function(){w.Jy.init()})),this.Iu.schedule((function(){w.$y.init()})),this.Iu.schedule((function(){e.init()})),this.Iu.schedule((function(){s.init()})),this.Iu.schedule((function(){u.init()})),this.Iu.schedule((function(){w.Gy.init()})),this.Iu.schedule((function(){o.init()})),this.Iu.schedule((function(){c.init()})),this.Iu.schedule((function(){w.Wy.init()})),this.Iu.schedule((function(){w.hi.addListener(e),w.hi.addListener(w.zy),w.hi.addListener(t),w.hi.addListener(w.Vy),w.hi.addListener(i),w.hi.addListener(w.Jy),w.hi.addListener(w.$y),w.hi.addListener(s),w.hi.addListener(u),w.hi.addListener(n),w.hi.addListener(h),w.hi.addListener(c),w.hi.addListener(d)})),Ls.isRecordingSupported()&&this.Iu.schedule((function(){var t=new Iu(a,w.X,w.L,w.oa,w.Ia,w.U,v,l,w.Ne,w.Te,w.Oe,w.ke,w.hi,w.Ol,w.hf,w._a,w.Iu,w.Ma,w.Pa,w.Le,w.Zy());t.init(),w.hi.addListener(t),i.setRecordingService(t.recordingService)})),this.Iu.schedule((function(){t.init()})),this.Iu.schedule((function(){v.onSessionExpired((function(){w.hi.emitBeforeSessionRenewal(),w.Qy(!0),w.hi.emitAfterSessionRenewal()})),w.Qy()})))},t.prototype.Qy=function(t){var n,i=this;void 0===t&&(t=!1),this.Ia.start(),this.Ky.onLoad((function(){i.hi.emitStartTracking(t)})),(Vc(this.L)||this.tp()||this.np())&&!t||this.Xy(t),this.np()&&(null===(n=this.ip)||void 0===n||n.init())},t.prototype.tp=function(){var t;null===(t=window.heap)||void 0===t||t.getUserId;return!1},t.prototype.np=function(){return!1},t.prototype.Zy=function(){if(this.Da)return this.Da;var t=new Ch;return this.Da=new Ih(this.ol,this.L,this.tt,t),this.Da.init(),this.Da},t}(),Fh=function(){function t(t,n,i,r,e,s,u,o){this.L=t,this.Y=n,this.en=i,this.rp=r,this.ep=e,this.sp=s,this.up=u,this.op=o}return t.prototype.compute=function(t){var n,i,r=this;this.L.crossDomainTracking&&!this.L.cookielessTrackingEnabled?this.L.crossDomainSingleIframeTracking?null===(n=this.up)||void 0===n||n.start((function(){return r.cp(t)})):null===(i=this.sp)||void 0===i||i.applyUpToDate((function(){return r.cp(t)})):this.cp(t)},t.prototype.cp=function(t){this.ep.handle(),this.rp.clear(),this.hp()?(this.rp.restoreClearedVisitor(),t(!0)):(this.en.exclude(this.L),t(!1))},t.prototype.hp=function(){var t=et.boolean(this.L.sampleRate);return this.op.isForceIncluded()||!this.en.isExcluded()&&this.Y.doesVisitorExist()||!this.en.isExcluded()&&t},t}();!function(t){t.generate=function(){var t=navigator.userAgent+navigator.language+navigator.platform,n=csString.prototype.slice.call(function(t){for(var n=0,i=0;i<t.length;i+=1)n=csString.prototype.charCodeAt.call(t,i)+(n<<6)+(n<<16)-n;return Math.abs(n)}(t).toString(16),-4),i=(new csDate).getTime(),r="xxxxxxxx-hhhh-axxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(t){var n=(i+16*Math.random())%16|0;return i=Math.floor(i/16),("x"===t?n:7&n|8).toString(16)}));return csString.prototype.replace.call(r,"hhhh",n)}}(jh||(jh={}));var Vh,Gh=function(){function t(t,n,i,r){this.L=t,this.ap=n,this.X=i,this.hi=r,this.fp=1e4}return t.prototype.createOrUpdateVisitor=function(){var t=this.getVisitor();null===t&&(t=this.vp(),this.X.removeSession()),this.lp(t),this.setVisitor(t)},t.prototype.vp=function(){return{id:jh.generate(),visitsCount:0,appliedTrackingDraw:this.L.lastTrackingDraw,creationTimestamp:Rt(),lastVisitTimestamp:0,hitTimestamp:0,expires:Et()+this.L.visitorCookieTimeout,allowSubdomains:this.L.allowSubdomains}},t.prototype.lp=function(t){var n=Rt();this.X.doesSessionExist()||(t.visitsCount+=1,t.lastVisitTimestamp=n),t.hitTimestamp=n,t.appliedTrackingDraw=this.L.lastTrackingDraw,this.dp=t.visitsCount},t.prototype.getRequestParameters=function(){var t=this.getVisitor();return t?{uu:t.id,sn:"".concat(t.visitsCount),hd:"".concat(t.hitTimestamp)}:{}},t.prototype.getVisitor=function(){return this.ap.get()},t.prototype.setVisitor=function(t){this.ap.set(t)},t.prototype.doesVisitorExist=function(){return null!==this.ap.get()},t.prototype.resetVisitor=function(){this.wp(),this.hi.emitAfterVisitorCleared()},t.prototype.removeVisitor=function(){this.ap.remove()},t.prototype.hasAllowSubdomainsChanged=function(){var t=this.getVisitor();return!!t&&t.allowSubdomains!==this.L.allowSubdomains},t.prototype.handleSubdomainChange=function(){this.ap.handleSubdomainChange()},t.prototype.isSessionRenewed=function(){var t=this.getVisitor();return null!==t&&void 0!==this.dp&&t.visitsCount!==this.dp},t.prototype.yp=function(){return!Mt(this.pp)||Et()-this.pp>this.fp},t.prototype.renewVisitor=function(){this.yp()?(this.pp=Et(),this.wp(),this.hi.emitAfterVisitorRenewal()):hn.warn("session:start:newVisitor is trying to renew visitor under time limit")},t.prototype.wp=function(){this.hi.emitBeforeVisitorRenewal(),this.removeVisitor()},t}();!function(t){t[t.NO=0]="NO",t[t.WITHDRAWN=1]="WITHDRAWN",t[t.GRANTED=2]="GRANTED"}(Vh||(Vh={}));var Jh,Wh=function(){function t(t,n){this.mp=t,this.gp=n,this.Sp=null,this.Ap=0,this.bp=Vh.NO}return t.prototype.setDynamicVariablesService=function(t){this.Ep=t},t.prototype.createOrUpdateSession=function(){this.Rp(),this.Np=Et(),this.Ap=0;var t=this.Tp();null===t?(t=this.Op(),this.kp(t),this.Ip(t)):(t=this.gp.sanitizeSessionRecordingState(t),this.kp(t),t.recordingState=this.gp.updateRecordingState(t)),this.setSession(t)},t.prototype.grantReplayRecording=function(t){t.recordingState=this.gp.getDisabledRecordingState(),t.recordingState=this.gp.computeInitialRecordingStateFromRecordingConsentGranted(t),this.setSession(t)},t.prototype.grantReplayRecordingBeforeSessionStart=function(){this.bp=Vh.GRANTED},t.prototype.withdrawnReplayRecording=function(t){t.recordingState=this.gp.getConsentWithdrawnRecordingState(),this.setSession(t)},t.prototype.withdrawnReplayRecordingBeforeSessionStart=function(){this.bp=Vh.WITHDRAWN},t.prototype.Ip=function(t){this.bp===Vh.WITHDRAWN?(t.recordingState=this.gp.getConsentWithdrawnRecordingState(),this.setSession(t)):this.bp===Vh.GRANTED?t.recordingState=this.gp.computeInitialRecordingStateFromRecordingConsentGranted(t):t.recordingState=this.gp.computeInitialRecordingState(t),this.bp=Vh.NO},t.prototype.Op=function(){return{pageNumber:0,recordingState:this.gp.getDisabledRecordingState(),etrState:Rn.ETR_OFF}},t.prototype.kp=function(t){t.pageNumber+=1},t.prototype.isReplayRecorded=function(){var t=this.getSession();return!!t&&this.gp.isReplayRecorded(t)},t.prototype.isTemporarilyRecorded=function(){var t=this.getSession();return(null==t?void 0:t.recordingState)===En.TEMPORARILY_RECORDED},t.prototype.abortQuotaServiceRequest=function(){this.gp.abortQuotaServiceRequest()},t.prototype.getRequestParameters=function(){var t={},n=this.getSession();return null!==n&&(t.pn="".concat(n.pageNumber)),t},t.prototype.getSession=function(){return this.mp.get()},t.prototype.Tp=function(){return this.mp.get(!0)},t.prototype.doesSessionExist=function(){return null!==this.mp.get()},t.prototype.setSession=function(t){this.mp.set(t)},t.prototype.removeSession=function(){this.mp.remove()},t.prototype.getRecordingStates=function(){var t=this.getSession(),n=[];return t&&(t.recordingState!==En.NOT_RECORDED&&csArray.prototype.push.call(n,t.recordingState),t.etrState===Rn.ETR_ON&&csArray.prototype.push.call(n,En.ETR_SAMPLING)),n},t.prototype.updateRecordingState=function(t,n){var i=this.getSession();null!==i&&(i.recordingState=t,i.etrState=n,this.setSession(i))},t.prototype.hasValidSession=function(){var t=this.mp.getRawSession();return this.mp.isValid(t)},t.prototype.handleSubdomainChange=function(){this.mp.handleSubdomainChange()},t.prototype.pollCacheRefreshEvent=function(t){void 0===t&&(t=!0);var n=this.mp.isCacheRefreshed();return n&&t&&this.mp.resetCacheRefreshed(),n},t.prototype.extendSessionPeriodically=function(){this.Sp||this.Cp()},t.prototype.extendSession=function(){var t=this.getSession();return null===t?(hn.warn("extendSession is trying to extend an expired session"),this.Rp(),!1):(this.mp.set(t,Dn),!0)},t.prototype.Cp=function(){this.xp()?this.Rp():this.extendSession()&&(this._p(),this.Mp())},t.prototype.Mp=function(){var t=this;this.Sp=window.setTimeout((function(){t.Cp()}),174e4)},t.prototype.xp=function(){return 1434e4-(Et()+Dn-this.Np)<0},t.prototype.Rp=function(){this.Sp&&(window.clearTimeout(this.Sp),this.Sp=null)},t.prototype._p=function(){this.Ap+=1,this.Ep.trackDynamicVariable("session_expiry_update",this.Ap)},t}(),Yh=function(){function t(t,n,i){this.L=t,this.Y=n,this.en=i}return t.prototype.clear=function(){this.Pp()&&(this.Dp=this.Y.getVisitor(),this.Y.removeVisitor()),this.Lp()&&this.en.removeExclusion()},t.prototype.Pp=function(){return this.Y.doesVisitorExist()&&this.Y.getVisitor().appliedTrackingDraw!==this.L.lastTrackingDraw},t.prototype.Lp=function(){return this.en.getAppliedTrackingDraw()!==this.L.lastTrackingDraw},t.prototype.restoreClearedVisitor=function(){this.Dp&&this.Y.setVisitor(this.Dp)},t}(),Xh=function(){function t(t,n,i){this.Y=t,this.X=n,this.jp=i}return t.prototype.handle=function(){this.Y.hasAllowSubdomainsChanged()&&(this.Y.handleSubdomainChange(),this.X.handleSubdomainChange(),this.jp.handleSubdomainChange())},t}(),$h=function(){function t(){this.listeners=[]}return t.prototype.addListener=function(t){csArray.prototype.push.call(this.listeners,t)},t}(),Kh=function(t){function n(n){var i=t.call(this)||this;return i.Iu=n,i}return J(n,t),n.prototype.emitBeforeNaturalPageView=function(){for(var t=0,n=this.listeners;t<n.length;t++){var i=n[t];i.onBeforeNaturalPageView&&i.onBeforeNaturalPageView()}},n.prototype.emitAfterNaturalPageView=function(){for(var t=0,n=this.listeners;t<n.length;t++){var i=n[t];i.onAfterNaturalPageView&&i.onAfterNaturalPageView()}},n.prototype.emitStartTracking=function(t){for(var n=function(n){n.onStartTracking&&i.Iu.schedule((function(){return n.onStartTracking(t)}))},i=this,r=0,e=this.listeners;r<e.length;r++){n(e[r])}},n.prototype.emitArtificialPageViewEnd=function(){for(var t=0,n=this.listeners;t<n.length;t++){var i=n[t];if(i.onArtificialPageViewEnd)try{i.onArtificialPageViewEnd()}catch(t){hn.error(t)}}},n.prototype.emitBeforeArtificialPageView=function(){for(var t=0,n=this.listeners;t<n.length;t++){var i=n[t];i.onBeforeArtificialPageView&&i.onBeforeArtificialPageView()}},n.prototype.emitAfterArtificialPageView=function(){for(var t=0,n=this.listeners;t<n.length;t++){var i=n[t];i.onAfterArtificialPageView&&i.onAfterArtificialPageView()}},n.prototype.emitBeforeSessionRenewal=function(){for(var t=0,n=this.listeners;t<n.length;t++){var i=n[t];i.onBeforeSessionRenewal&&i.onBeforeSessionRenewal()}},n.prototype.emitAfterSessionRenewal=function(){for(var t=0,n=this.listeners;t<n.length;t++){var i=n[t];i.onAfterSessionRenewal&&i.onAfterSessionRenewal()}},n.prototype.emitOptout=function(){for(var t=0,n=this.listeners;t<n.length;t++){var i=n[t];i.onOptout&&i.onOptout()}},n.prototype.emitReplayUnanonymizationConsentGranted=function(){for(var t=0,n=this.listeners;t<n.length;t++){var i=n[t];i.onReplayUnanonymizationConsentGranted&&i.onReplayUnanonymizationConsentGranted()}},n.prototype.emitReplayUnanonymizationConsentWithdrawn=function(){for(var t=0,n=this.listeners;t<n.length;t++){var i=n[t];i.onReplayUnanonymizationConsentWithdrawn&&i.onReplayUnanonymizationConsentWithdrawn()}},n.prototype.emitAfterReplayRecordingConsentGranted=function(){for(var t=0,n=this.listeners;t<n.length;t++){var i=n[t];i.onAfterReplayRecordingConsentGranted&&i.onAfterReplayRecordingConsentGranted()}},n.prototype.emitAfterReplayRecordingConsentWithdrawn=function(){for(var t=0,n=this.listeners;t<n.length;t++){var i=n[t];i.onAfterReplayRecordingConsentWithdrawn&&i.onAfterReplayRecordingConsentWithdrawn()}},n.prototype.emitRecordingStateChange=function(t,n){for(var i=0,r=this.listeners;i<r.length;i++){var e=r[i];e.onRecordingStateChange&&e.onRecordingStateChange(t,n)}},n.prototype.emitInitialDomStart=function(){for(var t=0,n=this.listeners;t<n.length;t++){var i=n[t];i.onInitialDomStart&&i.onInitialDomStart()}},n.prototype.emitInitialDomDone=function(t){for(var n=0,i=this.listeners;n<i.length;n++){var r=i[n];r.onInitialDomDone&&r.onInitialDomDone(t)}},n.prototype.emitRecordingStatusChange=function(){for(var t=0,n=this.listeners;t<n.length;t++){var i=n[t];i.onRecordingStatusChange&&i.onRecordingStatusChange()}},n.prototype.emitBeforeVisitorRenewal=function(){for(var t=0,n=this.listeners;t<n.length;t++){var i=n[t];i.onBeforeVisitorRenewal&&i.onBeforeVisitorRenewal()}},n.prototype.emitAfterVisitorCleared=function(){for(var t=0,n=this.listeners;t<n.length;t++){var i=n[t];i.onAfterVisitorCleared&&i.onAfterVisitorCleared()}},n.prototype.emitAfterVisitorRenewal=function(){for(var t=0,n=this.listeners;t<n.length;t++){var i=n[t];i.onAfterVisitorRenewal&&i.onAfterVisitorRenewal()}},X([pi("emitStartTracking")],n.prototype,"emitStartTracking",null),n}($h),Zh="_cs_c";!function(t){t[t.NOT_REQUIRED=0]="NOT_REQUIRED",t[t.NOT_EXPRESSED=1]="NOT_EXPRESSED",t[t.GRANTED=2]="GRANTED",t[t.WITHDRAWN=3]="WITHDRAWN"}(Jh||(Jh={}));var Qh,ta=function(){function t(t,n,i){this.L=t,this.cn=n,this.Yy=i}return t.prototype.get=function(){var t;return null===(t=this.L.cookielessTrackingEnabled?this.Yy.getItem(Zh):this.cn.get(Zh))?t:Number(t)},t.prototype.set=function(t){this.L.cookielessTrackingEnabled?this.Yy.setItem(Zh,csString(t)):this.cn.set(Zh,csString(t),rt)},t.prototype.remove=function(){this.L.cookielessTrackingEnabled?this.Yy.removeItem(Zh):this.cn.delete(Zh)},t.prototype.handleSubdomainChange=function(){this.L.cookielessTrackingEnabled||(this.L.allowSubdomains?this.cn.delete(Zh,yn.CURRENT_DOMAIN):this.cn.delete(Zh,this.cn.getRootDomain()))},t}(),na=function(){function t(t,n,i){this.L=t,this.X=n,this.hi=i}return t.prototype.grantReplayConsent=function(){if(Su.isReplayConsentNeeded(this.L)){var t=this.X.getSession();t?Su.isRecordingBlockedByConsent(t)&&(this.X.grantReplayRecording(t),this.hi.emitAfterReplayRecordingConsentGranted()):this.X.grantReplayRecordingBeforeSessionStart()}},t.prototype.withdrawReplayConsent=function(){if(Su.isReplayConsentNeeded(this.L)){var t=this.X.getSession();t?Su.isRecordingWithDrawn(t)||(this.X.withdrawnReplayRecording(t),this.hi.emitAfterReplayRecordingConsentWithdrawn()):this.X.withdrawnReplayRecordingBeforeSessionStart()}},t}(),ia=["replay:consent:unanonymized:granted","trackConsentGranted"],ra=["replay:consent:unanonymized:withdrawn","trackConsentWithdrawn"],ea=["replay:consent:startForSession:granted"],sa=["replay:consent:startForSession:withdrawn"],ua=function(){function t(t,n,i,r,e){this.L=t,this.Ia=n,this.ol=i,this.X=r,this.hi=e}return t.prototype.init=function(){this.qp=new na(this.L,this.X,this.hi),this.ol.setInitialConsent(),this.nw()},t.prototype.nw=function(){var t=this;this.Ia.register(ia,(function(){t.ol.grantReplayAnonymizationConsent()})),this.Ia.register(ra,(function(){t.ol.withdrawReplayAnonymizationConsent()})),this.Ia.register(ea,(function(){t.qp.grantReplayConsent()})),this.Ia.register(sa,(function(){t.qp.withdrawReplayConsent()}))},t.prototype.onOptout=function(){this.ol.removeAllConsents()},t.prototype.onBeforeVisitorRenewal=function(){this.ol.removeAllConsents()},t.prototype.onAfterVisitorRenewal=function(){this.ol.setInitialConsent()},t.prototype.onAfterVisitorCleared=function(){this.ol.setInitialConsent()},t}(),oa=function(){function t(t,n,i){this.L=t,this.ap=n,this.hi=i}return t.prototype.setInitialConsent=function(){var t=this.ap.get();(null===t||this.hasConsentRequiredChanged(t))&&this.setDefaultReplayAnonymization()},t.prototype.hasConsentRequiredChanged=function(t){var n=this.L.consentRequired;return n&&t===Jh.NOT_REQUIRED||!n&&t!==Jh.NOT_REQUIRED},t.prototype.handleSubdomainChange=function(){this.ap.handleSubdomainChange()},t.prototype.setDefaultReplayAnonymization=function(){var t=this.L.consentRequired?Jh.NOT_EXPRESSED:Jh.NOT_REQUIRED;this.ap.set(t)},t.prototype.grantReplayAnonymizationConsent=function(){this.L.consentRequired&&(this.ap.set(Jh.GRANTED),this.hi.emitReplayUnanonymizationConsentGranted())},t.prototype.withdrawReplayAnonymizationConsent=function(){this.L.consentRequired&&(this.ap.set(Jh.WITHDRAWN),this.hi.emitReplayUnanonymizationConsentWithdrawn())},t.prototype.removeAllConsents=function(){this.ap.remove()},t.prototype.isReplayUnanonymizedAllowedByConsent=function(){return!this.L.consentRequired||this.ap.get()===Jh.GRANTED},t.prototype.getRequestParameters=function(){return{uc:"".concat(this.ap.get())}},t}(),ca=function(){function t(t,n,i,r,e,s,u){this.hi=t,this.Ia=n,this.zy=i,this.By=r,this.Fy=e,this.Hp=s,this.Vy=u}return t.prototype.start=function(){this.hi.addListener(this.Hp),this.hi.addListener(this.Vy),this.hi.addListener(this.zy),this.Vy.init(),this.By.init(),this.Fy.init(),this.Fy.isActive()||this.Ia.start()},t}(),ha=function(){function t(t,n){this.Rn=t,this.ap=n}return t.prototype.exclude=function(t){this.ap.set(csString(t.lastTrackingDraw))},t.prototype.removeExclusion=function(){this.ap.remove()},t.prototype.isExcluded=function(){return this.zp()||this.Bp()},t.prototype.zp=function(){return 0!==this.getAppliedTrackingDraw()},t.prototype.getAppliedTrackingDraw=function(){return this.ap.get()},t.prototype.Bp=function(){return csString.prototype.indexOf.call(this.Rn.href,zn)>0},t}(),aa=function(){function t(t){this.Sf=t}return t.prototype.onOptout=function(){this.Sf.removeExclusion()},t}();!function(t){t.SessionReplay="SR",t.None=""}(Qh||(Qh={}));var fa=function(){function t(t){this.tt=t,this.Fp=new RegExp("".concat(".^"))}return t.prototype.setExcludeUrlForSessionReplay=function(t){this.Fp=new RegExp(t)},t.prototype.Vp=function(){return this.Fp.test(this.tt.getAnonymizedUrl())?Qh.SessionReplay:Qh.None},t.prototype.isUrlExcludedForSessionReplay=function(){return this.Vp()===Qh.SessionReplay},t.prototype.getRequestParameters=function(){return{ex:this.Vp()}},t}(),va=["excludeURLforReplay"],la=function(){function t(t,n){this.Sf=t,this.Ia=n}return t.prototype.init=function(){var t=this;this.Ia.register(va,(function(n){xt(n)&&t.Sf.setExcludeUrlForSessionReplay(n)}))},t}(),da="_cs_inc",wa=function(){function t(t,n){this.Rn=t,this.cn=n}return t.prototype.isForceIncluded=function(){return this.Gp()||this.Jp()},t.prototype.isForceReplayRecorded=function(){return this.Wp(En.GLOBAL_SAMPLING)},t.prototype.Gp=function(){return null!==this.cn.get(da)},t.prototype.Wp=function(t){return this.cn.get(da)===t},t.prototype.Jp=function(){return csString.prototype.indexOf.call(this.Rn.href,da)>0},t}(),ya="_cs_optout",pa=function(){function t(t,n,i){this.L=t,this.cn=n,this.Yy=i}return t.prototype.get=function(){return this.L.cookielessTrackingEnabled?this.Yy.getItem(ya):this.cn.get(ya)},t.prototype.set=function(t){this.L.cookielessTrackingEnabled?this.Yy.setItem(ya,t):this.cn.set(ya,t,rt)},t}(),ma=function(){function t(t,n,i){this.hi=t,this.Rn=n,this.ap=i}return t.prototype.init=function(){!this.isActive()&&this.Yp()&&this.activate()},t.prototype.isActive=function(){return"1"===this.ap.get()},t.prototype.activate=function(){this.hi.emitOptout(),this.ap.set("1")},t.prototype.Yp=function(){return csString.prototype.indexOf.call(this.Rn.href,ya)>0},t}(),ga=["optout"],Sa=["optin"],Aa=function(){function t(t,n){this.Ia=t,this.Fy=n}return t.prototype.init=function(){var t=this;this.Ia.register(ga,(function(){t.Fy.activate()}))},t}(),ba=function(){function t(t,n){this.Ia=t,this.hf=n}return t.prototype.init=function(){this.hf.addListener(this.Ia)},t.prototype.onOptout=function(){this.Ia.stop()},t.prototype.onBeforeSessionRenewal=function(){this.Ia.stop()},t}();var Ea;!function(t){t.UXA="_uxa",t.WVT="cs_wvt"}(Ea||(Ea={}));var Ra,Na=function(t){function n(n){var i=t.call(this)||this;return i.Xp=n,i.$p={},i}return J(n,t),n.prototype.register=function(t,n,i){for(var r=0,e=t;r<e.length;r++){var s=e[r];this.$p[s]={callback:n,configuration:i},this.$p}},n.prototype.onStart=function(){this.Kp(),this.Zp()},n.prototype.onStop=function(){for(var t=0,n=this.Xp;t<n.length;t++){var i=n[t];window[i]=[]}},n.prototype.applyFromIntegration=function(t,n,i){var r=this;this.isStarted?hn.tryToExecute("Commands.apply.from.integration: ".concat(i),(function(){var i;if(r.$p[t])return(i=r.$p[t]).callback.apply(i,n)}))():window._uxa.push(Z([t],n,!0))},n.prototype.onIframeCommands=function(t){for(var n=0,i=t.commands;n<i.length;n++){var r=i[n];this.Qp(r.name,r.params,t.iframePath)}},n.prototype.Qp=function(t,n,i){var r=this;hn.tryToExecute("Commands.apply.from.iframe: ".concat(i),(function(){var i;if(r.$p[t])return(i=r.$p[t]).callback.apply(i,n)}))()},n.prototype.Kp=function(){for(var t=this,n=0,i=this.Xp;n<i.length;n++){var r=i[n];window[r].forEach((function(n){var i=n[0],r=n.slice(1);return t.tm(i,r,!1)}))}},n.prototype.Zp=function(){for(var t=this,n=0,i=this.Xp;n<i.length;n++){var r=i[n];window[r]={push:function(n){var i=n[0],r=n.slice(1);return t.tm(i,r,!0)}}}},n.prototype.tm=function(t,n,i){var r,e,s;if(this.$p[t]){if((null===(e=this.$p[t].configuration)||void 0===e?void 0:e.disableApplyPending)&&!i||(null===(s=this.$p[t].configuration)||void 0===s?void 0:s.disableApplyImmediate)&&i)return;try{return(r=this.$p[t]).callback.apply(r,n)}catch(i){hn.error("Command ".concat(t," failed - params: ").concat(csJSON.stringify(n)),i)}}},n}(Ar);function Ta(t,n){return n.visitor.visitsCount!==t.visitor.visitsCount?n.visitor.visitsCount-t.visitor.visitsCount:t.session?n.session?n.session.pageNumber-t.session.pageNumber:-1:1}!function(t){t.select=function(t,n){var i=function(t,n){return csArray.prototype.filter.call(t,(function(t){return t.exclusion===n}))[0]}(t,n),r=function(t,n){return csArray.prototype.sort.call(csArray.prototype.filter.call(t,(function(t){return function(t,n){return t.visitor&&t.visitor.appliedTrackingDraw===n}(t,n)})),Ta)[0]}(t,n);return i||r}}(Ra||(Ra={}));var Oa,ka="contentsquare.net";!function(t){t.Set="set",t.Remove="remove"}(Oa||(Oa={}));var Ia,Ca=function(){function t(t,n,i,r,e,s){this.L=t,this.cn=n,this.mp=i,this.nm=r,this.im=e,this.rm=s,this.sm=ln.None,this.um=!1,this.om=[],this.hm=[]}return t.prototype.init=function(){this.sm=this.cn.isSameSiteSupported()?ln.None:ln.NotSet,this.am()},t.prototype.setStates=function(t,n){this.fm=t,this.vm=n},t.prototype.start=function(t){var n=this;this.vm.init(this.lm(),(function(i,r){var e=[n.fm.get()];r&&csArray.prototype.push.call(e,i);var s=Ra.select(e,n.L.lastTrackingDraw);n.um=!0,n.fm.apply(s),t()})),this.dm=this.vm.openIframe()},t.prototype.setCookie=function(t,n,i){if(this.um){var r={name:t,value:n,samesite:this.sm,secure:dn.Yes};i&&(r.expires=fn.toExpireDate(i).getTime()),this.wm(r)}},t.prototype.removeCookie=function(t){this.um&&this.ym(t)},t.prototype.ym=function(t){this.hm=csArray.prototype.filter.call(this.hm,(function(n){return n!==t})),this.om=csArray.prototype.filter.call(this.om,(function(n){return n.name!==t})),csArray.prototype.push.call(this.hm,t),this.setBatchReadyCall()},t.prototype.wm=function(t){this.hm=csArray.prototype.filter.call(this.hm,(function(n){return n!==t.name})),this.om=csArray.prototype.filter.call(this.om,(function(n){return n.name!==t.name})),csArray.prototype.push.call(this.om,t),this.setBatchReadyCall()},t.prototype.setBatchReadyCall=function(){this.pm()},t.prototype.pm=function(){if(this.om.length>0){var t=this.gm(Oa.Set,this.om);this.Sm(t),this.om=[]}if(this.hm.length>0){var n=this.gm(Oa.Remove,this.hm);this.Sm(n),this.hm=[]}},t.prototype.gm=function(t,n){return{command:t,cookies:n,domain:null,pid:this.L.projectId}},t.prototype.Sm=function(t){var n="https://".concat(this.lm());this.dm.contentWindow&&this.dm.contentWindow.postMessage(t,n)},t.prototype.lm=function(){return this.L.dualCollectionTagDomain&&this.L.dualCollectionTagDomain!==ka?"cdnssl.".concat(this.L.dualCollectionTagDomain):"csxd.".concat(ka)},t.prototype.am=function(){var t=this;this.mp.onCookieToSet((function(n,i,r){t.setCookie(n,i,r)})),this.nm.onCookieToSet((function(n,i,r){t.setCookie(n,i,r)})),this.im.onCookieToSet((function(n,i,r){t.setCookie(n,i,r)})),this.rm.onCookieToSet((function(n,i,r){t.setCookie(n,i,r)})),this.mp.onCookieToRemove((function(n){t.removeCookie(n)})),this.nm.onCookieToRemove((function(n){t.removeCookie(n)})),this.im.onCookieToRemove((function(n){t.removeCookie(n)})),this.rm.onCookieToRemove((function(n){t.removeCookie(n)}))},X([mu(),wn("send xdframe-single-iframe batch")],t.prototype,"setBatchReadyCall",null),t}(),xa=function(){function t(t,n){this.L=t,this.En=n}return t.prototype.init=function(t,n){this.Am="https://".concat(t),this.Nn=n},t.prototype.openIframe=function(){var t=this;this.En.onMessage((function(n){t.kn(n)})),this.En.onTimeout((function(){t.In()})),this.En.start();var n=this.bm(this.Am);return this.En.open(n)},t.prototype.kn=function(t){if(this.Cn(t)){var n=t.data,i=!0;if(this.Em(t))return void hn.warn("Error xdframe single domain: ".concat(csJSON.stringify(t.data)," from ").concat(t.origin));if(!Hn.isRawDomainState(n))return void hn.warn("Unknown message format from xdframe single domain: ".concat(csJSON.stringify(t.data)," from ").concat(t.origin));Hn.isValid(n)||(hn.warn("Invalid xdframe single domain state: ".concat(csJSON.stringify(t.data)," from ").concat(t.origin)),i=!1),this.En.stop(),this.Nn(i?jn.fromRaw(n):{},i)}},t.prototype.In=function(){hn.warn("xdframe single domain: timeout: ".concat(this.bm(this.Am))),this.En.stop(),this.Nn({},!1)},t.prototype.Cn=function(t){return t.origin===this.Am&&_t(t.data)},t.prototype.Em=function(t){return!!t.data.error},t.prototype.bm=function(t){var n=this.L.projectId;return"".concat(t,"/uxa/xdframe-single-domain-").concat("1.2.0",".html?pid=").concat(n)},t}(),_a=function(){function t(t,n,i,r){this.L=t,this.Y=n,this.X=i,this.Rm=r}return t.prototype.getRequestParameters=function(){var t,n,i,r=W(W({},bt()),this.L.getRequestParameters()),e=this.X.getSession();e&&(r.pn="".concat(e.pageNumber));var s=this.Y.getVisitor();if(s&&(r.sn="".concat(s.visitsCount),r.uu="".concat(s.id)),(null===(t=this.Rm)||void 0===t?void 0:t.hasSubProjectId())&&(r.subProjectID="".concat(this.Rm.getSubProjectId())),window.heap){r.happid=window.heap.appid,r.hsid=null===(i=(n=window.heap).getSessionId)||void 0===i?void 0:i.call(n);var u="function"==typeof window.heap.getUserId;r.huu=u?window.heap.getUserId():window.heap.userId}return r},t}(),Ma=function(){function t(t,n){this.Ia=t,this.C=n}return t.prototype.init=function(){var t=this;this.Ia.register(["debugEvents"],(function(n){"boolean"==typeof n&&t.C.updateDynamicFields("emitDebugEvents",n)}))},t}();function Pa(t,n,i){if(!Mt(n)&&!Mt(i))return t.href;var r=Mt(n)?Da(n):t.pathname,e=Mt(i)?function(t){return nt(t,"?")||""===t?t:"?".concat(t)}(i):t.search;return"".concat(t.protocol,"//").concat(t.host).concat(r).concat(e)}function Da(t){return nt(t,"/")?t:"/".concat(t)}!function(t){t[t.page=1]="page",t[t.onNextPageviewOnly=2]="onNextPageviewOnly"}(Ia||(Ia={}));var La,Ua=function(){function t(t,n){this.Rn=t,this.Pa=n,this.Nm=10}return t.prototype.overridePath=function(t,n){if(""!==t){var i=this.Tm(n);i&&(this.Om=i),this.km=n?this.Im(t,n):t}else this.km=void 0},t.prototype.overrideQuery=function(t,n){var i=this.Tm(n);i&&(this.Cm=i),this.xm=n?this.Im(t,n):t},t.prototype.computeOverriddenUrl=function(t){return this._m(t)?this.getAnonymizedUrl():t},t.prototype.Mm=function(t){return("string"==typeof t||"number"==typeof t)&&t in Ia},t.prototype._m=function(t){var n=this.Pm(this.Rn.href);return this.Pm(t)===n},t.prototype.Pm=function(t){return it(t,"/")?csString.prototype.slice.call(t,0,-1):t},t.prototype.Tm=function(t){return Mt(null==t?void 0:t.lifespan)&&this.Mm(null==t?void 0:t.lifespan)?null==t?void 0:t.lifespan:null},t.prototype.Dm=function(){return this.Om&&this.Om in Ia},t.prototype.Lm=function(){return this.Cm&&this.Cm in Ia},t.prototype.cleanupOverrideLifespan=function(){this.Dm()&&(this.km=void 0,this.Om=void 0),this.Lm()&&(this.xm=void 0,this.Cm=void 0)},t.prototype.getAnonymizedUrl=function(){var t=Pa(this.Rn,this.km,this.xm);return this.Pa.anonymizeUrl(t,[])},t.prototype.getAnonymizedPath=function(){var t=Mt(this.km)?Da(this.km):location.pathname;return this.Pa.anonymizeUrl(t,[])},t.prototype.getUrlProtocol=function(){return this.Rn.protocol},t.prototype.getRequestParameters=function(){return{url:this.getAnonymizedUrl()}},t.prototype.Im=function(t,n){return this.Um(n)?this.jm(t):this.qm(n)?this.Hm(t):t},t.prototype.qm=function(t){return Boolean(t.decodeURI)},t.prototype.Hm=function(t){return this.zm(t,1,!1)},t.prototype.Um=function(t){return Boolean(t.decodeURIDeep)},t.prototype.jm=function(t){return this.zm(t,this.Nm,!0)},t.prototype.zm=function(t,n,i){for(var r=t,e=0;e<n;e++)try{var s=window.decodeURI(r);if(s===r)return r;r=s}catch(t){return r}return i&&hn.warn("decodeURIDeep limit reached: ".concat(r)),r},t}(),ja=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return J(n,t),n.prototype.emitPageEvent=function(t){for(var n=0,i=this.listeners;n<i.length;n++){var r=i[n];r.onPageEvent&&r.onPageEvent(t)}},n.prototype.emitEventTriggerRecording=function(t,n){for(var i=0,r=this.listeners;i<r.length;i++){var e=r[i];e.onEventTriggerRecording&&e.onEventTriggerRecording(t,n)}},n.prototype.emitCustomJavaScriptErrorEvent=function(t){for(var n=0,i=this.listeners;n<i.length;n++){var r=i[n];r.onCustomJavaScriptErrorEvent&&r.onCustomJavaScriptErrorEvent(t)}},n.prototype.emitCustomErrorEvent=function(t){for(var n=0,i=this.listeners;n<i.length;n++){var r=i[n];r.onCustomErrorEvent&&r.onCustomErrorEvent(t)}},n.prototype.emitUserIdentifierEvent=function(t){for(var n=0,i=this.listeners;n<i.length;n++){var r=i[n];r.onUserIdentifierEvent&&r.onUserIdentifierEvent(t)}},n}($h),qa=function(){function t(t,n,i,r,e){this.configuration=t,this.Bm=n,this.hi=i,this.op=r,this.tt=e,this.Fm=[]}return t.prototype.init=function(){this.Vm()},t.prototype.sanitizeSessionRecordingState=function(t){return t.recordingState===En.TEMPORARILY_RECORDED&&(t.recordingState=En.NOT_RECORDED),t},t.prototype.computeInitialRecordingState=function(t){return Su.isReplayConsentNeeded(this.configuration)?En.BLOCKED_BY_CONSENT_NOT_EXPRESSED:this.Ip(t)},t.prototype.computeInitialRecordingStateFromRecordingConsentGranted=function(t){return this.Ip(t)},t.prototype.Ip=function(t){return Ls.isRecordingSupported()?(this.Fm=[],et.percentage()<this.configuration.replayRecordingRate||this.op.isForceReplayRecorded()?csArray.prototype.push.call(this.Fm,En.GLOBAL_SAMPLING):this.configuration.malkaUrlEnabled&&csArray.prototype.push.call(this.Fm,En.URL_SAMPLING),this.configuration.malkaEtrEnabled&&csArray.prototype.push.call(this.Fm,En.ETR_SAMPLING),this.Fm.length>0?(this.Gm(t),En.TEMPORARILY_RECORDED):En.NOT_RECORDED):En.NOT_RECORDED},t.prototype.updateRecordingState=function(t){return Ls.isRecordingSupported()?Su.isRecordingBlockedByConsent(t)?t.recordingState===En.BLOCKED_BY_CONSENT_WITHDRAWN?En.BLOCKED_BY_CONSENT_WITHDRAWN:En.BLOCKED_BY_CONSENT_NOT_EXPRESSED:t.recordingState===En.GLOBAL_SAMPLING?En.GLOBAL_SAMPLING:(this.Fm=[],this.configuration.malkaUrlEnabled&&(csArray.prototype.push.call(this.Fm,En.URL_SAMPLING),this.configuration.malkaEtrEnabled&&csArray.prototype.push.call(this.Fm,En.ETR_SAMPLING)),this.Fm.length>0?(this.Gm(t),En.TEMPORARILY_RECORDED):En.NOT_RECORDED):En.NOT_RECORDED},t.prototype.Gm=function(t){var n,i=null===(n=this.Y)||void 0===n?void 0:n.getVisitor();this.Bm.send({recordingTypes:csArray.prototype.map.call(this.Fm,Number),url:this.tt.getAnonymizedUrl(),projectId:this.configuration.projectId,uu:(null==i?void 0:i.id)||"",sn:(null==i?void 0:i.visitsCount)||"",pn:(null==t?void 0:t.pageNumber)||""})},t.prototype.abortQuotaServiceRequest=function(){this.Bm.abort()},t.prototype.isReplayRecorded=function(t){return!Su.isRecordingBlockedByConsent(t)&&(t.recordingState===En.TEMPORARILY_RECORDED||t.recordingState===En.GLOBAL_SAMPLING||t.recordingState===En.URL_SAMPLING||t.etrState===Rn.ETR_ON)},t.prototype.Vm=function(){var t=this;this.Bm.onError((function(){return t.quotaServiceErrorHandler("NetworkError")})),this.Bm.onTimeout((function(){return t.quotaServiceTimeoutHandler()}),3e3),this.Bm.onLoad((function(n){return t.quotaServiceLoadHandler(n)}))},t.prototype.quotaServiceErrorHandler=function(t){this.Jm("error - ".concat(t))},t.prototype.quotaServiceTimeoutHandler=function(){this.Jm("timeout")},t.prototype.Jm=function(t){var n=En.NOT_RECORDED;this.Wm(this.Fm)?(n=En.GLOBAL_SAMPLING,hn.warn("Quota Service: request ".concat(t," - bypassed by GLOBAL_SAMPLING"))):hn.warn("Quota Service: request ".concat(t)),this.hi.emitRecordingStateChange(n,Rn.ETR_OFF)},t.prototype.quotaServiceLoadHandler=function(t){if(200===t.status){var n;try{n=csJSON.parse(t.responseText)}catch(n){return void this.quotaServiceErrorHandler("Unable to parse the quota service response: ".concat(t.responseText))}var i=null==n.allowedRecordingTypes?void 0:csArray.prototype.map.call(n.allowedRecordingTypes,csString);if(i){var r=Rn.ETR_OFF,e=En.NOT_RECORDED;this.Wm(i)?e=En.GLOBAL_SAMPLING:this.Ym(i)&&(e=En.URL_SAMPLING),this.Xm(i)&&(r=Rn.ETR_ON),this.hi.emitRecordingStateChange(e,r)}else this.quotaServiceErrorHandler("recording types missing from quota service response")}else this.quotaServiceErrorHandler("Status code: ".concat(t.status))},t.prototype.Wm=function(t){return csArray.prototype.some.call(t,(function(t){return t===En.GLOBAL_SAMPLING}))},t.prototype.Ym=function(t){return csArray.prototype.some.call(t,(function(t){return t===En.URL_SAMPLING}))},t.prototype.Xm=function(t){return csArray.prototype.some.call(t,(function(t){return t===En.ETR_SAMPLING}))},t.prototype.setVisitorService=function(t){this.Y=t},t.prototype.getDisabledRecordingState=function(){return En.NOT_RECORDED},t.prototype.getConsentWithdrawnRecordingState=function(){return En.BLOCKED_BY_CONSENT_WITHDRAWN},X([wn("Quota Service: onerror")],t.prototype,"quotaServiceErrorHandler",null),X([wn("Quota Service: ontimeout")],t.prototype,"quotaServiceTimeoutHandler",null),X([wn("Quota Service: onload")],t.prototype,"quotaServiceLoadHandler",null),t}(),Ha="|iframe|",za=function(t){function n(n,i,r,e){var s=t.call(this)||this;return s.$m=n,s.Km=i,s.Zm=r,s.Qm=e,s}return J(n,t),n.prototype.emitIframeEvent=function(t,n,i){if(this.tg(n)&&null===t)hn.error("iframeEventEmitter received event ".concat(n," with null iframe, content:").concat(csJSON.stringify(i)));else switch(n){case rn.ChildLogMessage:this.ng(i);break;case rn.AnalysisEvent:var r=this.$m.transformEvent(t,i);this.ig(r);break;case rn.RecordingEvent:var e=i,s=this.Qm.transformEvents(t,e);if(0===s.events.length)return;s.containsUserEvent?this.rg(s.events):this.eg(s.events);break;case rn.JavascriptError:this.sg(i);break;case rn.ApiError:this.ug(i);break;case rn.DetailedApiError:this.og(i);break;case rn.CustomError:this.cg(i);break;case rn.EmerchandisingMessage:var u=this.Zm.transformEvent(t,i);this.hg(u);break;case rn.Commands:var o=this.Km.transformEvent(t,i);this.ag(o);break;case rn.IntegrationCallback:this.fg(i);break;case rn.StaticResource:this.vg(i);break;case rn.TrackingContextRequestMessage:this.lg(i);break;default:hn.error("Parent received unknown data type from iframe : ".concat(csJSON.stringify(i)))}},n.prototype.tg=function(t){var n=[rn.AnalysisEvent,rn.RecordingEvent,rn.EmerchandisingMessage,rn.Commands];return-1!==csArray.prototype.indexOf.call(n,t)},n.prototype.ng=function(t){var n=t.message,i=t.errorCode;switch(t.level){case ut.debug:hn.debug(n,i);break;case ut.warn:hn.warn(n,i);break;case ut.error:hn.error(n,i);break;case ut.critical:hn.critical(n,i)}},n.prototype.ig=function(t){for(var n=0,i=this.listeners;n<i.length;n++){var r=i[n];r.onIframeAnalysisEvent&&r.onIframeAnalysisEvent(t)}},n.prototype.rg=function(t){for(var n=0,i=this.listeners;n<i.length;n++){var r=i[n];r.onIframeRecordingUserEvent&&r.onIframeRecordingUserEvent(t)}},n.prototype.eg=function(t){for(var n=0,i=this.listeners;n<i.length;n++){var r=i[n];r.onIframeRecordingBrowserEvent&&r.onIframeRecordingBrowserEvent(t)}},n.prototype.sg=function(t){for(var n=0,i=this.listeners;n<i.length;n++){var r=i[n];r.onIframeJavascriptError&&r.onIframeJavascriptError(t)}},n.prototype.ug=function(t){for(var n=0,i=this.listeners;n<i.length;n++){var r=i[n];r.onIframeApiError&&r.onIframeApiError(t)}},n.prototype.og=function(t){for(var n=0,i=this.listeners;n<i.length;n++){var r=i[n];r.onIframeDetailedApiError&&r.onIframeDetailedApiError(t)}},n.prototype.hg=function(t){for(var n=0,i=this.listeners;n<i.length;n++){var r=i[n];r.onIframeEmerchandisingMessage&&r.onIframeEmerchandisingMessage(t)}},n.prototype.ag=function(t){for(var n=0,i=this.listeners;n<i.length;n++){var r=i[n];r.onIframeCommands&&r.onIframeCommands(t)}},n.prototype.fg=function(t){for(var n=0,i=this.listeners;n<i.length;n++){var r=i[n];r.onIframeIntegrationCallback&&r.onIframeIntegrationCallback(t)}},n.prototype.vg=function(t){for(var n=0,i=this.listeners;n<i.length;n++){var r=i[n];r.onIframeStaticResource&&r.onIframeStaticResource(t)}},n.prototype.lg=function(t){for(var n=0,i=this.listeners;n<i.length;n++){var r=i[n];r.onTrackingContextRequestCallback&&r.onTrackingContextRequestCallback(t)}},n.prototype.cg=function(t){for(var n=0,i=this.listeners;n<i.length;n++){var r=i[n];r.onIframeCustomError&&r.onIframeCustomError(t)}},n}($h);!function(t){t.COMPRESSION_DISABLED="compressionDisabled"}(La||(La={}));var Ba=function(){function t(){}return t.init=function(t){this.dg&&void 0===t||this.initFlags(t)},t.initFlags=function(t){var n;void 0===t&&(t=document.cookie);var i=null===(n=/_cs_debug=((\w|\.|\:|=)+)/g.exec(t))||void 0===n?void 0:n[1];if(this.dg=new Map,i)for(var r=csString.prototype.split.call(i,"."),e=0;e<r.length;e++){var s=csString.prototype.split.call(r[e],"="),u=s[0],o=s[1];this.dg.set(u,o||"true")}},t.getBoolean=function(t){var n=this.getString(t);return null!=n&&"false"!==n&&0!==parseInt(n)},t.getString=function(t){var n;return this.init(),null===(n=this.dg)||void 0===n?void 0:n.get(t)},t.isCompressionEnabled=function(){return!this.getBoolean(La.COMPRESSION_DISABLED)},t.Log=function(n){return function(i,r,e){var s,u=r.toString(),o="".concat(null===(s=i.constructor)||void 0===s?void 0:s.name,".").concat(u),c=e.value;(function(t,n){var i;if(null==t)return!1;return t===n||!!(null===(i=csString.prototype.match.call(t,new RegExp("(^|,)("+n+")(,|$)")))||void 0===i?void 0:i.length)})(t.getString("debugLog"),n)&&(e.value=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return console.log.apply(console,Z([o],t,!1)),c.bind(this).apply(void 0,t)})}},t}();function Fa(){function t(t){for(var n=t.length;--n>=0;)t[n]=0}var n=256,i=286,r=30,e=15,s=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0]),u=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),o=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7]),c=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),h=new Array(576);t(h);var a=new Array(60);t(a);var f=new Array(512);t(f);var v=new Array(256);t(v);var l=new Array(29);t(l);var d,w,y,p=new Array(r);function m(t,n,i,r,e){this.static_tree=t,this.extra_bits=n,this.extra_base=i,this.elems=r,this.max_length=e,this.has_stree=t&&t.length}function g(t,n){this.dyn_tree=t,this.max_code=0,this.stat_desc=n}t(p);var S=function(t){return t<256?f[t]:f[256+(t>>>7)]},A=function(t,n){t.pending_buf[t.pending++]=255&n,t.pending_buf[t.pending++]=n>>>8&255},b=function(t,n,i){t.bi_valid>16-i?(t.bi_buf|=n<<t.bi_valid&65535,A(t,t.bi_buf),t.bi_buf=n>>16-t.bi_valid,t.bi_valid+=i-16):(t.bi_buf|=n<<t.bi_valid&65535,t.bi_valid+=i)},E=function(t,n,i){b(t,i[2*n],i[2*n+1])},R=function(t,n){var i=0;do{i|=1&t,t>>>=1,i<<=1}while(--n>0);return i>>>1},N=function(t,n,i){var r,s,u=new Array(16),o=0;for(r=1;r<=e;r++)u[r]=o=o+i[r-1]<<1;for(s=0;s<=n;s++){var c=t[2*s+1];0!==c&&(t[2*s]=R(u[c]++,c))}},T=function(t){var n;for(n=0;n<i;n++)t.dyn_ltree[2*n]=0;for(n=0;n<r;n++)t.dyn_dtree[2*n]=0;for(n=0;n<19;n++)t.bl_tree[2*n]=0;t.dyn_ltree[512]=1,t.opt_len=t.static_len=0,t.last_lit=t.matches=0},O=function(t){t.bi_valid>8?A(t,t.bi_buf):t.bi_valid>0&&(t.pending_buf[t.pending++]=t.bi_buf),t.bi_buf=0,t.bi_valid=0},k=function(t,n,i,r){var e=2*n,s=2*i;return t[e]<t[s]||t[e]===t[s]&&r[n]<=r[i]},I=function(t,n,i){for(var r=t.heap[i],e=i<<1;e<=t.heap_len&&(e<t.heap_len&&k(n,t.heap[e+1],t.heap[e],t.depth)&&e++,!k(n,r,t.heap[e],t.depth));)t.heap[i]=t.heap[e],i=e,e<<=1;t.heap[i]=r},C=function(t,i,r){var e,o,c,h,a=0;if(0!==t.last_lit)do{e=t.pending_buf[t.d_buf+2*a]<<8|t.pending_buf[t.d_buf+2*a+1],o=t.pending_buf[t.l_buf+a],a++,0===e?E(t,o,i):(c=v[o],E(t,c+n+1,i),0!==(h=s[c])&&(o-=l[c],b(t,o,h)),e--,c=S(e),E(t,c,r),0!==(h=u[c])&&(e-=p[c],b(t,e,h)))}while(a<t.last_lit);E(t,256,i)},x=function(t,n){var i,r,s,u=n.dyn_tree,o=n.stat_desc.static_tree,c=n.stat_desc.has_stree,h=n.stat_desc.elems,a=-1;for(t.heap_len=0,t.heap_max=573,i=0;i<h;i++)0!==u[2*i]?(t.heap[++t.heap_len]=a=i,t.depth[i]=0):u[2*i+1]=0;for(;t.heap_len<2;)u[2*(s=t.heap[++t.heap_len]=a<2?++a:0)]=1,t.depth[s]=0,t.opt_len--,c&&(t.static_len-=o[2*s+1]);for(n.max_code=a,i=t.heap_len>>1;i>=1;i--)I(t,u,i);s=h;do{i=t.heap[1],t.heap[1]=t.heap[t.heap_len--],I(t,u,1),r=t.heap[1],t.heap[--t.heap_max]=i,t.heap[--t.heap_max]=r,u[2*s]=u[2*i]+u[2*r],t.depth[s]=(t.depth[i]>=t.depth[r]?t.depth[i]:t.depth[r])+1,u[2*i+1]=u[2*r+1]=s,t.heap[1]=s++,I(t,u,1)}while(t.heap_len>=2);t.heap[--t.heap_max]=t.heap[1],function(t,n){var i,r,s,u,o,c,h=n.dyn_tree,a=n.max_code,f=n.stat_desc.static_tree,v=n.stat_desc.has_stree,l=n.stat_desc.extra_bits,d=n.stat_desc.extra_base,w=n.stat_desc.max_length,y=0;for(u=0;u<=e;u++)t.bl_count[u]=0;for(h[2*t.heap[t.heap_max]+1]=0,i=t.heap_max+1;i<573;i++)(u=h[2*h[2*(r=t.heap[i])+1]+1]+1)>w&&(u=w,y++),h[2*r+1]=u,r>a||(t.bl_count[u]++,o=0,r>=d&&(o=l[r-d]),c=h[2*r],t.opt_len+=c*(u+o),v&&(t.static_len+=c*(f[2*r+1]+o)));if(0!==y){do{for(u=w-1;0===t.bl_count[u];)u--;t.bl_count[u]--,t.bl_count[u+1]+=2,t.bl_count[w]--,y-=2}while(y>0);for(u=w;0!==u;u--)for(r=t.bl_count[u];0!==r;)(s=t.heap[--i])>a||(h[2*s+1]!==u&&(t.opt_len+=(u-h[2*s+1])*h[2*s],h[2*s+1]=u),r--)}}(t,n),N(u,a,t.bl_count)},_=function(t,n,i){var r,e,s=-1,u=n[1],o=0,c=7,h=4;for(0===u&&(c=138,h=3),n[2*(i+1)+1]=65535,r=0;r<=i;r++)e=u,u=n[2*(r+1)+1],++o<c&&e===u||(o<h?t.bl_tree[2*e]+=o:0!==e?(e!==s&&t.bl_tree[2*e]++,t.bl_tree[32]++):o<=10?t.bl_tree[34]++:t.bl_tree[36]++,o=0,s=e,0===u?(c=138,h=3):e===u?(c=6,h=3):(c=7,h=4))},M=function(t,n,i){var r,e,s=-1,u=n[1],o=0,c=7,h=4;for(0===u&&(c=138,h=3),r=0;r<=i;r++)if(e=u,u=n[2*(r+1)+1],!(++o<c&&e===u)){if(o<h)do{E(t,e,t.bl_tree)}while(0!=--o);else 0!==e?(e!==s&&(E(t,e,t.bl_tree),o--),E(t,16,t.bl_tree),b(t,o-3,2)):o<=10?(E(t,17,t.bl_tree),b(t,o-3,3)):(E(t,18,t.bl_tree),b(t,o-11,7));o=0,s=e,0===u?(c=138,h=3):e===u?(c=6,h=3):(c=7,h=4)}},P=!1,D=function(t,n,i,r){b(t,0+(r?1:0),3),function(t,n,i,r){O(t),r&&(A(t,i),A(t,~i)),t.pending_buf.set(t.window.subarray(n,n+i),t.pending),t.pending+=i}(t,n,i,!0)},L=function(t){P||(!function(){var t,n,c,g,S,A=new Array(16);for(c=0,g=0;g<28;g++)for(l[g]=c,t=0;t<1<<s[g];t++)v[c++]=g;for(v[c-1]=g,S=0,g=0;g<16;g++)for(p[g]=S,t=0;t<1<<u[g];t++)f[S++]=g;for(S>>=7;g<r;g++)for(p[g]=S<<7,t=0;t<1<<u[g]-7;t++)f[256+S++]=g;for(n=0;n<=e;n++)A[n]=0;for(t=0;t<=143;)h[2*t+1]=8,t++,A[8]++;for(;t<=255;)h[2*t+1]=9,t++,A[9]++;for(;t<=279;)h[2*t+1]=7,t++,A[7]++;for(;t<=287;)h[2*t+1]=8,t++,A[8]++;for(N(h,287,A),t=0;t<r;t++)a[2*t+1]=5,a[2*t]=R(t,5);d=new m(h,s,257,i,e),w=new m(a,u,0,r,e),y=new m(new Array(0),o,0,19,7)}(),P=!0),t.l_desc=new g(t.dyn_ltree,d),t.d_desc=new g(t.dyn_dtree,w),t.bl_desc=new g(t.bl_tree,y),t.bi_buf=0,t.bi_valid=0,T(t)},U=function(t,i,r,e){var s,u,o=0;t.level>0?(2===t.strm.data_type&&(t.strm.data_type=function(t){var i,r=4093624447;for(i=0;i<=31;i++,r>>>=1)if(1&r&&0!==t.dyn_ltree[2*i])return 0;if(0!==t.dyn_ltree[18]||0!==t.dyn_ltree[20]||0!==t.dyn_ltree[26])return 1;for(i=32;i<n;i++)if(0!==t.dyn_ltree[2*i])return 1;return 0}(t)),x(t,t.l_desc),x(t,t.d_desc),o=function(t){var n;for(_(t,t.dyn_ltree,t.l_desc.max_code),_(t,t.dyn_dtree,t.d_desc.max_code),x(t,t.bl_desc),n=18;n>=3&&0===t.bl_tree[2*c[n]+1];n--);return t.opt_len+=3*(n+1)+5+5+4,n}(t),s=t.opt_len+3+7>>>3,(u=t.static_len+3+7>>>3)<=s&&(s=u)):s=u=r+5,r+4<=s&&-1!==i?D(t,i,r,e):4===t.strategy||u===s?(b(t,2+(e?1:0),3),C(t,h,a)):(b(t,4+(e?1:0),3),function(t,n,i,r){var e;for(b(t,n-257,5),b(t,i-1,5),b(t,r-4,4),e=0;e<r;e++)b(t,t.bl_tree[2*c[e]+1],3);M(t,t.dyn_ltree,n-1),M(t,t.dyn_dtree,i-1)}(t,t.l_desc.max_code+1,t.d_desc.max_code+1,o+1),C(t,t.dyn_ltree,t.dyn_dtree)),T(t),e&&O(t)},j=function(t,i,r){return t.pending_buf[t.d_buf+2*t.last_lit]=i>>>8&255,t.pending_buf[t.d_buf+2*t.last_lit+1]=255&i,t.pending_buf[t.l_buf+t.last_lit]=255&r,t.last_lit++,0===i?t.dyn_ltree[2*r]++:(t.matches++,i--,t.dyn_ltree[2*(v[r]+n+1)]++,t.dyn_dtree[2*S(i)]++),t.last_lit===t.lit_bufsize-1},q=function(t){b(t,2,3),E(t,256,h),function(t){16===t.bi_valid?(A(t,t.bi_buf),t.bi_buf=0,t.bi_valid=0):t.bi_valid>=8&&(t.pending_buf[t.pending++]=255&t.bi_buf,t.bi_buf>>=8,t.bi_valid-=8)}(t)},H={_tr_init:L,_tr_stored_block:D,_tr_flush_block:U,_tr_tally:j,_tr_align:q},z=function(t,n,i,r){for(var e=65535&t,s=t>>>16&65535,u=0;0!==i;){i-=u=i>2e3?2e3:i;do{s=s+(e=e+n[r++]|0)|0}while(--u);e%=65521,s%=65521}return e|s<<16},B=new Uint32Array(function(){for(var t,n=[],i=0;i<256;i++){t=i;for(var r=0;r<8;r++)t=1&t?3988292384^t>>>1:t>>>1;n[i]=t}return n}()),F=function(t,n,i,r){var e=B,s=r+i;t^=-1;for(var u=r;u<s;u++)t=t>>>8^e[255&(t^n[u])];return~t},V={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},G=0,J=2,W=3,Y=4,X=0,$=1,K=-1,Z=0,Q=8,tt=H._tr_init,nt=H._tr_stored_block,it=H._tr_flush_block,rt=H._tr_tally,et=H._tr_align,st=G,ut=1,ot=W,ct=Y,ht=5,at=X,ft=$,vt=-2,lt=-3,dt=-5,wt=K,yt=1,pt=2,mt=3,gt=4,St=Z,At=2,bt=Q,Et=258,Rt=262,Nt=103,Tt=113,Ot=666,kt=function(t,n){return t.msg=V[n],n},It=function(t){return(t<<1)-(t>4?9:0)},Ct=function(t){for(var n=t.length;--n>=0;)t[n]=0},xt=function(t,n,i){return(n<<t.hash_shift^i)&t.hash_mask},_t=function(t){var n=t.state,i=n.pending;i>t.avail_out&&(i=t.avail_out),0!==i&&(t.output.set(n.pending_buf.subarray(n.pending_out,n.pending_out+i),t.next_out),t.next_out+=i,n.pending_out+=i,t.total_out+=i,t.avail_out-=i,n.pending-=i,0===n.pending&&(n.pending_out=0))},Mt=function(t,n){it(t,t.block_start>=0?t.block_start:-1,t.strstart-t.block_start,n),t.block_start=t.strstart,_t(t.strm)},Pt=function(t,n){t.pending_buf[t.pending++]=n},Dt=function(t,n){t.pending_buf[t.pending++]=n>>>8&255,t.pending_buf[t.pending++]=255&n},Lt=function(t,n){var i,r,e=t.max_chain_length,s=t.strstart,u=t.prev_length,o=t.nice_match,c=t.strstart>t.w_size-Rt?t.strstart-(t.w_size-Rt):0,h=t.window,a=t.w_mask,f=t.prev,v=t.strstart+Et,l=h[s+u-1],d=h[s+u];t.prev_length>=t.good_match&&(e>>=2),o>t.lookahead&&(o=t.lookahead);do{if(h[(i=n)+u]===d&&h[i+u-1]===l&&h[i]===h[s]&&h[++i]===h[s+1]){s+=2,i++;do{}while(h[++s]===h[++i]&&h[++s]===h[++i]&&h[++s]===h[++i]&&h[++s]===h[++i]&&h[++s]===h[++i]&&h[++s]===h[++i]&&h[++s]===h[++i]&&h[++s]===h[++i]&&s<v);if(r=Et-(v-s),s=v-Et,r>u){if(t.match_start=n,u=r,r>=o)break;l=h[s+u-1],d=h[s+u]}}}while((n=f[n&a])>c&&0!=--e);return u<=t.lookahead?u:t.lookahead},Ut=function(t){var n,i,r,e,s,u,o,c,h,a,f=t.w_size;do{if(e=t.window_size-t.lookahead-t.strstart,t.strstart>=f+(f-Rt)){t.window.set(t.window.subarray(f,f+f),0),t.match_start-=f,t.strstart-=f,t.block_start-=f,n=i=t.hash_size;do{r=t.head[--n],t.head[n]=r>=f?r-f:0}while(--i);n=i=f;do{r=t.prev[--n],t.prev[n]=r>=f?r-f:0}while(--i);e+=f}if(0===t.strm.avail_in)break;if(u=t.strm,o=t.window,c=t.strstart+t.lookahead,h=e,a=void 0,(a=u.avail_in)>h&&(a=h),i=0===a?0:(u.avail_in-=a,o.set(u.input.subarray(u.next_in,u.next_in+a),c),1===u.state.wrap?u.adler=z(u.adler,o,a,c):2===u.state.wrap&&(u.adler=F(u.adler,o,a,c)),u.next_in+=a,u.total_in+=a,a),t.lookahead+=i,t.lookahead+t.insert>=3)for(s=t.strstart-t.insert,t.ins_h=t.window[s],t.ins_h=xt(t,t.ins_h,t.window[s+1]);t.insert&&(t.ins_h=xt(t,t.ins_h,t.window[s+3-1]),t.prev[s&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=s,s++,t.insert--,!(t.lookahead+t.insert<3)););}while(t.lookahead<Rt&&0!==t.strm.avail_in)},jt=function(t,n){for(var i,r;;){if(t.lookahead<Rt){if(Ut(t),t.lookahead<Rt&&n===st)return 1;if(0===t.lookahead)break}if(i=0,t.lookahead>=3&&(t.ins_h=xt(t,t.ins_h,t.window[t.strstart+3-1]),i=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),0!==i&&t.strstart-i<=t.w_size-Rt&&(t.match_length=Lt(t,i)),t.match_length>=3)if(r=rt(t,t.strstart-t.match_start,t.match_length-3),t.lookahead-=t.match_length,t.match_length<=t.max_lazy_match&&t.lookahead>=3){t.match_length--;do{t.strstart++,t.ins_h=xt(t,t.ins_h,t.window[t.strstart+3-1]),i=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart}while(0!=--t.match_length);t.strstart++}else t.strstart+=t.match_length,t.match_length=0,t.ins_h=t.window[t.strstart],t.ins_h=xt(t,t.ins_h,t.window[t.strstart+1]);else r=rt(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++;if(r&&(Mt(t,!1),0===t.strm.avail_out))return 1}return t.insert=t.strstart<2?t.strstart:2,n===ct?(Mt(t,!0),0===t.strm.avail_out?3:4):t.last_lit&&(Mt(t,!1),0===t.strm.avail_out)?1:2},qt=function(t,n){for(var i,r,e;;){if(t.lookahead<Rt){if(Ut(t),t.lookahead<Rt&&n===st)return 1;if(0===t.lookahead)break}if(i=0,t.lookahead>=3&&(t.ins_h=xt(t,t.ins_h,t.window[t.strstart+3-1]),i=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),t.prev_length=t.match_length,t.prev_match=t.match_start,t.match_length=2,0!==i&&t.prev_length<t.max_lazy_match&&t.strstart-i<=t.w_size-Rt&&(t.match_length=Lt(t,i),t.match_length<=5&&(t.strategy===yt||3===t.match_length&&t.strstart-t.match_start>4096)&&(t.match_length=2)),t.prev_length>=3&&t.match_length<=t.prev_length){e=t.strstart+t.lookahead-3,r=rt(t,t.strstart-1-t.prev_match,t.prev_length-3),t.lookahead-=t.prev_length-1,t.prev_length-=2;do{++t.strstart<=e&&(t.ins_h=xt(t,t.ins_h,t.window[t.strstart+3-1]),i=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart)}while(0!=--t.prev_length);if(t.match_available=0,t.match_length=2,t.strstart++,r&&(Mt(t,!1),0===t.strm.avail_out))return 1}else if(t.match_available){if((r=rt(t,0,t.window[t.strstart-1]))&&Mt(t,!1),t.strstart++,t.lookahead--,0===t.strm.avail_out)return 1}else t.match_available=1,t.strstart++,t.lookahead--}return t.match_available&&(r=rt(t,0,t.window[t.strstart-1]),t.match_available=0),t.insert=t.strstart<2?t.strstart:2,n===ct?(Mt(t,!0),0===t.strm.avail_out?3:4):t.last_lit&&(Mt(t,!1),0===t.strm.avail_out)?1:2};function Ht(t,n,i,r,e){this.good_length=t,this.max_lazy=n,this.nice_length=i,this.max_chain=r,this.func=e}var zt=[new Ht(0,0,0,0,(function(t,n){var i=65535;for(i>t.pending_buf_size-5&&(i=t.pending_buf_size-5);;){if(t.lookahead<=1){if(Ut(t),0===t.lookahead&&n===st)return 1;if(0===t.lookahead)break}t.strstart+=t.lookahead,t.lookahead=0;var r=t.block_start+i;if((0===t.strstart||t.strstart>=r)&&(t.lookahead=t.strstart-r,t.strstart=r,Mt(t,!1),0===t.strm.avail_out))return 1;if(t.strstart-t.block_start>=t.w_size-Rt&&(Mt(t,!1),0===t.strm.avail_out))return 1}return t.insert=0,n===ct?(Mt(t,!0),0===t.strm.avail_out?3:4):(t.strstart>t.block_start&&(Mt(t,!1),t.strm.avail_out),1)})),new Ht(4,4,8,4,jt),new Ht(4,5,16,8,jt),new Ht(4,6,32,32,jt),new Ht(4,4,16,16,qt),new Ht(8,16,32,32,qt),new Ht(8,16,128,128,qt),new Ht(8,32,128,256,qt),new Ht(32,128,258,1024,qt),new Ht(32,258,258,4096,qt)];function Bt(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=bt,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Uint16Array(1146),this.dyn_dtree=new Uint16Array(122),this.bl_tree=new Uint16Array(78),Ct(this.dyn_ltree),Ct(this.dyn_dtree),Ct(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Uint16Array(16),this.heap=new Uint16Array(573),Ct(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Uint16Array(573),Ct(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}var Ft=function(t){if(!t||!t.state)return kt(t,vt);t.total_in=t.total_out=0,t.data_type=At;var n=t.state;return n.pending=0,n.pending_out=0,n.wrap<0&&(n.wrap=-n.wrap),n.status=n.wrap?42:Tt,t.adler=2===n.wrap?0:1,n.last_flush=st,tt(n),at},Vt=function(t){var n=Ft(t);return n===at&&function(t){t.window_size=2*t.w_size,Ct(t.head),t.max_lazy_match=zt[t.level].max_lazy,t.good_match=zt[t.level].good_length,t.nice_match=zt[t.level].nice_length,t.max_chain_length=zt[t.level].max_chain,t.strstart=0,t.block_start=0,t.lookahead=0,t.insert=0,t.match_length=t.prev_length=2,t.match_available=0,t.ins_h=0}(t.state),n},Gt=function(t,n,i,r,e,s){if(!t)return vt;var u=1;if(n===wt&&(n=6),r<0?(u=0,r=-r):r>15&&(u=2,r-=16),e<1||e>9||i!==bt||r<8||r>15||n<0||n>9||s<0||s>gt)return kt(t,vt);8===r&&(r=9);var o=new Bt;return t.state=o,o.strm=t,o.wrap=u,o.gzhead=null,o.w_bits=r,o.w_size=1<<o.w_bits,o.w_mask=o.w_size-1,o.hash_bits=e+7,o.hash_size=1<<o.hash_bits,o.hash_mask=o.hash_size-1,o.hash_shift=~~((o.hash_bits+3-1)/3),o.window=new Uint8Array(2*o.w_size),o.head=new Uint16Array(o.hash_size),o.prev=new Uint16Array(o.w_size),o.lit_bufsize=1<<e+6,o.pending_buf_size=4*o.lit_bufsize,o.pending_buf=new Uint8Array(o.pending_buf_size),o.d_buf=1*o.lit_bufsize,o.l_buf=3*o.lit_bufsize,o.level=n,o.strategy=s,o.method=i,Vt(t)},Jt=function(t,n){var i,r;if(!t||!t.state||n>ht||n<0)return t?kt(t,vt):vt;var e=t.state;if(!t.output||!t.input&&0!==t.avail_in||e.status===Ot&&n!==ct)return kt(t,0===t.avail_out?dt:vt);e.strm=t;var s=e.last_flush;if(e.last_flush=n,42===e.status)if(2===e.wrap)t.adler=0,Pt(e,31),Pt(e,139),Pt(e,8),e.gzhead?(Pt(e,(e.gzhead.text?1:0)+(e.gzhead.hcrc?2:0)+(e.gzhead.extra?4:0)+(e.gzhead.name?8:0)+(e.gzhead.comment?16:0)),Pt(e,255&e.gzhead.time),Pt(e,e.gzhead.time>>8&255),Pt(e,e.gzhead.time>>16&255),Pt(e,e.gzhead.time>>24&255),Pt(e,9===e.level?2:e.strategy>=pt||e.level<2?4:0),Pt(e,255&e.gzhead.os),e.gzhead.extra&&e.gzhead.extra.length&&(Pt(e,255&e.gzhead.extra.length),Pt(e,e.gzhead.extra.length>>8&255)),e.gzhead.hcrc&&(t.adler=F(t.adler,e.pending_buf,e.pending,0)),e.gzindex=0,e.status=69):(Pt(e,0),Pt(e,0),Pt(e,0),Pt(e,0),Pt(e,0),Pt(e,9===e.level?2:e.strategy>=pt||e.level<2?4:0),Pt(e,3),e.status=Tt);else{var u=bt+(e.w_bits-8<<4)<<8;u|=(e.strategy>=pt||e.level<2?0:e.level<6?1:6===e.level?2:3)<<6,0!==e.strstart&&(u|=32),u+=31-u%31,e.status=Tt,Dt(e,u),0!==e.strstart&&(Dt(e,t.adler>>>16),Dt(e,65535&t.adler)),t.adler=1}if(69===e.status)if(e.gzhead.extra){for(i=e.pending;e.gzindex<(65535&e.gzhead.extra.length)&&(e.pending!==e.pending_buf_size||(e.gzhead.hcrc&&e.pending>i&&(t.adler=F(t.adler,e.pending_buf,e.pending-i,i)),_t(t),i=e.pending,e.pending!==e.pending_buf_size));)Pt(e,255&e.gzhead.extra[e.gzindex]),e.gzindex++;e.gzhead.hcrc&&e.pending>i&&(t.adler=F(t.adler,e.pending_buf,e.pending-i,i)),e.gzindex===e.gzhead.extra.length&&(e.gzindex=0,e.status=73)}else e.status=73;if(73===e.status)if(e.gzhead.name){i=e.pending;do{if(e.pending===e.pending_buf_size&&(e.gzhead.hcrc&&e.pending>i&&(t.adler=F(t.adler,e.pending_buf,e.pending-i,i)),_t(t),i=e.pending,e.pending===e.pending_buf_size)){r=1;break}r=e.gzindex<e.gzhead.name.length?255&e.gzhead.name.charCodeAt(e.gzindex++):0,Pt(e,r)}while(0!==r);e.gzhead.hcrc&&e.pending>i&&(t.adler=F(t.adler,e.pending_buf,e.pending-i,i)),0===r&&(e.gzindex=0,e.status=91)}else e.status=91;if(91===e.status)if(e.gzhead.comment){i=e.pending;do{if(e.pending===e.pending_buf_size&&(e.gzhead.hcrc&&e.pending>i&&(t.adler=F(t.adler,e.pending_buf,e.pending-i,i)),_t(t),i=e.pending,e.pending===e.pending_buf_size)){r=1;break}r=e.gzindex<e.gzhead.comment.length?255&e.gzhead.comment.charCodeAt(e.gzindex++):0,Pt(e,r)}while(0!==r);e.gzhead.hcrc&&e.pending>i&&(t.adler=F(t.adler,e.pending_buf,e.pending-i,i)),0===r&&(e.status=Nt)}else e.status=Nt;if(e.status===Nt&&(e.gzhead.hcrc?(e.pending+2>e.pending_buf_size&&_t(t),e.pending+2<=e.pending_buf_size&&(Pt(e,255&t.adler),Pt(e,t.adler>>8&255),t.adler=0,e.status=Tt)):e.status=Tt),0!==e.pending){if(_t(t),0===t.avail_out)return e.last_flush=-1,at}else if(0===t.avail_in&&It(n)<=It(s)&&n!==ct)return kt(t,dt);if(e.status===Ot&&0!==t.avail_in)return kt(t,dt);if(0!==t.avail_in||0!==e.lookahead||n!==st&&e.status!==Ot){var o=e.strategy===pt?function(t,n){for(var i;;){if(0===t.lookahead&&(Ut(t),0===t.lookahead)){if(n===st)return 1;break}if(t.match_length=0,i=rt(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++,i&&(Mt(t,!1),0===t.strm.avail_out))return 1}return t.insert=0,n===ct?(Mt(t,!0),0===t.strm.avail_out?3:4):t.last_lit&&(Mt(t,!1),0===t.strm.avail_out)?1:2}(e,n):e.strategy===mt?function(t,n){for(var i,r,e,s,u=t.window;;){if(t.lookahead<=Et){if(Ut(t),t.lookahead<=Et&&n===st)return 1;if(0===t.lookahead)break}if(t.match_length=0,t.lookahead>=3&&t.strstart>0&&(r=u[e=t.strstart-1])===u[++e]&&r===u[++e]&&r===u[++e]){s=t.strstart+Et;do{}while(r===u[++e]&&r===u[++e]&&r===u[++e]&&r===u[++e]&&r===u[++e]&&r===u[++e]&&r===u[++e]&&r===u[++e]&&e<s);t.match_length=Et-(s-e),t.match_length>t.lookahead&&(t.match_length=t.lookahead)}if(t.match_length>=3?(i=rt(t,1,t.match_length-3),t.lookahead-=t.match_length,t.strstart+=t.match_length,t.match_length=0):(i=rt(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++),i&&(Mt(t,!1),0===t.strm.avail_out))return 1}return t.insert=0,n===ct?(Mt(t,!0),0===t.strm.avail_out?3:4):t.last_lit&&(Mt(t,!1),0===t.strm.avail_out)?1:2}(e,n):zt[e.level].func(e,n);if(3!==o&&4!==o||(e.status=Ot),1===o||3===o)return 0===t.avail_out&&(e.last_flush=-1),at;if(2===o&&(n===ut?et(e):n!==ht&&(nt(e,0,0,!1),n===ot&&(Ct(e.head),0===e.lookahead&&(e.strstart=0,e.block_start=0,e.insert=0))),_t(t),0===t.avail_out))return e.last_flush=-1,at}return n!==ct?at:e.wrap<=0?ft:(2===e.wrap?(Pt(e,255&t.adler),Pt(e,t.adler>>8&255),Pt(e,t.adler>>16&255),Pt(e,t.adler>>24&255),Pt(e,255&t.total_in),Pt(e,t.total_in>>8&255),Pt(e,t.total_in>>16&255),Pt(e,t.total_in>>24&255)):(Dt(e,t.adler>>>16),Dt(e,65535&t.adler)),_t(t),e.wrap>0&&(e.wrap=-e.wrap),0!==e.pending?at:ft)},Wt=function(t,n){var i=n.length;if(!t||!t.state)return vt;var r=t.state,e=r.wrap;if(2===e||1===e&&42!==r.status||r.lookahead)return vt;if(1===e&&(t.adler=z(t.adler,n,i,0)),r.wrap=0,i>=r.w_size){0===e&&(Ct(r.head),r.strstart=0,r.block_start=0,r.insert=0);var s=new Uint8Array(r.w_size);s.set(n.subarray(i-r.w_size,i),0),n=s,i=r.w_size}var u=t.avail_in,o=t.next_in,c=t.input;for(t.avail_in=i,t.next_in=0,t.input=n,Ut(r);r.lookahead>=3;){var h=r.strstart,a=r.lookahead-2;do{r.ins_h=xt(r,r.ins_h,r.window[h+3-1]),r.prev[h&r.w_mask]=r.head[r.ins_h],r.head[r.ins_h]=h,h++}while(--a);r.strstart=h,r.lookahead=2,Ut(r)}return r.strstart+=r.lookahead,r.block_start=r.strstart,r.insert=r.lookahead,r.lookahead=0,r.match_length=r.prev_length=2,r.match_available=0,t.next_in=o,t.input=c,t.avail_in=u,r.wrap=e,at},Yt={deflateInit:function(t,n){return Gt(t,n,bt,15,8,St)},deflateInit2:Gt,deflateReset:Vt,deflateResetKeep:Ft,deflateSetHeader:function(t,n){return t&&t.state?2!==t.state.wrap?vt:(t.state.gzhead=n,at):vt},deflate:Jt,deflateEnd:function(t){if(!t||!t.state)return vt;var n=t.state.status;return 42!==n&&69!==n&&73!==n&&91!==n&&n!==Nt&&n!==Tt&&n!==Ot?kt(t,vt):(t.state=null,n===Tt?kt(t,lt):at)},deflateSetDictionary:Wt,deflateInfo:"pako deflate (from Nodeca project)"},Xt=function(t,n){return Object.prototype.hasOwnProperty.call(t,n)},$t={assign:function(t){for(var n=Array.prototype.slice.call(arguments,1);n.length;){var i=n.shift();if(i){if("object"!=typeof i)throw new TypeError(i+"must be non-object");for(var r in i)Xt(i,r)&&(t[r]=i[r])}}return t},flattenChunks:function(t){for(var n=0,i=0,r=t.length;i<r;i++)n+=t[i].length;var e=new Uint8Array(n),s=(i=0,0);for(r=t.length;i<r;i++){var u=t[i];e.set(u,s),s+=u.length}return e}},Kt=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(t){Kt=!1}for(var Zt=new Uint8Array(256),Qt=0;Qt<256;Qt++)Zt[Qt]=Qt>=252?6:Qt>=248?5:Qt>=240?4:Qt>=224?3:Qt>=192?2:1;Zt[254]=Zt[254]=1;var tn=function(t,n){if(void 0===n&&(n=t.length),n<65534&&t.subarray&&Kt)return String.fromCharCode.apply(null,t.length===n?t:t.subarray(0,n));for(var i="",r=0;r<n;r++)i+=String.fromCharCode(t[r]);return i},nn={string2buf:function(t){if("function"==typeof TextEncoder&&TextEncoder.prototype.encode)return(new TextEncoder).encode(t);var n,i,r,e,s,u=t.length,o=0;for(e=0;e<u;e++)55296==(64512&(i=t.charCodeAt(e)))&&e+1<u&&56320==(64512&(r=t.charCodeAt(e+1)))&&(i=65536+(i-55296<<10)+(r-56320),e++),o+=i<128?1:i<2048?2:i<65536?3:4;for(n=new Uint8Array(o),s=0,e=0;s<o;e++)55296==(64512&(i=t.charCodeAt(e)))&&e+1<u&&56320==(64512&(r=t.charCodeAt(e+1)))&&(i=65536+(i-55296<<10)+(r-56320),e++),i<128?n[s++]=i:i<2048?(n[s++]=192|i>>>6,n[s++]=128|63&i):i<65536?(n[s++]=224|i>>>12,n[s++]=128|i>>>6&63,n[s++]=128|63&i):(n[s++]=240|i>>>18,n[s++]=128|i>>>12&63,n[s++]=128|i>>>6&63,n[s++]=128|63&i);return n},buf2string:function(t,n){var i,r,e=n||t.length;if("function"==typeof TextDecoder&&TextDecoder.prototype.decode)return(new TextDecoder).decode(t.subarray(0,n));var s=new Array(2*e);for(r=0,i=0;i<e;){var u=t[i++];if(u<128)s[r++]=u;else{var o=Zt[u];if(o>4)s[r++]=65533,i+=o-1;else{for(u&=2===o?31:3===o?15:7;o>1&&i<e;)u=u<<6|63&t[i++],o--;o>1?s[r++]=65533:u<65536?s[r++]=u:(u-=65536,s[r++]=55296|u>>10&1023,s[r++]=56320|1023&u)}}}return tn(s,r)},utf8border:function(t,n){(n=n||t.length)>t.length&&(n=t.length);for(var i=n-1;i>=0&&128==(192&t[i]);)i--;return i<0||0===i?n:i+Zt[t[i]]>n?i:n}};var rn=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0},en=Object.prototype.toString,sn=G,un=J,on=W,cn=Y,hn=X,an=$,fn=K,vn=Z,ln=Q;function dn(t){this.options=$t.assign({level:fn,method:ln,chunkSize:16384,windowBits:15,memLevel:8,strategy:vn},t||{});var n=this.options;n.raw&&n.windowBits>0?n.windowBits=-n.windowBits:n.gzip&&n.windowBits>0&&n.windowBits<16&&(n.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new rn,this.strm.avail_out=0;var i=Yt.deflateInit2(this.strm,n.level,n.method,n.windowBits,n.memLevel,n.strategy);if(i!==hn)throw new Error(V[i]);if(n.header&&Yt.deflateSetHeader(this.strm,n.header),n.dictionary){var r=void 0;if(r="string"==typeof n.dictionary?nn.string2buf(n.dictionary):"[object ArrayBuffer]"===en.call(n.dictionary)?new Uint8Array(n.dictionary):n.dictionary,(i=Yt.deflateSetDictionary(this.strm,r))!==hn)throw new Error(V[i]);this._dict_set=!0}}function wn(t,n){return(n=n||{}).gzip=!0,function(t,n){var i=new dn(n=n||{});if(i.push(t,!0),i.err)throw i.msg||V[i.err];return i.result}(t,n)}return dn.prototype.push=function(t,n){var i,r,e=this.strm,s=this.options.chunkSize;if(this.ended)return!1;for(r=n===~~n?n:!0===n?cn:sn,"string"==typeof t?e.input=nn.string2buf(t):"[object ArrayBuffer]"===en.call(t)?e.input=new Uint8Array(t):e.input=t,e.next_in=0,e.avail_in=e.input.length;;)if(0===e.avail_out&&(e.output=new Uint8Array(s),e.next_out=0,e.avail_out=s),(r===un||r===on)&&e.avail_out<=6)this.onData(e.output.subarray(0,e.next_out)),e.avail_out=0;else{if((i=Yt.deflate(e,r))===an)return e.next_out>0&&this.onData(e.output.subarray(0,e.next_out)),i=Yt.deflateEnd(this.strm),this.onEnd(i),this.ended=!0,i===hn;if(0!==e.avail_out){if(r>0&&e.next_out>0)this.onData(e.output.subarray(0,e.next_out)),e.avail_out=0;else if(0===e.avail_in)break}else this.onData(e.output)}return!0},dn.prototype.onData=function(t){this.chunks.push(t)},dn.prototype.onEnd=function(t){t===hn&&(this.result=$t.flattenChunks(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg},function(t,n,i){var r=wn(t);return r="base64"===n?btoa(tn(r)):r.buffer,i&&i(r),r}}var Va=function(t){function n(n){var i=t.call(this,n)||this;return i.algorithm=gn.GZIP,i.wg=Fa(),i.yg=function(t,n,r){r(i.wg(t,n))},i.compress=Ga(),"undefined"!=typeof CompressionStream&&Ei||(i.compress=i.yg,i.getCompressorSourceCode=function(){return Fa.toString()}),i}return J(n,t),n.prototype.compressSync=function(t,n){return this.wg(t,n)},n.prototype.getCompressorSourceCode=function(){return Ga.toString()},n}(Tn);function Ga(){return function(t,n,i){var r=new Response(t).body.pipeThrough(new CompressionStream("gzip")),e=new Response(r).arrayBuffer();"base64"!==n?e.then((function(t){return i(t)})):e.then((function(t){return n=t,new Promise((function(t){var i=new FileReader;i.onload=function(n){return t(n.target.result.split(",")[1])},i.readAsDataURL(new Blob([n]))}));var n})).then((function(t){return i(t)}))}}var Ja,Wa,Ya=function(t){function n(){var n=null!==t&&t.apply(this,arguments)||this;return n.algorithm=gn.UNCOMPRESSED,n}return J(n,t),n.prototype.compress=function(t,n,i){i(this.compressSync(t,n))},n.prototype.compressSync=function(t,n){return t},n.prototype.getCompressorSourceCode=function(){return function(){return function(t,n,i){return i(t)}}.toString()},n}(Tn),Xa=function(){function t(){}return t.create=function(t,n){return void 0===n&&(n=!0),this.instance?this.instance:n&&!Ba.isCompressionEnabled()?new Ya(t):this.instance=new Va(t)},t}(),$a=function(){function t(){}return t.prototype.setItem=function(t,n){window.sessionStorage.setItem(t,n)},t.prototype.getItem=function(t){return window.sessionStorage.getItem(t)},t.prototype.removeItem=function(t){window.sessionStorage.removeItem(t)},t}(),Ka=function(){function t(){}return t.prototype.setItem=function(t,n){window.localStorage.setItem(t,n)},t.prototype.getItem=function(t){return window.localStorage.getItem(t)},t.prototype.removeItem=function(t){window.localStorage.removeItem(t)},t}(),Za=["visit",2],Qa=["page",3],tf=["nextPageOnly",4],nf=function(){function t(t,n){this.U=t,this.ap=n,this.pg={},this.mg={}}return t.prototype.set=function(t,n,i,r){var e,s;if(t>0&&Pt(n)&&Pt(i)&&!Dt(n)&&!Dt(i)){var u=this.U.anonymizePII(csString(n)),o=this.U.anonymizePII(csString(i));if(e=[csString.prototype.slice.call(u,0,512),csString.prototype.slice.call(o,0,255)],s=""!==i,!Mt(r)||csArray.prototype.indexOf.call(Za,r)>=0){var c=this.getCustomVariablesSession();s?c[t]=e:delete c[t],this.setCustomVariableSession(c)}(!Mt(r)||csArray.prototype.indexOf.call(Qa,r)>=0)&&(s?this.pg[t]=e:delete this.pg[t]),Mt(r)&&csArray.prototype.indexOf.call(tf,r)>=0&&(s?this.mg[t]=e:delete this.mg[t])}},t.prototype.getCustomVariablesSession=function(){var t=this.ap.get();if(!t)return{};var n=window.csJSON.parse(t);return null!==n&&_t(n)?n:{}},t.prototype.setCustomVariableSession=function(t){this.ap.set(window.csJSON.stringify(t))},t.prototype.removeCustomVariablesSession=function(){this.ap.remove()},t.prototype.removeCustomVariablesPage=function(){this.pg={}},t.prototype.getRequestParameters=function(){var t=this.getCustomVariablesSession();for(var n in this.mg)this.mg.hasOwnProperty(n)&&(this.pg[n]=this.mg[n]);for(var n in this.pg)this.pg.hasOwnProperty(n)&&(t[n]=this.pg[n]);if(window.csJSON.stringify(t).length<=2)return{};var i={cvars:this.gg(t)};return this.pg&&window.csJSON.stringify(this.pg).length>2&&(i.cvarp=this.gg(this.pg)),i},t.prototype.deleteNextPageOnlyCustomVariables=function(){if(Object.keys(this.mg).length>0)for(var t in this.mg)this.mg[t]===this.pg[t]&&(delete this.pg[t],delete this.mg[t])},t.prototype.Sg=function(t){for(var n in t)if(t.hasOwnProperty(n)){var i=parseInt(n,10),r=t[n],e=r[0],s=r[1];o=1,c=20,(!(Ct(u=i)&&u>=o&&u<=c)||e.length>512||s.length>255)&&delete t[n]}var u,o,c},t.prototype.gg=function(t){this.Sg(t);var n=function(t){var n;for(n in t)return!1;return!0}(t)?[]:t;return window.csJSON.stringify(n)},t.prototype.getAllValidCustomVars=function(){var t=this.getCustomVariablesSession();for(var n in this.mg)this.mg.hasOwnProperty(n)&&(this.pg[n]=this.mg[n]);for(var n in this.pg)this.pg.hasOwnProperty(n)&&(t[n]=this.pg[n]);return this.Sg(t),t},t}(),rf=["setCustomVariable"],ef=function(){function t(t,n){this.Ia=t,this.un=n}return t.prototype.init=function(){var t=this;this.Ia.register(rf,(function(n,i,r,e){t.un.set(n,i,r,e)}))},t.prototype.onAfterArtificialPageView=function(){this.un.deleteNextPageOnlyCustomVariables()},t.prototype.onAfterNaturalPageView=function(){this.un.deleteNextPageOnlyCustomVariables()},t.prototype.onOptout=function(){this.un.removeCustomVariablesSession()},t.prototype.onBeforeVisitorRenewal=function(){this.un.removeCustomVariablesSession(),this.un.removeCustomVariablesPage()},t}(),sf=function(){function t(t){this.U=t}return t.prototype.getUrlMaskingPattern=function(n){for(var i=[],r=0,e=csString.prototype.split.call(n,"/");r<e.length;r++){var s=e[r];nt(s,t.Ag)?csArray.prototype.push.call(i,{key:s,value:"CS_ANONYMIZED_".concat(csString.prototype.toUpperCase.call(csString.prototype.slice.call(s,1)))}):csArray.prototype.push.call(i,{key:s,value:null})}return i},t.prototype.anonymizeUrl=function(t,n){var i=this.U.anonymizePII(t);return i=this.U.anonymizeJwt(i),n.length>0?this.bg(i,n):i},t.prototype.removeQueryString=function(t){var n=this.Eg(t),i=n.path;return""!==n.queryString?"".concat(i,"?"):i},t.prototype.Eg=function(t){var n=csString.prototype.indexOf.call(t,"?"),i="",r="";return-1!==n?(i=csString.prototype.slice.call(t,0,n),r=csString.prototype.slice.call(t,n,t.length)):i=t,{path:i,queryString:r}},t.prototype.bg=function(t,n){for(var i=this.Eg(t),r=i.path,e=i.queryString,s=csString.prototype.split.call(r,"/"),u=0,o=n;u<o.length;u++){var c=o[u],h=this.Rg(s,c);if(null!==h)return"".concat(h).concat(e)}return t},t.prototype.Rg=function(n,i){if(n.length<i.length)return null;for(var r="",e=0;e<n.length;e+=1)if(e>=i.length)r+="".concat(n[e],"/");else if(nt(i[e].key,t.Ag))r+="".concat(i[e].value,"/");else{if(n[e]!==i[e].key)return null;r+="".concat(n[e],"/")}return csString.prototype.slice.call(r,0,-1)},t.Ag=":",t}(),uf=function(){function t(t,n){this.Cf=t,this.L=n}return t.prototype.getEventTargetPath=function(t){var n=gi(t);return this.Cf.getElementPath(n,W({dynamicIdRegex:this.L.dynamicIdRegex},this.L.pathComputationRules))},t.prototype.getEventTargetPathAndTargetLink=function(t){var n=gi(t),i=this.Cf.getElementPathAndFirstAnchorParent(n,W({dynamicIdRegex:this.L.dynamicIdRegex},this.L.pathComputationRules)),r=i.path,e=i.firstAnchorParent;return{path:r,targetLink:this.Ng(e)?e.href:""}},t.prototype.hasValidEventTarget=function(t){var n=gi(t);return this.Cf.isValidElement(n)},t.prototype.getElementPath=function(t){return this.Cf.getElementPath(t,W({dynamicIdRegex:this.L.dynamicIdRegex},this.L.pathComputationRules))},t.prototype.Ng=function(t){var n;return null!==t&&t.hasAttribute("href")&&!nt(null!==(n=t.getAttribute("href"))&&void 0!==n?n:"","#")},t}(),of=function(){function t(t){this.Av=t}return t.prototype.transformEvent=function(t,n){var i=this.Tg(t,n),r=this.Av.getElementPath(t);return this.Og(r,i)},t.prototype.Tg=function(t,n){if(function(t){return void 0!==t.x&&void 0!==t.y}(n)){var i=t.getBoundingClientRect();n.x=Math.round(i.left+n.x+ce.windowOffsetX()),n.y=Math.round(i.top+n.y+ce.windowOffsetY())}return n},t.prototype.Og=function(t,n){return so(n)&&(n.tgt="".concat(t).concat(Ha).concat(n.tgt)),function(t){return void 0!==t.tgtHM}(n)&&(n.tgtHM="".concat(t).concat(Ha).concat(n.tgtHM)),function(t){return void 0!==t.tgtLk}(n)&&(n.tgtLk="".concat(t).concat(Ha).concat(n.tgtLk)),n},t}(),cf=function(){function t(t){this.Av=t}return t.prototype.transformEvent=function(t,n){var i=this.Av.getElementPath(t);return{iframePath:n.iframePath?"".concat(i).concat(Ha).concat(n.iframePath):i,commands:n.commands}},t}(),hf=function(){function t(t){this.Av=t}return t.prototype.transformEvent=function(t,n){if(0===n.products.length)return n;var i=this.Av.getElementPath(t),r=csArray.prototype.map.call(n.products,(function(t){return W(W({},t),{targetPath:"".concat(i).concat(Ha).concat(t.targetPath)})}));return W(W({},n),{products:r})},t}(),af=function(){function t(){this.kg={clientX:2,clientY:3},this.Ig={clientX:1,clientY:2},this.Cg=[ii.POINTER_DOWN,ii.POINTER_MOVE,ii.POINTER_UP],this.xg=[ii.TOUCH_START,ii.TOUCH_MOVE,ii.TOUCH_END]}return t.prototype.transformEvents=function(t,n){var i=this;if(!de.isConnected(t))return n.events=csArray.prototype.filter.call(n.events,(function(t){return t.type!==ii.VISIBILITY_CHANGE})),0===n.events.length||(hn.warn("IframeRecordingEventsTransformer received event ".concat(rn.RecordingEvent,"\n        from disconnected iframe, content:").concat(csJSON.stringify(n.events))),n.events=[]),n;var r=Mi(t);if(!r)return hn.error("IframeRecordingEventsTransformer received event ".concat(rn.RecordingEvent,"\n        from unidentified iframe, content:").concat(csJSON.stringify(n.events))),n.events=[],n;var e=null;csArray.prototype.some.call(n.events,(function(t){return i._g(t)||i.Mg(t)}))&&(e=t.getBoundingClientRect());for(var s=0,u=n.events;s<u.length;s++){var o=u[s];this._g(o)?this.Pg(e,o):this.Mg(o)&&this.Dg(e,o),o.context=o.context&&o.context.length>0?"".concat(r,"/").concat(o.context):"".concat(r)}return n},t.prototype.Dg=function(t,n){this.Lg(this.Ig,t,n)},t.prototype.Pg=function(t,n){this.Lg(this.kg,t,n)},t.prototype.Lg=function(t,n,i){i.args&&(i.args[t.clientX]=Math.round(n.left+i.args[t.clientX]),i.args[t.clientY]=Math.round(n.top+i.args[t.clientY]))},t.prototype._g=function(t){return-1!==csArray.prototype.indexOf.call(this.Cg,t.type)},t.prototype.Mg=function(t){return-1!==csArray.prototype.indexOf.call(this.xg,t.type)},t}(),ff=function(){function t(t){this.Ug=t}return t.prototype.start=function(){var t=this;this.Ug.onEvent((function(n){return t.es(n)})),this.Ug.start()},t.prototype.stop=function(){this.Ug.stop()},t.prototype.es=function(t){var n="Content Security Policy error. Violated directive: ".concat(t.violatedDirective," - Source file: ").concat(t.sourceFile);hn.warn(n)},t}(),vf=function(){function t(){var t=this;this.Bc={boundElement:document,type:"securitypolicyviolation",listener:function(n){return t.securityPolicyViolationListener(n)}}}return t.prototype.start=function(){hi(this.Bc)},t.prototype.stop=function(){ai(this.Bc)},t.prototype.onEvent=function(t){this.pi=t},t.prototype.jg=function(n){if(!n)return!1;var i=n.disposition;return xt(n.sourceFile)&&csArray.prototype.some.call(t.qg,(function(t){return csString.prototype.indexOf.call(n.sourceFile,t)>0}))&&"report"!==i},t.prototype.securityPolicyViolationListener=function(t){this.jg(t)&&this.pi({violatedDirective:t.violatedDirective,sourceFile:t.sourceFile})},t.qg=["contentsquare","cdnssl.clicktale.net"],X([wn("Event handler type: securitypolicyviolation")],t.prototype,"securityPolicyViolationListener",null),t}(),lf=function(){function t(){}return t.prototype.init=function(){this.Hg=new ff(new vf),this.Hg.start()},t.prototype.onOptout=function(){this.Hg.stop()},t}(),df=function(){function t(t,n,i,r){this.L=t,this.nt=n,this.j=i,this.Iu=r}return t.prototype.init=function(){var t,n,i,r,e,s,u,o,c,h,a,f,v,l,d,w,y,p,m,g,S,A,b,E,R,N,T,O,k,I,C,x,_,M,P=this;tu.isSupported()&&tu.setDigestSalt(this.L.projectId.toString()),this.Iu.schedule((function(){t=new Kh(P.Iu),n=new St,i=new sf(n),e=new Ua(window.location,i),(r=new yn(P.L,e,P.nt)).init()})),this.Iu.schedule((function(){s=new $a,u=new Ka,m=new wa(window.location,r),(new lf).init(),g=Xa.create(hn.warn);var n=(p=new kn(g)).create("".concat(P.L.getQuotaServiceUri(),"/quota"),!0);(a=new qa(P.L,n,t,m,e)).init()})),this.Iu.schedule((function(){o=new qn(P.L,r,s),h=new Wh(o,a)})),this.Iu.schedule((function(){f=new _n(P.L,r,s),v=new Gh(P.L,f,h,t),P.j.setContext(v,h),a.setVisitorService(v)})),this.Iu.schedule((function(){M=new oa(P.L,new ta(P.L,r,u),t),l=new Xh(v,h,M),d=new Vn(P.L,r,s),w=new ha(window.location,d),y=new aa(w),S=new Yh(P.L,v,w),x=new uf(z,P.L),T=new of(x),O=new cf(x),k=new hf(x),I=new af,C=new za(T,O,k,I),N=new Na([Ea.UXA]),A=new ba(N,C),b=new fa(e),E=new la(b,N);var i=new Jn(P.L,r,s);_=new nf(n,i),R=new ef(N,_);var a=new In(v,h,w,_,P.L),p=new Yn;new Wn(p,window.location);(c=new Ca(P.L,r,o,f,d,i)).init();var m=new xa(P.L,p);c.setStates(a,m)})),this.Iu.schedule((function(){new Fh(P.L,v,w,S,l,undefined,c,m).compute((function(s){P.Iu.schedule((function(){A.init();var o=new ja,c=new ua(P.L,N,M,h,t),a=new pa(P.L,r,u),f=new ma(t,window.location,a),l=new Aa(N,f),d=new Ma(N,P.L);var w=new _a(P.L,v,h,undefined);s?new Bh(w,g,v,h,t,N,A,P.L,l,f,c,M,n,x,i,e,d,o,C,_,R,b,E,P.Iu,p,r,u).start():new ca(t,N,A,l,f,y,c).start()}))}))}))},t}();!function(t){var n,i={loadBundle:function(t){var s,u,o,h,a=t.source,f=t.data;if(r(f)){n=f.token,c(i.loadBundle),e(t.origin)&&(h=function(t,n){return csString.prototype.replace.call(csString.prototype.replace.call(csString.prototype.replace.call(t,"{version}",n.version),"{token}",n.token),"{domain}",n.domain)}("{domain}/tag/tag.bundle.js?v={version}",f),s=h,u=function(){return a.postMessage("csBundleLoaded",t.origin)},(o=document.createElement("script")).type="text/javascript",o.async=!0,o.src=s,o.onload=u,o.charset="utf-8",document.head.appendChild(o))}}};function r(t){return t&&"csBundleInjection"===t.type&&e(t.domain)&&u(t.version)&&s(t.token)}function e(t){return/^https?:\/\/[a-zA-Z0-9\.\-]+\.(content-square\.fr|contentsquare\.com|csq\.io)$/.test(t)}function s(t){return/^[a-zA-Z0-9]+$/.test(t)}function u(t){return/^[a-zA-Z0-9\.]+$/.test(t)}function o(t){window.addEventListener("message",t,!1)}function c(t){window.removeEventListener("message",t,!1)}t.getToken=function(){return n},t.isAuthorizedIncomingMessage=r,t.isAuthorizedDomain=e,t.isAuthorizedToken=s,t.isAuthorizedTagVersion=u,t.isActivable=function(){var t=window.opener||window.parent;return window!==t&&window.addEventListener},t.waitForBundleInjection=function(){o(i.loadBundle)},t.listen=o,t.removeListener=c}(Ja||(Ja={})),function(t){var n,i=window.opener||window.parent,r=[/^https:\/\/app\.contentsquare\.com$/,/^https:\/\/dev-app\.contentsquare\.com$/,/^https:\/\/staging-app\.contentsquare\.com$/,/^https:\/\/.*\.test\.contentsquare\.com$/,/^https:\/\/app\.[a-z0-9-]+\.csiab\.[a-z0-9-]+\.csq\.io$/],e={ping:function(t){"ping"===t.data&&s(t.origin)&&(n=t.origin,c(e.ping),o(e.insertMessageScript),u("".concat("utils.js","?cb=").concat((new csDate).getTime())))},insertMessageScript:h((function(t){var n=t.data;"string"==typeof n&&"ping"!==n&&(c(e.insertMessageScript),u(n))}))};function s(t){return csArray.prototype.some.call(r,(function(n){return n.test(t)}))}function u(t,i){var r=document.createElement("script");r.type="text/javascript",r.async=!0;var e=csString.prototype.replace.call(n,/^https?:/,"");r.src="".concat(e,"/").concat("tag","/").concat(t),r.onload=i,r.charset="utf-8",document.getElementsByTagName("head")[0].appendChild(r)}function o(t){window.addEventListener("message",t,!1)}function c(t){window.removeEventListener("message",t,!1)}function h(t){return function(i){i.origin===n&&t(i)}}t.getToken=function(){return Ja.getToken()},t.isActivable=function(){return window!==i&&window.addEventListener},t.isAuthorizedDomain=s,t.waitForConnection=function(){o(e.ping),Ja.waitForBundleInjection()},t.listen=o,t.removeListener=c,t.secureListener=h,t.post=function(t){n&&i.postMessage(t,n)}}(Wa||(Wa={}));var wf=window.CSFrameCommunication||Wa,yf=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return J(n,t),n.prototype.emitTrackingContextResultMessage=function(t){for(var n=0,i=this.listeners;n<i.length;n++){var r=i[n];r.onTrackingContextResultCallback&&r.onTrackingContextResultCallback(t)}},n.prototype.emitAfterPageViewCallback=function(t){for(var n=0,i=this.listeners;n<i.length;n++){var r=i[n];r.onAfterPageViewCallback&&r.onAfterPageViewCallback(t)}},n.prototype.emitIntegrationSessionKeyCallback=function(t){for(var n=0,i=this.listeners;n<i.length;n++){var r=i[n];r.onIntegrationSessionKeyCallback&&r.onIntegrationSessionKeyCallback(t)}},n.prototype.emitParentRecordingStatusChange=function(t){for(var n=0,i=this.listeners;n<i.length;n++){var r=i[n];r.onParentRecordingStatusChange&&r.onParentRecordingStatusChange(t)}},n.prototype.emitStartAnalytics=function(){for(var t=0,n=this.listeners;t<n.length;t++){var i=n[t];i.onStartAnalytics&&i.onStartAnalytics()}},n.prototype.emitStopAnalytics=function(){for(var t=0,n=this.listeners;t<n.length;t++){var i=n[t];i.onStopAnalytics&&i.onStopAnalytics()}},n.prototype.emitStartRecording=function(){for(var t=0,n=this.listeners;t<n.length;t++){var i=n[t];i.onStartRecording&&i.onStartRecording()}},n.prototype.emitStopRecording=function(){for(var t=0,n=this.listeners;t<n.length;t++){var i=n[t];i.onStopRecording&&i.onStopRecording()}},n}($h),pf=["trackTransaction"],mf=function(){function t(t){this.zg=t}return t.prototype.init=function(){this.zg.register(Wu),this.zg.register(rf),this.zg.register(kc),this.zg.register(Ic),this.zg.register(Oc),this.zg.register(Qu),this.zg.register(to),this.zg.register(no),this.zg.register(io),this.zg.register(pf),this.zg.register(Uc),this.zg.register(jc),this.zg.register(ga),this.zg.register(Sa),this.zg.register(Hc),this.zg.register(Kc),this.zg.register(Zc),this.zg.register(Ou),this.zg.register(ia),this.zg.register(ra),this.zg.register(ea),this.zg.register(sa)},t.prototype.onStartTracking=function(){this.zg.start()},t.prototype.onOptout=function(){this.zg.stop()},t}(),gf=function(t){function n(n,i){var r=t.call(this)||this;return r.Ia=n,r.Bg=i,r.yf=[],r}return J(n,t),n.prototype.onStart=function(){this.commandsBatchReady()},n.prototype.onStop=function(){this.yf=[]},n.prototype.register=function(t){for(var n=this,i=function(t){r.Ia.register([t],(function(){for(var i=[],r=0;r<arguments.length;r++)i[r]=arguments[r];return n.send(t,i)}))},r=this,e=0,s=t;e<s.length;e++){i(s[e])}},n.prototype.send=function(t,n){csArray.prototype.push.call(this.yf,{name:t,params:n}),this.isStarted&&this.commandsBatchReady()},n.prototype.commandsBatchReady=function(){if(0!==this.yf.length){var t={commands:this.yf};this.Bg.sendToParent(rn.Commands,t),this.yf=[]}},X([wn("Commands.iframe.commandsBatch.send")],n.prototype,"send",null),X([mu(),wn("send iframe commands batch")],n.prototype,"commandsBatchReady",null),n}(Ar),Sf=function(){function t(t){void 0===t&&(t=25),this.Fg=t,this.Vg=[]}return t.prototype.reset=function(){this.Vg=[]},t.prototype.getMessages=function(){return this.Vg},t.prototype.addMessage=function(t){this.Vg.length<this.Fg?csArray.prototype.push.call(this.Vg,t):this.Vg.length===this.Fg&&(this.Gg(t),csArray.prototype.push.call(this.Vg,t))},t.prototype.Gg=function(t){t.type=rn.ChildLogMessage,t.content={message:"Buffer is full, events might be missing.",errorCode:"",level:ut.warn}},t}(),Af=function(t){function n(n){var i=t.call(this)||this;return i.buffer=new Sf(n),i}return J(n,t),n}(Ar),bf=function(t){function n(n,i,r,e){var s=t.call(this,25)||this;return s.L=n,s.hi=i,s.Jg=r,s.Wg=e,s.Yg=null,s.Xg={boundElement:window,type:"message",listener:function(t){return s.rd(t)}},s}return J(n,t),n.prototype.onStart=function(){hi(this.Xg,!1),this.$g()},n.prototype.onStop=function(){ai(this.Xg,!1),this.Yg&&(en.closeChannelPort(this.Yg),this.Yg=null)},n.prototype.sendToParent=function(t,n){var i=this.buildChildBaseMessage(t,n);this.Sm(i)},n.prototype.$g=function(){var t=this.buildChildBaseMessage(rn.Discovery);en.sendPostMessage(window.parent,"*",t)},n.prototype.buildChildBaseMessage=function(t,n){var i=en.buildBaseMessage(t,nn.Child,this.L.projectId);return n&&(i.content=n),i},n.prototype.Sm=function(t){null!==this.Yg?en.sendChannelMessage(this.Yg,t):this.buffer.addMessage(t)},n.prototype.Kg=function(t,n){var i=this,r=en.getNewChannelMessage();this.Yg=r.port1,this.Yg.onmessage=function(t){i.Rd(t)};var e=this.buildChildBaseMessage(rn.Discovery);e.id=n,en.sendPostMessage(window.parent,t,e,[r.port2]),this.sendAllMessagesFromBuffer()},n.prototype.Rd=function(t){switch(t.data.type){case rn.TrackingContextResultMessage:this.Wg.emitTrackingContextResultMessage(t.data.content);break;case rn.IntegrationCallback:var n=t.data.content;n.initiator===tn.AfterPageView?this.Wg.emitAfterPageViewCallback(n):n.initiator===tn.GetSessionKey?this.Wg.emitIntegrationSessionKeyCallback(n):hn.warn("Iframe child received unknown IntegrationCallback type from parent : ".concat(csJSON.stringify(t.data)));break;case rn.Stop:this.hi.emitOptout();break;case rn.RecordingStatus:var i=t.data.content;this.Jg.setRecordingStatus(i),this.Wg.emitParentRecordingStatusChange(i);break;default:hn.warn("Iframe child received unknown channelMessage type from parent : ".concat(csJSON.stringify(t.data)))}},n.prototype.rd=function(t){if(null===this.Yg&&en.isMessageValid(t,nn.Parent,this.L.projectId,this.L.hostnames))switch(t.data.type){case rn.Stop:this.hi.emitOptout();break;case rn.Discovery:if(!Ct(t.data.id)||t.data.id<0)return void hn.warn("Iframe child received discovery without valid id from parent (".concat(t.origin,") : ").concat(csJSON.stringify(t.data)));this.Kg(t.origin,t.data.id);break;default:hn.warn("Iframe child received unknown postMessage type from parent (".concat(t.origin,") : ").concat(csJSON.stringify(t.data)))}},n.prototype.sendAllMessagesFromBuffer=function(){if(null!==this.Yg){for(var t=0,n=this.buffer.getMessages();t<n.length;t++){var i=n[t];en.sendChannelMessage(this.Yg,i)}this.Zg(),this.buffer.reset()}},n.prototype.Zg=function(){var t=en.buildBaseMessage(rn.EndOfBufferedMessages,nn.Child,this.L.projectId);en.sendChannelMessage(this.Yg,t)},n}(Af),Ef=function(){function t(t){this.Bg=t}return t.prototype.onStartTracking=function(){this.Bg.start()},t.prototype.onOptout=function(){this.Bg.stop()},t}(),Rf=function(){function t(t,n,i,r){this.sf=t,this.hf=n,this.Bg=i,this.Jg=r}return t.prototype.init=function(){var t=this;this.sf.onChildMessage((function(n,i,r){return t.hf.emitIframeEvent(n,i,r)})),this.sf.setRecordingStatusCallback((function(){return t.Jg.getRecordingStatus()}))},t.prototype.onStartTracking=function(){this.sf.start()},t.prototype.onOptout=function(){this.sf.stop()},t.prototype.onIframeRecordingUserEvent=function(t){var n={events:t,containsUserEvent:!0};this.Bg.sendToParent(rn.RecordingEvent,n)},t.prototype.onIframeRecordingBrowserEvent=function(t){var n={events:t,containsUserEvent:!1};this.Bg.sendToParent(rn.RecordingEvent,n)},t.prototype.onIframeAnalysisEvent=function(t){this.Bg.sendToParent(rn.AnalysisEvent,t)},t.prototype.onIframeJavascriptError=function(t){this.Bg.sendToParent(rn.JavascriptError,t)},t.prototype.onIframeApiError=function(t){this.Bg.sendToParent(rn.ApiError,t)},t.prototype.onIframeDetailedApiError=function(t){this.Bg.sendToParent(rn.DetailedApiError,t)},t.prototype.onIframeEmerchandisingMessage=function(t){this.Bg.sendToParent(rn.EmerchandisingMessage,t)},t.prototype.onIframeCommands=function(t){this.Bg.sendToParent(rn.Commands,t)},t.prototype.onIframeIntegrationCallback=function(t){this.Bg.sendToParent(rn.IntegrationCallback,t)},t.prototype.onTrackingContextRequestCallback=function(t){this.Bg.sendToParent(rn.TrackingContextRequestMessage,t)},t.prototype.onIframeStaticResource=function(t){this.Bg.sendToParent(rn.StaticResource,t)},t.prototype.onIframeCustomError=function(t){this.Bg.sendToParent(rn.CustomError,t)},t.prototype.onTrackingContextResultCallback=function(t){this.sf.sendToChildren(rn.TrackingContextResultMessage,t)},t.prototype.onAfterPageViewCallback=function(t){this.sf.sendToChildren(rn.IntegrationCallback,t)},t.prototype.onIntegrationSessionKeyCallback=function(t){this.sf.sendToChildren(rn.IntegrationCallback,t)},t.prototype.onParentRecordingStatusChange=function(t){this.sf.sendToChildren(rn.RecordingStatus,t)},t}(),Nf=function(t){function n(n,i,r,e,s,u,o,c){var h=t.call(this)||this;return h.wv=n,h.xf=i,h.Bg=r,h.Rv=e,h.Nv=s,h.Ov=u,h.kv=o,h.Iv=c,h}return J(n,t),n.prototype.init=function(){var t,n,i,r,e,s=this;this.wv.onEvent((function(t){return s.es(t)})),this.xf.onEvent((function(t){return s.es(t)})),null===(t=this.Rv)||void 0===t||t.onEvent((function(t){return s.es(t)})),null===(n=this.Nv)||void 0===n||n.onEvent((function(t){return s.es(t)})),null===(i=this.Ov)||void 0===i||i.onEvent((function(t){return s.es(t)})),null===(r=this.kv)||void 0===r||r.onEvent((function(t){return s.es(t)})),null===(e=this.Iv)||void 0===e||e.onEvent((function(t){return s.es(t)}))},n.prototype.onStart=function(){var t,n,i,r,e;this.wv.start(),this.xf.start(),null===(t=this.Rv)||void 0===t||t.start(),null===(n=this.Nv)||void 0===n||n.start(),null===(i=this.Ov)||void 0===i||i.start(),null===(r=this.kv)||void 0===r||r.start(),null===(e=this.Iv)||void 0===e||e.start()},n.prototype.onStop=function(){var t,n,i,r,e;this.wv.stop(),this.xf.stop(),null===(t=this.Rv)||void 0===t||t.stop(),null===(n=this.Nv)||void 0===n||n.stop(),null===(i=this.Ov)||void 0===i||i.stop(),null===(r=this.kv)||void 0===r||r.stop(),null===(e=this.Iv)||void 0===e||e.stop()},n.prototype.es=function(t){this.isStarted&&t.type!==Du.RESIZE&&this.Bg.sendToParent(rn.AnalysisEvent,t)},n}(Ar),Tf=["webview:analytics:start"],Of=["webview:analytics:stop"],kf=function(){function t(t,n,i,r,e,s,u,o){this.L=t,this.Av=n,this.Hf=i,this.Bg=r,this.yt=e,this.Qg=s,this.Ia=u,this.xf=o}return t.prototype.init=function(){var t=new So(this.L,this.Av,this.Hf),n=this.yt.isInWebViewContext()?{collectGestureVelocity:!0,collectGestureDistance:!0}:{collectGestureVelocity:!1,collectGestureDistance:!1},i=new ao(this.L,this.Av,this.xf,n);this.tS=new Nf(t,i,this.Bg,undefined,undefined,undefined,undefined,undefined),this.tS.init(),this.yt.isInWebViewContext()&&this.nS()},t.prototype.onStartTracking=function(){this.tS.start()},t.prototype.onOptout=function(){this.tS.stop()},t.prototype.onStartAnalytics=function(){this.tS.start()},t.prototype.onStopAnalytics=function(){this.tS.stop()},t.prototype.nS=function(){var t=this;this.Ia.register(Tf,(function(){return t.Qg.emitStartAnalytics()}),{disableApplyPending:!0}),this.Ia.register(Of,(function(){t.Qg.emitStopRecording(),t.Qg.emitStopAnalytics()}),{disableApplyPending:!0})},t}(),If=function(t){function n(n,i,r,e,s,u,o,c,h,a){void 0===c&&(c=[]);var f=t.call(this)||this;return f.L=n,f.Se=i,f.Ae=r,f.be=e,f.Ee=s,f.Ie=u,f.Bg=o,f._e=c,f.Pe=h,f.De=a,f.iS=!1,f.He=new Sr,f.ze=!1,f.ye=[],f.rS=!1,f.Ve=function(t){return f.xv(t)},f.Ge=function(t){return f.Je(t)},f.Pe.onEvent(f.Ve,f.Ge),f}return J(n,t),n.prototype.init=function(){this.us()},n.prototype.us=function(){var t;this.Ae.onEvent(this.Ve),this.be.onEvent(this.Ge),this.Ee.onEvent(this.Ge),null===(t=this.Ie)||void 0===t||t.onTextNodeToEncrypt(this.Ve)},n.prototype.blockSendingEventsFromSerialization=function(){this.ze=!1},n.prototype.allowSendingEventsFromSerialization=function(){this.ze=!0},n.prototype.activateOnlineAssetsOnNextStart=function(){this.iS=!0},n.prototype.getStaticResourceManagerStatus=function(){return this.De?{supported:Ye.isSupported(),onlineAssets:{activated:this.De.isOnlineAssetsActivated(),enableOnNextStart:this.iS}}:null},n.prototype.xv=function(t){this.eS(t),this.sS()},n.prototype.Je=function(t){this.uS(t),this.sS()},n.prototype.uS=function(t){csArray.prototype.push.call(this.ye,t),this.rS=!0},n.prototype.eS=function(t){csArray.prototype.push.call(this.ye,t)},n.prototype.sS=function(){if(this.ze){Ki(this._e,(function(t){var n;return null===(n=t.flushEvents)||void 0===n?void 0:n.call(t)}));var t={containsUserEvent:this.rS,events:this.ye};this.Bg.sendToParent(rn.RecordingEvent,t),this.ye=[],this.rS=!1}},n.prototype.onStart=function(){Hr.start(),this.De&&this.iS&&(this.De.enableOnlineAssets(),this.iS=!1),this.Se.start(),this.Pe.start(),this.Ae.start(),this.Ee.start(),this.L.emitDebugEvents&&this.He.emit("replayRecordingStarted")},n.prototype.onStop=function(){var t;Hr.stop(),this.Se.stop(),this.Pe.stop(),this.Ae.stop(),this.be.stop(),this.Ee.stop(),null===(t=this.De)||void 0===t||t.disableOnlineAssets()},n.prototype.addInitialDom=function(t){for(var n=0;n<this.ye.length;n+=1){if(this.ye[n].date>=t.date)return csArray.prototype.splice.call(this.ye,n,0,t),this.rS=!0,void this.sS()}this.uS(t),this.sS()},n}(Ar),Cf=function(){function t(t){this.L=t}return t.prototype.isReplayUnanonymizedAllowedByConsent=function(){return!this.L.consentRequired},t}(),xf=function(){function t(){}return t.isWebViewLocalAssetsSupported=function(){return"URL"in window},t}(),_f=["webview:replay:start"],Mf=["webview:replay:stop"],Pf=function(){function t(t,n,i,r,e,s,u,o){this.L=t,this.ai=n,this.Qg=i,this.Bs=r,this.oS=e,this.cS=s,this.Ia=u,this.tt=o,this.hS=!1}return t.prototype.init=function(){var t=this,n=new Cf(this.L),i=new Ch;if(this._a=new fa(this.tt),new la(this._a,this.Ia).init(),this.Da=new Ih(n,this.L,this.tt,i),this.Da.init(),xf.isWebViewLocalAssetsSupported()){var r=function(n){t.aS(n)},e=function(t){return hn.error("An error occurred while fetching a styleSheet: "+t)},s=new Set,u=function(t){return!s.has(t)},o=function(n){s.add(n.assetId),t.aS([n])};this.Bs.onAsset((function(n){t.fS(n)})),this.Bs.onStyleSheetFound((function(n){t.cS.getStyleSheetAssets(n.assetId,r,e,u,o)}))}this.vS()},t.prototype.onStartRecording=function(){this.hS=!0,this._a.isUrlExcludedForSessionReplay()||this.Qg.emitParentRecordingStatusChange({isRecording:!0,isMutationTrackerStarted:!0,PIISelectors:this.ai.getPIISelectors(),capturedElementSelector:Hr.getWhitelistedElementsSelector(),useAnonymization:this.Da.shouldUseAnonymization()})},t.prototype.onStopRecording=function(){this.hS=!1,this.Qg.emitParentRecordingStatusChange({isRecording:!1,isMutationTrackerStarted:!1})},t.prototype.onArtificialPageViewEnd=function(){this.Qg.emitParentRecordingStatusChange({isRecording:!1})},t.prototype.onAfterArtificialPageView=function(){this.xi()&&!this._a.isUrlExcludedForSessionReplay()&&this.Qg.emitParentRecordingStatusChange({isRecording:!0})},t.prototype.xi=function(){return this.hS},t.prototype.vS=function(){var t=this;this.Ia.register(_f,(function(){t.Qg.emitStartAnalytics(),t.Qg.emitStartRecording()}),{disableApplyPending:!0}),this.Ia.register(Mf,(function(){return t.Qg.emitStopRecording()}),{disableApplyPending:!0})},t.prototype.fS=function(t){this.oS.sendToParent(rn.Assets,{assets:[t]})},t.prototype.aS=function(t){0!==t.length&&this.oS.sendToParent(rn.Assets,{assets:t})},t}();var Df=/(@import\s*("([^"]+)"|'([^']+)'))|(url\s*\(\s*((("([^"\]]+)"|'([^'\]]+)')\s*)|([^)\]]+))\))/g;function Lf(t,n){var i=t.replace(Df,(function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];var r=t[3]||t[4],e=t[9]||t[10]||t[11],s=(r||e).trim().replace(/(\\)*\\(?:([a-fA-F0-9]{1,6})|(.))[\n\t\x20]?/g,(function(t,n,i,r){if("\\"===n)return t.slice(1);if(r)return r;var e=parseInt(i,16);return 55296<=e&&e<=57343||0===e||e>1114111?"�":String.fromCodePoint(e)}));return(r?"@import ":"")+"url("+function(t){if(-1===t.indexOf('"'))return'"'+t+'"';if(-1===t.indexOf("'"))return"'"+t+"'";return t}(n(s)||s)+")"}));return i}var Uf,jf=function(){function t(t){this.lS=t}return t.prototype.getStyleSheetAssets=function(t,n,i,r,e){var s=this,u=[];if(Zr(t)){this.lS.getResourceContentText(t,(function(t,o){var c=s.Su(t,o);csArray.prototype.forEach.call(c,(function(t){csArray.prototype.push.call(u,t),Zr(t.assetId)&&r(t.assetId)&&(null==e||e(t),s.getStyleSheetAssets(t.assetId,n,i,r,e))})),n(u)}),(function(t){return i(t)}))}},t.prototype.Su=function(t,n){return this.dS(t,function(t){var n=[];return Lf(t,(function(t){return n.push(t),t})),n}(n))},t.prototype.dS=function(t,n){return csArray.prototype.map.call(csArray.prototype.filter.call(csArray.prototype.filter.call(n,(function(t){return!$r(t)})),(function(t){return!Kr(t)})),(function(n){return{assetId:Xt(n,t),assetBasePath:t,assetRawPath:n}}))},t}(),qf=function(){function t(){}return t.prototype.getResourceContentText=function(t,n,i){var r=this.wS((function(i){n(t,i.responseText)}),i);r.open("GET",t),r.send()},t.prototype.wS=function(t,n){var i=new XMLHttpRequest;return i.onreadystatechange=function(){i.readyState===XMLHttpRequest.DONE&&(200===i.status?t(i):n(i.statusText))},i},t}(),Hf=function(t){function n(n,i){var r=t.call(this)||this;return r.na=n,r.Bg=i,r}return J(n,t),n.prototype.onStart=function(){},n.prototype.onStop=function(){},n.prototype.init=function(){var t=this;this.na.onSendStaticResource((function(n){return t.Bg.sendToParent(rn.StaticResource,n)}))},n}(Ar),zf=function(){function t(t,n,i,r,e,s,u,o,c,h,a){this.L=t,this.U=n,this.ai=i,this.hi=r,this.Bg=e,this.Jg=s,this.Ia=u,this.Wg=o,this.yt=c,this.Iu=h,this.tt=a}return t.prototype.init=function(){var t=this,n=[],i=new es;this.Ua=new cs(this.U,this.L),this.Ua.init();var r=new ls;csArray.prototype.push.call(n,r);var e=new ws(this.Iu),s=[new Ps,i,this.Ua],u=new Gs(this.Ie);csArray.prototype.push.call(s,u);var o,c=new Us,h=new Ds(c);if(h.init(),csArray.prototype.push.call(n,h),h.isAdoptedStyleSheetsSupported()&&csArray.prototype.push.call(s,h),this.qa()){var a=new Os;o=new _s(s,a)}else o=new Ms(s);!this.yt.isInWebViewContext()&&this.L.useStaticResourceManager&&Ye.isSupported()&&(this.De=new Ye,this.na=new bu,this.yS=new Hf(this.na,this.Bg),this.yS.init()),this.oi=new ns(o,this.Ua,this.Ie),this.be=new Bi,this.be.init(),this.Ae=new yr(this.oi,e,this.hi,this.ai),csArray.prototype.push.call(n,new is(r,c)),csArray.prototype.push.call(n,new as(window.location,this.U));var f=[new Xs,new hu(csArray.prototype.filter.call(Z([this.Ae],n,!0),(function(t){return t}))),new Qs,new eu];var v=[];this.De&&csArray.prototype.push.call(v,this.De);var l=new uu(f,v),d=new yu(l,this.na);if(this.pS=new If(this.L,c,this.Ae,this.be,u,this.Ie,this.Bg,n,d,this.De),this.Ia.register(Tu,(function(){return t.Jg.getRecordingStatus().isRecording})),this.Ia.register(Ru,(function(t){Hr.setWhitelistedElementsSelector(t)})),this.Ia.register(Nu,(function(n){t.ai.setPIISelectors(n)})),this.Ia.register(ku,(function(){return t.pS.getStaticResourceManagerStatus()})),e.init(),this.pS.init(),this.yt.isInWebViewContext()){var w=new jf(new qf);this.mS=new Pf(this.L,this.ai,this.Wg,r,this.Bg,w,this.Ia,this.tt),this.Wg.addListener(this.mS),this.hi.addListener(this.mS),this.mS.init()}},t.prototype.onParentRecordingStatusChange=function(t){var n,i;t.PIISelectors&&this.ai.setPIISelectors(t.PIISelectors),t.capturedElementSelector&&Hr.setWhitelistedElementsSelector(t.capturedElementSelector),void 0!==t.useAnonymization&&this.oi.setAnonymization(t.useAnonymization),t.encryptionSelectors&&this.Ie.setEncryptionSelectors(t.encryptionSelectors),t.activateOnlineAssetsOnNextStart&&this.pS.activateOnlineAssetsOnNextStart(),t.isRecording?(this.pS.start(),null===(n=this.yS)||void 0===n||n.start()):(this.pS.stop(),null===(i=this.yS)||void 0===i||i.stop()),t.isMutationTrackerStarted?this.Ae.start():this.Ae.stop()},t.prototype.onInitialDomStart=function(){this.pS.blockSendingEventsFromSerialization()},t.prototype.onInitialDomDone=function(t){var n;this.be.start(),this.pS.allowSendingEventsFromSerialization(),null===(n=this.De)||void 0===n||n.onInitialDOMDone(t.args[0]),this.pS.addInitialDom(t)},t.prototype.qa=function(){return Ls.isAsyncSerializationSupported()&&this.L.asyncSerializerEnabled},t.prototype.Fa=function(){return!!this.L.encryptionPublicKey&&this.L.encryptionPublicKeyId>0&&tu.isSupported()},t.prototype.onOptout=function(){this.pS.stop()},t}(),Bf=function(){function t(t,n){this.oS=t,this.gS=n}return t.prototype.init=function(){var t=this;this.oS.onWebViewEvent((function(n,i){t.gS.emitWebviewEventToBridge(n,i)}))},t.prototype.onStartTracking=function(){this.oS.start()},t.prototype.onOptout=function(){this.oS.stop()},t.prototype.onStartAnalytics=function(){this.oS.setAnalyticsStatus(!0)},t.prototype.onStopAnalytics=function(){this.oS.setAnalyticsStatus(!1)},t.prototype.onParentRecordingStatusChange=function(t){this.gS.setSessionReplayStatus(t.isRecording)},t}();!function(t){t[t.PAGE_VIEW=4]="PAGE_VIEW",t[t.TAP=6]="TAP",t[t.LONG_PRESS=8]="LONG_PRESS",t[t.DRAG=9]="DRAG",t[t.FLICK=10]="FLICK",t[t.DETAILED_API_ERROR=13]="DETAILED_API_ERROR",t[t.JAVASCRIPT_ERROR_SR=19]="JAVASCRIPT_ERROR_SR",t[t.CUSTOM_ERROR_SR=20]="CUSTOM_ERROR_SR",t[t.API_ERROR=21]="API_ERROR",t[t.CUSTOM_ERROR_AN=25]="CUSTOM_ERROR_AN",t[t.JAVASCRIPT_ERROR_AN=26]="JAVASCRIPT_ERROR_AN"}(Uf||(Uf={}));var Ff,Vf=function(){function t(){this.SS=1}return t.prototype.transformEvent=function(t){switch(t.type){case Du.TAP:return{version:this.SS,type:Uf.TAP,data:{path:t.tgt}};case Du.DRAG:var n=t;return{version:this.SS,type:Uf.DRAG,data:{path:n.tgt,direction:n.fd,distance:n.distance,velocity:n.velocity}};case Du.FLICK:var i=t;return{version:this.SS,type:Uf.FLICK,data:{path:i.tgt,direction:i.fd,distance:i.distance,velocity:i.velocity}};default:return null}},t}(),Gf=function(){function t(t,n,i,r){this.tt=t,this.Te=n,this.ke=i,this.U=r,this.SS=1}return t.prototype.transformEvent=function(t,n){switch(t){case rn.ApiError:case rn.DetailedApiError:var i=this.ke.anonymize(n);return{version:this.SS,data:i};case rn.JavascriptError:var r=W(W({},n),{pageUrl:this.tt.getAnonymizedUrl()});i=this.Te.anonymize(r);return{version:this.SS,data:W(W({},i),{date:Et()})};case rn.CustomError:var e=n;return e.message=this.U.anonymizePII(e.message),{version:this.SS,data:W(W({},e),{date:Et()})};default:return null}},t}();!function(t){var n=5,i=30,r=30;t.buildCustomErrorEvent=function(t,e,s){void 0===s&&(s=!1);var u={message:Wc.truncateStringWithEllipsis(t,300),errorType:"customError"};return(s||function(t){var i=Object.keys(t).length;return i>0&&i<=n}(e))&&(!function(t){for(var n in t){var e=t[n];if(t[n].length>r&&(e=Wc.truncateStringWithEllipsis(t[n],r),t[n]=e),n.length>i){var s=Wc.truncateStringWithEllipsis(n,i);delete t[n],t[s]=e}}}(e),u.attributes=e),u}}(Ff||(Ff={}));var Jf;!function(t){t.isCSJavascriptBridgeDefined=function(){return"object"==typeof window.CSJavascriptBridge&&"function"==typeof window.CSJavascriptBridge.optIn&&"function"==typeof window.CSJavascriptBridge.optOut&&"function"==typeof window.CSJavascriptBridge.sendEvent&&"function"==typeof window.CSJavascriptBridge.sendDynamicVar&&"function"==typeof window.CSJavascriptBridge.sendTransaction},t.getBridgeVersion=function(){if("function"==typeof window.CSJavascriptBridge.getVersion)try{var t=window.CSJavascriptBridge.getVersion();if(It(t))return t}catch(t){hn.warn("an error occurred when calling getVersion")}return null},t.notifyIsReadyForTracking=function(){"function"==typeof window.CSJavascriptBridge.onWebviewTrackingReady&&window.CSJavascriptBridge.onWebviewTrackingReady()},t.sendAnalysisEvent=function(t){window.CSJavascriptBridge.sendEvent(csJSON.stringify(t))},t.sendSREvent=function(t){if(window.CSJavascriptBridge.sendSREvent)for(var n=0,i=t.events;n<i.length;n++){var r=i[n];window.CSJavascriptBridge.sendSREvent(csJSON.stringify(r))}},t.sendLog=function(t){window.CSJavascriptBridge&&window.CSJavascriptBridge.sendLog&&window.CSJavascriptBridge.sendLog(csJSON.stringify(t))},t.sendOptIn=function(){window.CSJavascriptBridge.optIn()},t.sendOptOut=function(){window.CSJavascriptBridge.optOut()},t.sendDynamicVariable=function(t,n){window.CSJavascriptBridge.sendDynamicVar(t,n)},t.sendTransaction=function(t,n,i){window.CSJavascriptBridge.sendTransaction(t,n,i)},t.sendAssets=function(t,n){if(window.CSJavascriptBridge.sendAssets){var i=csJSON.stringify(t);window.CSJavascriptBridge.sendAssets(i,n||null)}else window.CSJavascriptBridge.sendSRAssets&&window.CSJavascriptBridge.sendSRAssets(csArray.prototype.map.call(t,(function(t){return t.assetId})))},t.sendNativeSREvent=function(t){window.CSJavascriptBridge&&window.CSJavascriptBridge.sendNativeSREvent&&window.CSJavascriptBridge.sendNativeSREvent(csJSON.stringify(t))}}(Jf||(Jf={}));var Wf=function(){function t(t,n,i,r,e,s,u,o){this.AS=t,this.bS=n,this.ES=i,this.RS=r,this.NS=e,this.hi=s,this.ke=u,this.tt=o,this.TS=!1}return t.prototype.emitWebviewEventToBridge=function(t,n){return $(this,void 0,void 0,(function(){var i,r,e,s,u,o,c,h,a=this;return K(this,(function(f){switch(f.label){case 0:switch(t){case rn.AnalysisEvent:return[3,1];case rn.RecordingEvent:return[3,2];case rn.ChildLogMessage:return[3,3];case rn.Commands:return[3,4];case rn.Assets:return[3,5];case rn.JavascriptError:return[3,7];case rn.ApiError:return[3,8];case rn.DetailedApiError:return[3,9]}return[3,10];case 1:return(i=this.ES.transformEvent(n))&&Jf.sendAnalysisEvent(i),[3,11];case 2:return Jf.sendSREvent(n),[3,11];case 3:return Jf.sendLog(n),[3,11];case 4:return hn.tryToExecute("SDKMessageUtils.sendMessage.sendCommandMessage: ".concat(n),(function(){a.OS(n)}))(),[3,11];case 5:return e=(r=n).assets,s=r.serializationId,[4,this.NS.getTransformedAssets(e,s)];case 6:return u=f.sent(),Jf.sendAssets(u,s),[3,11];case 7:return(o=this.RS.transformEvent(rn.JavascriptError,n))&&(this.TS&&Jf.sendNativeSREvent(W(W({},o),{type:Uf.JAVASCRIPT_ERROR_SR})),Jf.sendAnalysisEvent(W(W({},o),{type:Uf.JAVASCRIPT_ERROR_AN}))),[3,11];case 8:return(c=this.RS.transformEvent(rn.ApiError,n))&&Jf.sendAnalysisEvent(W(W({},c),{type:Uf.API_ERROR})),[3,11];case 9:return(h=this.RS.transformEvent(rn.DetailedApiError,n))&&Jf.sendNativeSREvent(W(W({},h),{type:Uf.DETAILED_API_ERROR})),[3,11];case 10:return[3,11];case 11:return[2]}}))}))},t.prototype.setSessionReplayStatus=function(t){this.TS=t},t.prototype.OS=function(t){for(var n=0,i=t.commands;n<i.length;n++){var r=i[n];switch(!0){case csArray.prototype.indexOf.call(Sa,r.name)>=0:Jf.sendOptIn();break;case csArray.prototype.indexOf.call(ga,r.name)>=0:this.hi.emitOptout(),Jf.sendOptOut();break;case csArray.prototype.indexOf.call(Wu,r.name)>=0:this.kS(r);break;case csArray.prototype.indexOf.call(Oc,r.name)>=0:this.IS(r);break;case csArray.prototype.indexOf.call(to,r.name)>=0:this.CS(r);break;case csArray.prototype.indexOf.call(no,r.name)>=0:break;case csArray.prototype.indexOf.call(io,r.name)>=0:this.xS();break;case csArray.prototype.indexOf.call(pf,r.name)>=0:this.CS(r),this.xS();break;case csArray.prototype.indexOf.call(Sh,r.name)>=0:this.ke.addUrlMaskingPattern(r.params[0]);break;case csArray.prototype.indexOf.call(Eh,r.name)>=0:this._S(r);break;default:hn.warn("WebviewBridgeEventEmitter received an unknown command: ".concat(csJSON.stringify(r)))}}},t.prototype.kS=function(t){if(1===t.params.length){var n=t.params[0];if(Vu.isValid(n.key,n.value)){var i=this.AS.anonymizePII(n.key),r=this.AS.anonymizePII(n.value);Jf.sendDynamicVariable(i,r)}}},t.prototype.IS=function(t){if(1===t.params.length){var n=t.params[0];if(xt(n)){var i={type:Uf.PAGE_VIEW,version:1,data:{url:n}};this.tt.overridePath(n),this.hi.emitArtificialPageViewEnd(),Jf.sendAnalysisEvent(i),this.hi.emitAfterArtificialPageView()}}},t.prototype.CS=function(t){if(1===t.params.length){var n=t.params[0];n.value&&(n.revenue=n.value),this.bS.addTransaction(n)}},t.prototype.xS=function(){var t=this.bS.getTransaction();Xu.isValid(t)&&(Jf.sendTransaction(t.id?t.id:null,t.revenue,t.currency?t.currency:""),this.bS.clear())},t.prototype._S=function(t){if(!(t.params.length<1)){var n=t.params[0],i=t.params[1]||{};if(xt(n)&&_t(i)){var r=Ff.buildCustomErrorEvent(n,i),e=this.RS.transformEvent(rn.CustomError,r);e&&(this.TS&&Jf.sendNativeSREvent(W(W({},e),{type:Uf.CUSTOM_ERROR_SR})),Jf.sendAnalysisEvent(W(W({},e),{type:Uf.CUSTOM_ERROR_AN})))}}},t}(),Yf="LOCAL_ASSET",Xf="NONE",$f="ONLY_LOCAL_ASSETS",Kf="ALL",Zf=function(){function t(t){var n,i;this.MS=t,this.PS=new Set,this.DS=Xf;try{var r=null===(i=null===(n=window.CSJavascriptBridge)||void 0===n?void 0:n.getAssetTransformerMode)||void 0===i?void 0:i.call(n);r!==$f&&r!==Kf||(this.DS=r)}catch(t){}}return t.prototype.setAssetProcessingMode=function(t){this.DS=t},t.prototype.getTransformedAssets=function(t,n){return $(this,void 0,void 0,(function(){var i,r,e,s,u,o,c,h,a;return K(this,(function(f){switch(f.label){case 0:if(this.DS===Xf)return[2,t];i=[],r=0,e=t,f.label=1;case 1:if(!(r<e.length))return[3,8];if(s=e[r],u=s.assetId,o=this.LS(u),this.DS!==Kf&&o!==Yf)return[3,6];if(c=u,this.US(u,n)&&(c=this.jS(u,n)),this.PS.has(c))return csArray.prototype.push.call(i,s),[3,7];f.label=2;case 2:return f.trys.push([2,4,,5]),[4,this.MS.getAssetContent(u)];case 3:return h=f.sent(),this.PS.has(c)?(csArray.prototype.push.call(i,s),[3,7]):(csArray.prototype.push.call(i,W(W({},s),{retrievedAssetContent:h})),this.PS.add(s.assetId),[3,5]);case 4:return a=f.sent(),hn.error("an error occurred while getting data for asset: ".concat(c,": ").concat(a)),csArray.prototype.push.call(i,s),[3,5];case 5:return[3,7];case 6:csArray.prototype.push.call(i,s),f.label=7;case 7:return r++,[3,1];case 8:return[2,i]}}))}))},t.prototype.LS=function(t){var n=window.WEBVIEW_SERVER_URL||null;try{return"file:"===new csURL(t).protocol||n&&csString.prototype.startsWith.call(t,n)?Yf:"REMOTE_ASSET"}catch(n){hn.error("Error constructing URL (".concat(t,'"): ').concat(n.message))}return"UNKNOWN_ASSET_TYPE"},t.prototype.US=function(t,n){return n&&csString.prototype.endsWith.call(t,".css")||!1},t.prototype.jS=function(t,n){return"".concat(t,"#").concat(n)},t}(),Qf=function(){function t(){this.qS=52428800,this.HS=31457280,this.zS=0,this.BS=!1,this.FS=new Map,this.Kh=[]}return t.prototype.getAssetContent=function(t){return $(this,void 0,void 0,(function(){var n,i=this;return K(this,(function(r){return(n=this.FS.get(t))?[2,n]:[2,new Promise((function(n,r){csArray.prototype.push.call(i.Kh,{assetUrl:t,successCallback:n,errorCallback:r}),i.BS||i.VS()}))]}))}))},t.prototype.VS=function(){return $(this,void 0,void 0,(function(){var t,n,i=this;return K(this,(function(r){switch(r.label){case 0:this.BS=!0,t=function(){var t,r,e,s,u,o,c,h,a,f,v,l;return K(this,(function(d){switch(d.label){case 0:if(t=csArray.prototype.shift.call(n.Kh),r=t.assetUrl,e=t.successCallback,s=t.errorCallback,u=n.FS.get(r))return e(u),[2,"continue"];d.label=1;case 1:return d.trys.push([1,3,,4]),[4,n.GS("GET",r,"blob")];case 2:if(o=d.sent(),200===(c=o.target).status){if(h=c.getResponseHeader("Content-Type"),(a=Number(c.getResponseHeader("Content-Length")))&&Number(a)>n.HS)return l="asset is too big, size = ".concat(a," bytes"),s(l),[2,"continue"];(f=new FileReader).onload=function(){var t={data:csString.prototype.split.call(f.result,"base64,")[1],mimeType:null!=h?h:""};i.zS+=a,i.zS>i.qS&&(i.zS=0,i.FS.clear()),i.FS.set(r,t),e(t)},f.onerror=function(){s("Error converting XHR response to base64")},f.readAsDataURL(c.response)}else s("error downloading ".concat(r,": ").concat(c.statusText));return[3,4];case 3:return v=d.sent(),l="Error downloading resource ".concat(r,": ").concat(v.message),s(l),[3,4];case 4:return[2]}}))},n=this,r.label=1;case 1:return this.Kh.length>0?[5,t()]:[3,3];case 2:return r.sent(),[3,1];case 3:return this.BS=!1,[2]}}))}))},t.prototype.GS=function(t,n,i){return new Promise((function(r,e){var s=new XMLHttpRequest;s.open(t,n),s.responseType=i,s.onload=r,s.onerror=e,s.send()}))},t}();function tv(t){if(null==t?void 0:t.length)return Xi(t,(function(t){return function(t){var n=[];try{n=Xi(t.cssRules,(function(t){return t.cssText}))}catch(t){}return{cssRules:n}}(t)}))}var nv=function(){function t(t,n,i){this.Bg=t,this.cS=n,this.Bs=i}return t.prototype.handleCommand=function(t){var n=t&&t.withAssets,i=[],r=new Set,e=new Set,s=[];n&&xf.isWebViewLocalAssetsSupported()?(this.Bs.onAsset((function(t){r.has(t.assetId)||(r.add(t.assetId),csArray.prototype.push.call(i,t))})),this.Bs.onStyleSheetFound((function(t){e.has(t.assetId)||(e.add(t.assetId),csArray.prototype.push.call(s,t))})),this.Bs.stop(),this.Bs.start()):(this.Bs.stop(),xf.isWebViewLocalAssetsSupported()||hn.warn("Local asset is not supported on this browser"));var u,o=(void Ir(document).visitAll((function(t){var n;if(R(t)&&(null===(n=t.adoptedStyleSheets)||void 0===n?void 0:n.length)>0){var i=tv(t.adoptedStyleSheets);ki.setProperty(t,"styles",i)}})),u=function(t,n){var i;return De(Wr(Wr({},n),{async:!1}))(t,(function(t){return i=t})),i}(document),ki.traverse(u,(function(t){if(11===t.nodeType){var n=ki.getProperty(t,"styles");n&&(t.adoptedStyleSheets=n)}})),u),c=csJSON.stringify(o);if(n){var h=jh.generate();return this.JS(i,s,h),csJSON.stringify({serializedDom:c,serializationId:h})}return c},t.prototype.JS=function(t,n,i){var r=this;0===n.length?this.aS(t,i):this.WS(t,n,i,(function(t,n){return r.aS(t,n)}))},t.prototype.WS=function(t,n,i,r){var e=this,s=0,u=0,o=new Set(csArray.prototype.map.call(t,(function(t){return t.assetId}))),c=function(t){return!o.has(t)},h=function(i){o.has(i.assetId)||(o.add(i.assetId),csArray.prototype.push.call(n,i),csArray.prototype.push.call(t,i))},a=function(e){for(var c=0,h=e;c<h.length;c++){var a=h[c];o.has(a.assetId)||(o.add(a.assetId),csArray.prototype.push.call(t,a))}++s+u===n.length&&r(t,i)},f=function(e){u++,hn.error("An error occurred while fetching a styleSheet: "+e),s+u===n.length&&r(t,i)};csArray.prototype.forEach.call(n,(function(t){e.cS.getStyleSheetAssets(t.assetId,a,f,c,h)}))},t.prototype.aS=function(t,n){this.Bg.sendToParent(rn.Assets,{assets:t,serializationId:n})},t}();var iv,rv,ev=function(){function t(t){this.L=t,this.YS=null,this.XS=this.Wa(),this.$S=this.Xa()}return t.prototype.isSdkTrackingContext=function(t){return Pt(t)&&_t(t)&&xt(t.sessionKey)&&Ct(t.pageNumber)&&xt(t.pageViewType)&&"boolean"==typeof t.isRecording},t.prototype.update=function(t){if(!this.isSdkTrackingContext(t))return hn.warn("webViewTrackingContext.service received wrong sdkTrackingContext, content:".concat(csJSON.stringify(t))),void(this.YS=null);this.YS=W(W({},t),{recordingConsentState:gu.NOT_NEEDED,projectId:this.XS,uxaDomain:this.$S})},t.prototype.getTrackingContext=function(){return this.YS},t.prototype.Wa=function(){return this.L.projectId},t.prototype.Xa=function(){return this.L.uxaDomain},t}(),sv=function(){function t(t){this.KS=t,this.Qa=[]}return t.prototype.handleCommand=function(t){if(Dt(t)){this.tf(t);var n=this.KS.getTrackingContext();null!==n&&this.nf(t,n)}},t.prototype.executeRegisteredCallbacks=function(t){var n=this,i=t.trackingContext;i&&csArray.prototype.map.call(this.Qa,(function(t){return n.nf(t,i)}))},t.prototype.tf=function(t){csArray.prototype.push.call(this.Qa,t)},t.prototype.nf=function(t,n){setTimeout((function(){t(n)}))},t}(),uv=function(){function t(t,n){this.sf=t,this.KS=n}return t.prototype.onIframeIntegrationCallback=function(t){var n=this.KS.getTrackingContext();null!==n&&(t.trackingContext=n,this.sf.sendToChildren(rn.IntegrationCallback,t))},t}(),ov=function(){function t(t){this.commandsService=t,this.vf=new ju}return t.prototype.registerChildCommands=function(){var t=this;this.commandsService.register(zu,(function(n){return t.vf.handleCommand(n,t.gp)}))},t.prototype.onParentRecordingStatusChange=function(t){this.gp={isRecording:t.isRecording,recordingStartTimestamp:t.recordingStartTimestamp||0,etrState:t.etrState||Rn.ETR_OFF},this.vf.executeCallbacks(this.gp)},X([mu()],t.prototype,"onParentRecordingStatusChange",null),t}(),cv=["serializeWebView","webview:serializeWebView"],hv=["setAssetTransformerMode","webview:setAssetTransformerMode"],av=["webview:onAfterScreenView"],fv=function(t){function n(n,i,r,e,s,u,o){var c=t.call(this,n)||this;return c.commandsService=n,c.Bg=i,c.sf=r,c.NS=e,c.ZS=s,c.hf=u,c.L=o,c}return J(n,t),n.prototype.init=function(){this.KS=new ev(this.L),this.QS=new uv(this.sf,this.KS),this.hf.addListener(this.QS),this.tA=new sv(this.KS);var t=new jf(new qf),n=new ls(!1);this.nA=new nv(this.Bg,t,n),this.nw()},n.prototype.onAfterPageViewCallback=function(t){this.tA.executeRegisteredCallbacks(t)},n.prototype.nw=function(){var n=this;t.prototype.registerChildCommands.call(this),this.commandsService.register(qu,(function(t){n.tA.handleCommand(t)})),this.commandsService.register(av,(function(t){n.KS.update(t);var i=n.KS.getTrackingContext();null!==i&&n.ZS.emitAfterPageViewCallback({initiator:tn.AfterPageView,trackingContext:i})})),this.commandsService.register(cv,(function(t){return n.nA.handleCommand(t)})),this.commandsService.register(hv,(function(t){t!==Xf&&t!==$f&&t!==Kf||n.NS.setAssetProcessingMode(t)}))},n}(ov),vv=function(){function t(t){this.Bg=t,this.Qa={}}return t.prototype.handleCommand=function(t){Dt(t)&&this.tf(t)},t.prototype.executeRegisteredCallbacks=function(t){var n=t.trackingContext;if(n)if(t.callbackId){var i=this.Qa[t.callbackId];i&&this.nf(i,n)}else for(var r in this.Qa)this.nf(this.Qa[r],n)},t.prototype.tf=function(t){var n=et.integer(),i={callbackId:n,initiator:tn.AfterPageView};this.Qa[n]=t,this.Bg.sendToParent(rn.IntegrationCallback,i)},t.prototype.nf=function(t,n){setTimeout((function(){t(n)}))},t}(),lv=function(){function t(t){this.Bg=t,this.if={}}return t.prototype.handleCommand=function(t){_t(t)&&Dt(t.callback)&&this.ef(t.callback)},t.prototype.executePendingCallbacks=function(t){var n=t.trackingContext,i=t.callbackId;if(i&&n){var r=this.if[i];r&&(delete this.if[i],this.nf(r,n.sessionKey))}},t.prototype.ef=function(t){var n=et.integer(),i={callbackId:n,initiator:tn.GetSessionKey};this.if[n]=t,this.Bg.sendToParent(rn.IntegrationCallback,i)},t.prototype.nf=function(t,n){setTimeout((function(){t(n)}))},t}(),dv=function(){function t(t,n){this.Bg=t,this.sf=n,this.iA={}}return t.prototype.handleCommand=function(t,n){_t(t)&&Dt(n)&&this.ef(t,n)},t.prototype.executePendingCommand=function(t){var n=t.trackingContext,i=t.callbackId;if(i&&n)if(this.iA[i]){var r=this.iA[i],e=r[0],s=r[1];e&&(delete this.iA[i],this.nf(n,e,s))}else this.sf.sendToChildren(rn.TrackingContextResultMessage,t)},t.prototype.ef=function(t,n){var i=et.integer();this.iA[i]=[t,n],this.Bg.sendToParent(rn.TrackingContextRequestMessage,{callbackId:i})},t.prototype.nf=function(t,n,i){setTimeout((function(){var r=Pu(t,n);i(r)}))},t}(),wv=function(t){function n(n,i,r){var e=t.call(this,n)||this;return e.commandsService=n,e.Bg=i,e.sf=r,e}return J(n,t),n.prototype.init=function(){this.rA=new vv(this.Bg),this.eA=new lv(this.Bg),this.sA=new dv(this.Bg,this.sf),this.nw()},n.prototype.onAfterPageViewCallback=function(t){this.rA.executeRegisteredCallbacks(t)},n.prototype.onIntegrationSessionKeyCallback=function(t){this.eA.executePendingCallbacks(t)},n.prototype.onTrackingContextResultCallback=function(t){this.sA.executePendingCommand(t)},n.prototype.nw=function(){var n=this;t.prototype.registerChildCommands.call(this),this.commandsService.register(qu,(function(t){n.rA.handleCommand(t)})),this.commandsService.register(Hu,(function(t){return n.eA.handleCommand(t)})),this.commandsService.register(Bu,(function(t,i){n.sA.handleCommand(t,i)}))},n}(ov),yv=function(){function t(t,n,i,r,e,s,u,o){var c=this;this.Qg=t,this.hi=n,this.L=i,this.Bg=r,this.Jg=e,this.Ia=s,this.yt=u,this.Iu=o,this.Xy=function(){c.Ia.start(),c.Ky.start()}}return t.prototype.start=function(){var t,n,i,r,e,s,u,o,c,h,a=this;this.Iu.schedule((function(){t=new uf(z,a.L),n=new Pc(t),i=new St,c=new sf(i),h=new Ua(window.location,c),r=new kf(a.L,t,n,a.Bg,a.yt,a.Qg,a.Ia,new wh(hn)),a.Qg.addListener(r)})),this.Iu.schedule((function(){var t=new Oh;e=new oh(a.L,t)})),Ls.isRecordingSupported()&&this.Iu.schedule((function(){var t=new zf(a.L,i,e,a.hi,a.Bg,a.Jg,a.Ia,a.Qg,a.yt,a.Iu,h);a.hi.addListener(t),a.Qg.addListener(t),t.init()})),this.Iu.schedule((function(){o=new ah(a.L);var n=new of(t),i=new cf(t),r=new hf(t),e=new af;u=new za(n,i,r,e),s=new Rf(o,u,a.Bg,a.Jg)})),this.Iu.schedule((function(){u.addListener(s),a.Qg.addListener(s),a.hi.addListener(s),a.hi.addListener(r)})),this.Iu.schedule((function(){var t;if(a.yt.isInWebViewContext()){var n=new Qf;a.NS=new Zf(n),t=new fv(a.Ia,a.Bg,o,a.NS,a.Qg,u,a.L)}else t=new wv(a.Ia,a.Bg,o);a.Qg.addListener(t),t.init()})),this.Iu.schedule((function(){s.init(),r.init()})),this.Iu.schedule((function(){if(a.yt.isInWebViewContext()){var t=new Vf,n=new dh(i,h),r=new lh(c),e=new Gf(h,n,r,i),s=new Wf(i,new Ku(i,null,null),t,e,a.NS,a.hi,r,h),u=new Bf(a.Bg,s);u.init(),a.hi.addListener(u),a.Qg.addListener(u)}else{var o=new Ef(a.Bg);a.hi.addListener(o)}})),this.Ky=new Dc,this.Iu.schedule((function(){a.Ky.onLoad((function(){a.hi.emitStartTracking()})),a.Xy()}))},t}(),pv=function(t){function n(n,i){void 0===i&&(i=500);var r=t.call(this,2500)||this;return r.Qg=n,r.uA=i,r.oA=!1,r.cA=void 0,r.hA=!0,r}return J(n,t),n.prototype.onStart=function(){this.aA()},n.prototype.onStop=function(){this.buffer.reset(),this.fA&&window.clearInterval(this.fA)},n.prototype.sendToParent=function(t,n){var i;if(this.vA())null===(i=this.lA)||void 0===i||i.call(this,t,n);else if(this.dA(t)){var r=this.buildChildBaseMessage(t,n);this.buffer.addMessage(r)}},n.prototype.vA=function(){return this.oA&&this.hA},n.prototype.dA=function(t){return!this.oA||t===rn.Commands},n.prototype.onWebViewEvent=function(t){this.lA=t},n.prototype.setAnalyticsStatus=function(t){this.hA=t,this.hA&&this.wA()},n.prototype.sendAllMessagesFromBuffer=function(){for(var t,n=0,i=this.buffer.getMessages();n<i.length;n++){var r=i[n];null===(t=this.lA)||void 0===t||t.call(this,r.type,r.content)}this.buffer.reset()},n.prototype.wA=function(){var t;if(this.oA){for(var n=0,i=this.buffer.getMessages();n<i.length;n++){var r=i[n];r.type===rn.Commands&&(null===(t=this.lA)||void 0===t||t.call(this,r.type,r.content))}this.buffer.reset()}},n.prototype.buildChildBaseMessage=function(t,n){return{type:t,content:n}},n.prototype.aA=function(){var t=this;this.oA=Jf.isCSJavascriptBridgeDefined(),this.oA?this.yA():this.fA=window.setInterval((function(){t.oA=Jf.isCSJavascriptBridgeDefined(),t.oA&&(t.yA(),window.clearInterval(t.fA))}),this.uA)},n.prototype.yA=function(){this.cA=Jf.getBridgeVersion(),null===this.cA?this.sendAllMessagesFromBuffer():this.cA>=2?(this.pA(),Jf.notifyIsReadyForTracking()):hn.warn("bridge version ".concat(this.cA," is not supported"))},n.prototype.pA=function(){this.Qg.emitStopAnalytics()},n}(Af),mv=function(){function t(){this.mA=null}return t.prototype.getRecordingStatus=function(){return null===this.mA?{isRecording:!1}:this.mA},t.prototype.setRecordingStatus=function(t){this.mA=t},t}(),gv=function(t){function n(n,i){var r=t.call(this)||this;return r.Oe=n,r.Bg=i,r}return J(n,t),n.prototype.onStart=function(){var t=this;this.Oe.subscribe(n.ys,(function(n){return t.es(n)}))},n.prototype.onStop=function(){this.Oe.unsubscribe(n.ys)},n.prototype.es=function(t){this.isStarted&&this.Bg.sendToParent(rn.ApiError,t)},n.ys="ChildApiErrorsService",n}(Ar),Sv=function(t){function n(n,i){var r=t.call(this)||this;return r.Oe=n,r.Bg=i,r}return J(n,t),n.prototype.onStart=function(){var t=this;this.Oe.subscribe(n.ys,(function(n){return t.es(n)}),{detailedEvent:!0})},n.prototype.onStop=function(){this.Oe.unsubscribe(n.ys)},n.prototype.es=function(t){this.isStarted&&this.Bg.sendToParent(rn.DetailedApiError,t)},n.ys="ChildDetailedApiErrorsService",n}(Ar),Av=function(){function t(t,n,i){this.L=t,this.Bg=n,this.zg=i}return t.prototype.init=function(){var t,n,i=new St;n=(null===(t=this.L.apiErrors.collectionRules)||void 0===t?void 0:t.length)?new Hh(this.L.apiErrors,i):new zh(this.L.apiErrors,i),this.Oe=new vh(new _h,new Mh,n),this.gA=new gv(this.Oe,this.Bg),this.SA=new Sv(this.Oe,this.Bg),this.Oe.init(),this.nw()},t.prototype.nw=function(){this.zg.register(Sh)},t.prototype.onStartTracking=function(){this.gA.start()},t.prototype.onParentRecordingStatusChange=function(t){t.isRecording?this.SA.start():this.SA.stop()},t.prototype.onOptout=function(){this.gA.stop(),this.SA.stop()},t.prototype.onStartAnalytics=function(){this.gA.start()},t.prototype.onStopAnalytics=function(){this.gA.stop()},t}(),bv=function(t){function n(n,i){var r=t.call(this)||this;return r.Ne=n,r.Bg=i,r}return J(n,t),n.prototype.onStart=function(){var t=this;this.Ne.subscribe(n.ys,(function(n){return t.es(n)}))},n.prototype.onStop=function(){this.Ne.unsubscribe(n.ys)},n.prototype.es=function(t){this.isStarted&&this.Bg.sendToParent(rn.JavascriptError,t)},n.ys="ChildJavaScriptErrorsService",n}(Ar),Ev=function(){function t(t,n,i){this.L=t,this.Bg=n,this.zg=i}return t.prototype.init=function(){var t=new nh;this.AA=new bv(t,this.Bg),this.nw()},t.prototype.onStartTracking=function(){this.AA.start()},t.prototype.onOptout=function(){this.AA.stop()},t.prototype.onStartAnalytics=function(){this.AA.start()},t.prototype.onStopAnalytics=function(){this.AA.stop()},t.prototype.nw=function(){this.L.jsCustomErrorsEnabled&&!this.L.customErrors.enabled&&this.zg.register(Eh)},t}(),Rv=function(){function t(t,n,i){this.L=t,this.yt=n,this.Iu=i}return t.prototype.init=function(){var t,n,i,r,e,s,u,o=this;tu.isSupported()&&tu.setDigestSalt(this.L.projectId.toString()),this.Iu.schedule((function(){t=new Kh(o.Iu),n=new yf,i=new mv;var s=[Ea.UXA];o.yt.isInWebViewContext()?(window.cs_wvt=window.cs_wvt||[],csArray.prototype.push.call(s,Ea.WVT),r=new pv(n)):r=new bf(o.L,t,i,n),e=new Na(s)})),this.Iu.schedule((function(){s=new gf(e,r),u=new mf(s)})),this.Iu.schedule((function(){u.init()})),this.Iu.schedule((function(){if(o.L.apiErrors.enabled){var i=new Av(o.L,r,s);i.init(),t.addListener(i),n.addListener(i)}if(o.L.jsErrorsEnabled){var e=new Ev(o.L,r,s);e.init(),t.addListener(e),n.addListener(e)}})),this.Iu.schedule((function(){t.addListener(u)})),this.Iu.schedule((function(){new yv(n,t,o.L,r,i,e,o.yt,o.Iu).start()}))},t}(),Nv=function(){function t(t,n,i){this.L=t,this.yt=n,this.j=i}return t.prototype.start=function(){var t,n,i,r,e;if(!window.UXAnalytics){window.UXAnalytics={},window.CSCurrentScript=document.currentScript;var s=new vs(!!(null===(t=this.L.taskSchedulerOptions)||void 0===t?void 0:t.enabled),null===(n=this.L.taskSchedulerOptions)||void 0===n?void 0:n.maxProcessingTime,null===(i=this.L.taskSchedulerOptions)||void 0===i?void 0:i.waitDuration),u=new mn(this.yt,this.L);u.init();var o=new Sn(this.L,u);if(this.yt.isTopWindowTracker()&&o.canTrack()){if((null===(r=window.CSProtectnativeFunctionsLogs)||void 0===r?void 0:r.Warning)&&hn.warn("protectNativeFunctions failed: ".concat(window.CSProtectnativeFunctionsLogs.Warning)),null===(e=window.CSProtectnativeFunctionsLogs)||void 0===e?void 0:e.Critical)return void hn.error("protectNativeFunctions failed: ".concat(window.CSProtectnativeFunctionsLogs.Critical));new df(this.L,u,this.j,s).init()}else if(!this.yt.isTopWindowTracker()&&o.canTrackInChild()){new Rv(this.L,this.yt,s).init()}window.UXAnalytics={Sensitive:{isNodeSensitive:function(t){return Ii.isSensitive(t)||Ii.isSensitiveChild(t)},isAttributeSensitive:function(t,n){return Ii.isSensitiveAttribute(t,n)},getSensitiveAttributes:function(t){return tr(t.attributes,(function(n){return Ii.isSensitiveAttribute(t,n.name)}))}}},!window.CSFrameCommunication&&wf.isActivable()&&(window.CSFrameCommunication=wf,wf.waitForConnection())}},X([pi("main.start"),wn("main.start")],t.prototype,"start",null),t}(),Tv=function(){function t(){}return t.prototype.send=function(t,n,i){void 0===i&&(i=ut.warn);var r={message:t,errorCode:n,level:i};Jf.sendLog(r)},t}();try{var Ov=new ht(window.CS_CONF);window._uxa=window._uxa||[],Ov.processOptionOverrides(window._uxa);var kv=new at(window,Ov);kv.init();var Iv=new on;if(an=hn,hn.computeIsActive(Ov.validationRate),kv.isTopWindowTracker()){var Cv=new Ft(Ov,Iv);hn.setStrategy(Cv)}else if(kv.isInIframeContext()){var xv=new un(Ov);hn.setStrategy(xv)}else if(kv.isInWebViewContext()){var _v=new Tv;hn.setStrategy(_v)}void 0===iv&&(iv=50),void 0===rv&&(rv=.1),di=hn.isPerfLoggingActive()&&function(){var t;if(!(null===(t=window.performance)||void 0===t?void 0:t.mark))return!1;var n="isPerformanceMeasureSupported",i="".concat(n,"_a");return performance.mark(i),void 0!==performance.measure(n,i)}(),di&&(vi=iv,li=rv),new Nv(Ov,kv,Iv).start()}catch(bi){}}();